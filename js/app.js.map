{"version":3,"sources":["app/app.coffee","app/collections/comments.coffee","app/data/locales/ar.yaml","app/data/locales/bn.yaml","app/data/locales/da.yaml","app/data/locales/de.yaml","app/data/locales/en.yaml","app/data/locales/es-ES.yaml","app/data/locales/es.yaml","app/data/locales/fi.yaml","app/data/locales/fr.yaml","app/data/locales/hi.yaml","app/data/locales/id.yaml","app/data/locales/it.yaml","app/data/locales/ja.yaml","app/data/locales/ko.yaml","app/data/locales/nl.yaml","app/data/locales/no.yaml","app/data/locales/pl.yaml","app/data/locales/pt.yaml","app/data/locales/ro.yaml","app/data/locales/ru.yaml","app/data/locales/sv.yaml","app/data/locales/ta.yaml","app/data/locales/th.yaml","app/data/locales/tr.yaml","app/data/locales/uk.yaml","app/data/locales/vi.yaml","app/data/locales/zh-tw.yaml","app/data/locales/zh.yaml","app/engine/aicc/model.yaml","app/engine/aicc/template.jade","app/engine/aicc/view.coffee","app/engine/carousel/model.yaml","app/engine/carousel/template.jade","app/engine/carousel/view.coffee","app/engine/categorise/model.yaml","app/engine/categorise/template.jade","app/engine/categorise/view.coffee","app/engine/chat/model.yaml","app/engine/chat/template.jade","app/engine/chat/view.coffee","app/engine/circle-the-answer/model.yaml","app/engine/circle-the-answer/template.jade","app/engine/circle-the-answer/view.coffee","app/engine/comparison/model.yaml","app/engine/comparison/template.jade","app/engine/comparison/view.coffee","app/engine/connect/model.yaml","app/engine/connect/template.jade","app/engine/connect/view.coffee","app/engine/construct-sentence/model.yaml","app/engine/construct-sentence/template.jade","app/engine/construct-sentence/view.coffee","app/engine/construct/components/letters.jade","app/engine/construct/model.yaml","app/engine/construct/template.jade","app/engine/construct/view.coffee","app/engine/dial-distribution/model.yaml","app/engine/dial-distribution/template.jade","app/engine/dial-distribution/view.coffee","app/engine/dial/model.yaml","app/engine/dial/template.jade","app/engine/dial/view.coffee","app/engine/drag-to-match/model.yaml","app/engine/drag-to-match/template.jade","app/engine/drag-to-match/view.coffee","app/engine/exit/model.yaml","app/engine/exit/template.jade","app/engine/exit/view.coffee","app/engine/expandable-list/model.yaml","app/engine/expandable-list/template.jade","app/engine/expandable-list/view.coffee","app/engine/find-a-word/model.yaml","app/engine/find-a-word/template.jade","app/engine/find-a-word/view.coffee","app/engine/free-text-contribution/model.yaml","app/engine/free-text-contribution/template.jade","app/engine/free-text-contribution/view.coffee","app/engine/free-text-survey/model.yaml","app/engine/free-text-survey/template.jade","app/engine/free-text-survey/view.coffee","app/engine/game-elevator/components/container.jade","app/engine/game-elevator/components/description.jade","app/engine/game-elevator/model.yaml","app/engine/game-elevator/template.jade","app/engine/game-elevator/view.coffee","app/engine/game-image-word-match/components/container.jade","app/engine/game-image-word-match/model.yaml","app/engine/game-image-word-match/template.jade","app/engine/game-image-word-match/view.coffee","app/engine/game-jeopardy/components/menu.jade","app/engine/game-jeopardy/components/question.jade","app/engine/game-jeopardy/model.yaml","app/engine/game-jeopardy/template.jade","app/engine/game-jeopardy/view.coffee","app/engine/game-jumble/components/container.jade","app/engine/game-jumble/model.yaml","app/engine/game-jumble/template.jade","app/engine/game-jumble/view.coffee","app/engine/game-memory/components/tiles.jade","app/engine/game-memory/model.yaml","app/engine/game-memory/template.jade","app/engine/game-memory/view.coffee","app/engine/game-next-in-order/components/options.jade","app/engine/game-next-in-order/components/sequence.jade","app/engine/game-next-in-order/model.yaml","app/engine/game-next-in-order/template.jade","app/engine/game-next-in-order/view.coffee","app/engine/game-true-or-false/components/statement.jade","app/engine/game-true-or-false/model.yaml","app/engine/game-true-or-false/template.jade","app/engine/game-true-or-false/view.coffee","app/engine/image-collection/model.yaml","app/engine/image-collection/template.jade","app/engine/image-collection/view.coffee","app/engine/image-gallery/model.yaml","app/engine/image-gallery/template.jade","app/engine/image-gallery/view.coffee","app/engine/image-map/model.yaml","app/engine/image-map/template.jade","app/engine/image-map/view.coffee","app/engine/image-multiple-choice/model.yaml","app/engine/image-multiple-choice/template.jade","app/engine/image-multiple-choice/view.coffee","app/engine/image-pair/model.yaml","app/engine/image-pair/template.jade","app/engine/image-pair/view.coffee","app/engine/image-slider/model.yaml","app/engine/image-slider/template.jade","app/engine/image-slider/view.coffee","app/engine/image-waypoints/model.yaml","app/engine/image-waypoints/template.jade","app/engine/image-waypoints/view.coffee","app/engine/image/model.yaml","app/engine/image/template.jade","app/engine/image/view.coffee","app/engine/list/model.yaml","app/engine/list/template.jade","app/engine/list/view.coffee","app/engine/matrix/model.yaml","app/engine/matrix/template.jade","app/engine/matrix/view.coffee","app/engine/media-collection/model.yaml","app/engine/media-collection/template.jade","app/engine/media-collection/view.coffee","app/engine/missing-word/model.yaml","app/engine/missing-word/template.jade","app/engine/missing-word/view.coffee","app/engine/multiple-choice-game/model.yaml","app/engine/multiple-choice-game/template.jade","app/engine/multiple-choice-game/view.coffee","app/engine/multiple-choice-survey/model.yaml","app/engine/multiple-choice-survey/template.jade","app/engine/multiple-choice-survey/view.coffee","app/engine/number-picker/model.yaml","app/engine/number-picker/template.jade","app/engine/number-picker/view.coffee","app/engine/number-sentence/components/digits.jade","app/engine/number-sentence/components/wrapper.jade","app/engine/number-sentence/model.yaml","app/engine/number-sentence/template.jade","app/engine/number-sentence/view.coffee","app/engine/parallax/model.yaml","app/engine/parallax/template.jade","app/engine/parallax/view.coffee","app/engine/peer-authoring/actions.coffee","app/engine/peer-authoring/constants.coffee","app/engine/peer-authoring/data.coffee","app/engine/peer-authoring/media-item.jade","app/engine/peer-authoring/model.yaml","app/engine/peer-authoring/template.jade","app/engine/peer-authoring/view.coffee","app/engine/pie-chart/model.yaml","app/engine/pie-chart/template.jade","app/engine/pie-chart/view.coffee","app/engine/quadrant-survey/model.yaml","app/engine/quadrant-survey/template.jade","app/engine/quadrant-survey/view.coffee","app/engine/question-pool/model.yaml","app/engine/question-pool/template.jade","app/engine/question-pool/view.coffee","app/engine/ratio/model.yaml","app/engine/ratio/template.jade","app/engine/ratio/view.coffee","app/engine/reorder/model.yaml","app/engine/reorder/template.jade","app/engine/reorder/view.coffee","app/engine/reveal/model.yaml","app/engine/reveal/template.jade","app/engine/reveal/view.coffee","app/engine/scorm/model.yaml","app/engine/scorm/template.jade","app/engine/scorm/view.coffee","app/engine/scratch-to-reveal/model.yaml","app/engine/scratch-to-reveal/template.jade","app/engine/scratch-to-reveal/view.coffee","app/engine/scrollable/model.yaml","app/engine/scrollable/template.jade","app/engine/scrollable/view.coffee","app/engine/scrolling-media/model.yaml","app/engine/scrolling-media/template.jade","app/engine/scrolling-media/view.coffee","app/engine/slider-survey/model.yaml","app/engine/slider-survey/template.jade","app/engine/slider-survey/view.coffee","app/engine/slider/model.yaml","app/engine/slider/template.jade","app/engine/slider/view.coffee","app/engine/speech-bubble/model.yaml","app/engine/speech-bubble/template.jade","app/engine/speech-bubble/view.coffee","app/engine/strikeout/model.yaml","app/engine/strikeout/template.jade","app/engine/strikeout/view.coffee","app/engine/table/model.yaml","app/engine/table/template.jade","app/engine/table/view.coffee","app/engine/tap-in-order/model.yaml","app/engine/tap-in-order/template.jade","app/engine/tap-in-order/view.coffee","app/engine/text-and-images/model.yaml","app/engine/text-and-images/template.jade","app/engine/text-and-images/view.coffee","app/engine/text-sequence/model.yaml","app/engine/text-sequence/template.jade","app/engine/text-sequence/view.coffee","app/engine/title/model.yaml","app/engine/title/template.jade","app/engine/title/view.coffee","app/engine/url/model.yaml","app/engine/url/template.jade","app/engine/url/view.coffee","app/engine/video-collection/model.yaml","app/engine/video-collection/template.jade","app/engine/video-collection/view.coffee","app/engine/video-contribution/model.yaml","app/engine/video-contribution/template.jade","app/engine/video-contribution/view.coffee","app/engine/video/model.yaml","app/engine/video/template.jade","app/engine/video/view.coffee","app/engine/vimeo-video-embed/model.yaml","app/engine/vimeo-video-embed/template.jade","app/engine/vimeo-video-embed/view.coffee","app/engine/youtube-video-embed/model.yaml","app/engine/youtube-video-embed/template.jade","app/engine/youtube-video-embed/view.coffee","app/lib/animate.coffee","app/lib/convert.coffee","app/lib/cookies.coffee","app/lib/data-processer.coffee","app/lib/device.coffee","app/lib/draw/catmull-rom-spline.coffee","app/lib/draw/simplify.coffee","app/lib/draw/smooth-line.coffee","app/lib/easie.coffee","app/lib/element.coffee","app/lib/fit-text.coffee","app/lib/i18n.coffee","app/lib/logger.coffee","app/lib/middleware.coffee","app/lib/middleware/backbone_event.coffee","app/lib/middleware/browser/analytics.coffee","app/lib/middleware/browser/app_lesson.coffee","app/lib/middleware/browser/sound-audio-api.coffee","app/lib/middleware/browser/sound-html.coffee","app/lib/middleware/browser/sound.coffee","app/lib/middleware/scorm/scorm_analytics.coffee","app/lib/middleware/scorm/scorm_lesson.coffee","app/lib/middleware/session.coffee","app/lib/middleware/webview.coffee","app/lib/prefix.coffee","app/lib/preload.coffee","app/lib/router.coffee","app/lib/scorm.coffee","app/lib/vimeo-api.coffee","app/lib/youtube-api.coffee","app/models/game/score.coffee","app/models/game/timer.coffee","app/models/lesson-engine.coffee","app/models/lesson.coffee","app/models/scormAttempt.coffee","app/templates/components/background.jade","app/templates/components/engine/disconnection-warning.jade","app/templates/components/engine/lesson-header.jade","app/templates/components/engine/lesson-menu.jade","app/templates/components/engine/media-collection-content.jade","app/templates/components/engine/multi-content.jade","app/templates/components/engine/photoswipe.jade","app/templates/components/engine/play-audio-popup.jade","app/templates/components/engine/quote-bottom-angle.jade","app/templates/components/engine/slide-answer.jade","app/templates/components/engine/slide-footer.jade","app/templates/components/engine/slide-timer.jade","app/templates/components/engine/slides.jade","app/templates/components/engine/social-learning-comments.jade","app/templates/components/engine/social-learning.jade","app/templates/components/engine/stars-available.jade","app/templates/components/engine/stars-earned.jade","app/templates/components/engine/text-input.jade","app/templates/components/engine/video-slide-footer.jade","app/templates/components/game/intro.jade","app/templates/components/game/outro.jade","app/templates/components/game/state.jade","app/templates/components/indicator.jade","app/templates/components/menu.jade","app/templates/components/pagination.jade","app/templates/main.jade","app/templates/mixins/image.jade","app/templates/mixins/video-stream.jade","app/templates/slides.jade","app/utils/network_utils.coffee","app/views/base/game.coffee","app/views/base/slide.coffee","app/views/base/slides.coffee","app/views/components/draggy.coffee","app/views/components/lesson-menu.coffee","app/views/components/menu.coffee","app/views/components/picker.coffee","app/views/components/slide-answer.coffee","app/views/components/social-learning.coffee","app/views/components/text-input.coffee","app/views/components/zoom.coffee","app/views/game.coffee","app/views/input.coffee","app/views/main.coffee","app/views/slide.coffee","app/views/slides.coffee","app/views/video.coffee"],"names":[],"mappings":"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B,CAAqB,QAArB,EAA+B,UAA/B;IACA,IAAC,UAAD,CAAW,MAAX,EAAmB;MAAA,OAAO,IAAI,KAAK,KAAhB;KAAnB;IAEA,IAAC,MAAD,CAAO,MAAP,EAAe,UAAf;WACA,IAAC,SAAD,CAAU,SAAV;EAbY;;qBAed,gBAAe;AACb;IAAA,wDAA6B,CAAE,mBAAnB,IAAgC;IAC5C,MAAiB,SAAS,CAAC,MAAV,GAAmB,CAApC;AAAA,aAAO,GAAP;;IAEA,WAAW,SAAU;IACrB,mDAA6B,CAAE,OAAO,CAAC;IAEvC,UACE;MAAA,QAAQ,CAAC,CAAC,IAAF,CAAO,QAAQ,CAAC,OAAhB,EAAyB;QAAE,MAAF;OAAzB,CAAR;MACA,UAAU,QAAQ,CAAC,QADnB;;WAEF,CAAE,OAAF;EAVa;;qBAYf,YAAW;AACT;yHAAoD;EAD3C;;qBAGX,aAAY;IACV,IAAC,SAAD,CAAU,IAAV,EAAgB,UAAhB;WAEA,0CAAM,SAAN;EAHU;;;;GA3FS;;AAgGvB,MAAM,CAAC,OAAP,GAAiB;;;CClGjB;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA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AiB,SAAS,CAAC,MAAV,GAAmB,CAApC;AAAA,aAAO,GAAP;;IAEA,WAAW,SAAU;IACrB,KAAW,IAAC,EAAD,CAAG,IAAC,UAAJ,CAAc,CAAC,IAAf,CAAoB,WAApB;IACX,UACE;MAAA,QAAQ,CAAC,CAAC,IAAF,CAAO,QAAQ,CAAC,OAAhB,EAAyB;QAAE,MAAF;OAAzB,CAAR;MACA,UAAU,QAAQ,CAAC,QADnB;;WAGF,CAAE,OAAF;EAVa;;;;GA1KiB;;AAsLlC,MAAM,CAAC,OAAP,GAAiB;;;CC7LjB;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtHA;AAAA;;ACAA;EAAA;;;AAAA,YAAY,QAAQ,aAAR;;AACV,aAAkB,QAAQ,yBAAR;;AACpB,YAAY,QAAQ,aAAR;;AACZ,SAAY,QAAQ,YAAR;;AAEN;;;;;;;2BACJ,WAAU,QAAQ,YAAR;;2BAEV,SACE;IAAA,oBAAoB,QAApB;IACA,cAAc,cADd;;;2BAGF,OAAM;IACJ,IAAC,aAAD;IACA,IAAC,aAAD;WAEA,IAAC,QAAD,CAAS,QAAT;EAJI;;2BAMN,mBAAkB;AAChB;m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HF;KAAA;MAKE;AACE,gBAAO,IAAC,iBAAD,EAAP;AAAA,eACO,QADP;mBACqB;AADrB,eAEO,OAFP;mBAEoB;AAFpB;mBAGO;AAHP;;aAKF,IAAC,OAAD,CAAQ;QAAE,GAAG,IAAI,CAAC,CAAL,GAAS,KAAd;QAAqB,QAAQ;UAAE,OAAO,IAAI,CAAC,CAAd;SAA7B;OAAR,EAA0D,KAA1D,EAAiE,CAAjE,EAAoE,IAApE,EAXF;;EA/BW;;;;GA9Hc;;AA2K7B,MAAM,CAAC,OAAP,GAAiB;;;CChLjB;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3HA;AAAA;;ACAA;EAAA;;;;AAAA,WAAc,QAAQ,iBAAR;;AACZ,aAAe,QAAQ,yBAAR;;AACjB,aAAa,QAAQ,sBAAR;;AACb,YAAa,QAAQ,aAAR;;AACX,MAAW,QAAQ,YAAR;;AAEP;;;;;;;wBACJ,WAAU,QAAQ,YAAR;;wBACV,kBAAiB;;wBACjB,kBAAiB;;wBAEjB,SAAQ;WACN;MAAA,oBAAoB,SAApB;;EADM;;wBAGR,YAAW;AACT;IAAA,O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A;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArJA;AAAA;;ACAA;EAAA;;;AAAA,WAAc,QAAQ,iBAAR;;AACd,UAAY,QAAQ,aAAR;;AACZ,cAAc,4BAA4B,CAAC,KAA7B,CAAmC,EAAnC;;AACd,cAAc,YAAY,CAAC,KAAb,CAAmB,EAAnB;;AAER;;;;;;;0BACJ,WAAU,QAAQ,YAAR;;0BAEV,YACE;IAAA,SAAS,QAAQ,sBAAR,CAAT;;;0BAEF,SAAQ;WACN;MAAA,kBAAkB,aAAlB;MACA,uBAAuB,cADvB;MAEA,wBAAwB,iBAFxB;MAGA,oBAAoB,SAHpB;MAIA,UAAU,gBAJV;;EADM;;0BAOR,OAAM;IACJ;IACA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,eAAT,CAAP,EAAkC,SAAlC;IACA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,YAAT,CAAP,EAAkC,WAAlC;IACA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,cAAT,CAAP,EAAkC,OAAlC;IAEA,IAAC,UAAD;IAEA,IAAC,SAAD,CAAU,IAAV,EAAgB,QAAhB,EAA0B,IAAC,SAA3B;WACA,IAAC,SAAD,CAAU,IAAV,EAAgB,UAAhB,EAA4B,IAAC,WAA7B;EATI;;0BAWN,WAAU;AACR;AAAA;AAAA;;MACE,EAAE,CAAC,UAAU,CAAC,WAAd,CAA0B,EAA1B;AADF;IAGA,SAAS;MACP,KAAK,QAAQ,CAAC,aAAT,CAAuB,MAAvB;MACL,EAAE,CAAC,SAAS,CAAC,GAAb,CAAiB,QAAjB;MACA,EAAE,CAAC,SAAH,GAAe;aACf;IAJO;IAMT,QAAQ,IAAC,MAAD,CAAO,WAAP,CAAmB,CAAC;AAC5B;AAAA;;MAAA,IAAI,CAAC,SAAS,CAAC,MAAf,CAAsB,OAAtB;AAAA;AAEA;AAAA;SAAA;;YAAiC,IAAI,CAAC,WAAL,GAAmB;;;MAClD,IAAI,CAAC,SAAS,CAAC,GAAf,CAAmB,OAAnB;MACA,YAAY,IAAI,CAAC,QAAS,GAAE,CAAC;;;AAC7B;AAAA;aAAA;;UACE,IAAG,IAAI,CAAC,SAAL,GAAiB,SAApB;YACE,IAAI,CAAC,qBAAL,CAA2B,aAA3B,EAA0C,QAA1C,EADF;;wBAEA,YAAY,IAAI,CAAC;AAHnB;;;AAHF;;EAbQ;;0BAqBV,YAAW;AACT;IAAA,OAAO;IAEL,kBAAF,EAAS;IAET,QAAQ,OAAO,CAAC,MAAR,CAAe,SAAS,EAAxB;IAER,gBAAgB,CAAC,CAAC,MAAF,CAAS,KAAT,EAAgB,SAAC,IAAD;aAAU,SAAQ;IAAlB,CAAhB;IAEhB;;AACE;WAAA;;QACE,cAAc,IAAI,CAAC,OAAL,CAAa,KAAb,EAAoB,CAAC,SAAC,CAAD;iBAAO,OAAK;QAAZ,CAAD,CAApB;QACd,OAAO,OAAO,CAAC,MAAR,CAAe,IAAf;QACP,KAAO,IAAI,MAAJ,CAAW,eAAa,WAAb,GAAyB,YAApC,EAAiD,GAAjD;QACP,IAAG,uBAAH;UACE,QAAQ,KAAK,CAAC,OAAN,CAAc,EAAd,EAAkB,QAAM,CAAN,GAAQ,KAA1B;uBACR,MAFF;SAAA;+BAAA;;AAJF;;;IASF,SAAS,KAAK,CAAC;IACf,IAAI,CAAC,UAAL,GAAqB,SAAS,GAAZ,GAAqB,SAArB,GAAoC;IAEtD,IAAI,CAAC,UAAL;;AACE;AAAA;WAAA;;QACE,QAAQ,0DAAmC;qBAC3C;UAAA,OAAO,WAAQ,CAAC,CAAC,CAAC,MAAF,CAAS,CAAT,CAAD,CAAR,GAAqB,SAArB,GAA6B,CAAC,CAAC,CAAC,MAAF,CAAS,CAAC,MAAD,EAAS,IAAT,CAAT,CAAD,CAApC;UACA,MAAM,SAAS,CAAC,OAAV,CAAkB,eAAlB,EAAmC,KAAM,OAAN,IAAgB,EAAnD,CADN;UAEA,QAAQ,oBAFR;;AAFF;;;WAMF;EA7BS;;0BA+BX,kBAAiB,SAAC,CAAD;WACf,CAAC,CAAC,wBAAF;EADe;;0BAGjB,iBAAgB,SAAC,CAAD;AACd;IAAA,IAAG,WAAW,IAAC,MAAD,CAAO,QAAP,CAAd;AACE;AAAA;;;UACE,EAAE,CAAE,SAAS,CAAC,MAAd,CAAqB,QAArB;;AADF;MAGA,IAAC,SAAQ,CAAC,MAAV,GAAmB;MAEnB,IAAC,MAAD,CAAO,SAAP,CAAiB,CAAC,SAAS,CAAC,MAA5B,CAAmC,QAAnC;MAEA,MAAM,CAAC,YAAP,CAAoB,IAAC,QAArB;aACA,IAAC,QAAD,GAAW,MAAM,CAAC,UAAP,CAAkB;eAAA;iBAC3B,KAAC,UAAD,CAAW,KAAC,MAAD,CAAO,WAAP,CAAX,EAAgC;YAAA,GAAG,CAAH;WAAhC;QAD2B;MAAA,QAAlB,EAET,GAFS,EATb;;EADc;;0BAchB,eAAc,SAAC,CAAD,EAAI,EAAJ;AACZ;;MAAA,CAAC,CAAE,wBAAH;;;MACA,KAAM,CAAC,CAAC;;IAER,IAAU,OAAM,IAAC,MAAD,CAAO,QAAP,CAAhB;AAAA;;IAEA,IAAC,eAAD;IAEA,IAAC,MAAD,CAAO,EAAP,EAAW,QAAX;IACA,EAAE,CAAC,SAAS,CAAC,GAAb,CAAiB,QAAjB;IAEA,IAAC,mBAAD,CAAoB,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,MAArC;IAEA,OAAO,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,KAAhB,CAAsB,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,MAAvC;IAEP,IAAG,IAAI,CAAC,KAAL,CAAW,OAAX,CAAH;MACE,QAAQ,YADV;KAAA,MAEK,IAAG,IAAI,CAAC,KAAL,CAAW,IAAX,CAAH;MACH,QAAQ,YADL;KAAA;MAGH,QAAQ,KAHL;;IAKL,UAAU,IAAI,CAAC,KAAL,CAAW,EAAX;IACV,QAAQ,CAAC,CAAC,MAAF,CAAS,KAAT,EAAgB,CAAC,CAAC,MAAF,CAAS,CAAT,EAAY,CAAZ,CAAhB;IACR,QAAQ,CAAC,CAAC,OAAF,CAAU,OAAO,CAAC,MAAR,CAAe,KAAf,CAAV;IAER,MAAM,CAAC,YAAP,CAAoB,IAAC,QAArB;WACA,IAAC,QAAD,GAAW,MAAM,CAAC,UAAP,CAAkB;aAAA;AAC3B;QAAA,KAAC,MAAD,CAAO,SAAP,CAAiB,CAAC,SAAlB,GAA8B,KAAC,UAAS,CAAC,OAAX,CAAmB;UAAA,MAAM,KAAN;SAAnB;QAC9B,SAAS,KAAC,MAAD,CAAO,SAAP,CAAiB,CAAC,UAAU,CAAC,YAA7B,GAA4C;QACrD,KAAC,UAAD,CAAW,KAAC,MAAD,CAAO,WAAP,CAAX,EAAgC;UAAA,GAAG,CAAC,MAAJ;SAAhC;eACA,KAAC,MAAD,CAAO,SAAP,CAAiB,CAAC,SAAS,CAAC,GAA5B,CAAgC,QAAhC;MAJ2B;IAAA,QAAlB,EAKT,GALS;EA3BC;;0BAkCd,aAAY,SAAC,CAAD;AACV;AAAA;AAAA;SAAA;;MACE,IAAG,CAAI,EAAE,CAAC,SAAS,CAAC,QAAb,CAAsB,UAAtB,CAAJ,IACA,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC,WAAlB,OAAmC,CAAC,CAAC,GAAG,CAAC,WAAN,EADtC;QAEE,IAAC,aAAD,CAAc,CAAC,CAAC,GAAhB,EAAqB,EAArB;AACA,cAHF;OAAA;6BAAA;;AADF;;EADU;;0BAOZ,cAAa,SAAC,CAAD;AACX;IAAA,CAAC,CAAC,wBAAF;IACA,KAAK,CAAC,CAAC;WACP,IAAC,aAAD,CAAc,EAAE,CAAC,OAAO,CAAC,MAAzB,EAAiC,EAAjC;EAHW;;0BAKb,eAAc,SAAC,MAAD,EAAS,EAAT;AACZ;IAAA,QAAY,IAAC,MAAD,CAAO,QAAP,CAAgB,CAAC,OAAO,CAAC,KAAK,CAAC;IAC3C,SAAY,IAAC,MAAD,CAAO,QAAP,CAAgB,CAAC,gBAAjB,CAAkC,QAAlC;IACZ,OAAY,MAAM,CAAC,IAAP,CAAY,KAAZ;IACZ,YAAY,EAAE,CAAC,OAAO,CAAC,MAAX,KAAqB,IAAI,CAAC,OAAO,CAAC;IAE9C,IAAG,SAAH;MACE,IAAC,MAAD,CAAO,QAAP,CAAgB,CAAC,OAAO,CAAC,KAAzB,IAAkC,IAAI,CAAC,OAAO,CAAC,OADjD;;IAGA,IAAG,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC,WAAlB,OAAmC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,WAApB,EAAtC;MACE,IAAI,CAAC,SAAS,CAAC,GAAf,CAAmB,SAAnB;MACA,EAAE,CAAC,SAAS,CAAC,GAAb,CAAiB,UAAjB;MACA,IAAC,mBAAD,CAAoB,QAAQ,CAA5B,EAHF;KAAA;MAKE,EAAE,CAAC,SAAS,CAAC,GAAb,CAAiB,WAAjB;MACA,MAAM,CAAC,UAAP,CAAkB,CAAC;eAAG,EAAE,CAAC,SAAS,CAAC,MAAb,CAAoB,WAApB;MAAH,CAAD,CAAlB,EAAwD,GAAxD,EANF;;IAQA,IAAG,IAAC,MAAD,CAAO,QAAP,CAAgB,CAAC,OAAO,CAAC,KAAK,CAAC,MAA/B,KAAyC,MAAM,CAAC,MAAnD;MACE,IAAC,MAAD,CAAO,QAAP,CAAgB,CAAC,SAAS,CAAC,GAA3B,CAA+B,UAA/B;MACA,QAAQ,CAAC,CAAC,OAAF,CAAU,IAAC,MAAD,CAAO,OAAP,CAAV,EAA2B,IAAC,MAAD,CAAO,QAAP,CAA3B,IAA+C;MACvD,IAAC,iBAAD,CAAkB,KAAlB,EAHF;;WAKA,IAAC,SAAD,CAAU,SAAV;EAtBY;;0BAwBd,mBAAkB,SAAC,KAAD;AAChB;IAAA,QAAQ,IAAC,MAAD,CAAO,OAAP;IACR,KAAQ,KAAK,CAAC,IAAN,CAAW,KAAX;IAER,aAAa,SAAC,EAAD;aACX,EAAE,CAAC,gBAAH,CAAoB,UAApB,CAA+B,CAAC,MAAhC,GAAyC,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC;IAD9C;IAGb,IAAG,MAAO,WAAW,EAAX,CAAV;aACE,IAAC,aAAD,CAAc,IAAd,EAAoB,EAApB,EADF;KAAA;MAGE,IAAC,eAAD;MACA,KAAK,CAAC,CAAC,MAAF,CAAS,KAAT,EAAgB,UAAhB,CAA4B;MACjC,IAA2B,UAA3B;eAAA,IAAC,aAAD,CAAc,IAAd,EAAoB,EAApB;OALF;;EAPgB;;0BAclB,qBAAoB,SAAC,KAAD;AAClB;;MADmB,QAAQ;;IAC3B,SAAS,IAAC,MAAD,CAAO,QAAP,CAAgB,CAAC,gBAAjB,CAAkC,QAAlC;IACT,OAAS,MAAM,CAAC,IAAP,CAAY,KAAZ;AAET;SAAA;;mBAAA,EAAE,CAAC,SAAS,CAAC,MAAb,CAAoB,QAApB,EAA8B,UAAS,CAAvC;AAAA;;EAJkB;;0BAMpB,YAAW;AACT;IAAA,QAAU,IAAC,QAAD,CAAS,QAAT,CAAkB,CAAC;IAC7B,UAAU,IAAC,QAAD,CAAS,gBAAT,CAA0B,CAAC;WACrC,UAAS;EAHA;;0BAKX,gBAAe;AAEb;IAAA,YAAY,IAAC,QAAO,CAAC,QAAQ,CAAC,SAAlB,IAA+B;IAC3C,MAAiB,SAAS,CAAC,MAAV,GAAmB,CAApC;AAAA,aAAO,GAAP;;IACA,UAAU;IAEV,QAAQ,IAAC,EAAD,CAAG,cAAH;IACR,YAAY,IAAC,UAAD;AAEZ;;MACE,SAAS,CAAC,CAAC,IAAF,CAAO,CAAC,CAAC,OAAT,EAAkB,SAAC,CAAD;eAAO,CAAC,CAAC,OAAF,KAAa;MAApB,CAAlB;MACT,MAAM,CAAC,OAAP,GAAiB,IAAC,EAAD,CAAG,KAAM,UAAS,CAAC,OAAV,CAAkB,CAAlB,EAAT,CAA+B,CAAC,IAAhC,CAAqC,OAArC;MACjB,kBAAkB;QAAA,UAAU,CAAC,CAAC,QAAZ;QAAsB,QAAQ,MAA9B;;MAClB,OAAO,CAAC,IAAR,CAAa,eAAb;AAJF;WAMA;EAfa;;0BAiBf,UAAS;IACP;WAEA,IAAC,OAAD;EAHO;;;;GA7MiB;;AAmN5B,MAAM,CAAC,OAAP,GAAiB;;;CCxNjB;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlFA;AAAA;;ACAA;EAAA;;;AAAA,WAAW,QAAQ,iBAAR;;AACX,SAAS,QAAQ,YAAR;;AACP,aAAgB,QAAQ,yBAAR;;AAEZ;;;;;;;iCACJ,WAAU,QAAQ,YAAR;;iCAEV,SACE;IAAA,oBAAoB,SAApB;;;iCAEF,YAAW;AACT;IAAA,IAAI;IAEJ,CAAC,CAAC,MAAF,GAAW,CAAC,CAAC,KAAF,CAAQ,CAAC,CAAC,QAAQ,CAAC,SAAU,GAAE,CAAC,OAAhC,CACT,CAAC,MADQ,CACD,SAAC,CAAD;aAAO,CAAC,CAAC,QAAF,CAAW,CAAC,CAAC,OAAb;IAAP,CADC,CAET,CAAC,GAFQ,CAEJ,SAAC,CAAD;MACH,CAAC,CAAC,OAAF,GAAY,WAAW,CAAC,CAAC,OAAb,KAAyB;aACrC;IAFG,CAFI,CAKT,CAAC,IALQ,CAKH,SAAC,CAAD,EAAI,CAAJ;aAAU,CAAC,CAAC,OAAF,GAAY,CAAC,CAAC;IAAxB,CALG,CAMT,CAAC,KANQ;WAQX;EAXS;;iCAaX,aAAY;IACV,IAAC,aAAD,GAAgB,IAAC,gBAAD;IAEhB,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,OAAT,CAAP,EAA0B,MAA1B;IACA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,kBAAT,CAAP,EAAqC,YAArC;IACA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,wBAAT,CAAP,EAA2C,kBAA3C;IACA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,mBAAT,CAAP,EAAsC,aAAtC;IACA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,yBAAT,CAAP,EAA4C,mBAA5C;IACA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,kBAAT,CAAP,EAAqC,YAArC;IACA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,aAAT,CAAP,EAAgC,SAAhC;IACA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,aAAT,CAAP,EAAgC,QAAhC;IAEA,IAAC,eAAD,CAAgB,IAAC,MAAD,CAAO,SAAP,CAAhB;WACA,IAAC,eAAD,CAAgB,IAAC,MAAD,CAAO,QAAP,CAAhB;EAbU;;iCAeZ,YAAW;IACT,IAAC,WAAD;WACA;EAFS;;iCAIX,OAAM;AACJ;IAAA;IAEA,KAAK,IAAC,QAAD,CAAS,cAAT;IAEL,IAAC,OAAD,GAAU,IAAI,UAAJ,CACR;MAAA,IAAI,IAAC,MAAD,CAAO,MAAP,CAAJ;MACA,QAAQ,IAAC,MAAD,CAAO,MAAP,CAAc,CAAC,WAAf,GAA6B,CADrC;MAEA,UAAU,IAFV;KADQ;IAKV,IAAC,SAAD,CAAU,IAAC,OAAX,EAAmB,MAAnB,EAA2B,IAAC,OAA5B;IACA,IAAC,SAAD,CAAU,IAAC,OAAX,EAAmB,MAAnB,EAA2B,IAAC,OAA5B;WAEA,IAAC,UAAD;EAbI;;iCAeN,iBAAgB,SAAC,QAAD;AACd;IAAA,MAAS,IAAC,QAAO,CAAC,MAAT,EAAiB,CAAC,SAAlB,KAA+B,KAAlC,GAA6C,CAAC,CAA9C,GAAqD;AAE3D;SAAA;;mBACE,IAAC,UAAD,CAAW,EAAX,EACE;QAAA,QAAQ,IAAC,aAAa,GAAd,GAAmB,GAAnB,GAAyB,GAAjC;OADF;AADF;;EAHc;;iCAOhB,kBAAiB;AACf;IAAA,MAAoC,IAAC,UAAD,EAApC,EAAE,mBAAF,EAAU,+BAAV,EAAwB;IAExB,MAAS,MAAO,GAAE,CAAC;IACnB,MAAS,MAAO,OAAM,CAAC,MAAP,GAAgB,CAAhB,CAAkB,CAAC;IACnC,OAAS,IAAI,CAAC,GAAL,CAAS,MAAM,GAAf;IACT,OAAS,IAAI,CAAC,GAAL,CAAS,IAAT,IAAiB,IAAI,CAAC,GAAL,CAAS,IAAT;IAC1B,SAAY,OAAH,GAAgB,CAAhB,GAAuB,IAAI,IAAI,MAAM,CAAC;AAE/C;SAAA;;AACE,cAAO,YAAP;AAAA,aACO,OADP;uBAEI,SAAS,CAAT,GAAa,CAAC,MAAM,CAAC,MAAP,GAAgB,CAAjB;AADV;AADP,aAGO,QAHP;uBAII,SAAS,CAAC,CAAC,CAAC,OAAF,GAAY,GAAb,CAAT,GAA8B;AAD3B;AAHP,aAKO,aALP;UAMI,IAAI,IAAI,CAAC,GAAL,CAAS,CAAC,CAAC,OAAF,GAAY,GAArB;UACJ,IAAG,MAAK,CAAR;yBAAe,GAAf;WAAA;yBAAsB,SAAS,CAAC,IAAI,CAAC,GAAL,CAAS,CAAT,IAAc,IAAI,CAAC,GAAL,CAAS,IAAT,CAAf,CAAT,GAA0C,MAAhE;;AAFG;AALP;;AAAA;AADF;;EATe;;iCAmBjB,SAAQ,SAAC,MAAD,EAAS,aAAT;IACN,IAAC,cAAD,GAAiB,IAAC,kBAAD,CAAmB,MAAnB;IACjB,IAAC,aAAD,GAAgB,IAAC,cAAa,CAAC;IAC/B,IAAC,QAAD,CAAS,IAAC,MAAD,CAAO,YAAP,CAAT,EAA+B,IAAC,aAAhC;IAEA,IAAC,UAAD,CAAW,IAAC,MAAD,CAAO,YAAP,CAAX,EACE;MAAA,QAAW,MAAM,CAAC,CAAR,GAAU,KAApB;MACA,YAAe,aAAH,GAAsB,WAAtB,GAAuC,MADnD;KADF;WAIA,IAAC,UAAD,CAAW,IAAC,MAAD,CAAO,kBAAP,CAAX,EACE;MAAA,GAAG,MAAH;MACA,QAAU,CAAC,CAAC,MAAM,CAAC,CAAT,IAAW,KADrB;MAEA,YAAe,aAAH,GAAsB,WAAtB,GAAuC,MAFnD;KADF;EATM;;iCAcR,SAAQ,SAAC,MAAD,EAAS,OAAT;IACN,IAAG,CAAI,OAAP;aACE,MAAM,CAAC,KAAP,CAAa;QAAC,GAAG,IAAC,SAAD,CAAU,MAAV,CAAJ;OAAb,EADF;KAAA;MAGE,IAAC,cAAD,GAAiB,IAAC,kBAAD,CAAmB,MAAnB;MACjB,IAAC,aAAD,GAAgB,IAAC,cAAa,CAAC;MAC/B,IAAC,QAAD,CAAS,IAAC,MAAD,CAAO,YAAP,CAAT,EAA+B,IAAC,aAAhC;MAEA,IAAC,UAAD,CAAW,IAAC,MAAD,CAAO,YAAP,CAAX,EACE;QAAA,QAAW,MAAM,CAAC,CAAR,GAAU,KAApB;QACA,YAAY,WADZ;OADF;MAIA,IAAC,UAAD,CAAW,IAAC,MAAD,CAAO,kBAAP,CAAX,EACE;QAAA,GAAG,MAAH;QACA,QAAU,CAAC,CAAC,MAAM,CAAC,CAAT,IAAW,KADrB;QAEA,YAAY,WAFZ;OADF;MAKA,IAAG,yBAAH;eACE,IAAC,SAAD,CAAU,SAAV,EADF;OAhBF;;EADM;;iCAoBR,oBAAmB,SAAC,MAAD;AACjB;IAAE,SAAW,IAAC,UAAD;IACb,UAAU,IAAC,aAAD,CAAc,MAAd;IACV,QAAU,IAAC,aAAY,CAAC,OAAd,CAAsB,OAAtB;IACV,IAAe,UAAS,CAAC,CAAzB;MAAA,QAAU,EAAV;;IAEA,IAAG,IAAC,QAAO,CAAC,MAAT,EAAiB,CAAC,SAAlB,KAA+B,KAAlC;aACE,MAAO,OAAM,CAAC,MAAP,GAAgB,CAAhB,GAAoB,KAApB,EADT;KAAA;aAGE,MAAO,QAHT;;EANiB;;iCAWnB,WAAU,SAAC,MAAD;WACR,CAAC,IAAI,CAAC,EAAL,GAAU,CAAX,IAAgB,IAAC,aAAD,CAAc,MAAd;EADR;;iCAGV,eAAc,SAAC,MAAD;AACZ;IAAE,SAAW,IAAC,UAAD;IAEb,SAAU,MAAM,CAAC;IACjB,UAAU,CAAC,CAAC,KAAF,CAAQ,MAAM,CAAC,CAAP,GAAW,CAAC,IAAI,CAAC,EAAL,GAAU,CAAX,CAAnB,EAAkC,CAAlC,EAAqC,CAArC;WAEV,CAAC,CAAC,OAAF,CAAU,CAAC,CAAD,CAAG,CAAC,MAAJ,CAAW,IAAC,aAAZ,CAAV,EAAqC,OAArC;EANY;;iCAQd,UAAS,SAAC,EAAD,EAAK,KAAL;AACP;IAAA,MAAmB,IAAC,QAAO,CAAC,IAAI,CAAC,IAAjC,EAAC,mBAAD,EAAS;IAET,QAAQ,IAAC;WACT,EAAE,CAAC,SAAH,GAAe,KAAG,MAAH,GAAY,KAAZ,GAAoB;EAJ5B;;iCAMT,aAAY;IACV,IAAC,kBAAD;WACA,IAAC,OAAM,CAAC,IAAR;EAFU;;iCAIZ,YAAW;WACT,+BACA,IAAC,aAAD,KAAiB,IAAC,QAAO,CAAC,IAAI,CAAC,IAAI,CAAC;EAF3B;;iCAIX,oBAAmB;AACjB;IAAA,MAAoB,IAAC,UAAD,EAApB,EAAE,eAAF,EAAQ;IAER,eAAe,CAAC,CAAC,SAAF,CAAY,MAAZ,EAAoB,SAAC,CAAD;aAAO,CAAC,CAAC;IAAT,CAApB;IACf,UAAU,IAAC,aAAa;IAExB,IAAC,UAAD,CAAW,IAAC,MAAD,CAAO,aAAP,CAAX,EACE;MAAA,QAAW,IAAC,OAAM,CAAC,CAAT,GAAW,KAArB;MACA,YAAY,MADZ;KADF;IAIA,IAAC,UAAD,CAAW,IAAC,MAAD,CAAO,mBAAP,CAAX,EACE;MAAA,GAAG,MAAH;MACA,QAAQ,MAAI,IAAC,OAAM,CAAC,CAAZ,GAAc,KADtB;MAEA,YAAY,MAFZ;KADF;IAKA,IAAC,MAAD,CAAO,aAAP,CAAqB,CAAC;IAEtB,IAAC,UAAD,CAAW,IAAC,MAAD,CAAO,aAAP,CAAX,EACE;MAAA,QAAU,CAAC,UAAU,IAAI,CAAC,EAAf,GAAoB,CAArB,IAAuB,KAAjC;MACA,YAAe,IAAC,OAAM,CAAC,MAAX,GAAuB,MAAvB,GAAmC,WAD/C;KADF;WAIA,IAAC,UAAD,CAAW,IAAC,MAAD,CAAO,mBAAP,CAAX,EACE;MAAA,GAAG,MAAH;MACA,QAAQ,MAAG,CAAC,UAAU,IAAI,CAAC,EAAf,GAAoB,CAArB,CAAH,GAA0B,KADlC;MAEA,YAAe,IAAC,OAAM,CAAC,MAAX,GAAuB,MAAvB,GAAmC,WAF/C;KADF;EArBiB;;iCA0BnB,gBAAe;AACb;IAAA,wFAAyC;IAElC,IAAG,YAAa,IAAC,cAAjB;aACL;QAAC;UAAE,UAAS,QAAQ,CAAC,QAApB;UAA8B,QAAQ,IAAC,cAAvC;SAAD;QADK;KAAA;aAGL,GAHK;;EAHM;;iCAQf,UAAS;IACP;WAEA,IAAC,OAAD;EAHO;;;;GAvLwB;;AA6LnC,MAAM,CAAC,OAAP,GAAiB;;;CCjMjB;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvFA;AAAA;;ACAA;EAAA;;;AAAA,WAAW,QAAQ,iBAAR;;AACX,SAAS,QAAQ,YAAR;;AACP,aAAgB,QAAQ,yBAAR;;AAEZ;;;;;;;qBACJ,WAAU,QAAQ,YAAR;;qBAEV,SACE;IAAA,oBAAoB,SAApB;;;qBAEF,YAAW;AACT;IAAA,IAAI;IAEJ,YAAY,WAAW,CAAC,CAAC,IAAI,CAAC,SAAlB,EAA6B,EAA7B,KAAoC;IAChD,MAAM,WAAW,CAAC,CAAC,IAAI,CAAC,GAAlB,EAAuB,EAAvB;IACN,MAAM,WAAW,CAAC,CAAC,IAAI,CAAC,GAAlB,EAAuB,EAAvB;IACN,IAAW,CAAC,CAAC,KAAF,CAAQ,GAAR,CAAX;MAAA,MAAM,EAAN;;IACA,IAAY,CAAC,CAAC,KAAF,CAAQ,GAAR,CAAZ;MAAA,MAAM,GAAN;;IAEA,IAAG,MAAM,GAAT;MACE,MAAM,IADR;;IAGA,CAAC,CAAC,OAAF,GAAY,IAAI,CAAC,KAAL,CAAW,CAAC,MAAM,GAAP,IAAc,SAAzB;IAEZ,CAAC,CAAC,MAAF,GAAY,CAAC,CAAC,OAAF,CAAU,CAAC,CAAC,OAAF,CAAU,CAAC,CAAC,OAAZ,CAAoB,CAAC,GAArB,CAAyB,SAAC,CAAD;aAAO;IAAP,CAAzB,CAAV,EAA8C,CAAC,CAAC,IAAI,CAAC,MAArD;IAEZ,CAAC,CAAC,WAAF,GAAgB;;;;kBAAc,CAAC,GAAf,CAAmB,SAAC,CAAD;AACjC;MAAA,QAAQ,IAAI,GAAJ,CAAQ,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,CAAC,OAAN,GAAgB,CAAC,CAAC,MAA7B,CAAR;MACR,QAAQ,KAAK,CAAC,GAAN,CAAU,SAAV,CAAoB,CAAC,GAArB,CAAyB,GAAzB;aACR;IAHiC,CAAnB;WAKhB;EArBS;;qBAuBX,aAAY;IACV,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,OAAT,CAAP,EAA0B,MAA1B;IACA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,kBAAT,CAAP,EAAqC,YAArC;IACA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,wBAAT,CAAP,EAA2C,kBAA3C;IACA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,mBAAT,CAAP,EAAsC,aAAtC;IACA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,yBAAT,CAAP,EAA4C,mBAA5C;IACA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,kBAAT,CAAP,EAAqC,YAArC;IACA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,aAAT,CAAP,EAAgC,SAAhC;IACA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,aAAT,CAAP,EAAgC,QAAhC;IAEA,IAAC,eAAD,CAAgB,IAAC,MAAD,CAAO,SAAP,CAAhB;WACA,IAAC,eAAD,CAAgB,IAAC,MAAD,CAAO,QAAP,CAAhB;EAXU;;qBAaZ,YAAW;IACT,IAAC,WAAD;WACA;EAFS;;qBAIX,OAAM;AACJ;IAAA;IACA,KAAK,IAAC,QAAD,CAAS,cAAT;IAEL,IAAC,OAAD,GAAU,IAAI,UAAJ,CACR;MAAA,IAAI,IAAC,MAAD,CAAO,MAAP,CAAJ;MACA,QAAQ,IAAC,MAAD,CAAO,MAAP,CAAc,CAAC,WAAf,GAA6B,CADrC;MAEA,UAAU,IAFV;KADQ;IAKV,IAAC,SAAD,CAAU,IAAC,OAAX,EAAmB,MAAnB,EAA2B,IAAC,OAA5B;IACA,IAAC,SAAD,CAAU,IAAC,OAAX,EAAmB,MAAnB,EAA2B,IAAC,OAA5B;WAEA,IAAC,UAAD;EAZI;;qBAcN,iBAAgB,SAAC,QAAD;AACd;IAAA,MAAS,IAAC,QAAO,CAAC,MAAT,EAAiB,CAAC,SAAlB,KAA+B,KAAlC,GAA6C,CAAC,CAA9C,GAAqD;AAC3D;SAAA;;mBACE,IAAC,UAAD,CAAW,EAAX,EACE;QAAA,QAAQ,IAAI,QAAQ,CAAC,MAAb,GAAsB,GAAtB,GAA4B,GAApC;OADF;AADF;;EAFc;;qBAMhB,SAAQ,SAAC,MAAD,EAAS,aAAT;IACN,IAAC,aAAD,GAAgB,IAAC,WAAD,CAAY,MAAZ;IAChB,IAAC,QAAD,CAAS,IAAC,MAAD,CAAO,YAAP,CAAT,EAA+B,IAAC,aAAhC;IAEA,IAAC,UAAD,CAAW,IAAC,MAAD,CAAO,YAAP,CAAX,EACE;MAAA,QAAW,MAAM,CAAC,CAAR,GAAU,KAApB;MACA,YAAe,aAAH,GAAsB,WAAtB,GAAuC,MADnD;KADF;WAIA,IAAC,UAAD,CAAW,IAAC,MAAD,CAAO,kBAAP,CAAX,EACE;MAAA,GAAG,MAAH;MACA,QAAU,CAAC,CAAC,MAAM,CAAC,CAAT,IAAW,KADrB;MAEA,YAAe,aAAH,GAAsB,WAAtB,GAAuC,MAFnD;KADF;EARM;;qBAaR,SAAQ,SAAC,MAAD,EAAS,OAAT;IACN,IAAG,CAAI,OAAP;aACE,MAAM,CAAC,KAAP,CAAa;QAAC,GAAG,IAAC,SAAD,CAAU,MAAV,CAAJ;OAAb,EADF;KAAA;MAGE,IAAC,aAAD,GAAgB,IAAC,WAAD,CAAY,MAAZ;MAChB,IAAC,QAAD,CAAS,IAAC,MAAD,CAAO,YAAP,CAAT,EAA+B,IAAC,aAAhC;MAEA,IAAC,UAAD,CAAW,IAAC,MAAD,CAAO,YAAP,CAAX,EACE;QAAA,QAAW,MAAM,CAAC,CAAR,GAAU,KAApB;QACA,YAAY,WADZ;OADF;MAIA,IAAC,UAAD,CAAW,IAAC,MAAD,CAAO,kBAAP,CAAX,EACE;QAAA,GAAG,MAAH;QACA,QAAU,CAAC,CAAC,MAAM,CAAC,CAAT,IAAW,KADrB;QAEA,YAAY,WAFZ;OADF;MAKA,IAAG,yBAAH;eACE,IAAC,SAAD,CAAU,SAAV,EADF;OAfF;;EADM;;qBAmBR,aAAY,SAAC,MAAD;AACV;IAAA,MAAwB,IAAC,QAAO,CAAC,IAAI,CAAC,IAAtC,EAAC,yBAAD,EAAY,aAAZ,EAAiB;IACjB,QAAQ,IAAI,MAAM,GAAV,CACN,CAAC,GADK,CACD,IAAC,aAAD,CAAc,MAAd,CADC,CAEN,CAAC,GAFK,CAED,SAFC,CAGN,CAAC,KAHK,EAIN,CAAC,GAJK,CAID,SAJC,CAKN,CAAC,IALK,CAKA,GALA;IAOR,IAAG,IAAC,QAAO,CAAC,MAAT,EAAiB,CAAC,SAAlB,KAA+B,KAAlC;aAA6C,IAAI,MAAM,KAAV,EAA7C;KAAA;aAAmE,MAAnE;;EATU;;qBAWZ,WAAU,SAAC,MAAD;WACR,CAAC,IAAI,CAAC,EAAL,GAAU,CAAX,IAAgB,IAAC,aAAD,CAAc,MAAd;EADR;;qBAGV,eAAc,SAAC,MAAD;AACZ;IAAA,MAAwB,IAAC,QAAO,CAAC,IAAI,CAAC,IAAtC,EAAC,yBAAD,EAAY,aAAZ,EAAiB;IAEjB,MAAU,IAAI,GAAJ,CAAQ,CAAC,GAAT,CAAa,GAAb,CAAiB,CAAC,GAAlB,CAAsB,SAAtB,CAAgC,CAAC,KAAjC,EAAwC,CAAC,GAAzC,CAA6C,SAA7C,CAAuD,CAAC,IAAxD,CAA6D,GAA7D;IACV,UAAU,CAAC,CAAC,KAAF,CAAQ,MAAM,CAAC,CAAP,GAAW,CAAC,IAAI,CAAC,EAAL,GAAU,CAAX,CAAnB,EAAkC,CAAlC,EAAqC,CAArC;IACV,QAAU,IAAI,GAAJ,CAAQ,CAAC,GAAT,CAAa,GAAb,CAAiB,CAAC,GAAlB,CAAsB,SAAtB,CAAgC,CAAC,OAAjC;WAEV,IAAI,KAAJ,CACE,CAAC,GADH,CACO,OADP,CAEE,CAAC,KAFH,EAGE,CAAC,GAHH,CAGO,KAHP;EAPY;;qBAad,UAAS,SAAC,EAAD,EAAK,KAAL;AACP;IAAA,MAA6B,IAAC,QAAO,CAAC,IAAI,CAAC,IAA3C,EAAC,mBAAD,EAAS,mBAAT,EAAiB;IAEjB,WAAW,WAAW,QAAX,EAAqB,EAArB,KAA4B;IACvC,IAAmD,WAAW,CAA9D;MAAA,QAAQ,WAAW,KAAX,EAAkB,EAAlB,CAAqB,CAAC,OAAtB,CAA8B,QAA9B,EAAR;;WACA,EAAE,CAAC,SAAH,GAAe,KAAG,MAAH,GAAY,KAAZ,GAAoB;EAL5B;;qBAOT,aAAY;IACV,IAAC,kBAAD;WACA,IAAC,OAAM,CAAC,IAAR;EAFU;;qBAIZ,YAAW;WACT,+BACA,IAAC,aAAY,CAAC,EAAd,CAAiB,IAAC,QAAO,CAAC,IAAI,CAAC,MAAM,CAAC,KAAtC;EAFS;;qBAIX,oBAAmB;AACjB;IAAA,MAAiB,IAAC,QAAO,CAAC,IAA1B,EAAC,mBAAD,EAAS;IACR,0BAAD,EAAY,cAAZ,EAAiB;IACjB,MAAU,IAAI,GAAJ,CAAQ,CAAC,GAAT,CAAa,GAAb,CAAiB,CAAC,GAAlB,CAAsB,SAAtB,CAAgC,CAAC,KAAjC,EAAwC,CAAC,GAAzC,CAA6C,SAA7C,CAAuD,CAAC,IAAxD,CAA6D,GAA7D;IACV,UAAU,CAAC,MAAM,CAAC,KAAP,GAAe,GAAhB,IAAuB,CAAC,MAAM,GAAP;IACjC,IAAyB,IAAC,QAAO,CAAC,MAAT,EAAiB,CAAC,SAAlB,KAA+B,KAAxD;MAAA,UAAU,IAAI,QAAd;;IAEA,IAAC,UAAD,CAAW,IAAC,MAAD,CAAO,aAAP,CAAX,EACE;MAAA,QAAW,IAAC,OAAM,CAAC,CAAT,GAAW,KAArB;MACA,YAAY,MADZ;KADF;IAIA,IAAC,UAAD,CAAW,IAAC,MAAD,CAAO,mBAAP,CAAX,EACE;MAAA,GAAG,MAAH;MACA,QAAQ,MAAI,IAAC,OAAM,CAAC,CAAZ,GAAc,KADtB;MAEA,YAAY,MAFZ;KADF;IAKA,IAAC,MAAD,CAAO,aAAP,CAAqB,CAAC;IAEtB,IAAC,UAAD,CAAW,IAAC,MAAD,CAAO,aAAP,CAAX,EACE;MAAA,QAAU,CAAC,UAAU,IAAI,CAAC,EAAf,GAAoB,CAArB,IAAuB,KAAjC;MACA,YAAe,IAAC,OAAM,CAAC,MAAX,GAAuB,MAAvB,GAAmC,WAD/C;KADF;WAIA,IAAC,UAAD,CAAW,IAAC,MAAD,CAAO,mBAAP,CAAX,EACE;MAAA,GAAG,MAAH;MACA,QAAQ,MAAG,CAAC,UAAU,IAAI,CAAC,EAAf,GAAoB,CAArB,CAAH,GAA0B,KADlC;MAEA,YAAe,IAAC,OAAM,CAAC,MAAX,GAAuB,MAAvB,GAAmC,WAF/C;KADF;EAtBiB;;qBA2BnB,UAAS;IACP;WAEA,IAAC,OAAD;EAHO;;qBAKT,gBAAe;AACb;IAAA,wDAA6B,CAAE,mBAAnB,IAAgC;IAC5C,MAAiB,SAAS,CAAC,MAAV,GAAmB,CAApC;AAAA,aAAO,GAAP;;IACA,WAAW,SAAU;IAErB,UAAU,IAAC,UAAD;IACV,QAAQ,SAAS,IAAC,aAAV;IAER,SAAS,CAAC,CAAC,IAAF,CAAO,QAAQ,CAAC,OAAhB,EAAyB,SAAC,CAAD;aAAO,CAAC,CAAC,OAAF,KAAa;IAApB,CAAzB;IACT,UAAU;MAAA,UAAU,QAAQ,CAAC,QAAnB;MAA6B,QAAQ,MAArC;;IAEV,OAAO,CAAC,MAAM,CAAC,OAAf,GAAyB;WAEzB,CAAE,OAAF;EAba;;;;GA5KM;;AA4LvB,MAAM,CAAC,OAAP,GAAiB;;;CChMjB;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhJA;AAAA;;ACAA;EAAA;;;;AAAA,WAAc,QAAQ,iBAAR;;AACd,YAAY,QAAQ,aAAR;;AACZ,SAAS,QAAQ,YAAR;;AACP,aAAgB,QAAQ,yBAAR;;AAEZ;;;;;;;4BACJ,WAAU,QAAQ,YAAR;;4BAEV,SACE;IAAA,oBAAoB,SAApB;;;4BAEF,YAAW;AACT;IAAA,OAAO;IAEP,IAAI,CAAC,IAAL;;AACE;AAAA;WAAA;;YAA8B,IAAI,CAAC,KAAL,IAAe,IAAI,C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3C,EADF;;EATO;;;;GAhGsB;;AA6GjC,MAAM,CAAC,OAAP,GAAiB;;;CC/GjB;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlIA;AAAA;;ACAA;EAAA;;;AAAA,WAAa,QAAQ,iBAAR;;AACX,aAAe,QAAQ,yBAAR;;AACjB,SAAa,QAAQ,YAAR;;AAEb,WAAW,IAAI,CAAC,EAAL,GAAU;;AACrB,WAAW,IAAI,CAAC,EAAL,GAAU;;AAEf;;;;;;;0BACJ,WAAU,QAAQ,YAAR;;0BACV,kBAAiB;;0BACjB,kBAAiB;;0BAEjB,eAAc,CACZ,YADY,EAEZ,YAFY,EAGZ,YAHY,EAIZ,UAJY,EAKZ,UALY,EAMZ,cANY,EAOZ,gBAPY,EAQZ,gBARY;;0BAWd,SAAQ;WACN;MAAA,oBAAoB,SAApB;;EADM;;0BAGR,YAAW;AACT;IAAA,OAAO;IACP,QAAU,CAAC,CAAC,IAAF;;AAAQ;AAAA;WAAA;;qBAAA,CAAC,CAAC,OAAF,CAAU,KAAV,EAAiB,EAAjB,C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J;eAAU,KAAC,SAAD,CAAU,CAAV,EAAa,OAAb;MAAV;IAAA,QAHhB;EAJK;;yBASP,YAAW;WACT;MAAA,MAAM,IAAC,MAAP;MACA,UACE;QAAA,SAAS,IAAC,QAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAhC;QACA,IAAI,IAAC,QAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,EAD3B;OAFF;;EADS;;yBAMX,WAAU,SAAC,KAAD,EAAS,EAAT;AACR;IADS,IAAC,SAAD;IACT,aAAiB,IAAC,MAAK,CAAC,MAAP,IAAiB,IAAC,UAAD,EAAY,CAAC;IAC/C,EAAE,CAAC,WAAH,GAAiB,IAAC;WAClB,IAAC,YAAD,CAAa,UAAb;EAHQ;;yBAKV,cAAa,SAAC,UAAD;AACX;IAAA,IAAC,SAAD,kCAAgB,CAAE,gBAAR,GAAiB,CAA3B,EAA8B,WAA9B;WACA,IAAC,SAAD,CAAa,UAAH,GAAmB,SAAnB,GAAkC,QAA5C;EAFW;;;;GArDY;;AAyD3B,MAAM,CAAC,OAAP,GAAiB;;;CC3DjB;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5CA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5CA;AAAA;CCAA;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9FA;AAAA;CCAA;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlCA;AAAA;;ACAA;EAAA;;;AAAA,WAAc,QAAQ,iBAAR;;AACd,YAAc,QAAQ,wBAAR;;AACd,YAAc,QAAQ,aAAR;;AAER;;;;;;;mCACJ,WAAU,QAAQ,YAAR;;mCAEV,SAAQ;WACN;MAAA,qBAAqB,WAArB;MACA,qBAAqB,MADrB;MAEA,qBAAqB,aAFrB;;EADM;;mCAKR,iBAAgB;AACd;IAAA;IAEA,IAAC,KAAI,CAAC,KAAK,CAAC,GAAZ,CAAgB,YAAhB,EAA8B,IAA9B;IACA,IAAC,KAAI,CAAC,KAAK,CAAC,GAAZ,CAAgB,QAAhB,EAA0B,IAA1B;IAEA,SAAS,CAAC,CAAC,KAAF,CAAQ,IAAC,QAAO,CAAC,IAAI,CAAC,MAAtB,CACP,CAAC,GADM,CACF,SAAC,CAAD;MACH,IAAyB,CAAI,CAAC,CAAC,SAAN,IAAmB,CAAC,CAAC,SAAF,KAAe,EAA3D;QAAA,CAAC,CAAC,SAAF,GAAc,QAAd;;aACA;IAFG,CADE,CAKP,CAAC,MALM,CAKC,SAAC,CAAD;aAAO,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;KAAA;aAGE,GAHF;;EADa;;;;GArHc;;AA2H/B,MAAM,CAAC,OAAP,GAAiB;;;CC/HjB;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvJA;AAAA;CCAA;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlCA;AAAA;;ACAA;EAAA;;;AAAA,WAAc,QAAQ,iBAAR;;AACZ,aAAe,QAAQ,yBAAR;;AACjB,YAAc,QAAQ,wBAAR;;AACd,cAAc,4BAA4B,CAAC,KAA7B,CAAmC,EAAnC;;AAER;;;;;;;2BACJ,WAAU,QAAQ,Y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7B,MAAM,CAAC,OAAP,GAAiB;;;CC1PjB;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9FA;AAAA;CCAA;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlCA;AAAA;;ACAA;EAAA;;;AAAA,WAAW,QAAQ,iBAAR;;AAEL;;;;;;;2BACJ,YACE;IAAA,WAAS,QAAQ,YAAR,CAAT;IACA,OAAS,QAAQ,oBAAR,CADT;;;2BAGF,SAAQ;WACN;MAAA,qBAAqB,WAArB;MACA,gBAAgB,YADhB;MAEA,qBAAqB,MAFrB;;EADM;;2BAKR,YAAW;AACT;IAAA,OAAO;IAEP,IAAI,CAAC,KAAL,GAAa,CAAC,CAAC,KAAF,CAAQ,IAAI,CAAC,KAAb,CACX,CAAC,GADU,CACN,SAAC,GAAD,EAAuC,CAAvC;AACH;MADM,iBAAM,yBAAU,mBAAO;MAC7B,IAAG,kBAAU,eAAb;eACE;UACE;YAAE,SAAS,IAAX;YAAkB,aAAa,QAA/B;YAA0C,OAAO,CAAjD;WADF,EAEE;YAAE,SAAS,KAAX;YAAkB,aAAa,SAA/B;YAA0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C,OAAO,CAAC,MAAR,GAAiB,OAAO,CAAC,MAAR,GAAiB,IAAnC,IAA2C,IAAtD;AAEP;AAAA;;UACE,EAAE,CAAC,KAAK,CAAC,MAAT,GAAoB,CAAC,MAAM,IAAP,IAAY;UAChC,EAAE,CAAC,KAAK,CAAC,KAAT,GAAoB,CAAC,MAAM,IAAP,IAAY;UAChC,EAAE,CAAC;UACH,EAAE,CAAC,KAAK,CAAC,OAAT,GAAmB;AAJrB;eAMA,KAAC,QAAD,CAAS;iBACP,MAAM,CAAC,UAAP,CAAkB,CAAC;mBAAG,KAAC,GAAE,CAAC,SAAS,CAAC,GAAd,CAAkB,QAAlB;UAAH,CAAD,CAAlB,EAAoD,GAApD;QADO,CAAT;MA9B8C;IAAA,QAAhD;EATc;;;;GAvCoB;;AAiFtC,MAAM,CAAC,OAAP,GAAiB;;;CCrFjB;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjIA;AAAA;;ACAA;EAAA;;;AAAA,WAAW,QAAQ,iBAAR;;AACX,YAAY,QAAQ,aAAR;;AAEN;;;;;;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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApHA;AAAA;;ACAA;EAAA;;;AAAA,YAAa,QAAQ,aAAR;;AACX,aAAe,QAAQ,yBAAR;;AACjB,UAAa,QAAQ,aAAR;;AAEP;;;;;;;4BACJ,WAAU,QAAQ,YAAR;;4BAEV,eAAc;;4BAEd,SAAQ;IACN,oBAAoB,QADd;IAEN,UAAU,OAFJ;;;4BAKR,SAAQ,SAAC,CAAD;IACN,CAAC,CAAC,wBAAF;WACA,6CAAM,SAAN;EAFM;;4BAIR,QAAO,SAAC,CAAD;AACL;IAAA,IAAU,CAAC,CAAC,MAAF,YAAoB,iBAA9B;AAAA;;IAEA,QAAQ,IAAC;IAET,IAAG,+BAAS,CAAE,gBAAX,IAAsB,IAAC,GAAE,CAAC,YAAJ,GAAmB,CAA5C;MACE,QADF;KAAA;MAGE,QAHF;;IAKA,QAAQ,IAAI,CAAC,GAAL,CAAS,IAAI,CAAC,GAAL,CAAS,KAAT,EAAgB,IAAC,QAAO,CAAC,IAAI,CAAC,KAAK,CAAC,MAApB,GAA6B,CAA7C,CAAT,EAA0D,CAA1D;8CAED,CAAE,KAAT,CAAe;MAAE,GAAG,CAAC,KAAD,GAAS,IAAC,OAAM,CAAC,MAAM,CAAC,MAA7B;KAAf;EAZK;;4BAcP,YAAW;AACT;IAAA,OAAO,gDAAM,SAAN;IAEP,IAAC,QAAO,CAAC,IAAI,CAAC,KAAd,GAAsB,IAAI,CAAC,KAAL,GACpB,CAAC,IAAI,CAAC,KAAL,IAAc,EAAf,CAAkB,CAAC,MAAnB,CAA0B,SAAC,CAAD;aACxB,CAAC,CAAC,OAAF,IAAa,CAAC,CAAC,CAAC,OAAF,IAAc,CAAC,CAAC,OAAO,CAAC,MAAV,GAAmB,CAAlC;IADW,CAA1B;AAGF;AAAA;;;QACE,IAAI,CAAC,cAAe;;;QACpB,IAAI,CAAC,eAAgB;;;QACrB,IAAI,CAAC,gBAAiB;;AAHxB;IAKA,IAAG,IAAI,CAAC,KAAK,CAAC,MAAX,IAAqB,CAAxB;MACE,MAAM,CAAC,UAAP,CAAkB,CAAC;eAAA;iBAAG,KAAC,SAAD,CAAU,SAAV;QAAH;MAAA,QAAD,CAAlB,EAA4C,CAA5C,EADF;;IAGA,IAAI,CAAC,SAAL,GAAiB;;MACjB,IAAI,CAAC,SAAU;;WAEf;EAlBS;;4BAoBX,aAAY;IACV,IAAG,IAAC,QAAO,CAAC,IAAI,CAAC,MAAjB;aACE,IAAC,QAAD,CAAS,MAAT,EAAiB;QAAE,QAAQ,KAAV;OAAjB,EADF;;EADU;;4BAIZ,OAAM,SAAC,KAAD;AACJ;;MADK,QAAQ;;;SACN,CAAE,gBAAT;;IACA,IAAC,OAAD,GAAU;IAEV,KAAO,IAAC,OAAR;MACE,KAAK,IAAC,QAAD,CAAS,WAAT;MACL,IAAC,MAAD,CAAO,EAAE,CAAC,UAAV,EAAsB,UAAtB;MACA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,SAAT,CAAP,EAA4B,QAA5B;MACA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,WAAT,CAAP,EAA8B,UAA9B;MAEA,IAAG,IAAC,QAAO,CAAC,IAAI,CAAC,KAAK,CAAC,MAApB,GAA6B,CAAhC;QACE,MAAO,IAAC,QAAO,CAAC,IAAI,CAAC,KAAK,CAAC,MAApB,GAA6B;QACpC,MAAM,CAAC,EAAE,CAAC,YAAJ,GAAmB;QAEzB,IAAC,OAAD,GAAW,IAAI,UAAJ,CAAe;UACxB,IAAI,EADoB;UAExB,MAAM,GAFkB;UAGxB,MAAM,CAHkB;UAIxB,MAAM,GAJkB;UAKxB,kBAAkB,IALM;SAAf;QAQX,IAAC,SAAD,CAAU,IAAC,OAAX,EAAmB,MAAnB,EAA2B,IAAC,OAA5B;QACA,IAAC,SAAD,CAAU,IAAC,OAAX,EAAmB,MAAnB,EAA2B,IAAC,OAA5B;QAEA,IAAC,OAAM,CAAC,KAAR,CAAc;UAAE,GAAG,CAAC,IAAC,OAAM,CAAC,MAAM,CAAC,MAAhB,GAAyB,IAAI,CAAC,GAAL,CAAS,KAAT,EAAgB,GAAhB,CAA9B;SAAd,EAfF;OAAA,MAiBK,IAAG,OAAO,IAAC,MAAD,CAAO,UAAP,CAAkB,CAAC,UAA7B;QACH,IAAI,CAAC,SAAS,CAAC,GAAf,CAAmB,QAAnB;AACA;AAAA;;UACE,IAAC,UAAD,CAAW,EAAX,EAAe;YACb,SAAS,CADI;YAEb,YAAY,WAFC;WAAf;AADF,SAFG;;MAQL,IAAC,QAAD,CAAS,IAAT,EAAe;QAAE,6DAAgC,CAAE,eAAxB,IAAiC,KAA7C;OAAf;MAEA,IAAC,SAAD,CAAU,IAAV,EAAgB,QAAhB,EAA0B,IAAC,SAA3B;aACA,IAAC,SAAD,GAlCF;;EAJI;;4BAwCN,SAAQ,SAAC,MAAD,EAAS,SAAT;AACN;IAAA,MAAM,CAAC,QAAQ,CAAC,OAAhB,CAAwB,WAAxB;IAEA,aAAgB,SAAH,GAAkB,WAAlB,GAAmC;IAEhD,IAAC,UAAD,CAAW,IAAC,MAAD,CAAO,UAAP,CAAX,EAA+B;MAC7B,GAAG,IAAC,cAAD,CAAe,MAAf,CAD0B;MAE7B,YAAY,UAFiB;KAA/B;WAKA,IAAC,eAAD,CAAgB,MAAhB,EAAwB,UAAxB;EAVM;;4BAYR,SAAQ,SAAC,MAAD,EAAS,OAAT;AACN;IAAA,IAAG,OAAH;MACE,aAAmB,yBAAH,GAAuB,WAAvB,GAAwC;MACxD,IAAC,aAAD,GAAgB,IAAI,CAAC,KAAL,CAAW,CAAC,MAAM,CAAC,CAAR,GAAY,MAAM,CAAC,MAAM,CAAC,MAArC;MAEhB,IAAC,UAAD,CAAW,IAAC,MAAD,CAAO,UAAP,CAAX,EAA+B;QAC7B,GAAG,IAAC,cAAD,CAAe,MAAf,CAD0B;QAE7B,YAAY,UAFiB;OAA/B;MAKA,IAAC,eAAD,CAAgB,MAAhB,EAAwB,UAAxB,EATF;KAAA;MAYE,IAAI,MAAM,CAAC,QAAQ,CAAC;MACpB,IAAI;MACJ,OACK,IAAI,CAAC,CAAR,GAAe,MAAf,GACQ,IAAI,CAAP,GAAc,OAAd,GACA;MAEP,OAAO,IAAK,MAAL,CAAW,IAAI,CAAC,GAAL,CAAS,MAAM,CAAC,CAAP,GAAW,MAAM,CAAC,MAAM,CAAC,MAAlC,EAA0C,CAA1C,CAAX;MACP,MAAM,CAAC,KAAP,CAAa;QAAE,GAAG,OAAO,MAAM,CAAC,MAAM,CAAC,MAA1B;OAAb,EApBF;;IAsBA,QAAQ,IAAC,QAAO,CAAC,IAAI,CAAC,KAAK,CAAC,MAApB,GAA6B;IAErC,cAAc,IAAC,QAAO,CAAC,IAAI,CAAC,KAAM,KAAC,aAAD,IAAiB,CAAjB;IAElC,IAAC,QAAD,CAAS,IAAT,EAAe;MAAE,iCAAU,WAAW,CAAE,eAAb,IAAsB,KAAlC;KAAf;IAEA,IAAC,SAAD,4CAA8B,CAAE,WAAtB,gBAAuC,MAAjD,EAAyD,kBAAzD;IAEA,IAAC,MAAD,CAAO,QAAP,CAAgB,CAAC,SAAS,CAAC,MAA3B,CAAkC,QAAlC,EAA4C,IAAC,aAAD,GAAgB,CAA5D;IACA,IAAC,MAAD,CAAO,UAAP,CAAkB,CAAC,SAAS,CAAC,MAA7B,CAAoC,QAApC,EAA8C,IAAC,aAAD,GAAgB,KAA9D;IAEA,IAAG,IAAC,aAAD,KAAiB,KAApB;aACE,IAAC,SAAD,CAAU,SAAV,EADF;;EAlCM;;4BAqCR,iBAAgB,SAAC,MAAD,EAAS,UAAT;AACd;IAAE,SAAW,MAAM,CAAC;AAEpB;AAAA;SAAA;;MACE,KAAK,CAAC,SAAS,CAAC,MAAhB,CAAuB,QAAvB,EAAiC,MAAK,IAAC,aAAvC;MACA,KAAK,CAAC,SAAS,CAAC,MAAhB,CAAuB,YAAvB,EAAqC,eAAgB,EAArD;MAEA,IAAG,UAAH;QACE,IAAC,WAAD,CAAY,KAAZ,EAAmB,UAAnB,EAA+B,IAA/B,EADF;;MAGA,IAAI,IAAI,CAAC,GAAL,CAAS,MAAM,CAAC,CAAP,GAAW,CAAC,IAAI,MAAL,CAApB,IAAoC;;;AAExC;AAAA;aAAA;;cAAmC,CAAI,IAAI,CAAC,SAAS,CAAC,QAAf,CAAwB,SAAxB;0BACrC,IAAC,UAAD,CAAW,IAAX,EAAiB;cACf,GAAG,CAAC,CAAD,GAAK,MAAL,GAAc,CAAC,IAAI,CAAL,CAAd,GAAwB,CADZ;cAEf,SAAS,IAAI,CAFE;cAGf,YAAY,UAHG;aAAjB;;AADF;;;AATF;;EAHc;;4BAmBhB,gBAAe,SAAC,MAAD;WACX,CACA,MAAM,CAAC,CAAP,GAAW,MAAM,CAAC,MAAM,CAAC,MAAzB,GAAkC,IAAC,QAAO,CAAC,IAAI,CAAC,KAAK,CAAC,MAAtD,GAA+D,GAD/D,IAED;EAHY;;4BAKf,WAAU;AACR;IAAA,IAAG,WAAW,IAAC,MAAD,CAAO,UAAP,KAAuB,IAAC,OAAtC;MACE,IAAC,OAAM,CAAC,CAAR,GAAY,CAAC,IAAC,aAAF,GAAiB,IAAC,OAAM,CAAC,MAAM,CAAC;MAC5C,IAAC,OAAM,CAAC,OAAO,CAAC,IAAhB,GACE,CAAC,IAAC,OAAM,CAAC,EAAE,CAAC,YAAZ,GAA2B,CAAC,IAAC,QAAO,CAAC,IAAI,CAAC,KAAK,CAAC,MAApB,GAA6B,CAA9B;aAC7B,IAAC,OAAM,CAAC,SAAR,GAJF;;EADQ;;4BAOV,UAAS,SAAC,MAAD;AACP;AAAA;AAAA;;MACE,OAAO,IAAC,QAAO,CAAC,IAAI,CAAC,KAAM;MAG3B,IAAG,IAAH;AACE;;UACE,IAAG,IAAK,KAAL,KAAa,MAAb,IAA0B,IAAK,KAAL,KAAe,GAA5C;YACE,UAAU,EADZ;;UAEA,IAAS,eAAT;AAAA;;AAHF,SADF;OAAA;QAME,UAAU,EANZ;;MAOA,IAAS,eAAT;AAAA;;AAXF;IAaA,8CAAM,SAAN;IAEA,IAAG,IAAC,OAAJ;MACE,IAAC,OAAM,CAAC,gBAAR;MACA,IAAC,OAAD,GAAU,IAAC,aAAD,GAAgB,KAF5B;;WAIA,IAAC,KAAD,CAAM,OAAN;EApBO;;4BAsBT,aAAY;IACV,IAAC,aAAD,GAAgB,CAAC;WAEjB,IAAI,OAAJ,CAAY;aAAA,SAAC,OAAD,EAAU,MAAV;AACV;QAAA,WAAW,SAAC,MAAD;AACT;;YADU,SAAS;;UACnB,IAAG,KAAC,aAAD,GAAgB,KAAC,QAAO,CAAC,IAAI,CAAC,KAAK,CAAC,MAApB,GAA6B,CAAhD;YACE,KAAC,aAAD;YAEA,IAAG,KAAC,QAAO,CAAC,IAAI,CAAC,KAAK,CAAC,MAApB,GAA6B,CAAhC;;mBACS,CAAE,KAAT,CAAe;kBAAE,GAAG,CAAC,KAAC,aAAF,GAAiB,KAAC,OAAM,CAAC,MAAM,CAAC,MAArC;iBAAf;eADF;;mBAGA,KAAC,mBAAD,CAAoB,MAApB,CACE,CAAC,IADH,CACQ,QADR,CAEE,EAAC,KAAD,EAFF,CAES,MAFT,EANF;WAAA;mBAUE,QAAQ,MAAR,EAVF;;QADS;eAaX;MAdU;IAAA,QAAZ;EAHU;;;;GAlMgB;;AAqN9B,MAAM,CAAC,OAAP,GAAiB;;;CCzNjB;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1EA;AAAA;;ACAA;EAAA;;;AAAA,YAAY,QAAQ,aAAR;;AACV,QAAU,WAAW,CAAC,OAAZ;;AAEN;;;;;;;+BACJ,WAAU,QAAQ,YAAR;;+BAEV,SACE;IAAA,oBAAoB,QAApB;IACA,mBAAmB,kBADnB;IAEA,mBAAmB,kBAFnB;IAGA,oBAAoB,aAHpB;IAIA,UAAU,cAJV;;;+BAMF,YAAW;AACT;IAAA,OAAO;IACP,IAAI,CAAC,SAAL,GAAiB;AAEjB;AAAA;;MACE,QAAQ,CAAC,MAAT,GAAkB,IAAC,UAAD,CAAW,QAAQ,CAAC,MAApB;AADpB;WAGA;EAPS;;+BASX,SAAQ,SAAC,CAAD;;MACN,CAAC,CAAE,wBAAH;;WACA;EAFM;;+BAIR,aAAY;IACV,IAAC,QAAD,CAAS,IAAT,EAAe;MAAA,UAAU,KAAV;KAAf;IACA,IAAyC,IAAC,WAA1C;MAAA,KAAK,CAAC,OAAN,CAAc,IAAC,WAAf,EAA2B,GAA3B,EAAgC,IAAhC;;WACA,IAAC,aAAD;EAHU;;+BAKZ,OAAM;WACJ,IAAC,GAAE,CAAC,SAAS,CAAC,MAAd,CAAqB,WAArB;EADI;;+BAGN,UAAS,SAAC,MAAD;AACP;AAAA;AAAA;MAAM;MACJ,IAAmB,mEAAqC,CAAE,iBAA1D;QAAA,UAAU,EAAV;;AADF;IAGA;IAEA,IAAC,WAAD;IACA,IAAC,KAAD,CAAM,KAAN;IAEA,IAAG,eAAH;MACE,IAAC,GAAE,CAAC,SAAS,CAAC,GAAd,CAAkB,eAAlB;MACA,IAAC,aAAD,CAAc,OAAd;aACA,CAAC,CAAC,KAAF,CAAQ,CAAC;eAAA;iBAAG,KAAC,GAAE,CAAC,SAAS,CAAC,MAAd,CAAqB,eAArB;QAAH;MAAA,QAAD,CAAR,EAAmD,CAAnD,EAHF;;EATO;;+BAcT,YAAW;;+BAEX,WAAU;AACR;IAAA,IAAG,IAAC,MAAD,CAAO,WAAP,CAAH;MACE,IAAC,MAAD,CAAO,WAAP,CAAmB,CAAC,KAAK,CAAC,MAA1B,GAAmC;MACnC,IAAC,MAAD,CAAO,WAAP,CAAmB,CAAC,KAAK,CAAC,KAA1B,GAAkC;;WACJ,CAAE,KAAK,CAAC,MAAtC,GAA+C;OAHjD;;WAIA,IAAC,cAAD;EALQ;;+BAOV,aAAY;IACV,IAAC,SAAD,CAAU,KAAV,EAAiB,MAAjB;IACA,IAAC,SAAD,CAAU,IAAC,QAAO,CAAC,IAAI,CAAC,MAAM,CAAC,QAArB,EAAV,EAA2C,QAA3C;IAEA,IAAG,IAAC,QAAO,CAAC,IAAI,CAAC,MAAjB;aACE,IAAC,aAAD,GADF;KAAA;aAGE,IAAC,QAAD,CAAS,IAAT,EAAe;QAAA,UAAU,KAAV;OAAf,EAHF;;EAJU;;+BASZ,eAAc,SAAC,QAAD;AACZ;IAAA,IAAG,mEAA2B,CAAE,WAArB,oBAAX;aACE,IAAC,GAAE,CAAC,KAAK,CAAC,KAAV,gEAAqC,CAAE,WAArB,qBADpB;;EADY;;+BAId,mBAAkB,SAAC,UAAD;AAChB;IAAA,IAAG,2EAAiC,CAAE,WAA3B,oBAAX;MAEE,IAAC,GAAE,CAAC,SAAS,CAAC,MAAd,CAAqB,gBAArB,EAAuC,gBAAvC;aACA,IAAC,GAAE,CAAC,SAAS,CAAC,GAAd,CAAkB,cAAY,KAA9B,EAHF;;EADgB;;+BAMlB,eAAc;AACZ;IAAA,IAAC,SAAD,CAAU,IAAV,EAAgB,MAAhB;WACA,IAAC,QAAD,CAAS,IAAT,EAAe;MAAA,2DAAgC,CAAE,oBAAxB,IAAsC,IAAhD;KAAf;EAFY;;+BAId,OAAM,SAAC,SAAD;AACJ;;MADK,YAAY;;IACjB,IAAC,MAAD,CAAO,MAAM,IAAC,QAAD,CAAS,MAAT,CAAb,EAA+B,OAA/B;IACA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,UAAT,CAAP,EAA6B,SAA7B;IACA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,YAAT,CAAP,EAA+B,WAA/B;IACA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,aAAT,CAAP,EAAgC,YAAhC;IACA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,kBAAT,CAAP,EAAqC,WAArC;IAEA,IAAC,SAAD,CAAU,QAAV;IACA,IAAC,SAAD,CAAU,KAAV,EAAiB,MAAjB;IACA,IAAC,SAAD,CAAU,IAAC,QAAO,CAAC,IAAI,CAAC,MAAM,CAAC,QAArB,EAAV,EAA2C,QAA3C;IAEA,IAAC,aAAD,CAAc,IAAC,QAAO,CAAC,IAAI,CAAC,QAA5B;IACA,IAAC,iBAAD,CAAkB,IAAC,QAAO,CAAC,IAAI,CAAC,UAAhC;IACA,IAAC,SAAD,CAAU,IAAV,EAAgB,QAAhB,EAA0B,IAAC,SAA3B;IAEA,IAAG,CAAI,SAAP;MACE,IAAC,GAAE,CAAC,SAAS,CAAC,GAAd,CAAkB,eAAlB,EADF;;IAGA,kBAAG,GAAG,CAAE,iBAAR;MACE,IAAC,gBAAD;aACA,IAAC,cAAD,GAFF;KAAA,MAGK,IAAG,WAAH;aACH,GAAG,CAAC,MAAJ,GAAa;eAAA;UACX,KAAC,gBAAD;iBACA,KAAC,cAAD;QAFW;MAAA,SADV;;EArBD;;+BA0BN,kBAAiB;WACf,IAAC,UAAD,CAAW,IAAC,MAAD,CAAO,OAAP,CAAX,EAA4B,MAA5B;EADe;;+BAGjB,gBAAe;IACb,IAAC,uBAAD;IACA,IAAC,GAAE,CAAC,SAAS,CAAC,GAAd,CAAkB,WAAlB;IAEA,IAAG,IAAC,QAAO,CAAC,IAAI,CAAC,MAAjB;MACE,IAAC,aAAD,CAAc,CAAd,EADF;;IAGA,IAAC,GAAE,CAAC;WACJ,IAAC,GAAE,CAAC,SAAS,CAAC,MAAd,CAAqB,eAArB;EARa;;+BAUf,YAAW,SAAC,EAAD;WACT;MAAA,GAAG,CAAC,EAAE,CAAC,IAAH,GAAU,EAAE,CAAC,IAAd,IAAsB,CAAzB;MACA,GAAG,CAAC,EAAE,CAAC,IAAH,GAAU,EAAE,CAAC,IAAd,IAAsB,CADzB;;EADS;;+BAIX,qBAAoB;WAClB,CAAC,CAAC,MAAF,CAAS,IAAC,MAAD,CAAO,WAAP,CAAmB,CAAC,QAA7B,EAAuC,SAAC,SAAD,EAAY,EAAZ;aACrC,aAAc,EAAE,CAAC,OAAO,CAAC;IADY,CAAvC,EAEE,IAFF;EADkB;;+BAKpB,cAAa,SAAC,CAAD;AACX;IAAA,KAAK,CAAC,CAAC;IACP,CAAC,CAAC,wBAAF;IAEA,IAAC,aAAD,CAAc,CAAC,EAAE,CAAC,OAAO,CAAC,KAA1B;IAEA,EAAE,CAAC,OAAO,CAAC,MAAX,GAAoB;IACpB,EAAE,CAAC,SAAS,CAAC,GAAb,CAAiB,QAAjB;IAEA,IAAG,IAAC,mBAAD,EAAH;aACE,IAAC,SAAD,CAAU,SAAV,EADF;;EATW;;+BAYb,mBAAkB,SAAC,CAAD;IAChB,CAAC,CAAC,wBAAF;WACA,IAAC,aAAD,CAAc,IAAI,CAAC,GAAL,CAAS,IAAC,aAAD,GAAgB,CAAzB,EAA4B,IAAC,OAAD,EAAS,CAAC,GAAtC,CAAd;EAFgB;;+BAIlB,mBAAkB,SAAC,CAAD;IAChB,CAAC,CAAC,wBAAF;WACA,IAAC,aAAD,CAAc,IAAI,CAAC,GAAL,CAAS,IAAC,aAAD,GAAgB,CAAzB,EAA4B,IAAC,OAAD,EAAS,CAAC,GAAtC,CAAd;EAFgB;;+BAIlB,wBAAuB;AACrB;IAAA,IAAG,IAAC,QAAO,CAAC,IAAI,CAAC,MAAjB;MACE,MAAe,IAAC,OAAD,EAAf,EAAE,aAAF,EAAO;MACP,IAAC,GAAE,CAAC,SAAS,CAAC,MAAd,CAAqB,eAArB,EAAsC,IAAC,aAAD,KAAiB,GAAvD;MACA,IAAC,GAAE,CAAC,SAAS,CAAC,MAAd,CAAqB,eAArB,EAAsC,IAAC,aAAD,KAAiB,GAAvD;MACA,IAAwB,IAAC,aAAD,KAAiB,GAAzC;eAAA,IAAC,SAAD,CAAU,SAAV;OAJF;;EADqB;;+BAOvB,SAAQ;WACN;MAAA,KAAK,CAAL;MACA,KAAK,IAAC,QAAO,CAAC,IAAI,CAAC,SAAS,CAAC,MAAxB,GAAiC,CADtC;;EADM;;+BAIR,eAAc,SAAC,YAAD;AACZ;IADa,IAAC,gBAAD;IACb,MAAiC,IAAC,QAAO,CAAC,IAAI,CAAC,SAAU,KAAC,aAAD,CAAzD,EAAE,mBAAF,EAAU,qBAAV,EAAmB;IACnB,SAAS;IAET,IAA2B,IAAC,WAA5B;MAAA,KAAK,CAAC,IAAN,CAAW,IAAC,WAAZ;;IACA,IAAG,CAAC,IAAC,WAAD,GAAc,SAAf,KAA8B,CAAI,IAAC,iBAAtC;MACE,IAAC,qBAAD;MACA,KAAK,CAAC,IAAN,CAAW,SAAX,EACE;QAAA,IAAI;iBAAA;mBAAG,KAAC,qBAAD;UAAH;QAAA,QAAJ;QACA,YAAY;iBAAA;YACV,KAAO,MAAP;cACE,SAAS;qBACT,KAAC,qBAAD,GAFF;;UADU;QAAA,QADZ;OADF,EAFF;;IASA,IAAC,aAAD;IACA,IAAC,sBAAD;IACA,IAAC,cAAD,CAAe,OAAf;WACA,IAAC,WAAD,CAAY,MAAZ;EAjBY;;+BAmBd,eAAc;IACZ,IAAyC,IAAC,WAA1C;MAAA,KAAK,CAAC,OAAN,CAAc,IAAC,WAAf,EAA2B,GAA3B,EAAgC,IAAhC;;IAEA,IAAG,CAAI,IAAC,QAAO,CAAC,IAAI,CAAC,MAArB;MACE,IAAC,cAAD;MACA,IAAC,SAAD,CAAU,KAAV,EAAiB,MAAjB;MACA,IAAC,QAAD,CAAS,IAAT,EAAe;QAAA,UAAU,KAAV;OAAf;aACA,IAAC,gBAAD,GAJF;;EAHY;;+BASd,aAAY,SAAC,MAAD,EAAS,MAAT;AACV;;MADmB,SAAS;;IAC5B,QAAY,IAAC,MAAD,CAAO,OAAP;IACZ,YAAY,IAAC,MAAD,CAAO,YAAP,CAAoB,CAAC,qBAArB;IACZ,MAAW,IAAC,UAAD,CAAW,MAAX,CAAX,EAAE,SAAF,EAAK;IAEL,gBAAiB,IAAC,GAAE,CAAC;IAErB,iBAAoB,UAAU,IAAC,QAAO,CAAC,IAAI,CAAC,MAA3B,GAAuC,MAAM,CAAC,WAAP,GAAqB,GAA5D,GAAqE,IAAC,GAAE,CAAC;IAE1F,cAAiB,CAAC,MAAM,CAAC,IAAP,GAAc,MAAM,CAAC,IAAtB,IAA8B,KAAK,CAAC;IACrD,eAAiB,CAAC,MAAM,CAAC,IAAP,GAAc,MAAM,CAAC,IAAtB,IAA8B,KAAK,CAAC;IAErD,aAAiB,gBAAgB;IACjC,cAAiB,iBAAiB;IAClC,IAAC,WAAD,GAAiB,WAAW,IAAI,CAAC,GAAL,CAAS,UAAT,EAAqB,WAArB,CAAX;IAGjB,aAAiB,CAAC,CAAD,GAAK,GAAL,GAAW,IAAC,WAAZ,GAAyB,EAAzB,GAA8B;IAC/C,aAAiB,CAAC,CAAD,GAAK,GAAL,GAAW,IAAC,WAAZ,GAAyB,EAAzB,GAA8B;WAC/C,IAAC,UAAD,CAAW,KAAX,EAAkB,gBAAc,UAAd,GAAyB,eAAzB,GAAwC,UAAxC,GAAmD,UAAnD,GAA6D,IAAC,WAA9D,GAAyE,GAA3F;EAnBU;;+BAqBZ,gBAAe,SAAC,OAAD;AACb;;MADc,UAAU;;IACxB,IAAC,SAAD,CAAU,QAAQ,OAAR,CAAV,EAA4B,SAA5B;IACA,IAAC,MAAD,CAAO,SAAP,CAAiB,CAAC,SAAlB,GAA8B,WAAW;IAEzC,IAAO,eAAP;aACE,IAAC,MAAD,CAAO,SAAP,CAAiB,CAAC,KAAK,CAAC,UAAxB,GAAqC,GADvC;KAAA,MAEK,oDAAyB,CAAE,mBAA3B;aACH,IAAC,MAAD,CAAO,SAAP,CAAiB,CAAC,KAAK,CAAC,UAAxB,GAAqC,IAAC,QAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,WADzD;;EANQ;;+BASf,yBAAwB;AACtB;IAAA,MAAM,IAAC,MAAD,CAAO,OAAP;IACN,kBAAkB,IAAC,MAAD,CAAO,WAAP,CAAmB,CAAC,UAAU,CAAC;IACjD,MAAc,iBAAS,yBAAvB;AAAA;;IAEA,IAAG,GAAG,CAAC,KAAJ,KAAa,CAAb,IAAkB,GAAG,CAAC,MAAJ,KAAc,CAAnC;MAGE,IAAG,eAAe,CAAC,WAAhB,GAA8B,eAAe,CAAC,YAAjD;QACE,IAAC,MAAD,CAAO,WAAP,CAAmB,CAAC,KAAK,CAAC,KAA1B,GAAqC,eAAe,CAAC,WAAjB,GAA6B,KADnE;OAAA;QAGE,IAAC,MAAD,CAAO,WAAP,CAAmB,CAAC,KAAK,CAAC,MAA1B,GAAsC,eAAe,CAAC,YAAjB,GAA8B,KAHrE;;AAIA,aAPF;;IASA,aAAa,eAAe,CAAC,WAAhB,GAA8B,GAAG,CAAC;IAC/C,cAAc,eAAe,CAAC,YAAhB,GAA+B,GAAG,CAAC;IACjD,QAAQ,IAAI,CAAC,GAAL,CAAS,UAAT,EAAqB,WAArB;IACR,kBAAmB;MACjB,OAAO,GAAG,CAAC,KAAJ,GAAY,KADF;MAEjB,QAAQ,GAAG,CAAC,MAAJ,GAAa,KAFJ;;IAInB,IAAC,MAAD,CAAO,WAAP,CAAmB,CAAC,KAAK,CAAC,KAA1B,GAAqC,eAAe,CAAC,KAAjB,GAAuB;WAC3D,IAAC,MAAD,CAAO,WAAP,CAAmB,CAAC,KAAK,CAAC,MAA1B,GAAsC,eAAe,CAAC,MAAjB,GAAwB;EAtBvC;;;;GAtNO;;AA+OjC,MAAM,CAAC,OAAP,GAAiB;;;CClPjB;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApDA;AAAA;;ACAA;EAAA;;;AAAA,YAAY,QAAQ,aAAR;;AACV,MAAU,QAAQ,YAAR;;AAEN;;;;;;;2BACJ,WAAU,QAAQ,YAAR;;2BAEV,SAAQ;AACN;IAAA,SAAW;IAEX,WAAc,IAAC,QAAO,CAAC,IAAI,CAAC,IAAd,KAAsB,MAAzB,GAAqC,WAArC,GAAsD;IACjE,IAAG,IAAC,QAAO,CAAC,IAAI,CAAC,WAAd,IAA8B,CAAI,IAAC,WAAD,EAArC;MACE,MAAO,UAAP,GAAmB,SADrB;KAAA;MAGE,MAAO,oBAAP,GAAiC;MACjC,MAAO,UAAP,GAAiC,WAJnC;;WAMA;EAVM;;2BAYR,YAAW;AACT;IAAA,OAAO;IAEP,IAAI,CAAC,UAAL,GAAkB,IAAC,WAAD;IAElB,IAAG,IAAI,CAAC,WAAL,IAAqB,CAAI,IAAI,CAAC,UAAjC;MACE,IAAI,CAAC,SAAL,GAAiB;MACjB,IAAI,CAAC,MAAL,GAAc,KAAK,uBAAL,EAFhB;KAAA,MAGK,IAAG,IAAI,CAAC,UAAR;MACH,IAAI,CAAC,SAAL,GAAiB,KADd;;WAGL;EAXS;;2BAaX,aAAY;AACV;2DAAqB,CAAE,eAAvB,sDAAqD,CAAE;EAD7C;;2BAGZ,aAAY;WACV,IAAC,QAAD,CAAS,IAAT,EAAe;MAAA,gBAAgB,IAAhB;KAAf;EADU;;2BAGZ,aAAY;AACV;;;YAA+B,CAAE,SAAS,CAAC,GAA3C,CAA+C,mBAA/C;;;IACA,yCAAa,CAAE,kBAAf,CACE,CAAC,OADH,CACW,aADX,CAEE,CAAC,IAFH,CAEQ,OAFR,EAEiB,MAFjB;;UAIW,CAAE,KAAb;;WACA,IAAC,QAAD,CAAS,IAAT,EAAe;MAAA,gBAAgB,KAAhB;KAAf;EAPU;;2BASZ,OAAM;AACJ;IAAA,IAAC,SAAD,CAAU,KAAV,EAAiB,OAAjB;IACA,IAAC,SAAD,CAAU,QAAV;IACA,MAAM,IAAC,QAAD,CAAS,KAAT;IAEN,SAAS;aAAA;QACP,GAAG,CAAC,mBAAJ,CAAwB,MAAxB,EAAgC,MAAhC;QACA,KAAC,SAAD,CAAU,IAAV,EAAgB,QAAhB;QACA,IAAe,KAAC,QAAO,CAAC,IAAI,CAAC,SAA7B;iBAAA,KAAC,SAAD;;MAHO;IAAA;IAKT,IAAG,GAAG,CAAC,QAAP;aACE,SADF;KAAA;aAGE,GAAG,CAAC,gBAAJ,CAAqB,MAArB,EAA6B,MAA7B,EAHF;;EAVI;;2BAeN,WAAU,SAAC,CAAD,EAAI,qBAAJ;AACR;;MADY,wBAAwB;;IACpC,IAAC,SAAD,CAAU,SAAV;IACA,IAAC,SAAD,CAAU,IAAV,EAAgB,OAAhB;IAEA,MAAM,IAAC,QAAD,CAAS,KAAT;IACN,MAAS,IAAC,QAAO,CAAC,IAAI,CAAC,OAAjB,GAA8B,EAA9B,GAAsC;IAC5C,MAAuB,GAAG,CAAC,qBAAJ,EAAvB,EAAE,aAAF,EAAO,eAAP,EAAa;IACb,cAAc;MAAE,GAAG,OAAO,GAAZ;MAAiB,GAAG,MAAM,GAA1B;MAA+B,GAAG,QAAQ,MAAM,CAAhD;;IAEd,IAAC,WAAD,GAAc,IAAI,UAAJ,CACZ,QAAQ,CAAC,aAAT,CAAuB,aAAvB,CADY,EAEZ,oBAFY,EAGZ;MACE;QAAA,MAAM,GAAG,CAAC,GAAV;QACA,KAAM,GAAG,CAAC,GADV;QAEA,OACE,OAAO,CAAC,SAAR,CAAkB,IAAC,QAAO,CAAC,IAAI,CAAC,OAAO,CAAC,KAAxC,EAA+C,IAA/C,IACA,OAAO,CAAC,SAAR,CAAkB,IAAC,QAAO,CAAC,IAAI,CAAC,OAAO,CAAC,OAAxC,EAAiD,KAAjD,CAJF;QAKA,GAAG,CAAC,GAAG,CAAC,YAAJ,IAAqB,GAAG,CAAC,KAA1B,IAAoC,IAAI,CAAC,GAAL,CAAS,GAAT,EAAc,IAAd,CALvC;QAMA,GAAG,CAAC,GAAG,CAAC,aAAJ,IAAqB,GAAG,CAAC,MAA1B,IAAoC,IAAI,CAAC,GAAL,CAAS,GAAT,EAAc,IAAd,CANvC;OADF;KAHY,EAYZ;MACE,4CADF;MAEE,OAAO,KAFT;MAGE,SAAS,KAHX;MAIE,UAAU;QAAC,KAAK,CAAN;QAAS,QAAQ,CAAjB;OAJZ;MAKE,kBAAkB;eAAG;MAAH,CALpB;KAZY;IAqBd,IAAC,WAAU,CAAC,MAAZ,CAAmB,OAAnB,EAA4B;aAAA;eAAG,KAAC,SAAD,CAAU,KAAV,EAAiB,OAAjB;MAAH;IAAA,QAA5B;WACA,IAAC,WAAU,CAAC,IAAZ;EA/BQ;;2BAiCV,SAAQ,SAAC,CAAD;;MACN,CAAC,CAAE,wBAAH;;WACA;EAFM;;2BAIR,UAAS,SAAC,MAAD;AACP;IAAA,IAAG,CAAC,CAAC,OAAF,CAAU,MAAM,CAAC,IAAI,CAAC,OAAtB,EAA+B,IAAC,QAAO,CAAC,IAAI,CAAC,OAA7C,CAAH;;WACa,CAAE,KAAb;OADF;KAAA;MAGE,cAAc,KAHhB;;IAKA;IAEA,IAAG,WAAH;aACE,IAAC,SAAD,CAAU,IAAV,EAAgB,CAAhB,EADF;;EARO;;;;GA/FkB;;AA2G7B,MAAM,CAAC,OAAP,GAAiB;;;CC9GjB;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvDA;AAAA;;ACAA;EAAA;;;AAAA,YAAY,QAAQ,aAAR;;AAEN;;;;;;;qBACJ,WAAU,QAAQ,YAAR;;qBAEV,SACE;IAAA,oBAAoB,QAApB;;;;;GAJmB;;AAMvB,MAAM,CAAC,OAAP,GAAiB;;;CCRjB;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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B,QAAhB;MADqD,CAApC;MAEnB,iBAAiB,CAAC,CAAC,MAAF,CAAS,CAAC,CAAC,OAAX,EAAoB,SAAC,CAAD;eACnC,CAAC,CAAC,OAAF,KAAa,IAAC,EAAD,CAAG,gBAAH,CAAoB,CAAC,IAArB;MADsB,CAApB;MAEjB,kBAAkB;QAAA,UAAU,CAAC,CAAC,QAAZ;QAAsB,QAAQ,cAAe,GAA7C;;MAClB,OAAO,CAAC,IAAR,CAAa,eAAb;AAPF;WASA;EAjBa;;;;GA5EQ;;AA+FzB,MAAM,CAAC,OAAP,GAAiB;;;CCjGjB;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7IA;AAAA;;ACAA;EAAA;;;;AAAA,YAAY,QAAQ,aAAR;;AAEN;;;;;;;;;gCACJ,WAAU,QAAQ,YAAR;;gCACV,kBAAiB;;gCACjB,kBAAiB;;gCAEjB,SAAQ;WACN;MACE,oBAAoB,QADtB;MAEE,UAAU,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BAAgB,SAAC,KAAD;WACd,IAAC,QAAO,CAAC,IAAI,CAAC,OAAQ,OAAM,CAAC,WAA7B,IAA4C;EAD9B;;gCAGhB,UAAS,SAAC,MAAD;AACP;IAAA,IAAG,MAAM,CAAC,IAAI,CAAC,OAAZ,IAAwB,IAAC,QAAO,CAAC,IAAI,CAAC,OAAtC,IAAkD,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,MAApB,KAA8B,IAAC,QAAO,CAAC,IAAI,CAAC,OAAO,CAAC,MAAzG;AACE;AAAA;uBAAM,wBAAS;QACb,IAAG,gEACqB,CAAE,iBAA1B,KAAuC,OADpC,yDAEqB,CAAE,iBAA1B,KAAuC,OAFvC;UAGE,iBAAiB,EAHnB;;AADF,OADF;;IAOA,iDAAM,MAAN;IAEA,IAAG,4BAAoB,SAAQ,IAAC,MAAD,CAAO,SAAP,CAAiB,CAAC,QAAS,gBAAnC,CAAvB;aACE,IAAC,YAAD,CAAa,KAAb,EAAoB,KAApB,EADF;;EAVO;;;;GArJuB;;AAkKlC,MAAM,CAAC,OAAP,GAAiB;;;CCpKjB;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtGA;AAAA;;ACAA;EAAA;;;AAAA,WAAY,QAAQ,iBAAR;;AACV,aAAe,QAAQ,yBAAR;;AACjB,UAAY,QAAQ,aAAR;;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AAsC,cAAtC;;MATsB;IAAA,QAAd;AAWV,WAAO;EAfM;;4BAiBf,UAAS;IACP,8CAAM,SAAN;WAEA,IAAC,OAAD;EAHO;;;;GAnNmB;;AAwN9B,MAAM,CAAC,OAAP,GAAiB;;;CC5NjB;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhIA;AAAA;;ACAA;EAAA;;;;;AAAA,WAAY,QAAQ,iBAAR;;AACV,MAAU,QAAQ,YAAR;;AAEN;;;;;;;mCACJ,WAAU,QAAQ,YAAR;;mCAEV,SACE;IAAA,sBAAsB,cAAtB;IACA,oBAAoB,SADpB;IAEA,uCAAuC,UAFvC;;;mCAIF,YAAW;AACT;IAAA,OAAO;IAEP,mFAAqC,CAAE,0BAA7B,IAAwC;IAClD,UAAU,OAAO,CAAC,MAAR,CAAe,SAAC,CAAD;aAAO;IAAP,CAAf;IAEV,UAAU,CAAC,CAAC,GAAF,CAAM,OAAN,EAAe,SAAC,MAAD;AAAY;oDAAc,CAAE,gBAAhB,IAA0B;IAAtC,CAAf;IACV,iDAAyB,CAAE,gBAAjB,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UAAU,QAAQ,CAAC,QAAnB;QAA6B,QAAQ,CAArC;;IAAP,CAAZ;AACX,WAAO;EARM;;mCAUf,YAAW;AACT;IAAA,WAAW,IAAC,MAAD,CAAO,UAAP;IACX,UAAW,CAAC,CAAC,KAAF,CAAQ,IAAC,MAAD,CAAO,SAAP,CAAR,CACT,CAAC,MADQ,CACD,SAAC,EAAD;aAAQ,EAAE,CAAC,SAAS,CAAC,QAAb,CAAsB,SAAtB;IAAR,CADC,CAET,CAAC,KAFQ;WAIX,IAAC,aAAD,CAAc,OAAd,EAAuB,QAAvB,KAAqC,IAAC,aAAD,CAAc,QAAd,EAAwB,OAAxB;EAN5B;;;;GA/IwB;;AAuJrC,MAAM,CAAC,OAAP,GAAiB;;;CC1JjB;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtHA;AAAA;;ACAA;EAAA;;;;AAAA,YAAY,QAAQ,aAAR;;AACV,MAAU,QAAQ,YAAR;;AAEN;;;;;;;qCACJ,WAAU,QAAQ,YAAR;;qCAEV,SACE;IAAA,sBAAsB,cAAtB;IACA,oBAAsB,WADtB;IAEA,uCAAuC,UAFvC;;;qCAIF,YAAW;AACT;IAAA,OAAO;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CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3HA;AAAA;;ACAA;EAAA;;;;AAAA,WAAc,QAAQ,iBAAR;;AACd,SAAS,QAAQ,yBAAR;;AAEH;;;;;;;;6BACJ,WAAU,QAAQ,YAAR;;6BAEV,SACE;IAAA,oBAAoB,SAApB;;;6BAEF,YAAW;AACT;IAAA,OAAO;IAEL,kBAAF,EAAS,oBAAT,EAAiB;IACf,sBAAF,EAAU;IAEV,IAAG,QAAQ,CAAC,IAAT,CAAc,KAAd,CAAH;MACE,OAAO,KAAK,CAAC,KAAN,CAAY,UAAZ,EADT;KAAA;MAGE,MAAM,KAAG,MAAH,GAAY,MAAM,CAAC,KAAnB,GAA2B;MACjC,oBAAM,GAAG,CAAE,OAAL,CAAa,SAAb,EAAwB,SAAC,CAAD;eAAO,OAAO;MAAd,CAAxB;MACN,WAAW,IAAI,MAAJ,CAAW,SAAO,GAAP,GAAW,MAAtB;MACX,OAAO,CAAC,SAAS,EAAV,CAAa,CAAC,KAAd,CAAoB,QAApB,EANT;;IAQA,IAAI,CAAC,MAAL,GAAc,MAAM,CAAC,MAAP,GAAgB,MAAM,CAAC,MAAvB,GAAgC;IAC9C,IAAI,CAAC,MAAL,GAAc,IAAK;IACnB,IAA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C;;;;ACjBlC,OAAO,CAAC,2BAAR,GAAsC;SACpC;IACE,YAAY,CADd;IAEE,OAAO;MACL;QACE,UAAU,GADZ;QAEE,SAAS,GAFX;QAGE,IAAI,GAHN;QAIE,OAAO,uBAJT;QAKE,aAAa,YALf;QAME,KAAK,mBANP;OADK,EASL;QACE,UAAU,GADZ;QAEE,SAAS,GAFX;QAGE,IAAI,GAHN;QAIE,OAAO,0BAJT;QAKE,aAAa,YALf;QAME,KAAK,mBANP;OATK,EAiBL;QACE,UAAU,GADZ;QAEE,SAAS,GAFX;QAGE,IAAI,GAHN;QAIE,OAAO,iBAJT;QAKE,aAAa,YALf;QAME,KAAK,mBANP;OAjBK,EAyBL;QACE,UAAU,GADZ;QAEE,SAAS,GAFX;QAGE,IAAI,GAHN;QAIE,OAAO,sBAJT;QAKE,aAAa,YALf;QAME,KAAK,mBANP;OAzBK;KAFT;;AADoC;;AAuCtC,OAAO,CAAC,sBAAR,GAAiC;SAC/B;IACE,YAAY,CADd;IAEE,OAAO,EAFT;;AAD+B;;;CCvCjC;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApDA;AAAA;CCAA;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhCA;AAAA;;ACAA;EAAA;;;;AAAA,iBAAiB,QAAQ,oBAAR;;AACjB,YAAiB,QAAQ,aAAR;;AACjB,MAA2B,QAAQ,YAAR,CAA3B,EAAE,aAAF,EAAO;;AACP,YAAiB,QAAQ,aAAR;;AACf,UAAe,QAAQ,WAAR;;AACj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A4B,YAA5B;QAAA,IAAC,SAAD,CAAU,SAAV;OAFF;;IAIA,IAAG,EAAE,CAAC,YAAH,GAAkB,EAAE,CAAC,YAArB,IAAsC,MAAM,CAAC,QAAP,KAAmB,KAA5D;MAGE,EAAE,CAAC,KAAK,CAAC,aAAT,GAAyB;MACzB,EAAE,CAAC,SAAH,GAAe;aACf,MAAM,CAAC,UAAP,CAAkB;QAChB,EAAE,CAAC;QACH,EAAE,CAAC,SAAH,GAAe;eACf,EAAE,CAAC,KAAK,CAAC,aAAT,GAAyB;MAHT,CAAlB,EAIE,EAJF,EALF;;EA5BS;;2BAwCX,UAAS;AACP;IAAA,WAAY,IAAC,QAAD,CAAS,iBAAT;IACZ,YAAY,QAAQ,CAAC;IAErB;WAEA,IAAC,UAAD,CAAW,KAAX,EAAkB,SAAlB;EANO;;2BAQT,mBAAkB;WAChB,IAAC,UAAD;EADgB;;2BAGlB,sBAAqB;WACnB,IAAC,UAAD,CAAW,IAAX;EADmB;;;;GApFM;;AAuF7B,MAAM,CAAC,OAAP,GAAiB;;;CC1FjB;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjHA;AAAA;;ACAA;EAAA;;;AAAA,iBAAiB,QAAQ,oBAAR;;AACjB,YAAiB,QAAQ,aAAR;;AACf,MAAe,QAAQ,YAAR;;AAEX;;;;;;;+BACJ,WAAU,QAAQ,YAAR;;+BACV,uBAAsB;;+BAEtB,SAAQ;WACN,CAAC,CAAC,MAAF,CAAS,0DAAT,EACE;MAAA,uCAAuC,UAAvC;KADF;EADM;;+BAIR,YAAW,SAAC,mBAAD,EAAsB,CAAtB;AACT;IAAA,WAAW,IAAC,QAAD,CAAS,iBAAT;IAEX,SAAS,CAAC,CAAC,KAAF,CAAQ,IAAC,QAAD,CAAS,KAAT,CAAR,EAAyB,KAAzB;WAET,SAAS,CAAC,IAAV,CAAe,MAAf,EAAuB;aAAA,SAAC,CAAD;eACrB,mDAAM,mBAAN,EAA2B,CAA3B;MADqB;IAAA,QAAvB;EALS;;+BAQX,OAAM;IACJ;WACA,IAAC,SAAD,CAAU,CAAI,IAAC,QAAO,CAAC,IAAI,CAAC,YAA5B,EAA0C,aAA1C;EAFI;;+BAIN,YAAW;AACT;;SAAW,CAAE,KAAb;;WACA,IAAC,KAAD;EAFS;;+BAIX,OAAM;AACJ;IAAA;gDACW,CAAE,KAAb;EAFI;;+BAIN,WAAU,SAAC,CAAD,EAAI,qBAAJ;AACR;;MADY,wBAAwB;;IACpC,IAAU,IAAC,QAAO,CAAC,IAAI,CAAC,YAAxB;AAAA;;IAEA,IAAC,SAAD,CAAU,SAAV;IACA,IAAC,SAAD,CAAU,IAAV,EAAgB,OAAhB;IAEA,cAAc,CAAC,CAAC,aAAa,CAAC,aAAhB,CAA8B,KAA9B;IAEd,MAAS,IAAC,QAAO,CAAC,IAAI,CAAC,OAAjB,GAA8B,EAA9B,GAAsC;IAC5C,MAAuB,WAAW,CAAC,qBAAZ,EAAvB,EAAE,aAAF,EAAO,eAAP,EAAa;IACb,cAAc;MAAE,GAAG,OAAO,GAAZ;MAAiB,GAAG,MAAM,GAA1B;MAA+B,GAAG,QAAQ,MAAM,CAAhD;;IAEd;;AACE;AAAA;WAAA;;QACE,IAAa,QAAO,WAApB;UAAA,QAAQ,EAAR;;qBACA;UAAA,KAAK,GAAL;UACA,MAAM,GAAG,CAAC,GADV;UAEA,KAAM,GAAG,CAAC,GAFV;UAGA,GAAG,CAAC,GAAG,CAAC,YAAJ,IAAqB,GAAG,CAAC,KAA1B,IAAoC,IAAI,CAAC,GAAL,CAAS,GAAT,EAAc,IAAd,CAHvC;UAIA,GAAG,CAAC,GAAG,CAAC,aAAJ,IAAqB,GAAG,CAAC,MAA1B,IAAoC,IAAI,CAAC,GAAL,CAAS,GAAT,EAAc,IAAd,CAJvC;;AAFF;;;IAQF,IAAC,WAAD,GAAc,IAAI,UAAJ,CACZ,QAAQ,CAAC,aAAT,CAAuB,aAAvB,CADY,EAEZ,oBAFY,EAGZ,MAHY,EAIZ;MACE,YADF;MAEE,4CAFF;MAGE,OAAO,KAHT;MAIE,SAAS,KAJX;MAKE,UAAU;QAAE,KAAK,CAAP;QAAU,QAAQ,CAAlB;OALZ;MAME,mBAAmB,MANrB;MAOE,kBAAkB;eAAG;MAAH,CAPpB;KAJY;IAcd,IAAC,WAAU,CAAC,MAAZ,CAAmB,OAAnB,EAA4B;aAAA;eAAG,KAAC,SAAD,CAAU,KAAV,EAAiB,OAAjB;MAAH;IAAA,QAA5B;WACA,IAAC,WAAU,CAAC,IAAZ;EApCQ;;;;GA5BqB;;AAkEjC,MAAM,CAAC,OAAP,GAAiB;;;CCtEjB;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7FA;AAAA;;ACAA;EAAA;;;AAAA,YAAa,QAAQ,aAAR;;AACb,aAAa,QAAQ,oBAAR;;AAEP;;;;;;;6BACJ,WAAU,QAAQ,YAAR;;6BAEV,SAAQ;WACN;MAAA,oBAAoB,WAApB;;EADM;;6BAGR,OAAM;IACJ,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,mBAAT,CAAP,EAAsC,WAAtC;IACA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,mBAAT,CAAP,EAAsC,WAAtC;WAEA;EAJI;;6BAMN,YAAW;WACT;MAAA,UACE;QAAA,IAAI,IAAC,QAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,EAA3B;QACA,SAAS,IAAC,QAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,OADhC;OADF;MAGA,QACE;QAAA,OAAO,WAAW,IAAC,aAAZ,CAAP;OAJF;;EADS;;6BAOX,YAAW;WACT,SAAS,UAAE,UAAS,CAAC,IAArB,CAA0B,IAA1B;EADS;;6BAGX,SAAQ,SAAC,MAAD;IACN;WACA,IAAC,YAAD,CAAa,MAAb;EAFM;;6BAIR,SAAQ,SAAC,MAAD;IACN;WACA,IAAC,YAAD,CAAa,MAAb;EAFM;;6BAIR,cAAa,SAAC,MAAD;AACX;IAAA,UAAU,MAAM,CAAC,CAAP,GAAW,MAAM,CAAC,MAAM,CAAC;IACnC,MAAU;IACV,UAAU,CAAC,UAAU,CAAC,IAAI,GAAL,CAAX,IAAwB;IAClC,IAAG,IAAC,QAAO,CAAC,MAAT,EAAiB,CAAC,SAAlB,KAA+B,KAAlC;MACE,UAAU,IAAI,QADhB;;;SAEmB,CAAE,KAAK,CAAC,OAA3B,GAAqC,CAAC,IAAI,GAAL,IAAY;;0DAC9B,CAAE,KAAK,CAAC,OAA3B,GAAqC;EAP1B;;;;GA9BgB;;AAuC/B,MAAM,CAAC,OAAP,GAAiB;;;CC1CjB;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxFA;AAAA;;ACAA;EAAA;;;AAAA,WAAc,QAAQ,iBAAR;;AACZ,aAAgB,QAAQ,yBAAR;;AAEZ;;;;;;;uBACJ,WAAU,QAAQ,YAAR;;uBAEV,SACE;IAAA,oBAAoB,SAApB;;;uBAEF,YAAW;AACT;IAAA,IAAI;IAEJ,CAAC,CAAC,MAAM,CAAC,SAAT,GAAqB,WAAW,CAAC,CAAC,MAAM,CAAC,SAApB,EAA+B,EAA/B,KAAsC;IAC3D,CAAC,CAAC,MAAM,CAAC,GAAT,GAAe,WAAW,CAAC,CAAC,MAAM,CAAC,GAApB;IACf,CAAC,CAAC,MAAM,CAAC,GAAT,GAAe,WAAW,CAAC,CAAC,MAAM,CAAC,GAApB;IACf,IAAoB,CAAC,CAAC,KAAF,CAAQ,CAAC,CAAC,MAAM,CAAC,GAAjB,CAApB;MAAA,CAAC,CAAC,MAAM,CAAC,GAAT,GAAe,EAAf;;IACA,IAAqB,CAAC,CAAC,KAAF,CAAQ,CAAC,CAAC,MAAM,CAAC,GAAjB,CAArB;MAAA,CAAC,CAAC,MAAM,CAAC,GAAT,GAAe,GAAf;;IAEA,IAAG,CAAC,CAAC,MAAM,CAAC,GAAT,GAAe,CAAC,CAAC,MAAM,CAAC,GAA3B;MACE,MAAM,CAAC,CAAC,MAAM,CAAC;MACf,CAAC,CAAC,MAAM,CAAC,GAAT,GAAe,CAAC,CAAC,MAAM,CAAC;MACxB,CAAC,CAAC,MAAM,CAAC,GAAT,GAAe,IAHjB;;IAKA,CAAC,CAAC,KAAF,GAAU,CAAC,CAAC,MAAM,CAAC,GAAT,GAAe,CAAC,CAAC,MAAM,CAAC;IAClC,CAAC,CAAC,OAAF,GAAY,IAAI,CAAC,KAAL,CAAW,CAAC,CAAC,KAAF,GAAU,CAAC,CAAC,MAAM,CAAC,SAA9B;IAEZ,CAAC,CAAC,MAAF,GACE,CAAC,CAAC,OAAF,CAAU,CAAC,CAAC,OAAF,CAAU,CAAC,CAAC,OAAZ,CAAoB,CAAC,GAArB,CAAyB,SAAC,CAAD;aAAO,IAAI;IAAX,CAAzB,CAAV,EAAkD,CAAC,CAAC,MAAM,CAAC,MAA3D;IAEF,CAAC,CAAC,WAAF,GAAgB;;;;kBAAc,CAAC,GAAf,CAAmB,SAAC,CAAD;AACjC;MAAA,QAAQ,IAAI,GAAJ,CAAQ,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,CAAC,OAAN,GAAgB,CAAC,CAAC,CAAC,MAAF,GAAW,CAAZ,CAA3B,CAAR;MACR,QAAQ,KAAK,CAAC,GAAN,CAAU,CAAC,CAAC,MAAM,CAAC,SAAnB,CAA6B,CAAC,GAA9B,CAAkC,CAAC,CAAC,MAAM,CAAC,GAA3C;aACR;IAHiC,CAAnB;WAIhB;EAxBS;;uBA0BX,aAAY;WACV,IAAC,QAAD,CAAS,IAAT,EAAe;MAAA,gBAAgB,IAAhB;KAAf;EADU;;uBAGZ,aAAY;WACV,IAAC,QAAD,CAAS,IAAT,EAAe;MAAA,gBAAgB,KAAhB;KAAf;EADU;;uBAGZ,OAAM;IACJ;IAEA,OAAO,IAAC;IAER,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,SAAT,CAAP,EAA4B,QAA5B;IACA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,oBAAT,CAAP,EAAuC,YAAvC;IACA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,oBAAT,CAAP,EAAuC,YAAvC;IACA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,qBAAT,CAAP,EAAwC,aAAxC;IAEA,IAAC,aAAD;IACA,IAAC,OAAM,CAAC,KAAR,CAAc;MAAA,GAAG,IAAC,OAAM,CAAC,MAAM,CAAC,KAAf,GAAuB,CAA1B;KAAd;WAEA,IAAC,UAAD;EAbI;;uBAeN,eAAc;AACZ;IAAA,QAAQ,IAAC,MAAD,CAAO,QAAP,CAAgB,CAAC;IAEzB,IAAC,OAAD,GAAU,IAAI,UAAJ,CACR;MAAA,IAAI,IAAC,MAAD,CAAO,QAAP,CAAJ;MACA,MAAM,CADN;MAEA,MAAM,KAFN;MAGA,MAAM,GAHN;MAIA,UAAU,IAJV;KADQ;IAOV,IAAG,IAAC,QAAO,CAAC,MAAT,EAAiB,CAAC,SAAlB,KAA+B,KAAlC;MACE,IAAC,OAAM,CAAC,KAAR,CAAc;QAAA,GAAG,KAAH;OAAd;MACA,IAAC,UAAD,CAAW,IAAC,MAAD,CAAO,YAAP,CAAX,EAAiC;QAAA,GAAG,KAAH;OAAjC;MACA,IAAC,MAAD,CAAO,YAAP,CAAoB,CAAC,YAHvB;;IAKA,IAAC,SAAD,CAAU,IAAC,OAAX,EAAmB,MAAnB,EAA2B,IAAC,OAA5B;IACA,IAAC,SAAD,CAAU,IAAC,OAAX,EAAmB,MAAnB,EAA2B,IAAC,OAA5B;WACA,IAAC,SAAD,CAAU,IAAV,EAAgB,QAAhB,EAA0B,IAAC,SAA3B;EAjBY;;uBAmBd,SAAQ,SAAC,MAAD,EAAS,aAAT;IACN,IAAC,aAAD,GAAgB,IAAC,WAAD,CAAY,MAAZ;IAEhB,IAAC,QAAD,CAAS,IAAC,MAAD,CAAO,YAAP,CAAT,EAA+B,IAAC,aAAhC;WACA,IAAC,UAAD,CAAW,IAAC,MAAD,CAAO,YAAP,CAAX,EACE;MAAA,GAAG,MAAM,CAAC,CAAV;MACA,OAAO,IADP;MAEA,YAAe,aAAH,GAAsB,WAAtB,GAAuC,MAFnD;KADF;EAJM;;uBASR,SAAQ,SAAC,MAAD,EAAS,OAAT;AACN;IAAA,IAAI,IAAC,SAAD,CAAU,MAAV;IAEJ,IAAG,MAAM,CAAC,CAAP,KAAc,CAAd,IAAoB,CAAI,OAA3B;aACE,MAAM,CAAC,KAAP,CAAa;QAAC,IAAD;OAAb,EADF;KAAA;MAGE,IAAC,UAAD,CAAW,IAAC,MAAD,CAAO,YAAP,CAAX,EACE;QAAA,GAAG,MAAM,CAAC,CAAV;QACA,YAAY,WADZ;OADF;MAIA,IAAG,yBAAH;QACE,IAAC,QAAD,CAAS,IAAC,MAAD,CAAO,YAAP,CAAT,EAA+B,IAAC,aAAhC;eACA,IAAC,SAAD,CAAU,SAAV,EAFF;OAPF;;EAHM;;uBAcR,aAAY,SAAC,MAAD;AACV;IAAA,MAAwB,IAAC,QAAO,CAAC,IAAI,CAAC,MAAtC,EAAC,yBAAD,EAAY,aAAZ,EAAiB;WAEjB,IAAI,MAAM,GAAV,CACE,CAAC,GADH,CACO,IAAC,aAAD,CAAc,MAAd,CADP,CAEE,CAAC,GAFH,CAEO,SAFP,CAGE,CAAC,KAHH,EAIE,CAAC,GAJH,CAIO,SAJP,CAKE,CAAC,IALH,CAKQ,GALR;EAHU;;uBAUZ,WAAU,SAAC,MAAD;AACR;IAAA,UAAU,IAAC,aAAD,CAAc,MAAd;IACV,IAAyB,IAAC,QAAO,CAAC,MAAT,EAAiB,CAAC,SAAlB,KAA+B,KAAxD;MAAA,UAAU,IAAI,QAAd;;WACA,UAAU,MAAM,CAAC,MAAM,CAAC;EAHhB;;uBAKV,eAAc,SAAC,MAAD;AACZ;IAAA,MAAwB,IAAC,QAAO,CAAC,IAAI,CAAC,MAAtC,EAAC,yBAAD,EAAY,aAAZ,EAAiB;IAEjB,MAAU,IAAI,GAAJ,CAAQ,CAAC,GAAT,CAAa,GAAb,CAAiB,CAAC,GAAlB,CAAsB,SAAtB,CAAgC,CAAC,KAAjC,EAAwC,CAAC,GAAzC,CAA6C,SAA7C,CAAuD,CAAC,IAAxD,CAA6D,GAA7D;IACV,UAAU,CAAC,CAAC,KAAF,CAAQ,MAAM,CAAC,CAAP,GAAW,MAAM,CAAC,MAAM,CAAC,KAAjC,EAAwC,CAAxC,EAA2C,CAA3C,KAAiD;IAC3D,QAAU,IAAI,GAAJ,CAAQ,CAAC,GAAT,CAAa,GAAb,CAAiB,CAAC,GAAlB,CAAsB,SAAtB,CAAgC,CAAC,OAAjC;IACV,UAAa,QAAQ,CAAX,GAAkB,IAAI,KAAJ,CAAU,CAAC,GAAX,CAAe,OAAf,CAAuB,CAAC,KAAxB,EAA+B,CAAC,GAAhC,CAAoC,KAApC,CAAlB,GAAkE;IAC5E,IAAyB,IAAC,QAAO,CAAC,MAAT,EAAiB,CAAC,SAAlB,KAA+B,KAAxD;MAAA,UAAU,IAAI,QAAd;;WACA;EARY;;uBAUd,WAAU,SAAC,CAAD,EAAI,IAAJ;AACR;IAAA,MAAa,IAAC,QAAO,CAAC,IAAI,CAAC,MAA3B,EAAC,aAAD,EAAM;IACN,UAAU,CAAC,IAAC,aAAD,GAAgB,GAAjB,IAAwB,CAAC,MAAM,GAAP,CAAxB,IAAuC;IACjD,IAAC,OAAM,CAAC,OAAO,CAAC,IAAhB,GAAuB,IAAC,OAAM,CAAC,EAAE,CAAC;IAClC,IAAC,OAAM,CAAC,KAAR,CAAc;MAAA,GAAG,UAAU,IAAC,OAAM,CAAC,EAAE,CAAC,WAAxB;KAAd;WACA,IAAC,kBAAD,CAAmB,IAAC,MAAD,CAAO,aAAP,CAAnB;EALQ;;uBAOV,UAAS,SAAC,EAAD,EAAK,KAAL;AACP;IAAA,MAA6B,IAAC,QAAO,CAAC,IAAI,CAAC,MAA3C,EAAC,mBAAD,EAAS,mBAAT,EAAiB;IAEjB,WAAW,WAAW,QAAX,EAAqB,EAArB,KAA4B;IACvC,IAAmD,WAAW,CAA9D;MAAA,QAAQ,WAAW,KAAX,EAAkB,EAAlB,CAAqB,CAAC,OAAtB,CAA8B,QAA9B,EAAR;;WACA,EAAE,CAAC,SAAH,GAAe,KAAG,MAAH,GAAY,KAAZ,GAAoB;EAL5B;;uBAOT,YAAW;AACT;WAAA,8GACA,2BADA,IAEA,IAAC,aAAY,CAAC,EAAd,CAAiB,IAAC,QAAO,CAAC,IAAI,CAAC,MAAM,CAAC,KAAtC;EAHS;;uBAKX,aAAY;IACV,IAAC,UAAD,CAAW,IAAC,MAAD,CAAO,aAAP,CAAX,EAAkC;MAAA,GAAG,IAAC,OAAM,CAAC,CAAX;KAAlC;IACA,IAAC,kBAAD,CAAmB,IAAC,MAAD,CAAO,aAAP,CAAnB;WAEA,IAAC,OAAM,CAAC,IAAR;EAJU;;uBAMZ,oBAAmB,SAAC,EAAD;AACjB;IAAA,MAAmB,IAAC,QAAO,CAAC,IAA5B,EAAC,mBAAD,EAAS;IACT,KAAc,MAAd;AAAA;;IAEC,4BAAD,EAAY,gBAAZ,EAAiB;IACjB,MAAU,IAAI,GAAJ,CAAQ,CAAC,GAAT,CAAa,GAAb,CAAiB,CAAC,GAAlB,CAAsB,SAAtB,CAAgC,CAAC,KAAjC,EAAwC,CAAC,GAAzC,CAA6C,SAA7C,CAAuD,CAAC,IAAxD,CAA6D,GAA7D;IACV,UAAU,CAAC,MAAM,CAAC,KAAP,GAAe,GAAhB,IAAuB,CAAC,MAAM,GAAP;IACjC,IAAyB,IAAC,QAAO,CAAC,MAAT,EAAiB,CAAC,SAAlB,KAA+B,KAAxD;MAAA,UAAU,IAAI,QAAd;;IAEA,EAAE,CAAC;WAEH,IAAC,UAAD,CAAW,EAAX,EACE;MAAA,GAAG,UAAU,IAAC,OAAM,CAAC,MAAM,CAAC,KAA5B;MACA,YAAe,IAAC,OAAM,CAAC,MAAX,GAAuB,MAAvB,GAAmC,WAD/C;KADF;EAXiB;;uBAenB,gBAAe;AACb;IAAA,wDAAgC,CAAE,mBAAnB,IAAgC;IAC/C,MAAiB,SAAS,CAAC,MAAV,GAAmB,CAApC;AAAA,aAAO,GAAP;;IAEA,WAAmB,SAAU;IAC7B,UAAmB,IAAC,UAAD;IACnB,QAAmB,OAAO,IAAC,aAAR;IAEnB,SAAmB,CAAC,CAAC,IAAF,CAAO,QAAQ,CAAC,OAAhB,EAAyB,SAAC,CAAD;aAAO,CAAC,CAAC,OAAF,KAAa;IAApB,CAAzB;IACnB,MAAM,CAAC,OAAP,GAAmB;IACnB,UAAmB;MAAA,UAAU,QAAQ,CAAC,QAAnB;MAA6B,QAAQ,MAArC;;WAEnB,CAAE,OAAF;EAZa;;uBAcf,UAAS;IACP;WAEA,IAAC,OAAD;EAHO;;;;GA9Kc;;AAmLzB,MAAM,CAAC,OAAP,GAAiB;;;CCtLjB;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5DA;AAAA;;ACAA;EAAA;;;AAAA,YAAY,QAAQ,aAAR;;AAEN;;;;;;;6BACJ,WAAU,QAAQ,YAAR;;6BAEV,SAAQ;WACN;MAAA,oBAAoB,MAApB;;EADM;;6BAGR,aAAY;WACV,IAAC,QAAD,CAAS,IAAT,EAAe;MAAA,gBAAgB,IAAhB;KAAf;EADU;;6BAGZ,aAAY;WACV,IAAC,QAAD,CAAS,IAAT,EAAe;MAAA,gBAAgB,KAAhB;KAAf;EADU;;;;GATiB;;AAY/B,MAAM,CAAC,OAAP,GAAiB;;;CCdjB;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzEA;AAAA;;ACAA;EAAA;;;AAAA,WAAa,QAAQ,iBAAR;;AACX,aAAe,QAAQ,yBAAR;;AACjB,aAAa,QAAQ,sBAAR;;AACb,UAAa,QAAQ,aAAR;;AACX,MAAW,QAAQ,YAAR;;AAEP;;;;;;;0BACJ,WAAU,QAAQ,YAAR;;0BAEV,SAAQ;WACN;MAAA,oBAAoB,SAApB;;EADM;;0BAGR,YAAW;AACT;IAAA,OAAO;IAEL,kBAAF,EAAS;IACT,IAAkB,aAAlB;MAAA,QAAQ,GAAR;;IACA,QAAQ,OAAO,CAAC,MAAR,CAAe,KAAf;IAER;;AACE;WAAA;wBAAM,yBAAU;YAA0B,YAAa;uBACrD;YAAA,UAAU,OAAO,CAAC,MAAR,CAAe,QAAf,CAAV;YACA,WAAW,OAAO,CAAC,MAAR,CAAe,SAAf,CADX;;;AADF;;;AAMF;MAAM;MACJ,QAAQ,KAAK,CAAC,OAAN,CAAc,QAAd,EAAwB,OAAK,CAAL,GAAO,IAA/B;AADV;IAUA,IAAI,CAAC,UAAL;;AACE;AAAA;WAAA;;QACE,IAAG,cAAa,GAAhB;uBACE;YAAA,OAAO,IAAP;aADF;SAAA;UAGE,QAAQ,0DAAmC;UAC3C,gDACiB,CAAE,kBAAjB,GACE,SAAS,CAAC,OAAV,CAAkB,aAAlB,sCAA6C,CAAE,iBAA/C,CADF,GAGE;UACJ,iDACiB,CAAE,mBAAjB,GACE,SAAS,CAAC,OAAV,CAAkB,aAAlB,sCAA6C,CAAE,kBAA/C,CADF,GAGE;uBACJ;YAAA,OAAO,WAAQ,CAAC,CAAC,CAAC,MAAF,CAAS,CAAT,CAAD,CAAR,GAAqB,SAArB,GAA6B,CAAC,CAAC,CAAC,MAAF,CAAS,CAAC,MAAD,EAAS,IAAT,CAAT,CAAD,CAApC;YACA,WAAW,SADX;YAEA,UAAU,QAFV;aAdF;;AADF;;;WAkBF;EA3CS;;0BA6CX,aAAY;WACV,IAAC,QAAD,CAAS,IAAT,EAAe;MAAA,gBAAgB,IAAhB;KAAf;EADU;;0BAGZ,aAAY;WACV,IAAC,QAAD,CAAS,IAAT,EAAe;MAAA,gBAAgB,KAAhB;KAAf;EADU;;0BAGZ,OAAM;AACJ;IAAA;IACA,SAAS,IAAC,QAAD,CAAS,QAAT;IAET,IAAC,OAAD,GAAU,IAAI,UAAJ,CACR;MAAA,IAAI,MAAJ;MACA,UAAU,IADV;KADQ;IAIV,IAAC,SAAD;IAEA,IAAC,QAAD,mEAAqB,CAAC,WAAY,eAAvB,IAAgC;IAE3C,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,OAAT,CAAP,EAA0B,OAA1B;IAEA,IAAC,SAAD,CAAU,IAAC,OAAX,EAAmB,MAAnB,EAA2B,IAAC,OAA5B;IACA,IAAC,SAAD,CAAU,IAAC,OAAX,EAAmB,MAAnB,EAA2B,IAAC,OAA5B;IACA,IAAC,SAAD,CAAU,IAAV,EAAgB,QAAhB,EAA0B,IAAC,SAA3B;;WAEQ,CAAC,UAAW,GAAG,GAAG,IAAC,OAAM,CAAC,EAAE,CAAC,OAAO,IAAC,OAAM,CAAC,EAAE,CAAC;;AACvD;AAAA;;MAAA,EAAE,CAAC,SAAS,CAAC,MAAb,CAAoB,QAApB,EAA8B,UAA9B;AAAA;IAEA,IAAC,UAAD;WAEA,IAAC,QAAD,GAAW;EAvBP;;0BA0BN,WAAU;IACR,IAAC,OAAM,CAAC,EAAE,CAAC,KAAX,GAAmB,IAAC,GAAE,CAAC,UAAU,CAAC,WAAf,GAA6B;WAChD,IAAC,OAAM,CAAC,EAAE,CAAC,MAAX,GAAoB,IAAC,GAAE,CAAC,UAAU,CAAC,YAAf,GAA8B;EAF1C;;0BAIV,SAAQ,SAAC,MAAD,EAAS,SAAT;AACN;IAAA,IAAG,SAAH;;;cACkB,CAAE,MAAlB;;;MACA,IAAC,QAAO,CAAC,OAAT,GAAmB;MACnB,IAAC,QAAO,CAAC,WAAT,GAAuB;MACvB,IAAC,KAAD,GAAQ,IAAI,UAAJ,CAAe,EAAf,EAAmB,MAAM,CAAC,gBAAP,CAAwB,IAAC,GAAzB,CAA4B,CAAC,KAAhD,EAAuD,IAAI,GAA3D,EAJV;;WAMA,IAAC,SAAD,CAAU,MAAV;EAPM;;0BASR,SAAQ,SAAC,MAAD,EAAS,OAAT;AACN;IAAA,MAAM,IAAC,KAAI,CAAC,SAAN;IACN,gBAAgB;IAChB,MAAgB,IAAC,GAAE,CAAC,UAAU,CAAC,qBAAf,EAAhB,EAAE,eAAF,EAAQ;IAER,OAAO,GAAG,CAAC,MAAJ,CAAW,CAAC,SAAC,CAAD,EAAI,CAAJ;aAAU,IAAI,CAAC,CAAC;IAAhB,CAAD,CAAX,EAAgC,CAAhC,IAAqC,GAAG,CAAC,MAAzC,GAAkD;IACzD,OAAO,GAAG,CAAC,MAAJ,CAAW,CAAC,SAAC,CAAD,EAAI,CAAJ;aAAU,IAAI,CAAC,CAAC;IAAhB,CAAD,CAAX,EAAgC,CAAhC,IAAqC,GAAG,CAAC,MAAzC,GAAkD;IACzD,OAAO,GAAG,CAAC,MAAJ,CAAW,CAAC,SAAC,CAAD,EAAI,CAAJ;MAAU,IAAG,IAAI,CAAC,CAAC,CAAT;eAAgB,CAAC,CAAC,EAAlB;OAAA;eAAyB,EAAzB;;IAAV,CAAD,CAAX,EAAmD,KAAnD,IAA+D;IACtE,OAAO,GAAG,CAAC,MAAJ,CAAW,CAAC,SAAC,CAAD,EAAI,CAAJ;MAAU,IAAG,IAAI,CAAC,CAAC,CAAT;eAAgB,CAAC,CAAC,EAAlB;OAAA;eAAyB,EAAzB;;IAAV,CAAD,CAAX,EAAmD,CAAnD,IAAwD;AAE/D;AAAA;;YAA+B,CAAI,EAAE,CAAC,SAAS,CAAC,QAAb,CAAsB,QAAtB;;;MACjC,SAAS,IAAC,UAAD,CAAW,EAAX,EAAe;QAAE,GAAG,CAAC,IAAN;QAAY,GAAG,CAAC,GAAhB;OAAf;MACT,SAAS;MAET,WACE,CAAC,CAAC,OAAO,MAAP,GAAgB,MAAM,CAAC,IAAvB,IAAgC,OAAO,MAAP,GAAgB,MAAM,CAAC,KAAxD,KACD,CAAC,OAAO,MAAM,CAAC,IAAd,IAAuB,OAAO,MAAM,CAAC,KAAtC,CADA,KAEC,OAAO,MAAM,CAAC,GAFf,IAEwB,OAAO,MAAM,CAAC;MAExC,EAAE,CAAC,SAAS,CAAC,MAAb,CAAoB,QAApB,EAA8B,QAA9B;MACA,IAA0B,QAA1B;QAAA,aAAa,CAAC,IAAd,CAAmB,EAAnB;;MAEA,IAAG,YAAa,EAAE,CAAC,OAAO,CAAC,QAA3B;QACE,IAAC,UAAD,CAAW,EAAX,EACE;UAAA,SAAS,CAAT;UACA,OAAO,GADP;SADF,EADF;;AAZF;IAiBA,IAAC,KAAI,CAAC,KAAN,CAAY,IAAC,QAAb,EAAsB;aAAA;eACpB,KAAC,QAAO,CAAC,SAAT,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,KAAC,OAAM,CAAC,EAAE,CAAC,KAApC,EAA2C,KAAC,OAAM,CAAC,EAAE,CAAC,MAAtD;MADoB;IAAA,QAAtB;SAOK;aAAA,SAAC,EAAD,EAAK,QAAL;eACD,MAAM,CAAC,UAAP,CAAkB,CAAC;UACjB,EAAE,CAAC,SAAS,CAAC,MAAb,CAAoB,QAApB,EAA8B,gBAA9B;UAEA,IAAG,gBAAH;YACE,EAAE,CAAC,SAAH,GAAe;mBACf,KAAC,UAAD,CAAW,EAAX,EACE;cAAA,GAAG,CAAH;cACA,SAAS,CADT;aADF,EAFF;;QAHiB,CAAD,CAAlB,EASG,GATH;MADC;IAAA;AAJL;;MACE,IAAC,QAAO,CAAC,IAAT,CAAc,EAAE,EAAF,CAAK,CAAC,IAAN,EAAd;MACA,WAAW,EAAE,CAAC,OAAO,CAAC;MACtB,OAAO,EAAE,CAAC,OAAO,CAAC;SACd,IAAI;AAJV;WAgBA,IAAC,SAAD,CAAU,SAAV;EA9CM;;0BAgDR,WAAU,SAAC,GAAD;AACR;IADU,WAAG;IACb,IAAC,KAAI,CAAC,GAAN,CAAU;MAAA,GAAG,IAAI,GAAP;MAAY,GAAG,IAAI,GAAnB;KAAV;IACA,IAAC,QAAO,CAAC,SAAT,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,IAAC,OAAM,CAAC,EAAE,CAAC,KAApC,EAA2C,IAAC,OAAM,CAAC,EAAE,CAAC,MAAtD;WACA,IAAC,KAAI,CAAC,IAAN,CAAW,IAAC,QAAZ;EAHQ;;0BAKV,YAAW;AACT;WAAA;;AAAC;AAAA;WAAA;;YAAkC,EAAE,CAAC,OAAO,CAAC;uBAA7C;;AAAA;;iBAAD,CAAuD,CAAC,MAAxD,KAAkE;EADzD;;0BAGX,gBAAe;AACb;IAAA,wDAAgC,CAAE,mBAAnB,IAAgC;IAC/C,MAAiB,SAAS,CAAC,MAAV,GAAmB,CAApC;AAAA,aAAO,GAAP;;IACA,UAAU;AAEV;;MACE,gBAAgB,CAAC,CAAC,IAAF,CAAO,CAAC,CAAC,OAAT,EAAkB,SAAC,CAAD;eAAO,CAAC,CAAC,OAAF,KAAa;MAApB,CAAlB;MAChB,YAAY,IAAC,QAAO,CAAC,QAAT,CAAkB,CAAC,CAAC,QAAQ,CAAC,OAA7B;MACZ,kBAAkB;QAChB,UAAU,CAAC,CAAC,QADI;QAEhB,QAAQ,CAAC,CAAC,IAAF,CAAO,CAAC,CAAC,OAAT,EAAkB,SAAC,CAAD;iBAAO,CAAC,CAAC,OAAF,KAAa;QAApB,CAAlB,CAFQ;;MAIlB,OAAO,CAAC,IAAR,CAAa,eAAb;AAPF;WASA;EAda;;0BAgBf,UAAS;AACP;IAAA;AAEA;SAIK;aAAA,SAAC,EAAD;eACD,MAAM,CAAC,UAAP,CAAkB;AAChB;UAAA,WAAW,EAAE,CAAC,OAAO,CAAC;UACtB,OAAO,EAAE,CAAC,OAAO,CAAC;UAClB,EAAE,CAAC,SAAH,GAAe;UACf,EAAE,CAAC,SAAS,CAAC,MAAb,CAAoB,QAApB,EAA8B,gBAA9B;iBACA,KAAC,UAAD,CAAW,EAAX,EAAe;YAAE,OAAO,CAAT;YAAY,SAAS,CAArB;WAAf;QALgB,CAAlB,EAME,GANF;MADC;IAAA;AAJL;;WAA+B,EAAE,CAAC,OAAO,CAAC;;;MACxC,EAAE,CAAC,SAAS,CAAC,GAAb,CAAiB,QAAjB;MACA,IAAC,UAAD,CAAW,EAAX,EAAe;QAAE,OAAO,GAAT;QAAc,SAAS,CAAvB;OAAf;SAEI;AAJN;WAaA,IAAC,OAAD;EAhBO;;;;GAxKiB;;AA4L5B,MAAM,CAAC,OAAP,GAAiB;;;CClMjB;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzIA;AAAA;;ACAA;EAAA;;;AAAA,YAAY,QAAQ,aAAR;;AAEN;;;;;;;sBACJ,WAAU,QAAQ,YAAR;;sBAEV,SAAQ;WACN;MAAA,oBAAoB,QAApB;;EADM;;sBAGR,YAAW;AACT;IAAA,OAAO;IAEP,IAAI,CAAC,QAAL,GAAkB,SAAC,EAAD;aAAQ,uBAAuB,CAAC,IAAxB,CAA6B,EAA7B;IAAR;IAClB,IAAI,CAAC,UAAL,GAAkB,CAAC,CAAC,GAAF,CAAM,IAAI,CAAC,IAAX,EAAiB,SAAC,CAAD;AAAO;2CAAO,CAAE,gBAAT,IAAmB;IAA1B,CAAjB;IAClB,IAAI,CAAC,OAAL,GAAkB,CAAC,CAAC,KAAF,CAAQ,IAAI,CAAC,KAAb,CAChB,CAAC,IADe,CACV,YADU,EACI,QADJ,CAEhB,CAAC,MAFe,CAER,CAAC,SAAC,GAAD,EAAM,CAAN,EAAS,CAAT;MAAe,IAAG,CAAH;eAAU,MAAM,aAAU,CAAV,EAAhB;OAAA;eAAmC,IAAnC;;IAAf,CAAD,CAFQ,EAEiD,EAFjD,CAGhB,CAAC,KAHe;WAKlB;EAVS;;sBAYX,aAAY;AACV;IAAA,IAAC,QAAD,CAAS,IAAT,EAAe;MAAA,gBAAgB,IAAhB;KAAf;IACA,QAAS,IAAC,QAAD,CAAS,QAAT;IACT,SAAS,KAAK,CAAC;IAEf,IAAG,KAAK,CAAC,WAAN,GAAoB,MAAM,CAAC,WAA9B;MACE,IAAC,SAAD,CAAU,IAAV,EAAgB,QAAhB;MACA,MAAM,CAAC,gBAAP,CAAwB,QAAxB,EAAkC,CAAC,CAAC,IAAF,CAAO,IAAC,SAAR,EAAkB,IAAlB,CAAlC;aACA,IAAC,SAAD,CAAU;QAAA,QAAQ,MAAR;OAAV,EAHF;KAAA;aAKE,IAAC,SAAD,CAAU,KAAV,EAAiB,QAAjB,EALF;;EALU;;sBAYZ,aAAY;WACV,IAAC,QAAD,CAAS,IAAT,EAAe;MAAA,gBAAgB,KAAhB;KAAf;EADU;;sBAGZ,YAAW;WACT,IAAC,WAAD;EADS;;sBAGX,WAAU,SAAC,CAAD;AACR;IAAA,KAAK,CAAC,CAAC;IAEP,IAAG,EAAE,CAAC,UAAH,IAAiB,CAApB;aACE,IAAC,SAAD,CAAU,MAAV,EAAkB,YAAlB,EADF;KAAA,MAEK,IAAG,EAAE,CAAC,UAAH,IAAiB,EAAE,CAAC,WAAH,GAAiB,EAAE,CAAC,WAAxC;aACH,IAAC,SAAD,CAAU,OAAV,EAAmB,YAAnB,EADG;KAAA;aAGH,IAAC,SAAD,CAAU,SAAV,EAAqB,YAArB,EAHG;;EALG;;;;GApCY;;AA8CxB,MAAM,CAAC,OAAP,GAAiB;;;CChDjB;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzEA;AAAA;;ACAA;EAAA;;;AAAA,WAAW,QAAQ,iBAAR;;AACX,SAAW,QAAQ,YAAR;;AAEL;;;;;;;2BACJ,WAAU,QAAQ,YAAR;;2BAEV,SAAQ;WACN;MAAA,iBAAoB,YAApB;MACA,oBAAoB,SADpB;;EADM;;2BAIR,YAAW;AACT;IAAA,OAAO;IACP,IAAI,CAAC,OAAL,GAAe,CAAC,CAAC,KAAF,CAAQ,IAAI,CAAC,IAAb,CACb,CAAC,MADY,CACL,SAAC,EAAD;aAAQ;IAAR,CADK,CAEb,CAAC,GAFY,CAER,SAAC,EAAD,EAAK,CAAL;aACH;QAAA,OAAO,EAAP;QACA,WAAW,CADX;;IADG,CAFQ,CAKb,CAAC,OALY,EAKH,CAAC,KALE;IAOf,SAAU,IAAI,CAAC,OAAO,CAAC;IACvB,UAAU,UAAU;IAEpB,IAAI,CAAC,UAAL,GACE;MAAA,OACI,CAAI,OAAH,GAAgB,EAAhB,GAAwB,GAAzB,IAA6B,GADjC;MAEA,QACI,CAAC,MAAM,CAAI,OAAH,GAAgB,CAAC,SAAS,SAAS,CAAnB,IAAwB,CAAxC,GAA+C,MAAhD,CAAP,IAA+D,GAHnE;;AAMF,WAAO;EAnBE;;2BAqBX,OAAM;IACJ;IACA,IAAC,sBAAD;IACA,IAAC,aAAD;IAEA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,iBAAT,CAAP,EAAoC,eAApC;IACA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,QAAT,CAAP,EAA2B,SAA3B;IACA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,QAAT,CAAP,EAA2B,OAA3B;IACA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,SAAT,CAAP,EAA4B,SAA5B;IACA,IAAC,aAAD;WAEA,IAAC,UAAD;EAXI;;2BAaN,WAAU;WACR,IAAC,eAAD;EADQ;;2BAGV,eAAc;AACZ;AAAA;AAAA;;MACE,EAAE,CAAC,SAAS,CAAC,GAAb,CAAiB,UAAjB;AADF;IAEA,IAAC,SAAD,CAAU,IAAV,EAAgB,QAAhB,EAA0B,IAAC,SAA3B;WACA,IAAC,eAAD;EAJY;;2BAMd,YAAW;IACT;WACA,IAAC,SAAD;EAFS;;2BAIX,wBAAuB;WACrB,IAAC,OAAD,GAAU,IAAC,QAAO,CAAC,IAAI,CAAC;EADH;;2BAGvB,iBAAgB;AACd;IAAA,SAAS,IAAC,MAAD,CAAO,eAAP;IACT,SAAS,MAAM,CAAC;IAEhB,IAAG,MAAM,CAAC,UAAP,CAAkB,CAAC,IAAD,EAAO,IAAP,CAAlB,CAAH;MACE,UAAU,IAAC,MAAD,CAAO,OAAP,CAAe,CAAC,aAD5B;;IAGA,IAAG,qCAAH;aACE,IAAC,MAAD,CAAO,SAAP,CAAiB,CAAC,IAAlB,CAAuB,CAAvB,CAAyB,CAAC,UAAU,CAAC,KAAK,CAAC,MAA3C,GAAuD,MAAD,GAAQ,KADhE;KAAA;AAAA;;EAPc;;2BAYhB,eAAc;WACZ,IAAC,UAAD,GAAa;EADD;;2BAGd,iBAAgB;AACd;IAAA,eAAe,SAAC,KAAD,EAAQ,GAAR,EAAa,CAAb;aAAmB,SAAU,QAAO,CAAC,CAAC,QAAF;IAApC;AACf,WAAO,IAAC,UAAS,CAAC,MAAX,CAAkB,YAAlB,EAAgC,IAAhC;EAFO;;2BAIhB,YAAW;IACT,IAAuB,sBAAvB;MAAA,IAAC,aAAD;;AACA,WAAO,IAAC,eAAD,MAAsB,IAAC,UAAS,CAAC,MAAX,KAAqB,IAAC,QAAO,CAAC,IAAI,CAAC,IAAI,CAAC;EAF5D;;2BAIX,UAAS,SAAC,GAAD;AACP;IAAA,SAAW,GAAG,CAAC,UAAU,CAAC,UAAU,CAAC;IACrC,WAAW,IAAC,UAAS,CAAC,OAAX,CAAmB,GAAG,CAAC,OAAO,CAAC,SAA/B;IAEX,IAAG,WAAW,CAAC,CAAf;MACE,GAAG,CAAC,SAAJ,GAAgB,WAAW;MAC3B,MAAM,CAAC,SAAS,CAAC,GAAjB,CAAqB,QAArB;aACA,MAAM,CAAC,OAAO,CAAC,WAAf,GAA6B,SAH/B;KAAA;MAKE,GAAG,CAAC,SAAJ,GAAgB;MAChB,MAAM,CAAC,SAAS,CAAC,MAAjB,CAAwB,QAAxB;aACA,MAAM,CAAC,OAAO,CAAC,WAAf,GAA6B,GAP/B;;EAJO;;2BAaT,WAAU;AACR;AAAA;AAAA;SAAA;;mBAAA,IAAC,QAAD,CAAS,GAAT;AAAA;;EADQ;;2BAGV,aAAY;AACV;IAAA,IAAG,IAAC,UAAD,EAAH;MACE,IAAC,GAAE,CAAC,SAAS,CAAC,GAAd,CAAkB,aAAU,CAAC,IAAC,UAAD,EAAD,CAA5B;aACA,IAAC,GAAE,CAAC,SAAS,CAAC,MAAd,CAAqB,aAAU,CAAC,CAAI,IAAC,UAAD,EAAL,CAA/B,EAFF;KAAA;AAIE;AAAA;WAAA;;QACE,IAAG,EAAE,CAAC,OAAO,CAAC,WAAX,KAA4B,EAAE,CAAC,OAAO,CAAC,SAA1C;uBACE,EAAE,CAAC,SAAS,CAAC,GAAb,CAAiB,WAAjB,GADF;SAAA;uBAGE,EAAE,CAAC,SAAS,CAAC,MAAb,CAAoB,WAApB,GAHF;;AADF;qBAJF;;EADU;;2BAWZ,iBAAgB,SAAC,KAAD;AACd;IAAA,aAAa,IAAC,UAAS,CAAC,OAAX,CAAmB,KAAnB;IACb,IAAG,aAAa,CAAhB;MACE,IAAgD,aAAa,CAAC,CAA9D;eAAA,IAAC,UAAD,GAAa,IAAC,UAAS,CAAC,KAAX,CAAiB,CAAjB,EAAoB,UAApB,EAAb;OADF;KAAA,MAEK,IAAG,eAAc,CAAjB;aACH,IAAC,UAAD,GAAa,GADV;;EAJS;;2BAOhB,aAAY,SAAC,CAAD;IACV,IAAC,aAAY,CAAC,SAAS,CAAC,GAAxB,CAA4B,WAA5B;WACA,MAAM,CAAC,UAAP,CAAkB,CAAE;aAAA;eAClB,KAAC,aAAY,CAAC,SAAS,CAAC,MAAxB,CAA+B,WAA/B;MADkB;IAAA,QAAF,CAAlB,EAEG,GAFH;EAFU;;2BAMZ,aAAY,SAAC,CAAD;AACV;IAAA,IAAC,aAAD,GAAgB,CAAC,CAAC;IAClB,eAAe,CAAC,CAAC,aAAa,CAAC,OAAO,CAAC;IACvC,mBAAmB,CAAC,CAAC,aAAa,CAAC,OAAO,CAAC;IAC3C,gBAAgB,IAAC,UAAS,CAAC,OAAX,CAAmB,YAAnB,MAAsC,CAAC;IACvD,IAAG,aAAH;MACE,IAAC,eAAD,CAAgB,YAAhB,EADF;KAAA;MAGE,IAAC,UAAS,CAAC,IAAX,CAAgB,YAAhB,EAHF;;IAKA,IAAG,IAAC,eAAD,MAAqB,CAAI,IAAC,OAA7B;MACE,IAAC,SAAD,CAAU,IAAC,MAAD,CAAO,SAAP,CAAkB,EAAC,CAAC,aAAa,CAAC,OAAO,CAAC,aAAxB,CAA5B,EADF;KAAA;MAGE,IAAC,eAAD,CAAgB,YAAhB;MACA,IAAiB,IAAC,OAAlB;QAAA,IAAC,WAAD;OAJF;;WAMA,IAAC,SAAD,CAAU,SAAV;EAhBU;;2BAkBZ,gBAAe;AACb;IAAA,wDAAgC,CAAE,mBAAnB,IAAgC;IAC/C,MAAiB,SAAS,CAAC,MAAV,GAAmB,CAApC;AAAA,aAAO,GAAP;;IACA,WAAW,SAAU;IAErB,YAAY,IAAC,UAAD;IACZ,SAAS,CAAC,CAAC,IAAF,CAAO,QAAQ,CAAC,OAAhB,EAAyB,SAAC,CAAD;aAAO,CAAC,CAAC,OAAF,KAAa;IAApB,CAAzB;IACT,iBAAiB,CAAC,CAAC,GAAF,CAAM,IAAC,UAAP,EAAkB;aAAA,SAAC,GAAD;eACjC,CAAC,CAAC,IAAF,CAAO,KAAC,MAAD,CAAO,SAAP,CAAP,EAA0B,SAAC,KAAD;iBACxB,IAAC,EAAD,CAAG,KAAH,CAAS,CAAC,IAAV,CAAe,YAAf,MAAgC,OAAO,GAAP;QADR,CAA1B;MADiC;IAAA,QAAlB;IAGjB,gBAAgB,CAAC,CAAC,GAAF,CAAM,cAAN,EAAsB,SAAC,EAAD;aAAQ,IAAC,EAAD,CAAG,EAAH,CAAM,CAAC,IAAP,CAAY,SAAZ;IAAR,CAAtB;IAChB,MAAM,CAAC,OAAP,GAAiB,aAAa,CAAC,IAAd,CAAmB,IAAnB;IAEjB,UAAU;MAAA,UAAU,SAAU,GAAE,CAAC,QAAvB;MAAiC,QAAQ,MAAzC;;WAEV,CAAE,OAAF;EAfa;;2BAiBf,UAAS;IACP;WAEA,IAAC,OAAD;EAHO;;;;GA3JkB;;AAgK7B,MAAM,CAAC,OAAP,GAAiB;;;CCnKjB;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjFA;AAAA;;ACAA;EAAA;;;AAAA,qBAAqB,QAAQ,yBAAR;;AAEf;;;;;;;8BACJ,YAAW;AACT;IAAA,OAAO;IACP,UAAU;AAEV;AAAA;qBAAM,kBAAM;MACV,IAAG,IAAH;QACE,KAA2C,MAAM,CAAC,IAAP,CAAY,IAAZ,CAA3C;UAAA,OAAO,OAAO,CAAC,SAAR,CAAkB,IAAlB,EAAwB,GAAxB,EAAP;;QACA,OAAO,CAAC,IAAR,CAAa;UAAE,SAAS,IAAX;UAAiB,aAAa,MAA9B;SAAb,EAFF;;MAGA,IAAG,KAAH;QACE,OAAO,CAAC,IAAR,CAAa;UAAE,SAAS,KAAX;UAAkB,aAAa,OAA/B;SAAb,EADF;;AAJF;IAOA,IAAI,CAAC,OAAL,GAAe;WAEf;EAbS;;;;GADmB;;AAgBhC,MAAM,CAAC,OAAP,GAAiB;;;CClBjB;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApEA;AAAA;;ACAA;EAAA;;;AAAA,YAAY,QAAQ,aAAR;;AAEN;;;;;;;6BACJ,WAAU,QAAQ,YAAR;;6BAEV,SAAQ;WACN;MAAA,UAAU,OAAV;MACA,oBAAoB,QADpB;;EADM;;6BAIR,YAAW;AACT;IAAA,OAAO;IACP,IAAI,CAAC,OAAL,GAAe,CAAC,CAAC,OAAF,CAAU,IAAI,CAAC,OAAf;IACf,IAAI,CAAC,SAAL,GAAiB;WACjB;EAJS;;6BAMX,aAAY;WACV,IAAC,QAAD,CAAS,IAAT,EAAe;MAAA,gBAAgB,KAAhB;KAAf;EADU;;6BAGZ,aAAY,SAAC,iBAAD;AACV;IAAA,IAAC,QAAD,CAAS,IAAT,EAAe;MAAA,gBAAgB,IAAhB;KAAf;IAEA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,QAAT,CAAP,EAA2B,OAA3B;IACA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,sBAAT,CAAP,EAAyC,QAAzC;IACA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,SAAT,CAAP,EAA4B,QAA5B;IACA,IAAC,MAAD,CAAO,IAAC,QAAD,CAAS,WAAT,CAAP,EAA8B,UAA9B;AAEA;AAAA;;MACE,KAAK,CAAC,SAAS,CAAC,MAAhB,CAAuB,QAAvB;MACA,IAAC,UAAD,CAAW,KAAX,EAAkB;QAAE,SAAS,EAAX;QAAe,YAAY,EAA3B;OAAlB;AAFF;IAIA,KAAc,IAAC,MAAD,CAAO,OAAP,CAAd;AAAA;;IAEA,IAAC,WAAD,CAAY,IAAC,MAAD,CAAO,OAAP,CAAZ,EACK,iBAAH,GAA0B,MAA1B,GAAsC,WADxC;IAGA,IAAC,aAAD,GAAgB;IAChB,IAAC,YAAD,GAAgB,IAAC,MAAD,CAAO,OAAP,CAAe,CAAC,QAAQ,CAAC;WACzC,IAAC,aAAD,CAAc,IAAd;EAnBU;;6BAqBZ,QAAO,SAAC,CAAD;AACL;IAAA,IAAG,2CAAU,CAAE,yBAAZ,IAAuB,IAAC,GAAE,CAAC,YAAJ,GAAmB,CAA1C,IACA,IAAC,aAAD,GAAgB,CADhB,IAEA,IAAC,QAAO,CAAC,IAAI,CAAC,SAFjB;MAGE,IAAC,aAAD;aACA,IAAC,aAAD,GAJF;KAAA,MAKK,IAAG,IAAC,aAAD,GAAgB,IAAC,YAAD,GAAe,CAAlC;MACH,IAAC,aAAD;MACA,IAAC,aAAD;MAEA,IAAG,IAAC,aAAD,KAAiB,IAAC,YAAD,GAAe,CAAnC;eACE,IAAC,SAAD,CAAU,SAAV,EADF;OAJG;;EANA;;6BAaP,eAAc,SAAC,aAAD;IACZ,IAAC,eAAD;IACA,KAAoB,aAApB;aAAA,IAAC,UAAD;;EAFY;;6BAId,iBAAgB;AACd;IAAA,QAAQ,IAAC,MAAD,CAAO,OAAP,CAAe,CAAC;IACxB,OAAQ,KAAM,KAAC,aAAD;IACd,IAAI,CAAC,SAAS,CAAC,GAAf,CAAmB,QAAnB;IAEA,IAAI,IAAC,GAAE,CAAC,YAAJ,GAAmB,CAAnB,GAAuB,CAAC,IAAI,CAAC,SAAL,GAAiB,IAAI,CAAC,YAAL,GAAoB,CAAtC;IAE3B,IAAC,MAAD,CAAO,QAAP,CAAgB,CAAC,KAAK,CAAC,OAAvB,GAAiC,IAAC,aAAD,GAAgB,CAAC,IAAC,YAAD,GAAe,CAAhB;IACjD,IAAC,MAAD,CAAO,UAAP,CAAkB,CAAC,KAAK,CAAC,OAAzB,GAAmC,IAAI,IAAC,aAAD,GAAgB,CAAC,IAAC,YAAD,GAAe,CAAhB;IAEvD,IAAG,IAAI,CAAC,IAAC,MAAD,CAAO,OAAP,CAAe,CAAC,UAAU,CAAC,YAA5B,GAA2C,CAAlD;MACE,IAAC,QAAD,CAAS,QAAT,EAAmB,IAAnB,EAAyB,QAAzB,EADF;KAAA;MAGE,IAAC,QAAD,CAAS,QAAT,EAAmB,IAAnB,EAAyB,KAAzB,EAHF;;AAKA;;MACE,IAAC,UAAD,CAAW,KAAX,EACE;QAAA,YAAY,WAAZ;QACA,SACK,KAAK,IAAC,aAAT,GAA2B,IAAI,CAAC,IAAC,aAAD,GAAgB,CAAjB,IAAsB,IAAC,YAAtD,GACK,CAHP;OADF;AADF;WAOA,IAAC,UAAD,CAAW,IAAC,MAAD,CAAO,OAAP,CAAX,EAA4B;MAAE,IAAF;KAA5B;EAtBc;;6BAwBhB,YAAW;AACT;IAAA,QAAQ,IAAC;IACT,KAAkB,IAAC,QAAO,CAAC,IAAI,CAAC,KAAhC;MAAA,SAAS,EAAT;;IACA,cAAc,KAAK,kBAAL,KAA4B;WAC1C,IAAC,MAAD,CAAO,QAAP,CAAgB,CAAC,SAAjB,GACK,QAAQ,CAAR,IAAa,CAAI,IAAC,QAAO,CAAC,IAAI,CAAC,KAAlC,GAEM,IAAC,QAAO,CAAC,IAAI,CAAC,KAAf,GAAqB,GAArB,GAAwB,KAAxB,GAA8B,GAA9B,GAAiC,WAAjC,GAA6C,GAA7C,GAAgD,IAAC,QAAO,CAAC,IAAI,CAAC,OAAO,CAAC,MAF3E,GAKE,IAAC,QAAO,CAAC,IAAI,CAAC;EAVT;;6BAYX,UAAS,SAAC,MAAD;AACP;AAAA;AAAA;;MACE,IAAe,WAAY,IAAC,QAAO,CAAC,IAAI,CAAC,OAAQ,GAAtB,KAA8B,IAAzD;QAAA,UAAU,EAAV;;AADF;IAGA,IAAG,MAAM,CAAC,IAAI,CAAC,KAAZ,KAAuB,IAAC,QAAO,CAAC,IAAI,CAAC,KAAxC;MACE,UAAU,CAAC,EADb;;IAGA;IAEA,IAAG,eAAH;MACE,IAAC,WAAD,CAAY,IAAZ;MACA,IAAC,GAAE,CAAC,SAAS,CAAC,GAAd,CAAkB,eAAlB;AACS,aAAM,IAAC,aAAD,GAAgB,OAAtB;QAAT,IAAC,MAAD;MAAS;aACT,MAAM,CAAC,UAAP,CAAkB,CAAC;eAAA;UACjB,KAAC,WAAD,CAAY,KAAC,MAAD,CAAO,OAAP,CAAZ,EAA6B,WAA7B;iBACA,KAAC,GAAE,CAAC,SAAS,CAAC,MAAd,CAAqB,eAArB;QAFiB;MAAA,QAAD,CAAlB,EAGG,CAHH,EAJF;KAAA;aASE,IAAC,WAAD,GATF;;EATO;;6BAoBT,aAAY;IACV,IAAC,aAAD,GAAgB,CAAC;WAEjB,IAAI,OAAJ,CAAY;aAAA,SAAC,OAAD,EAAU,MAAV;AACV;QAAA,WAAW,SAAC,MAAD;;YAAC,SAAS;;UACnB,IAAG,KAAC,aAAD,GAAgB,KAAC,YAAD,GAAe,CAAlC;YACE,KAAC,aAAD;YACA,KAAC,aAAD;mBACA,KAAC,mBAAD,CAAoB,MAApB,CACE,CAAC,IADH,CACQ,QADR,CAEE,EAAC,KAAD,EAFF,CAES,MAFT,EAHF;WAAA;mBAOE,QAAQ,MAAR,EAPF;;QADS;eAUX;MAXU;IAAA,QAAZ;EAHU;;;;GA9GiB;;AA8H/B,MAAM,CAAC,OAAP,GAAiB;;;CChIjB;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzCA;AAAA;;ACAA;EAAA;;;AAAA,YAAY,QAAQ,aAAR;;AAEN;;;;;;;sBACJ,WAAU,QAAQ,YAAR;;sBAEV,YAAW;AACT;IAAA,OAAO;IACP,IAAI,CAAC,eAAL,GAAuB,KAAK,sBAAL;IACvB,IAAI,CAAC,SAAL,GAAiB,IAAC,QAAO,CAAC,KAAT,IAAkB,CAAI,IAAI,CAAC;WAC5C;EAJS;;sBAMX,SAAQ;WACN;MAAA,oBAAoB,MAApB;MACA,oBAAoB,MADpB;;EADM;;sBAIR,aAAY;WACV,IAAC,QAAD,CAAS,IAAT,EAAe;MAAA,gBAAgB,IAAhB;KAAf;EADU;;sBAGZ,aAAY;WACV,IAAC,QAAD,CAAS,IAAT,EAAe;MAAA,gBAAgB,KAAhB;KAAf;EADU;;;;GAhBU;;AAmBxB,MAAM,CAAC,OAAP,GAAiB;;;CCrBjB;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAAA;;ACAA;EAAA;;;AAAA,YAAsB,QAAQ,aAAR;;AACtB,eAAsB,QAAQ,qBAAR;;AACtB,MAAsB,WAAW,CAAC,OAAZ,EAAtB,EAAE,qBAAF,EAAW;;AAEL;;;;;;;oBACJ,WAAU,QAAQ,YAAR;;oBAEV,SAAQ;WACN;MAAA,oBAAoB,QAApB;;EADM;;oBAGR,aAAY;AACV;IAAA,6FAAyC,CAAE,WAAhC,yBAAiD;IAC5D,IAAC,SAAD,CAAU,OAAO,CAAC,UAAR,CAAmB,QAAnB,CAAV,EAAwC,UAAxC;IAEA,IAAC,QAAD,CAAS,IAAT,EACE;MAAA,UAAU,IAAC,QAAO,CAAC,IAAI,CAAC,UAAd,IAA4B,IAAtC;MACA,UAAU,IADV;MAEA,YAAY,IAFZ;KADF;WAKA,IAAC,SAAD;EATU;;oBAWZ,aAAY;WACV,IAAC,QAAD,CAAS,IAAT,EAAe;MAAE,UAAU,KAAZ;MAAmB,UAAU,KAA7B;MAAoC,YAAY,KAAhD;KAAf;EADU;;oBAGZ,OAAM;WACJ,IAAC,SAAD,CAAU,IAAV,EAAgB,QAAhB,EAA0B,IAAC,SAA3B;EADI;;oBAGN,YAAW;IACT,IAAC,WAAD;WACA;EAFS;;oBAIX,WAAU;AACR;IAAA,IAAG,IAAC,aAAa,YAAd,KAA6B,OAAhC;MACE,SAAS,IAAC,QAAD,CAAS,WAAT;MACT,SAAS,IAAC,QAAD,CAAS,aAAT;MAET,MAAM,CAAC,KAAK,CAAC,MAAb,GAAyB,MAAM,CAAC,YAAR,GAAqB;aAC7C,MAAM,CAAC,KAAK,CAAC,MAAb,GACI,CAAC,MAAM,CAAC,UAAU,CAAC,YAAlB,GAAiC,MAAM,CAAC,YAAzC,IAAsD,KAN5D;;EADQ;;;;GA3BU;;AAoCtB,MAAM,CAAC,OAAP,GAAiB;;;CCxCjB;AAAA;AAAA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvHA;AAAA;;ACAA;EAAA;;;AAAA,YAAY,QAAQ,aAAR;;AACZ,YAAY,QAAQ,aAAR;;AACZ,SAAa,QAAQ,YAAR;;AAEP;;;;;;;gCACJ,WAAU,QAAQ,YAAR;;gCAEV,SAAQ;WACN;MAAA,oBAAsB,QAAtB;MACA,sBAAsB,WADtB;MAEA,iBAAsB,gBAFtB;;EADM;;gCAKR,YAAW;AACT;IAAA,OAAO;IAEP,IAAI,CAAC,OAAL,GAAe,CAA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,OAAP,GAAiB;;;CChDjB;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApBA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtCA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnCA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/DA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApEA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnCA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhCA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlBA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtCA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjKA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9CA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArDA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxBA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApBA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5BA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlBA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtCA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlBA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjCA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9FA;AAAA;;ACAA;;AAAA,cAAc;AACZ;EAAA,MAA+B,kCAA0B,2BAAzD;AAAA,WAAO,SAAS,CAAC,OAAjB;;EAEA,sBAAsB,SAAS,CAAC,UAAU,CAAC;EAE3C,SAAS;EACT,MAAO,WAAU,CAAC,OAAX,CAAP,GAA8B;EAC9B,MAAO,WAAU,CAAC,IAAX,CAAP,GAA8B;EAC9B,MAAO,WAAU,CAAC,QAAX,CAAP,GAA8B;EAC9B,MAAO,WAAU,CAAC,IAAX,CAAP,GAA8B;EAE9B,MAAO,WAAU,CAAC,IAAX,CAAP,GAA8B;EAC9B,MA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","file":"build_scorm/js/app.js","sourcesContent":["Middleware = require(\"lib/middleware\")\n\nApplication =\n  actions:   Middleware.actions\n  action:    Middleware.action\n  publish:   Middleware.publish\n  subscribe: Middleware.subscribe\n\n  initialize: (platform, isPlayer) ->\n    @isPlayer = isPlayer\n    window.iostap.initialize(allowDefault: -> true)\n    Middleware.initialize(platform)\n\n    require(\"lib/i18n\").initialize(\"en\")\n\n    # Require the router during initialization to avoid infinite requiring\n    # The router is a singleton that handles app-wide navigation\n    Router  = require(\"lib/router\")\n    @router = new Router()\n\n    Analytics = Middleware.actions(\"Analytics\")\n    Analytics.startTracking()\n\n    Lesson = Middleware.actions(\"Lesson\")\n    Lesson.open()\n\n    # Everything is now loaded, so start Backbone.history\n    Backbone.history.start()\n    console.log(\"HISTORY START\")\n\n# Application is a global variable to be able to access it outside of the window\nmodule.exports = window.Application = Application","class CommentsCollection extends Backbone.Collection\n\n  comparator: (m) ->\n    -new Date(m.get(\"timestamp\")).getTime()\n\n  initialize: ->\n    # console.log 'initCommentsCollection'\n\n  like: (slideId, id) ->\n    comment = @get(id)\n\n    likes = comment.get(\"likes\") or 0\n    isLikedByLearner = comment.get(\"isLikedByLearner\")\n\n    if isLikedByLearner\n      isLikedByLearner = false\n      likes -= 1\n    else\n      likes += 1\n      isLikedByLearner = true\n\n    comment.set { likes, isLikedByLearner }\n    return isLikedByLearner\n\n  flag: (id) ->\n    comment = @get(id)\n\n    isFlaggedByLearner = comment.get(\"isFlaggedByLearner\")\n\n    if not isFlaggedByLearner\n      isFlaggedByLearner = true\n    else\n      return false\n\n    comment.set { isFlaggedByLearner }\n    return true\n\n  delete: (id) ->\n    comment = @get(id)\n    @remove comment\n\n\nmodule.exports = CommentsCollection\n","module.exports = {\"audio-popup\":{\"allow\":\"    \",\"cancel\":\"\",\"description\":\"         .\",\"title\":\"      \"},\"buttons\":{\"close-lesson\":\" \",\"continue\":\"\",\"done\":\"  \",\"open-ed\":\" Ed\",\"send\":\"\"},\"dial-distribution\":{\"touch-to-rotate\":\"&nbsp;&nbsp;\"},\"dial\":{\"touch-to-rotate\":\"&nbsp;&nbsp;\"},\"dialogs\":{\"disconnection\":{\"needs-background\":\"     Ed  &nbsp;.\",\"please-open-ed\":\"   Ed        &nbsp;.\"}},\"game-jeopardy\":{\"is-false\":\"\",\"is-true\":\"\"},\"game-jumble\":{\"drag-letters\":\"    \"},\"game\":{\"bonus-time\":\"+%{bonus_time} \",\"go\":\"\",\"labels\":{\"score\":\"\",\"timer\":\"\"},\"move-on\":\"\",\"of\":\"\",\"play-again\":\"  \",\"play-game\":\"  !\",\"your-best\":\" \",\"your-score\":\"\",\"your-stars\":\"\"},\"image\":{\"tap-to-continue\":\" \"},\"lesson-info\":{\"lesson-label\":\"\"},\"menu\":{\"brainboost-page-count\":\"   **%{index}**  **%{total}**\",\"cancel\":\"\",\"exit\":\"  \",\"exit-quiz\":\"  \",\"go-back\":\"  \",\"page-count\":\"   **%{index}**  **%{total}**\",\"restart\":\"  \",\"resume\":\"\"},\"peer-authoring\":{\"image-title\":\" \",\"submit\":\"\",\"title-placeholder\":\"  \",\"upload-complete\":\" \",\"uploading\":\" \",\"video-title\":\" \"},\"pie-chart\":{\"touch-to-begin\":\" \"},\"slide-answer\":{\"times-up\":\" !\",\"too-slow\":\" !\"},\"slider\":{\"touch-to-slide\":\" \"},\"social\":{\"be-first\":\"    .\",\"delete\":\"\",\"have-your-say\":\"  \",\"report\":\"\",\"reported\":\" \",\"thats-all\":\"    .\"},\"stars\":{\"all-earned\":\"  1  ||||   %{smart_count} \",\"available\":\"1   |||| %{smart_count}  \",\"earned\":\"  %{earned}  %{smart_count}  ||||   %{earned}  %{smart_count} \"},\"text-sequence\":{\"of\":\"\"},\"video\":{\"not-available\":\"   <br>   .\",\"skip-video\":\" \"}}","module.exports = {\"audio-popup\":{\"allow\":\"     \",\"cancel\":\" \",\"description\":\" ,      \",\"title\":\"   \"},\"buttons\":{\"close-lesson\":\"  \",\"continue\":\" \",\"done\":\" \",\"open-ed\":\"Ed \",\"send\":\"\"},\"dial-distribution\":{\"touch-to-rotate\":\"&nbsp;&nbsp;\"},\"dial\":{\"touch-to-rotate\":\"&nbsp;&nbsp;\"},\"dialogs\":{\"disconnection\":{\"needs-background\":\"    , Ed-&nbsp;   \",\"please-open-ed\":\" ,   Ed          &nbsp;  \"}},\"game-jeopardy\":{\"is-false\":\"\",\"is-true\":\"\"},\"game-jumble\":{\"drag-letters\":\"    \"},\"game\":{\"bonus-time\":\"+%{bonus_time} \",\"go\":\" \",\"labels\":{\"score\":\"\",\"timer\":\"\"},\"move-on\":\" \",\"of\":\"\",\"play-again\":\"  \",\"play-game\":\" ,  !\",\"your-best\":\"  \",\"your-score\":\" \",\"your-stars\":\" \"},\"image\":{\"tap-to-continue\":\"   \"},\"lesson-info\":{\"lesson-label\":\"\"},\"menu\":{\"brainboost-page-count\":\" **%{total}**   **%{index}**   \",\"cancel\":\" \",\"exit\":\"  \",\"exit-quiz\":\"  \",\"go-back\":\"   \",\"page-count\":\" **%{total}**   **%{index}**   \",\"restart\":\"   \",\"resume\":\"    \"},\"peer-authoring\":{\"image-title\":\" \",\"submit\":\" \",\"title-placeholder\":\"  \",\"upload-complete\":\"  \",\"uploading\":\" ...\",\"video-title\":\" \"},\"pie-chart\":{\"touch-to-begin\":\"   \"},\"slide-answer\":{\"times-up\":\" !\",\"too-slow\":\" !\"},\"slider\":{\"touch-to-slide\":\"    \"},\"social\":{\"be-first\":\"     \",\"delete\":\" \",\"have-your-say\":\"  \",\"report\":\" \",\"reported\":\"  \",\"thats-all\":\"   \"},\"stars\":{\"all-earned\":\"1     |||| %{smart_count}    \",\"available\":\"1    |||| %{smart_count}   \",\"earned\":\" %{smart_count}   %{earned}    ||||  %{smart_count}   %{earned}   \"},\"text-sequence\":{\"of\":\"\"},\"video\":{\"not-available\":\",     </br>  \",\"skip-video\":\"  \"}}","module.exports = {\"audio-popup\":{\"allow\":\"Tillad lyd i denne lektion\",\"cancel\":\"Annuller\",\"description\":\"For at lytte til fortllingen skal du tillade lyd i denne lektion.\",\"title\":\"Denne lektion er indtalt\"},\"buttons\":{\"close-lesson\":\"Luk lektion\",\"continue\":\"Fortst\",\"done\":\"OK, jeg er frdig\",\"open-ed\":\"bn Ed\",\"send\":\"Send\"},\"dial-distribution\":{\"touch-to-rotate\":\"Tryk&nbsp;for at&nbsp;rotere\"},\"dial\":{\"touch-to-rotate\":\"Tryk&nbsp;for at&nbsp;rotere\"},\"dialogs\":{\"disconnection\":{\"needs-background\":\"For at gennemfre denne lektion skal Ed kre i &nbsp;baggrunden.\",\"please-open-ed\":\"For at fortstte skal du bne Ed og genstarte lektionen, s din fremdrift kan registreres&nbsp;korrekt.\"}},\"game-jeopardy\":{\"is-false\":\"Falsk\",\"is-true\":\"Sandt\"},\"game-jumble\":{\"drag-letters\":\"Trk bogstaverne til ordet ovenfor\"},\"game\":{\"bonus-time\":\"+%{bonus_time} sekunder\",\"go\":\"KR\",\"labels\":{\"score\":\"Score\",\"timer\":\"Timer\"},\"move-on\":\"Kom videre\",\"of\":\"af\",\"play-again\":\"Afspil igen\",\"play-game\":\"OK, jeg er klar!\",\"your-best\":\"Dit bedste\",\"your-score\":\"Din score\",\"your-stars\":\"Dine stjerner\"},\"image\":{\"tap-to-continue\":\"Tryk for at fortstte\"},\"lesson-info\":{\"lesson-label\":\"Lektion\"},\"menu\":{\"brainboost-page-count\":\"Du er net til  sprgsml  **%{index}** af **%{total}**\",\"cancel\":\"Annuller\",\"exit\":\"Forlad lektion\",\"exit-quiz\":\"Forlad quiz\",\"go-back\":\"Gennemg sidste slide\",\"page-count\":\"Du er p slide **%{index}** af **%{total}**\",\"restart\":\"Genstart lektion\",\"resume\":\"Fortst \"},\"peer-authoring\":{\"image-title\":\"Billedtitel\",\"submit\":\"Indsend\",\"title-placeholder\":\"Indtast titel her\",\"upload-complete\":\"Upload gennemfrt\",\"uploading\":\"Uploader\",\"video-title\":\"Videotitel\"},\"pie-chart\":{\"touch-to-begin\":\"Tryk for begynde\"},\"slide-answer\":{\"times-up\":\"Tiden er udlbet!\",\"too-slow\":\"For langsom!\"},\"slider\":{\"touch-to-slide\":\"Tryk for at slide\"},\"social\":{\"be-first\":\"Vr den frste til at sige din mening.\",\"delete\":\"Slet\",\"have-your-say\":\"Sig din mening\",\"report\":\"Rapportere\",\"reported\":\"Rapporteret\",\"thats-all\":\"Det er alt for nu\"},\"stars\":{\"all-earned\":\"1 stjerne optjent |||| %{smart_count} stjerner optjent\",\"available\":\"1 stjerne tilgngelig |||| %{smart_count} stjerner tilgngelige\",\"earned\":\"Du har optjent %{earned} ud af %{smart_count} stjerne |||| Du har optjent %{earned} ud af %{smart_count} stjerner\"},\"text-sequence\":{\"of\":\"af\"},\"video\":{\"not-available\":\"Beklager, denne video er </br> utilgngelig i jeblikket.\",\"skip-video\":\"Spring video over\"}}","module.exports = {\"audio-popup\":{\"allow\":\"Audio fr diese Lektion zulassen\",\"cancel\":\"Abbrechen\",\"description\":\"Um diese Lektion anzuhren, aktivieren Sie bitte die Audiofunktion.\",\"title\":\"Diese Lektion ist sprachbasiert\"},\"buttons\":{\"close-lesson\":\"Lektion schlieen\",\"continue\":\"Weiter\",\"done\":\"OK, ich bin fertig\",\"open-ed\":\"Ed ffnen\",\"send\":\"Senden\"},\"dial-distribution\":{\"touch-to-rotate\":\"Hier tippen,&nbsp;um&nbsp;zu drehen\"},\"dial\":{\"touch-to-rotate\":\"Hier tippen,&nbsp;um&nbsp;zu drehen\"},\"dialogs\":{\"disconnection\":{\"needs-background\":\"Um diese Lektion abzuschlieen, muss Ed im&nbsp;Hintergrund laufen.\",\"please-open-ed\":\"Um fortzufahren, ffnen Sie bitte Ed und starten Sie die Lektion neu, damit Ihr Fortschritt richtig protokolliert werden&nbsp;kann.\"}},\"game-jeopardy\":{\"is-false\":\"Falsch\",\"is-true\":\"Richtig\"},\"game-jumble\":{\"drag-letters\":\"Ziehen Sie die Buchstaben auf das Wort oben\"},\"game\":{\"bonus-time\":\"+%{bonus_time} Sekunden\",\"go\":\"LOS\",\"labels\":{\"score\":\"Ergebnis\",\"timer\":\"Timer\"},\"move-on\":\"Weitermachen\",\"of\":\"von\",\"play-again\":\"Noch einmal spielen\",\"play-game\":\"OK, ich bin soweit!\",\"your-best\":\"Ihr Rekord\",\"your-score\":\"Ihr Ergebnis\",\"your-stars\":\"Ihre Sterne\"},\"image\":{\"tap-to-continue\":\"Hier tippen, um fortzufahren\"},\"lesson-info\":{\"lesson-label\":\"Lektion\"},\"menu\":{\"brainboost-page-count\":\"Sie sind bei Frage **%{index}** von **%{total}**\",\"cancel\":\"Abbrechen\",\"exit\":\"Lektion beenden\",\"exit-quiz\":\"Quiz beenden\",\"go-back\":\"Letzte Folie prfen\",\"page-count\":\"Sie sind auf Folie **%{index}** von **%{total}**\",\"restart\":\"Lektion neu starten\",\"resume\":\"Fortsetzen\"},\"peer-authoring\":{\"image-title\":\"Bildtitel\",\"submit\":\"Einsenden\",\"title-placeholder\":\"Geben Sie hier den Titel ein\",\"upload-complete\":\"Upload abgeschlossen\",\"uploading\":\"Wird hochgeladen\",\"video-title\":\"Videotitel\"},\"pie-chart\":{\"touch-to-begin\":\"Hier tippen, um zu beginnen\"},\"slide-answer\":{\"times-up\":\"Die Zeit ist abgelaufen!\",\"too-slow\":\"Zu langsam!\"},\"slider\":{\"touch-to-slide\":\"Hier tippen, um zu schieben\"},\"social\":{\"be-first\":\"Geben Sie als erstes Ihre Meinung ab.\",\"delete\":\"Lschen\",\"have-your-say\":\"Geben Sie Ihre Meinung ab\",\"report\":\"Melden\",\"reported\":\"Gemeldet\",\"thats-all\":\"So viel fr heute.\"},\"stars\":{\"all-earned\":\"1 Stern verdient |||| %{smart_count} Sterne verdient\",\"available\":\"1 Stern verfgbar |||| %{smart_count} Sterne verfgbar\",\"earned\":\"Sie haben %{earned} von %{smart_count} Stern verdient |||| Sie haben %{earned} von %{smart_count} Sternen verdient\"},\"text-sequence\":{\"of\":\"von\"},\"video\":{\"not-available\":\"Dieses Video ist </br> momentan leider nicht verfgbar.\",\"skip-video\":\"Video berspringen\"}}","module.exports = {\"audio-popup\":{\"allow\":\"Allow audio for this lesson\",\"cancel\":\"Cancel\",\"description\":\"To listen to the narration, please allow audio for this lesson.\",\"title\":\"This lesson is narrated\"},\"buttons\":{\"close-lesson\":\"Close Lesson\",\"continue\":\"Continue\",\"done\":\"Continue\",\"open-ed\":\"Open Ed\",\"send\":\"Send\"},\"dial-distribution\":{\"touch-to-rotate\":\"Touch&nbsp;to&nbsp;rotate\"},\"dial\":{\"touch-to-rotate\":\"Touch&nbsp;to&nbsp;rotate\"},\"dialogs\":{\"disconnection\":{\"needs-background\":\"To complete this lesson, Ed needs to be running in the&nbsp;background.\",\"please-open-ed\":\"To continue, please open Ed and restart the lesson so that your progress can be tracked&nbsp;correctly.\"}},\"game-jeopardy\":{\"is-false\":\"False\",\"is-true\":\"True\"},\"game-jumble\":{\"drag-letters\":\"Drag the letters to the word above\"},\"game\":{\"bonus-time\":\"+%{bonus_time} seconds\",\"go\":\"GO\",\"labels\":{\"score\":\"Score\",\"timer\":\"Timer\"},\"move-on\":\"Move On\",\"of\":\"of\",\"play-again\":\"Play Again\",\"play-game\":\"OK, I'm ready!\",\"your-best\":\"Your best score\",\"your-score\":\"Your score\",\"your-stars\":\"Your stars\"},\"image\":{\"tap-to-continue\":\"Tap to continue\"},\"lesson-info\":{\"lesson-label\":\"Lesson\"},\"menu\":{\"brainboost-page-count\":\"Youre on question **%{index}** of **%{total}**\",\"cancel\":\"Cancel\",\"exit\":\"Exit lesson\",\"exit-quiz\":\"Exit quiz\",\"go-back\":\"Review last slide\",\"page-count\":\"Youre on slide **%{index}** of **%{total}**\",\"restart\":\"Restart lesson\",\"resume\":\"Resume\"},\"peer-authoring\":{\"image-title\":\"Image Title\",\"submit\":\"Submit\",\"title-placeholder\":\"Enter title here\",\"upload-complete\":\"Upload Complete\",\"uploading\":\"Uploading...\",\"video-title\":\"Video Title\"},\"pie-chart\":{\"touch-to-begin\":\"Touch to begin\"},\"slide-answer\":{\"times-up\":\"Time's Up!\",\"too-slow\":\"Too Slow!\"},\"slider\":{\"touch-to-slide\":\"Touch to slide\"},\"social\":{\"be-first\":\"Be the first to have your say.\",\"delete\":\"Delete\",\"have-your-say\":\"Have your say\",\"report\":\"Report\",\"reported\":\"Reported\",\"thats-all\":\"That's all for now.\"},\"stars\":{\"all-earned\":\"1 star earned |||| %{smart_count} stars earned\",\"available\":\"1 star available |||| %{smart_count} stars available\",\"earned\":\"You earned %{earned} out of %{smart_count} star |||| You earned %{earned} out of %{smart_count} stars\"},\"text-sequence\":{\"of\":\"of\"},\"video\":{\"not-available\":\"Sorry, this video is </br> unavailable at the moment.\",\"skip-video\":\"Skip Video\"}}","module.exports = {\"audio-popup\":{\"allow\":\"Permitir audio en esta leccin\",\"cancel\":\"Cancelar\",\"description\":\"Para escuchar la narracin, permite el audio en esta leccin.\",\"title\":\"Esta leccin incluye narracin\"},\"buttons\":{\"close-lesson\":\"Cerrar leccin\",\"continue\":\"Continuar\",\"done\":\"He terminado\",\"open-ed\":\"Abrir Ed\",\"send\":\"Enviar\"},\"dial-distribution\":{\"touch-to-rotate\":\"Tocar&nbsp;para&nbsp;girar\"},\"dial\":{\"touch-to-rotate\":\"Tocar&nbsp;para&nbsp;girar\"},\"dialogs\":{\"disconnection\":{\"needs-background\":\"Para completar esta leccin, Ed se tiene que ejecutar en&nbsp;segundo plano.\",\"please-open-ed\":\"Para continuar, abre Ed y reinicia la leccin para que se pueda realizar correctamente un seguimiento de tu&nbsp;progreso.\"}},\"game-jeopardy\":{\"is-false\":\"Falso\",\"is-true\":\"Verdadero\"},\"game-jumble\":{\"drag-letters\":\"Arrastra las letras a la palabra anterior\"},\"game\":{\"bonus-time\":\"+%{bonus_time} segundos\",\"go\":\"IR\",\"labels\":{\"score\":\"Puntuacin\",\"timer\":\"Temporizador\"},\"move-on\":\"Seguir\",\"of\":\"de\",\"play-again\":\"Volver a jugar\",\"play-game\":\"Estoy listo/a!\",\"your-best\":\"Tu mejor puntuacin\",\"your-score\":\"Tu puntuacin\",\"your-stars\":\"Tus estrellas\"},\"image\":{\"tap-to-continue\":\"Pulsar para continuar\"},\"lesson-info\":{\"lesson-label\":\"Leccin\"},\"menu\":{\"brainboost-page-count\":\"Ests en la pregunta **%{index}** de **%{total}**\",\"cancel\":\"Cancelar\",\"exit\":\"Salir de la leccin\",\"exit-quiz\":\"Dejar cuestionario\",\"go-back\":\"Revisar ltima diapositiva\",\"page-count\":\"Ests en la diapositiva **%{index}** de **%{total}**\",\"restart\":\"Reiniciar leccin\",\"resume\":\"Reanudar\"},\"peer-authoring\":{\"image-title\":\"Ttulo de la imagen\",\"submit\":\"Enviar\",\"title-placeholder\":\"Introduce el ttulo aqu\",\"upload-complete\":\"Carga completada\",\"uploading\":\"Cargando\",\"video-title\":\"Ttulo del vdeo\"},\"pie-chart\":{\"touch-to-begin\":\"Tocar para empezar\"},\"slide-answer\":{\"times-up\":\"Se acab el tiempo!\",\"too-slow\":\"Demasiado lento!\"},\"slider\":{\"touch-to-slide\":\"Tocar para deslizar\"},\"social\":{\"be-first\":\"S el primero en expresar tu opinin.\",\"delete\":\"Eliminar\",\"have-your-say\":\"Expresa tu opinin\",\"report\":\"Notificar\",\"reported\":\"Notificado\",\"thats-all\":\"Esto es todo por ahora.\"},\"stars\":{\"all-earned\":\"1 estrella ganada |||| %{smart_count} estrellas ganadas\",\"available\":\"1 estrella disponible |||| %{smart_count} estrellas disponibles\",\"earned\":\"Has ganado %{earned} de %{smart_count} estrella |||| Has ganado %{earned} de %{smart_count} estrellas\"},\"text-sequence\":{\"of\":\"de\"},\"video\":{\"not-available\":\"Lo sentimos, este vdeo no est </br> disponible en este momento.\",\"skip-video\":\"Saltar vdeo\"}}","module.exports = {\"audio-popup\":{\"allow\":\"Activar el audio para esta leccin\",\"cancel\":\"Cancelar\",\"description\":\"Para escuchar la narracin, por favor active el audio en esta leccin.\",\"title\":\"Esta leccin est narrada\"},\"buttons\":{\"close-lesson\":\"Cerrar leccin\",\"continue\":\"Continuar\",\"done\":\"He terminado\",\"open-ed\":\"Abrir Ed\",\"send\":\"Enviar\"},\"dial-distribution\":{\"touch-to-rotate\":\"Tocar&nbsp;para&nbsp;girar\"},\"dial\":{\"touch-to-rotate\":\"Tocar&nbsp;para&nbsp;girar\"},\"dialogs\":{\"disconnection\":{\"needs-background\":\"Para completar esta leccin, Ed se tiene que ejecutar en&nbsp;segundo plano.\",\"please-open-ed\":\"Para continuar, abre Ed y reinicia la leccin para que se pueda realizar correctamente un seguimiento de tu&nbsp;progreso.\"}},\"game-jeopardy\":{\"is-false\":\"Falso\",\"is-true\":\"Verdadero\"},\"game-jumble\":{\"drag-letters\":\"Arrastra las letras a la palabra anterior\"},\"game\":{\"bonus-time\":\"+%{bonus_time} segundos\",\"go\":\"IR\",\"labels\":{\"score\":\"Puntuacin\",\"timer\":\"Temporizador\"},\"move-on\":\"Seguir\",\"of\":\"de\",\"play-again\":\"Volver a jugar\",\"play-game\":\"Estoy listo!\",\"your-best\":\"Tu mejor puntuacin\",\"your-score\":\"Tu puntuacin\",\"your-stars\":\"Tus estrellas\"},\"image\":{\"tap-to-continue\":\"Pulsar para continuar\"},\"lesson-info\":{\"lesson-label\":\"Leccin\"},\"menu\":{\"brainboost-page-count\":\"Ests en la pregunta **%{index}** de **%{total}**\",\"cancel\":\"Cancelar\",\"exit\":\"Salir de la leccin\",\"exit-quiz\":\"Dejar cuestionario\",\"go-back\":\"Revisar ltima diapositiva\",\"page-count\":\"Ests en la diapositiva **%{index}** de **%{total}**\",\"restart\":\"Reiniciar leccin\",\"resume\":\"Reanudar\"},\"peer-authoring\":{\"image-title\":\"Ttulo de la imagen\",\"submit\":\"Enviar\",\"title-placeholder\":\"Escriba el ttulo aqu\",\"upload-complete\":\"Carga completa\",\"uploading\":\"Cargando...\",\"video-title\":\"Ttulo del video\"},\"pie-chart\":{\"touch-to-begin\":\"Tocar para empezar\"},\"slide-answer\":{\"times-up\":\"Se acab el tiempo!\",\"too-slow\":\"Demasiado lento!\"},\"slider\":{\"touch-to-slide\":\"Tocar para deslizar\"},\"social\":{\"be-first\":\"Sea el primero en opinar.\",\"delete\":\"Eliminar\",\"have-your-say\":\"Expresar su opinin\",\"report\":\"Reportar\",\"reported\":\"Reportado\",\"thats-all\":\"Eso es todo por ahora.\"},\"stars\":{\"all-earned\":\"1 estrella ganada |||| %{smart_count} estrellas ganadas\",\"available\":\"1 estrella disponible |||| %{smart_count} estrellas disponibles\",\"earned\":\"Has ganado %{earned} de %{smart_count} estrella |||| Has ganado %{earned} de %{smart_count} estrellas\"},\"text-sequence\":{\"of\":\"de\"},\"video\":{\"not-available\":\"Lo sentimos, este vdeo no est </br> disponible en este momento.\",\"skip-video\":\"Saltar vdeo\"}}","module.exports = {\"audio-popup\":{\"allow\":\"Salli net tlle tehtvlle\",\"cancel\":\"Peruuta\",\"description\":\"Jos haluat kuunnella selostusta, salli net tlle tehtvlle.\",\"title\":\"Tss tehtvss on selostusni\"},\"buttons\":{\"close-lesson\":\"Sulje tehtv\",\"continue\":\"Jatka\",\"done\":\"Jatka\",\"open-ed\":\"Avaa Ed\",\"send\":\"Lhet\"},\"dial-distribution\":{\"touch-to-rotate\":\"Kierr&nbsp;&nbsp;koskettamalla\"},\"dial\":{\"touch-to-rotate\":\"Kierr&nbsp;&nbsp;koskettamalla\"},\"dialogs\":{\"disconnection\":{\"needs-background\":\"Edin on oltava kynniss taustalla, jotta tm tehtv voitaisiin&nbsp;suorittaa.\",\"please-open-ed\":\"Jos haluat jatkaa, avaa Ed ja aloita tehtv uudelleen, jotta edistymistsi voidaan seurata&nbsp;oikein.\"}},\"game-jeopardy\":{\"is-false\":\"Vrin\",\"is-true\":\"Totta\"},\"game-jumble\":{\"drag-letters\":\"Ved kirjaimet yll olevaan sanaan\"},\"game\":{\"bonus-time\":\"+ %{bonus_time} sekuntia\",\"go\":\"ALOITA\",\"labels\":{\"score\":\"Tulos\",\"timer\":\"Kello\"},\"move-on\":\"Jatka eteenpin\",\"of\":\"/\",\"play-again\":\"Toista uudestaan\",\"play-game\":\"Selv, olen valmis!\",\"your-best\":\"Paras tuloksesi\",\"your-score\":\"Oma tuloksesi\",\"your-stars\":\"Omat thtesi\"},\"image\":{\"tap-to-continue\":\"Jatka napauttamalla\"},\"lesson-info\":{\"lesson-label\":\"Tehtv\"},\"menu\":{\"brainboost-page-count\":\"Olet kysymyksess **%{index}**/**%{total}**\",\"cancel\":\"Peruuta\",\"exit\":\"Poistu tehtvst\",\"exit-quiz\":\"Poistu kyselyst\",\"go-back\":\"Nyt viimeinen dia\",\"page-count\":\"Olet diassa **%{index}**/**%{total}**\",\"restart\":\"Aloita tehtv uudelleen\",\"resume\":\"Jatka\"},\"peer-authoring\":{\"image-title\":\"Kuvan nimi\",\"submit\":\"Lhet\",\"title-placeholder\":\"Syt nimi thn\",\"upload-complete\":\"Lataus valmis\",\"uploading\":\"Ladataan...\",\"video-title\":\"Videon nimi\"},\"pie-chart\":{\"touch-to-begin\":\"Aloita koskettamalla\"},\"slide-answer\":{\"times-up\":\"Aika loppui!\",\"too-slow\":\"Liian hidas!\"},\"slider\":{\"touch-to-slide\":\"Vaihda diaa koskettamalla\"},\"social\":{\"be-first\":\"Sano sanottavasi ensimmisen.\",\"delete\":\"Poista\",\"have-your-say\":\"Sano sanottavasi\",\"report\":\"Ilmoita\",\"reported\":\"Ilmoitettu\",\"thats-all\":\"Siin oli toistaiseksi kaikki.\"},\"stars\":{\"all-earned\":\"1 thti ansaittu |||| %{smart_count} thte ansaittu\",\"available\":\"1 thti saatavilla |||| %{smart_count} thte saatavilla\",\"earned\":\"Olet ansainnut %{earned}/%{smart_count} thden |||| Olet ansainnut %{earned}/%{smart_count} thte\"},\"text-sequence\":{\"of\":\"/\"},\"video\":{\"not-available\":\"Ikv kyll tm video ei ole </br> juuri nyt saatavilla.\",\"skip-video\":\"Ohita video\"}}","module.exports = {\"audio-popup\":{\"allow\":\"Autoriser laudio pour cette leon\",\"cancel\":\"Annuler\",\"description\":\"Pour couter le commentaire, veuillez autoriser laudio pour cette leon.\",\"title\":\"Cette leon est commente\"},\"buttons\":{\"close-lesson\":\"Fermer la leon\",\"continue\":\"Continuer\",\"done\":\"Ok, jai fini\",\"open-ed\":\"Ouvrir Ed\",\"send\":\"Envoyer\"},\"dial-distribution\":{\"touch-to-rotate\":\"Appuyer pour tourner\"},\"dial\":{\"touch-to-rotate\":\"Appuyer pour tourner\"},\"dialogs\":{\"disconnection\":{\"needs-background\":\"Pour faire cette leon, Ed a besoin de fonctionner en arrire-plan\",\"please-open-ed\":\"Pour continuer, veuillez ouvrir Ed et recommencer la leon afin de calculer votre progrs. \"}},\"game-jeopardy\":{\"is-false\":\"Faux\",\"is-true\":\"Vrai\"},\"game-jumble\":{\"drag-letters\":\"Fair glisser les lettres au mot au-dessus\"},\"game\":{\"bonus-time\":\"+%{bonus_time} secondes\",\"go\":\"ALLEZ\",\"labels\":{\"score\":\"Score\",\"timer\":\"Minuteur\"},\"move-on\":\"Poursuivre\",\"of\":\"de\",\"play-again\":\"Recommencer\",\"play-game\":\"OK, je suis prt(e) !\",\"your-best\":\"Votre meilleur score\",\"your-score\":\"Votre score\",\"your-stars\":\"Vos toiles\"},\"image\":{\"tap-to-continue\":\"Appuyer pour continuer\"},\"lesson-info\":{\"lesson-label\":\"Leon\"},\"menu\":{\"brainboost-page-count\":\"Vous en tes  la question **%{index}** sur **%{total}**\",\"cancel\":\"Annuler\",\"exit\":\"Quitter\",\"exit-quiz\":\"Quitter le quiz\",\"go-back\":\"Retourner au dernier cran\",\"page-count\":\"Vous regardez diapo. **%{index}** de **%{total}**\",\"restart\":\"Recommencer\",\"resume\":\"Continuer\"},\"peer-authoring\":{\"image-title\":\"Titre de limage\",\"submit\":\"Envoyer\",\"title-placeholder\":\"Saisir le titre ici\",\"upload-complete\":\"Tlchargement termin\",\"uploading\":\"Tlchargement en cours...\",\"video-title\":\"Titre de la vido\"},\"pie-chart\":{\"touch-to-begin\":\"Appuyer pour commencer\"},\"slide-answer\":{\"times-up\":\"Le temps est coul !\",\"too-slow\":\"Trop lent!\"},\"slider\":{\"touch-to-slide\":\"Toucher pour glisser\"},\"social\":{\"be-first\":\"Soyez le premier/la premire  donner votre avis.\",\"delete\":\"Supprimer\",\"have-your-say\":\"Donnez votre avis\",\"report\":\"Signaler\",\"reported\":\"Communiqu\",\"thats-all\":\"Cest tout pour linstant.\"},\"stars\":{\"all-earned\":\"1 toile gagne |||| %{smart_count} toiles gagnes\",\"available\":\"1 toile  gagner |||| %{smart_count} toiles  gagner\",\"earned\":\"Vous avez gagn %{earned} de %{smart_count} toile |||| Vous avez gagn %{earned} de %{smart_count} toiles\"},\"text-sequence\":{\"of\":\"de\"},\"video\":{\"not-available\":\"Malheureusement, cette video nest </br> pas disponible pour le moment. \",\"skip-video\":\"Passer la vido\"}}","module.exports = {\"audio-popup\":{\"allow\":\"       \",\"cancel\":\" \",\"description\":\"    ,         \",\"title\":\"    \"},\"buttons\":{\"close-lesson\":\" \",\"continue\":\"\",\"done\":\" ,   \",\"open-ed\":\"Ed \",\"send\":\"\"},\"dial-distribution\":{\"touch-to-rotate\":\"    \"},\"dial\":{\"touch-to-rotate\":\"    \"},\"dialogs\":{\"disconnection\":{\"needs-background\":\"      , Ed       \",\"please-open-ed\":\"   ,  Ed                 & nbsp;\"}},\"game-jeopardy\":{\"is-false\":\"\",\"is-true\":\"\"},\"game-jumble\":{\"drag-letters\":\"       \"},\"game\":{\"bonus-time\":\"\\\"+%{bonus_time} \",\"go\":\"\",\"labels\":{\"score\":\"\",\"timer\":\"\"},\"move-on\":\" \",\"of\":\"\",\"play-again\":\"  \",\"play-game\":\" ,   \",\"your-best\":\" \",\"your-score\":\" \",\"your-stars\":\" \"},\"image\":{\"tap-to-continue\":\"    \"},\"lesson-info\":{\"lesson-label\":\"\"},\"menu\":{\"cancel\":\" \",\"exit\":\"   \",\"go-back\":\"    \",\"page-count\":\"    **%{index} **  **%{total} **\",\"restart\":\"    \"},\"peer-authoring\":{\"image-title\":\" \",\"submit\":\" \",\"title-placeholder\":\"   \",\"upload-complete\":\" \",\"uploading\":\"  ...\",\"video-title\":\" \"},\"pie-chart\":{\"touch-to-begin\":\"     \"},\"slide-answer\":{\"too-slow\":\" !\"},\"slider\":{\"touch-to-slide\":\"     \"},\"social\":{\"be-first\":\"      \",\"delete\":\"\",\"have-your-say\":\"  \",\"report\":\" \",\"reported\":\"  \",\"thats-all\":\"    \"},\"stars\":{\"all-earned\":\"1   ||| %{smart_count}   \",\"available\":\"1   ||| %{smart_count}   \",\"earned\":\" %{earned}  %{smart_count}      |||  %{earned}  %{smart_count}    \"},\"text-sequence\":{\"of\":\"\"},\"video\":{\"not-available\":\" ,     </br>  \",\"skip-video\":\" \"}}","module.exports = {\"audio-popup\":{\"allow\":\"Izinkan audio untuk pelajaran ini\",\"cancel\":\"Batal\",\"description\":\"Untuk mendengarkan narasinya, izinkanlah audio untuk pelajaran ini.\",\"title\":\"Pelajaran ini dinarasikan\"},\"buttons\":{\"close-lesson\":\"Tutup Pelajaran\",\"continue\":\"Lanjutkan\",\"done\":\"Ok, saya sudah selesai\",\"open-ed\":\"Buka Ed\",\"send\":\"Kirim\"},\"dial-distribution\":{\"touch-to-rotate\":\"Sentuh&nbsp;untuk&nbsp;memutar\"},\"dial\":{\"touch-to-rotate\":\"Sentuh&nbsp;untuk&nbsp;memutar\"},\"dialogs\":{\"disconnection\":{\"needs-background\":\"Untuk menyelesaikan pelajaran ini, Ed harus dijalankan di latar belakang&nbsp;.\",\"please-open-ed\":\"Untuk melanjutkan, buka Ed dan mulai ulang pelajaran agar kemajuan Anda dapat dilacak&nbsp;dengan benar.\"}},\"game-jeopardy\":{\"is-false\":\"Salah\",\"is-true\":\"Benar\"},\"game-jumble\":{\"drag-letters\":\"Geser huruf ke kata di atas\"},\"game\":{\"bonus-time\":\"+%{bonus_time} detik\",\"go\":\"YAK!\",\"labels\":{\"score\":\"Skor\",\"timer\":\"Pengatur Waktu\"},\"move-on\":\"Maju Terus\",\"of\":\"dari\",\"play-again\":\"Mainkan Lagi\",\"play-game\":\"Baik, saya siap!\",\"your-best\":\"Rekor terbaik Anda\",\"your-score\":\"Skor Anda\",\"your-stars\":\"Bintang Anda\"},\"image\":{\"tap-to-continue\":\"Ketuk untuk melanjutkan\"},\"lesson-info\":{\"lesson-label\":\"Pelajaran\"},\"menu\":{\"brainboost-page-count\":\"Anda berada di pertanyaan **%{index}** dari **%{total}**\",\"cancel\":\"Batal\",\"exit\":\"Keluar dari pelajaran\",\"exit-quiz\":\"Keluar kuis\",\"go-back\":\"Tinjau slide terakhir\",\"page-count\":\"Anda berada pada slide **%{index}** dari **%{total}**\",\"restart\":\"Mulai kembali pelajaran\",\"resume\":\"Lanjut\"},\"peer-authoring\":{\"image-title\":\"Judul Gambar\",\"submit\":\"Serahkan\",\"title-placeholder\":\"Masukkan judul di sini\",\"upload-complete\":\"Unduh Selesai\",\"uploading\":\"Sedang mengunduh...\",\"video-title\":\"Judul Video\"},\"pie-chart\":{\"touch-to-begin\":\"Sentuh untuk memulai\"},\"slide-answer\":{\"times-up\":\"Waktu Habis!\",\"too-slow\":\"Terlalu Lambat!\"},\"slider\":{\"touch-to-slide\":\"Sentuh untuk menggeser\"},\"social\":{\"be-first\":\"Jadilah orang pertama yang berkesempatan mengungkapkan pendapat Anda.\",\"delete\":\"Hapus\",\"have-your-say\":\"Katakan saja\",\"report\":\"Laporan\",\"reported\":\"Dilaporkan\",\"thats-all\":\"Itu saja untuk saat ini.\"},\"stars\":{\"all-earned\":\"1 bintang diperoleh |||| %{smart_count} perolehan bintang\",\"available\":\"1 bintang tersedia |||| %{smart_count} bintang tersedia\",\"earned\":\"Anda memperoleh %{earned} dari %{smart_count} bintang |||| Anda memperoleh %{earned} dari %{smart_count} bintang\"},\"text-sequence\":{\"of\":\"dari\"},\"video\":{\"not-available\":\"Maaf, video ini </br> tidak tersedia saat ini.\",\"skip-video\":\"Lewati Video\"}}","module.exports = {\"audio-popup\":{\"allow\":\"Consenti audio per questa lezione\",\"cancel\":\"Annulla\",\"description\":\"Per ascoltare i commenti, consenti laudio per questa lezione.\",\"title\":\"Questa lezione ha commenti audio\"},\"buttons\":{\"close-lesson\":\"Chiudi lezione\",\"continue\":\"Continua\",\"done\":\"OK, ho finito\",\"open-ed\":\"Apri Ed\",\"send\":\"Invia\"},\"dial-distribution\":{\"touch-to-rotate\":\"Tocca&nbsp;per&nbsp;ruotare\"},\"dial\":{\"touch-to-rotate\":\"Tocca&nbsp;per&nbsp;ruotare\"},\"dialogs\":{\"disconnection\":{\"needs-background\":\"Per completare questa lezione, Ed devessere eseguito in&nbsp;background.\",\"please-open-ed\":\"Per continuare, apri Ed e riavvia la lezione cos il tuo progresso potr essere tracciato&nbsp;correttamente.\"}},\"game-jeopardy\":{\"is-false\":\"Falso\",\"is-true\":\"Vero\"},\"game-jumble\":{\"drag-letters\":\"Trascina le lettere nella parola in alto\"},\"game\":{\"bonus-time\":\"+%{bonus_time} secondi\",\"go\":\"VIA\",\"labels\":{\"score\":\"Punteggio\",\"timer\":\"Timer\"},\"move-on\":\"Vai avanti\",\"of\":\"di\",\"play-again\":\"Gioca di nuovo\",\"play-game\":\"OK, sono pronto!\",\"your-best\":\"Il tuo record\",\"your-score\":\"Il tuo punteggio\",\"your-stars\":\"Le tue stelle\"},\"image\":{\"tap-to-continue\":\"Tocca per continuare\"},\"lesson-info\":{\"lesson-label\":\"Lezione\"},\"menu\":{\"brainboost-page-count\":\"Sei alla domanda **%{index}** di **%{total}**\",\"cancel\":\"Annulla\",\"exit\":\"Esci dalla lezione\",\"exit-quiz\":\"Esci dal quiz\",\"go-back\":\"Rivedi lultima diapositiva\",\"page-count\":\"Ti trovi alla diapositiva **%{index}** di **%{total}**\",\"restart\":\"Ricomincia la lezione\",\"resume\":\"Riprendi\"},\"peer-authoring\":{\"image-title\":\"Titolo immagine\",\"submit\":\"Invia\",\"title-placeholder\":\"Inserisci il titolo\",\"upload-complete\":\"Caricamento completato\",\"uploading\":\"Caricamento...\",\"video-title\":\"Titolo video\"},\"pie-chart\":{\"touch-to-begin\":\"Tocca per iniziare\"},\"slide-answer\":{\"times-up\":\"Tempo scaduto!\",\"too-slow\":\"Troppo lento!\"},\"slider\":{\"touch-to-slide\":\"Tocca per scorrere\"},\"social\":{\"be-first\":\"Sii il primo a dire la tua.\",\"delete\":\"Elimina\",\"have-your-say\":\"Di' la tua\",\"report\":\"Segnala\",\"reported\":\"Segnalato\",\"thats-all\":\" tutto per ora.\"},\"stars\":{\"all-earned\":\"1 stella ottenuta |||| %{smart_count} stelle ottenute\",\"available\":\"1 stella disponibile |||| %{smart_count} stelle disponibili\",\"earned\":\"Hai ottenuto %{earned} stella su %{smart_count}. |||| Hai ottenuto %{earned} stelle su %{smart_count}.\"},\"text-sequence\":{\"of\":\"di\"},\"video\":{\"not-available\":\"Questo video non  </br> al momento disponibile.\",\"skip-video\":\"Salta video\"}}","module.exports = {\"audio-popup\":{\"allow\":\"\",\"cancel\":\"\",\"description\":\"\",\"title\":\"\"},\"buttons\":{\"close-lesson\":\"\",\"continue\":\"\",\"done\":\"\",\"open-ed\":\"Ed\",\"send\":\"\"},\"dial-distribution\":{\"touch-to-rotate\":\"&nbsp;&nbsp;\"},\"dial\":{\"touch-to-rotate\":\"&nbsp;&nbsp;\"},\"dialogs\":{\"disconnection\":{\"needs-background\":\"&nbsp;Ed\",\"please-open-ed\":\"Ed&nbsp;\"}},\"game-jeopardy\":{\"is-false\":\"\",\"is-true\":\"\"},\"game-jumble\":{\"drag-letters\":\"\"},\"game\":{\"bonus-time\":\"+%{bonus_time}\",\"go\":\"\",\"labels\":{\"score\":\"\",\"timer\":\"\"},\"move-on\":\"\",\"of\":\"\",\"play-again\":\"\",\"play-game\":\"OK\",\"your-best\":\"\",\"your-score\":\"\",\"your-stars\":\"\"},\"image\":{\"tap-to-continue\":\"\"},\"lesson-info\":{\"lesson-label\":\"\"},\"menu\":{\"brainboost-page-count\":\",**%{total}****%{index}**\",\"cancel\":\"\",\"exit\":\"\",\"exit-quiz\":\"\",\"go-back\":\"\",\"page-count\":\"\\\\*%{index}/%{total}\\\\*\",\"restart\":\"\",\"resume\":\"\"},\"peer-authoring\":{\"image-title\":\"\",\"submit\":\"\",\"title-placeholder\":\"\",\"upload-complete\":\"\",\"uploading\":\"...\",\"video-title\":\"\"},\"pie-chart\":{\"touch-to-begin\":\"\"},\"slide-answer\":{\"times-up\":\"\",\"too-slow\":\"\"},\"slider\":{\"touch-to-slide\":\"\"},\"social\":{\"be-first\":\"\",\"delete\":\"\",\"have-your-say\":\"\",\"report\":\"\",\"reported\":\"\",\"thats-all\":\"\"},\"stars\":{\"all-earned\":\"1  |||| %{smart_count} \",\"available\":\"1  |||| %{smart_count} \",\"earned\":\" %{smart_count}  %{earned}  ||||  %{smart_count}  %{earned} \"},\"text-sequence\":{\"of\":\"\"},\"video\":{\"not-available\":\"</br> \",\"skip-video\":\"\"}}","module.exports = {\"audio-popup\":{\"allow\":\"   \",\"cancel\":\"\",\"description\":\"      .\",\"title\":\"   \"},\"buttons\":{\"close-lesson\":\" \",\"continue\":\"\",\"done\":\", \",\"open-ed\":\"Ed \",\"send\":\"\"},\"dial-distribution\":{\"touch-to-rotate\":\" \"},\"dial\":{\"touch-to-rotate\":\" \"},\"dialogs\":{\"disconnection\":{\"needs-background\":\"   Ed   .\",\"please-open-ed\":\"       Ed   .\"}},\"game-jeopardy\":{\"is-false\":\"\",\"is-true\":\"\"},\"game-jumble\":{\"drag-letters\":\"    \"},\"game\":{\"bonus-time\":\"+%{bonus_time} \",\"go\":\"\",\"labels\":{\"score\":\"\",\"timer\":\"\"},\"move-on\":\"\",\"of\":\"\",\"play-again\":\" \",\"play-game\":\" !\",\"your-best\":\" \",\"your-score\":\"\",\"your-stars\":\"\"},\"image\":{\"tap-to-continue\":\" \"},\"lesson-info\":{\"lesson-label\":\"\"},\"menu\":{\"brainboost-page-count\":\"**%{total}**  **%{index}** .\",\"cancel\":\"\",\"exit\":\" \",\"exit-quiz\":\" \",\"go-back\":\"  \",\"page-count\":\"**%{total}**  **%{index}**   \",\"restart\":\" \",\"resume\":\" \"},\"peer-authoring\":{\"image-title\":\" \",\"submit\":\"\",\"title-placeholder\":\"  \",\"upload-complete\":\" \",\"uploading\":\" \",\"video-title\":\" \"},\"pie-chart\":{\"touch-to-begin\":\" \"},\"slide-answer\":{\"times-up\":\"  !\",\"too-slow\":\" !\"},\"slider\":{\"touch-to-slide\":\" \"},\"social\":{\"be-first\":\"   .\",\"delete\":\"\",\"have-your-say\":\"    \",\"report\":\"\",\"reported\":\"\",\"thats-all\":\"    .\"},\"stars\":{\"all-earned\":\" 1  ||||  %{smart_count} \",\"available\":\" 1   ||||  %{smart_count}  \",\"earned\":\" {smart_count}  %{earned}  ||||  {smart_count}  %{earned} \"},\"text-sequence\":{\"of\":\"\"},\"video\":{\"not-available\":\".      .\",\"skip-video\":\" \"}}","module.exports = {\"audio-popup\":{\"allow\":\"Sta audio toe voor deze les\",\"cancel\":\"Annuleren\",\"description\":\"Om te luisteren, sta je voor deze les audio toe.\",\"title\":\"Deze les is ingesproken\"},\"buttons\":{\"close-lesson\":\"Sluit les\",\"continue\":\"Ga verder\",\"done\":\"Ok, ik ben klaar\",\"open-ed\":\"Open Ed\",\"send\":\"Verzenden\"},\"dial-distribution\":{\"touch-to-rotate\":\"Aanraken&nbsp;om te&nbsp;draaien\"},\"dial\":{\"touch-to-rotate\":\"Aanraken&nbsp;om te&nbsp;draaien\"},\"dialogs\":{\"disconnection\":{\"needs-background\":\"Om deze les te voltooien, moet Ed op de achtergrond&nbsp;draaien.\",\"please-open-ed\":\"Om verder te gaan, open je Ed en start je de les opnieuw zodat je vooruitgang correct kan worden&nbsp;gevolgd.\"}},\"game-jeopardy\":{\"is-false\":\"Niet waar\",\"is-true\":\"Waar\"},\"game-jumble\":{\"drag-letters\":\"Sleep de letters naar het bovenstaande woord\"},\"game\":{\"bonus-time\":\"+%{bonus_time} seconden\",\"go\":\"START!\",\"labels\":{\"score\":\"Score\",\"timer\":\"Timer\"},\"move-on\":\"Verder gaan\",\"of\":\"van\",\"play-again\":\"Weer spelen\",\"play-game\":\"Ik ben er klaar voor!\",\"your-best\":\"Je record\",\"your-score\":\"Je score\",\"your-stars\":\"Je sterren\"},\"image\":{\"tap-to-continue\":\"Tik om verder te gaan\"},\"lesson-info\":{\"lesson-label\":\"Les\"},\"menu\":{\"brainboost-page-count\":\"Je bent bij vraag **%{index}** van **%{total}**\",\"cancel\":\"Annuleren\",\"exit\":\"Verlaat les\",\"exit-quiz\":\"Quiz afsluiten\",\"go-back\":\"Bekijk laatste dia\",\"page-count\":\"Je bent op dia **%{index}** van **%{total}**\",\"restart\":\"Begin les opnieuw\",\"resume\":\"Doorgaan\"},\"peer-authoring\":{\"image-title\":\"Titel afbeelding\",\"submit\":\"Indienen\",\"title-placeholder\":\"Titel hier invoeren\",\"upload-complete\":\"Upload voltooid\",\"uploading\":\"Uploaden\",\"video-title\":\"Titel video\"},\"pie-chart\":{\"touch-to-begin\":\"Aanraken om te beginnen\"},\"slide-answer\":{\"times-up\":\"De tijd is om!\",\"too-slow\":\"Te langzaam!\"},\"slider\":{\"touch-to-slide\":\"Aanraken om te glijden\"},\"social\":{\"be-first\":\"Wees de eerste om je mening te geven.\",\"delete\":\"Verwijder\",\"have-your-say\":\"Geef je mening\",\"report\":\"Rapporteren\",\"reported\":\"Gerapporteerd\",\"thats-all\":\"Dat was het.\"},\"stars\":{\"all-earned\":\"1 ster verdiend |||| %{smart_count} sterren verdiend\",\"available\":\"1 ster beschikbaar |||| %{smart_count} sterren beschikbaar\",\"earned\":\"Je hebt %{earned} van de %{smart_count} ster verdiend |||| Je hebt %{earned} van de %{smart_count} sterren verdiend\"},\"text-sequence\":{\"of\":\"van\"},\"video\":{\"not-available\":\"Sorry, deze video is </br>  momenteel niet beschikbaar.\",\"skip-video\":\"Video overslaan\"}}","module.exports = {\"audio-popup\":{\"allow\":\"Tillatt lyd for denne leksjonen\",\"cancel\":\"Avbryt\",\"description\":\"For  hre p taleveiledning m du gi tillatelse til lyd for denne leksjonen.\",\"title\":\"Denne leksjonen har taleveiledning\"},\"buttons\":{\"close-lesson\":\"Lukk leksjon\",\"continue\":\"Fortsett\",\"done\":\"Fortsett\",\"open-ed\":\"pne Ed\",\"send\":\"Send\"},\"dial-distribution\":{\"touch-to-rotate\":\"Berr&nbsp;for &nbsp;rotere\"},\"dial\":{\"touch-to-rotate\":\"Berr&nbsp;for &nbsp;rotere\"},\"dialogs\":{\"disconnection\":{\"needs-background\":\"For  fullfre denne leksjonen m Ed kjre i&nbsp;bakgrunnen.\",\"please-open-ed\":\"For  fortsette m du pne Ed og starte leksjonen p nytt, slik at fremgangen din kan spores&nbsp;riktig.\"}},\"game-jeopardy\":{\"is-false\":\"Galt\",\"is-true\":\"Riktig\"},\"game-jumble\":{\"drag-letters\":\"Dra bokstavene til ordet ovenfor\"},\"game\":{\"bonus-time\":\"+%{bonus_time} sekunder\",\"go\":\"START\",\"labels\":{\"score\":\"Poengsum\",\"timer\":\"Stoppeklokke\"},\"move-on\":\"G videre\",\"of\":\"av\",\"play-again\":\"Spill av p nytt\",\"play-game\":\"OK, jeg er klar!\",\"your-best\":\"Din beste poengsum\",\"your-score\":\"Din poengsum\",\"your-stars\":\"Dine stjerner\"},\"image\":{\"tap-to-continue\":\"Trykk for  fortsette\"},\"lesson-info\":{\"lesson-label\":\"Leksjon\"},\"menu\":{\"brainboost-page-count\":\"Du er p sprsml  **%{index}** av **%{total}**\",\"cancel\":\"Avbryt\",\"exit\":\"G ut av leksjon\",\"exit-quiz\":\"G ut av quiz\",\"go-back\":\"Se forrige bilde p nytt\",\"page-count\":\"Du er p bilde **%{index}** av **%{total}**\",\"restart\":\"Start leksjonen p nytt\",\"resume\":\"Gjenoppta\"},\"peer-authoring\":{\"image-title\":\"Bildetittel\",\"submit\":\"Send inn\",\"title-placeholder\":\"Skriv inn tittel her\",\"upload-complete\":\"Opplasting fullfrt\",\"uploading\":\"Laster opp \",\"video-title\":\"Videotittel\"},\"pie-chart\":{\"touch-to-begin\":\"Berr for  begynne\"},\"slide-answer\":{\"times-up\":\"Tiden er ute!\",\"too-slow\":\"For sent!\"},\"slider\":{\"touch-to-slide\":\"Berr for  sveipe\"},\"social\":{\"be-first\":\"Vr den frste til  si din mening.\",\"delete\":\"Slett\",\"have-your-say\":\"Si din mening\",\"report\":\"Rapporter\",\"reported\":\"Rapportert\",\"thats-all\":\"Det var alt for denne gang.\"},\"stars\":{\"all-earned\":\"1 stjerne opptjent |||| %{smart_count} stjerner opptjent\",\"available\":\"1 stjerne tilgjengelig |||| %{smart_count} stjerner tilgjengelig\",\"earned\":\"Du har tjent opp %{earned} av %{smart_count} stjerne |||| Du har tjent opp %{earned} av %{smart_count} stjerner\"},\"text-sequence\":{\"of\":\"av\"},\"video\":{\"not-available\":\"Beklager, denne videoen er </br> utilgjengelig for yeblikket.\",\"skip-video\":\"Hopp over video\"}}","module.exports = {\"audio-popup\":{\"allow\":\"Wcz dwik dla tej lekcji\",\"cancel\":\"Anuluj\",\"description\":\"Aby mc sucha narracji, wcz dwik dla tej lekcji.\",\"title\":\"Ta lekcja ma narratora\"},\"buttons\":{\"close-lesson\":\"Zamknij lekcj\",\"continue\":\"Kontynuuj\",\"done\":\"OK, gotowe\",\"open-ed\":\"Otwrz aplikacj Ed\",\"send\":\"Wylij\"},\"dial-distribution\":{\"touch-to-rotate\":\"Dotknij,&nbsp;aby&nbsp;obrci\"},\"dial\":{\"touch-to-rotate\":\"Dotknij,&nbsp;aby&nbsp;obrci\"},\"dialogs\":{\"disconnection\":{\"needs-background\":\"Aby zakoczy t lekcj, aplikacja Ed musi by uruchomiona w&nbsp;tle.\",\"please-open-ed\":\"Aby kontynuowa, otwrz aplikacj Ed i uruchom ponownie lekcj. Pozwoli to na&nbsp;poprawne ledzenie postpw.\"}},\"game-jeopardy\":{\"is-false\":\"Fasz\",\"is-true\":\"Prawda\"},\"game-jumble\":{\"drag-letters\":\"Przecignij litery na sowo powyej\"},\"game\":{\"bonus-time\":\"+%{bonus_time} sekund\",\"go\":\"PRZEJD\",\"labels\":{\"score\":\"Punkty\",\"timer\":\"Timer\"},\"move-on\":\"Przejd dalej\",\"of\":\"z\",\"play-again\":\"Zagraj ponownie\",\"play-game\":\"OK, gotowe!\",\"your-best\":\"Twj najlepszy wynik\",\"your-score\":\"Twj wynik\",\"your-stars\":\"Twoje gwiazdki\"},\"image\":{\"tap-to-continue\":\"Dotknij, aby kontynuowa\"},\"lesson-info\":{\"lesson-label\":\"Lekcja\"},\"menu\":{\"brainboost-page-count\":\"Jeste na pytaniu **%{index}** z **%{total}**\",\"cancel\":\"Anuluj\",\"exit\":\"Zamknij lekcj\",\"exit-quiz\":\"Opu quiz\",\"go-back\":\"Przejrzyj ostatni slajd\",\"page-count\":\"Jeste na slajdzie **%{index}** z **%{total}**\",\"restart\":\"Uruchom ponownie lekcj\",\"resume\":\"Wznw\"},\"peer-authoring\":{\"image-title\":\"Nazwa grafiki\",\"submit\":\"Wylij\",\"title-placeholder\":\"Wpisz tytu tutaj\",\"upload-complete\":\"Wysyanie zakoczone\",\"uploading\":\"Wysyanie...\",\"video-title\":\"Tytu filmu\"},\"pie-chart\":{\"touch-to-begin\":\"Dotknij, aby rozpocz\"},\"slide-answer\":{\"times-up\":\"Czas min!\",\"too-slow\":\"Za wolno!\"},\"slider\":{\"touch-to-slide\":\"Dotknij, aby przesun\"},\"social\":{\"be-first\":\"Zabierz gos jako pierwszy.\",\"delete\":\"Usu\",\"have-your-say\":\"Zabierz gos\",\"report\":\"Zgo\",\"reported\":\"Zgoszone\",\"thats-all\":\"To wszystko na teraz.\"},\"stars\":{\"all-earned\":\"Zdobyta 1 gwiazda |||| Liczba zdobytych gwiazdek: %{smart_count}\",\"available\":\"Dostpna 1 gwiazdka |||| Liczba dostpnych gwiazdek: %{smart_count}\",\"earned\":\"Zdobyto %{earned} z %{smart_count} gwiazdki |||| Zdobyto %{earned} z %{smart_count} gwiazdek\"},\"text-sequence\":{\"of\":\"z\"},\"video\":{\"not-available\":\"Przepraszamy, ten film </br>jest w tej chwili niedostpny.\",\"skip-video\":\"Pomi film\"}}","module.exports = {\"audio-popup\":{\"allow\":\"Permitir o udio para esta aula\",\"cancel\":\"Cancelar\",\"description\":\"Para escutar a narrao, permita o udio para esta aula.\",\"title\":\"Esta aula  narrada\"},\"buttons\":{\"close-lesson\":\"Fechar aula\",\"continue\":\"Continuar\",\"done\":\"OK, terminei\",\"open-ed\":\"Abrir Ed\",\"send\":\"Enviar\"},\"dial-distribution\":{\"touch-to-rotate\":\"Toque&nbsp;para&nbsp;rodar\"},\"dial\":{\"touch-to-rotate\":\"Toque&nbsp;para&nbsp;rodar\"},\"dialogs\":{\"disconnection\":{\"needs-background\":\"Para concluir esta aula, o Ed deve estar em execuo em&nbsp;segundo plano.\",\"please-open-ed\":\"Para continuar, abra o Ed e reinicie a aula para que o seu progresso possa ser monitorizado&nbsp;corretamente.\"}},\"game-jeopardy\":{\"is-false\":\"Falso\",\"is-true\":\"Verdadeiro\"},\"game-jumble\":{\"drag-letters\":\"Arraste as letras para a palavra acima\"},\"game\":{\"bonus-time\":\"+%{bonus_time} segundos\",\"go\":\"IR\",\"labels\":{\"score\":\"Pontuao\",\"timer\":\"Temporizador\"},\"move-on\":\"Avanar\",\"of\":\"de\",\"play-again\":\"Jogar novamente\",\"play-game\":\"OK, estou pronto!\",\"your-best\":\"O seu melhor resultado\",\"your-score\":\"A sua pontuao\",\"your-stars\":\"As suas estrelas\"},\"image\":{\"tap-to-continue\":\"Toque para continuar\"},\"lesson-info\":{\"lesson-label\":\"Aula\"},\"menu\":{\"brainboost-page-count\":\"Est na pergunta **%{index}** de **%{total}**\",\"cancel\":\"Cancelar\",\"exit\":\"Sair da aula\",\"exit-quiz\":\"Sair do teste\",\"go-back\":\"Rever ltimo diapositivo\",\"page-count\":\"Est no diapositivo **%{index}** de **%{total}**\",\"restart\":\"Reiniciar aula\",\"resume\":\"Retomar\"},\"peer-authoring\":{\"image-title\":\"Ttulo da imagem\",\"submit\":\"Entregar\",\"title-placeholder\":\"Introduza o ttulo aqui\",\"upload-complete\":\"Carregamento concludo\",\"uploading\":\"A carregar\",\"video-title\":\"Ttulo do vdeo\"},\"pie-chart\":{\"touch-to-begin\":\"Toque para iniciar\"},\"slide-answer\":{\"times-up\":\"Acabou o tempo!\",\"too-slow\":\"Demasiado lento!\"},\"slider\":{\"touch-to-slide\":\"Toque para deslizar\"},\"social\":{\"be-first\":\"Seja o primeiro a dar a sua opinio.\",\"delete\":\"Eliminar\",\"have-your-say\":\"D a sua opinio\",\"report\":\"Denunciar\",\"reported\":\"Denunciado\",\"thats-all\":\"Por agora  tudo.\"},\"stars\":{\"all-earned\":\"Ganhou 1 estrela |||| Ganhou %{smart_count} estrelas\",\"available\":\"1 estrela disponvel |||| %{smart_count} estrelas disponveis\",\"earned\":\"Ganhou %{earned} de %{smart_count} estrela |||| Ganhou %{earned} de %{smart_count} estrelas\"},\"text-sequence\":{\"of\":\"de\"},\"video\":{\"not-available\":\"Lamentamos, mas este vdeo est </br> indisponvel de momento.\",\"skip-video\":\"Ignorar vdeo\"}}","module.exports = {\"audio-popup\":{\"allow\":\"Activai componenta audio pentru aceast lecie\",\"cancel\":\"Anulare\",\"description\":\"Pentru a asculta naraiunea, activai componenta audio pentru aceast lecie.\",\"title\":\"Aceast lecie este narat\"},\"buttons\":{\"close-lesson\":\"nchidere lecie\",\"continue\":\"Continuare\",\"done\":\"Ok, am terminat\",\"open-ed\":\"Deschidere Ed\",\"send\":\"Trimitere\"},\"dial-distribution\":{\"touch-to-rotate\":\"Atingei&nbsp;pentru&nbsp;a roti\"},\"dial\":{\"touch-to-rotate\":\"Atingei&nbsp;pentru&nbsp;a roti\"},\"dialogs\":{\"disconnection\":{\"needs-background\":\"Pentru a finaliza aceast lecie, Ed trebuie s ruleze n&nbsp;fundal.\",\"please-open-ed\":\"Pentru a continua, v rugm s deschidei Ed i s repornii lecia pentru ca evoluia dvs. s poat fi urmrit&nbsp;n mod corect.\"}},\"game-jeopardy\":{\"is-false\":\"Fals\",\"is-true\":\"Adevrat\"},\"game-jumble\":{\"drag-letters\":\"Tragei literele pe cuvntul de mai sus\"},\"game\":{\"bonus-time\":\"+%{bonus_time} secunde\",\"go\":\"START\",\"labels\":{\"score\":\"Punctaj\",\"timer\":\"Cronometru\"},\"move-on\":\"Trecei mai departe\",\"of\":\"din\",\"play-again\":\"Jucai din nou\",\"play-game\":\"OK, sunt gata!\",\"your-best\":\"Cel mai bun rezultat al dvs.\",\"your-score\":\"Punctajul dvs.\",\"your-stars\":\"Stelele dvs.\"},\"image\":{\"tap-to-continue\":\"Apsai pentru a continua\"},\"lesson-info\":{\"lesson-label\":\"Lecie\"},\"menu\":{\"brainboost-page-count\":\"Eti la ntrebarea **%{index}** din **%{total}**\",\"cancel\":\"Anulare\",\"exit\":\"Prsire lecie\",\"exit-quiz\":\"Ieire din test\",\"go-back\":\"Revizualizarea ultimului diapozitiv\",\"page-count\":\"Suntei la diapozitivul **%{index}** din **%{total}**\",\"restart\":\"Repornire lecie\",\"resume\":\"Reluare\"},\"peer-authoring\":{\"image-title\":\"Titlu imagine\",\"submit\":\"Transmitei\",\"title-placeholder\":\"Introducei aici titlul\",\"upload-complete\":\"ncrcare finalizat\",\"uploading\":\"Se ncarc\",\"video-title\":\"Titlu videoclip\"},\"pie-chart\":{\"touch-to-begin\":\"Atingei pentru a ncepe\"},\"slide-answer\":{\"times-up\":\"Timpul a expirat!\",\"too-slow\":\"Prea ncet!\"},\"slider\":{\"touch-to-slide\":\"Atingei pentru a glisa\"},\"social\":{\"be-first\":\"Fii primul care i spune cuvntul.\",\"delete\":\"tergere\",\"have-your-say\":\"Spunei-v cuvntul\",\"report\":\"Raport\",\"reported\":\"Raportat\",\"thats-all\":\"Aceasta este tot deocamdat.\"},\"stars\":{\"all-earned\":\"1 stea ctigat |||| %{smart_count} stele ctigate\",\"available\":\"1 stea disponibil |||| %{smart_count} stele disponibile\",\"earned\":\"Ai ctigat %{earned} din %{smart_count} stea |||| Ai ctigat %{earned} din %{smart_count} stele\"},\"text-sequence\":{\"of\":\"din\"},\"video\":{\"not-available\":\"Ne cerem scuze, acest videoclip </br> nu este disponibil momentan.\",\"skip-video\":\"Omitere videoclip\"}}","module.exports = {\"audio-popup\":{\"allow\":\"    \",\"cancel\":\"\",\"description\":\"  ,     .\",\"title\":\"    \"},\"buttons\":{\"close-lesson\":\" \",\"continue\":\"\",\"done\":\",  \",\"open-ed\":\" Ed\",\"send\":\"\"},\"dial-distribution\":{\"touch-to-rotate\":\"&nbsp;&nbsp;\"},\"dial\":{\"touch-to-rotate\":\"&nbsp;&nbsp;\"},\"dialogs\":{\"disconnection\":{\"needs-background\":\"   , Ed    &nbsp; .\",\"please-open-ed\":\" , ,  Ed   .      .\"}},\"game-jeopardy\":{\"is-false\":\"o\",\"is-true\":\"o\"},\"game-jumble\":{\"drag-letters\":\"    \"},\"game\":{\"bonus-time\":\"+%{bonus_time} \",\"go\":\"\",\"labels\":{\"score\":\"\",\"timer\":\"\"},\"move-on\":\"\",\"of\":\"\",\"play-again\":\" \",\"play-game\":\",  !\",\"your-best\":\" \",\"your-score\":\" \",\"your-stars\":\" \"},\"image\":{\"tap-to-continue\":\",  \"},\"lesson-info\":{\"lesson-label\":\"\"},\"menu\":{\"brainboost-page-count\":\"   **%{index}**  **%{total}**\",\"cancel\":\"\",\"exit\":\" \",\"exit-quiz\":\"  \",\"go-back\":\"   \",\"page-count\":\"  **%{index}**   **%{total}**\",\"restart\":\" \",\"resume\":\"\"},\"peer-authoring\":{\"image-title\":\" \",\"submit\":\"\",\"title-placeholder\":\"  \",\"upload-complete\":\" \",\"uploading\":\" ...\",\"video-title\":\" \"},\"pie-chart\":{\"touch-to-begin\":\",  \"},\"slide-answer\":{\"times-up\":\" !\",\"too-slow\":\" !\"},\"slider\":{\"touch-to-slide\":\",  \"},\"social\":{\"be-first\":\"   .\",\"delete\":\"\",\"have-your-say\":\"  \",\"report\":\"\",\"reported\":\"\",\"thats-all\":\"   .\"},\"stars\":{\"all-earned\":\"%{smart_count}   |||| %{smart_count} (-) \",\"available\":\"%{smart_count}   |||| %{smart_count}   |||| %{smart_count}  \",\"earned\":\"  %{earned}  %{smart_count}  ||||   %{earned}  %{smart_count} \"},\"text-sequence\":{\"of\":\"\"},\"video\":{\"not-available\":\" ,    .\",\"skip-video\":\" \"}}","module.exports = {\"audio-popup\":{\"allow\":\"Tillt ljud fr den hr lektionen\",\"cancel\":\"Avbryt\",\"description\":\"Fr att lyssna till berttaren, tillt ljud fr den hr lektionen.\",\"title\":\"Lektionen berttas\"},\"buttons\":{\"close-lesson\":\"Stng lektionen\",\"continue\":\"Fortstt\",\"done\":\"Okej, jag r klar\",\"open-ed\":\"ppna Ed\",\"send\":\"Skicka\"},\"dial-distribution\":{\"touch-to-rotate\":\"Tryck fr att vrida\"},\"dial\":{\"touch-to-rotate\":\"Tryck fr att vrida\"},\"dialogs\":{\"disconnection\":{\"needs-background\":\"Fr att kunna avsluta den hr lektionen mste Ed kras i bakgrunden.\",\"please-open-ed\":\"Fr att fortstta ska du ppna Ed och starta om lektionen s att dina framsteg kan spras ordentligt.\"}},\"game-jeopardy\":{\"is-false\":\"Falskt\",\"is-true\":\"Sant\"},\"game-jumble\":{\"drag-letters\":\"Dra bokstverna till ordet ovan\"},\"game\":{\"bonus-time\":\"+%{bonus_time} sekunder\",\"go\":\"G\",\"labels\":{\"score\":\"Pong\",\"timer\":\"Timer\"},\"move-on\":\"G vidare\",\"of\":\"av\",\"play-again\":\"Spela igen\",\"play-game\":\"Okej, jag r redo!\",\"your-best\":\"Din bsta\",\"your-score\":\"Din pong\",\"your-stars\":\"Dina stjrnor\"},\"image\":{\"tap-to-continue\":\"Tryck fr att fortstta\"},\"lesson-info\":{\"lesson-label\":\"Lektion\"},\"menu\":{\"brainboost-page-count\":\"Du har en frga. **%{index}** p **%{total}**\",\"cancel\":\"Avbryt\",\"exit\":\"Avsluta lektionen\",\"exit-quiz\":\"Frgesport fr att avsluta\",\"go-back\":\"Granska sista bilden\",\"page-count\":\"Du r p bild **%{index}** av **%{total}**\",\"restart\":\"Starta om lektionen\",\"resume\":\"teruppta\"},\"peer-authoring\":{\"image-title\":\"Bildtitel\",\"submit\":\"Skicka\",\"title-placeholder\":\"Ange titeln hr\",\"upload-complete\":\"Uppladdning klar\",\"uploading\":\"Laddar upp\",\"video-title\":\"Videotitel\"},\"pie-chart\":{\"touch-to-begin\":\"Tryck fr att brja\"},\"slide-answer\":{\"times-up\":\"Tiden r ute!\",\"too-slow\":\"Fr lngsamt!\"},\"slider\":{\"touch-to-slide\":\"Tryck fr att glida\"},\"social\":{\"be-first\":\"Bli den frsta som sger vad du tycker.\",\"delete\":\"Radera\",\"have-your-say\":\"Sg vad du tycker\",\"report\":\"Rapportera\",\"reported\":\"Rapporterad\",\"thats-all\":\"Det var allt just nu.\"},\"stars\":{\"all-earned\":\"1 stjrna intjnad |||| %{smart_count} stjrnor intjnade\",\"available\":\"1 stjrna tillgnglig |||| %{smart_count} stjrnor tillgngliga\",\"earned\":\"Du har tjnat in %{earned} av %{smart_count} stjrna |||| Du har tjnat in %{earned} av %{smart_count} stjrnor\"},\"text-sequence\":{\"of\":\"av\"},\"video\":{\"not-available\":\"Den hr videon r </br>  tyvrr inte tillgnglig just nu.\",\"skip-video\":\"Hoppa ver videon\"}}","module.exports = {\"audio-popup\":{\"allow\":\"   \",\"cancel\":\" \",\"description\":\" ,     .\",\"title\":\"  \"},\"buttons\":{\"close-lesson\":\" \",\"continue\":\"\",\"done\":\"\",\"open-ed\":\"Ed- \",\"send\":\"\"},\"dial-distribution\":{\"touch-to-rotate\":\"&nbsp;to&nbsp;\"},\"dial\":{\"touch-to-rotate\":\"&nbsp;to&nbsp;\"},\"dialogs\":{\"disconnection\":{\"needs-background\":\"  , Ed&nbsp;  .\",\"please-open-ed\":\", Ed-       &nbsp;  .\"}},\"game-jeopardy\":{\"is-false\":\"\",\"is-true\":\"\"},\"game-jumble\":{\"drag-letters\":\"    \"},\"game\":{\"bonus-time\":\"+%{bonus_time} \",\"go\":\"\",\"labels\":{\"score\":\"\",\"timer\":\"\"},\"move-on\":\"\",\"of\":\"\",\"play-again\":\"  \",\"play-game\":\",  !\",\"your-best\":\"  \",\"your-score\":\" \",\"your-stars\":\" \"},\"image\":{\"tap-to-continue\":\" \"},\"lesson-info\":{\"lesson-label\":\"\"},\"menu\":{\"brainboost-page-count\":\" **%{total}**-  **%{index}**- \",\"cancel\":\" \",\"exit\":\" \",\"exit-quiz\":\"  \",\"go-back\":\"   \",\"page-count\":\" **%{total}**-  **%{index}**- \",\"restart\":\"  \",\"resume\":\" \"},\"peer-authoring\":{\"image-title\":\" \",\"submit\":\"\",\"title-placeholder\":\"  \",\"upload-complete\":\" \",\"uploading\":\"...\",\"video-title\":\" \"},\"pie-chart\":{\"touch-to-begin\":\" \"},\"slide-answer\":{\"times-up\":\"  !\",\"too-slow\":\" !\"},\"slider\":{\"touch-to-slide\":\"  \"},\"social\":{\"be-first\":\"   .\",\"delete\":\"\",\"have-your-say\":\"  \",\"report\":\"\",\"reported\":\"\",\"thats-all\":\"  .\"},\"stars\":{\"all-earned\":\"1   |||| %{smart_count}  \",\"available\":\"1   |||| %{smart_count}  \",\"earned\":\"%{smart_count}   %{earned} |||| %{smart_count}   %{earned} \"},\"text-sequence\":{\"of\":\"\"},\"video\":{\"not-available\":\",    </br> .\",\"skip-video\":\" \"}}","module.exports = {\"audio-popup\":{\"allow\":\"\",\"cancel\":\"\",\"description\":\" \",\"title\":\"\"},\"buttons\":{\"close-lesson\":\"\",\"continue\":\"\",\"done\":\" \",\"open-ed\":\" Ed\",\"send\":\"\"},\"dial-distribution\":{\"touch-to-rotate\":\"&nbsp;&nbsp;\"},\"dial\":{\"touch-to-rotate\":\"&nbsp;&nbsp;\"},\"dialogs\":{\"disconnection\":{\"needs-background\":\" Ed &nbsp;\",\"please-open-ed\":\"  Ed &nbsp;\"}},\"game-jeopardy\":{\"is-false\":\"\",\"is-true\":\"\"},\"game-jumble\":{\"drag-letters\":\"\"},\"game\":{\"bonus-time\":\"+%{bonus_time} \",\"go\":\"\",\"labels\":{\"score\":\"\",\"timer\":\"\"},\"move-on\":\"\",\"of\":\"\",\"play-again\":\"\",\"play-game\":\" !\",\"your-best\":\"\",\"your-score\":\"\",\"your-stars\":\"\"},\"image\":{\"tap-to-continue\":\"\"},\"lesson-info\":{\"lesson-label\":\"\"},\"menu\":{\"brainboost-page-count\":\" **%{index}**  **%{total}**\",\"cancel\":\"\",\"exit\":\"\",\"exit-quiz\":\"\",\"go-back\":\"\",\"page-count\":\" **%{index}**  **%{total}**\",\"restart\":\"\",\"resume\":\"\"},\"peer-authoring\":{\"image-title\":\"\",\"submit\":\"\",\"title-placeholder\":\"\",\"upload-complete\":\"\",\"uploading\":\" ..\",\"video-title\":\"\"},\"pie-chart\":{\"touch-to-begin\":\"\"},\"slide-answer\":{\"times-up\":\"!\",\"too-slow\":\"!\"},\"slider\":{\"touch-to-slide\":\"\"},\"social\":{\"be-first\":\"\",\"delete\":\"\",\"have-your-say\":\"\",\"report\":\"\",\"reported\":\"\",\"thats-all\":\".\"},\"stars\":{\"all-earned\":\"1  ||||  %{smart_count} \",\"available\":\" 1  ||||  %{smart_count} \",\"earned\":\" %{earned}  %{smart_count}  ||||  %{earned}  %{smart_count} \"},\"text-sequence\":{\"of\":\"\"},\"video\":{\"not-available\":\"  <br> \",\"skip-video\":\"\"}}","module.exports = {\"audio-popup\":{\"allow\":\"Bu derste ses oynatlmasna izin ver\",\"cancel\":\"ptal\",\"description\":\"Anlatm dinlemek iin ltfen bu derste ses oynatlmasna izin verin.\",\"title\":\"Bu ders, anlatmldr\"},\"buttons\":{\"close-lesson\":\"Dersi Kapat\",\"continue\":\"Devam\",\"done\":\"Tamam, 'bitirdim\",\"open-ed\":\"Ed'i A\",\"send\":\"Gnder\"},\"dial-distribution\":{\"touch-to-rotate\":\"Dndrmek&nbsp;iin&nbsp;dokunun\"},\"dial\":{\"touch-to-rotate\":\"Dndrmek&nbsp;iin&nbsp;dokunun\"},\"dialogs\":{\"disconnection\":{\"needs-background\":\"Bu dersi tamamlamak iin Ed'in arka planda&nbsp;almas gerekir.\",\"please-open-ed\":\"lerlemenin doru olarak&nbsp;takip edilebilmesi iin ltfen Ed'i an ve dersi yeniden balatn.\"}},\"game-jeopardy\":{\"is-false\":\"Yanl\",\"is-true\":\"Doru\"},\"game-jumble\":{\"drag-letters\":\"Harfleri yukardaki szce srkleyin\"},\"game\":{\"bonus-time\":\"+%{bonus_time} saniye\",\"go\":\"Bala\",\"labels\":{\"score\":\"Puan\",\"timer\":\"Zaman Sayac\"},\"move-on\":\"Devam Et\",\"of\":\"/\",\"play-again\":\"Tekrar Oynat\",\"play-game\":\"Tamam, 'hazrm!\",\"your-best\":\"En iyi puannz\",\"your-score\":\"Puannz\",\"your-stars\":\"Yldzlarnz\"},\"image\":{\"tap-to-continue\":\"Devam etmek iin dokunun\"},\"lesson-info\":{\"lesson-label\":\"Ders\"},\"menu\":{\"brainboost-page-count\":\"**%{total}** sorunun **%{index}**. sorusundasn\",\"cancel\":\"ptal\",\"exit\":\"Dersten k\",\"exit-quiz\":\"Testten k\",\"go-back\":\"Son slayt incele\",\"page-count\":\"Bulunduunuz slayt: **%{index}** / **%{total}**\",\"restart\":\"Dersi yeniden balat\",\"resume\":\"Devam et\"},\"peer-authoring\":{\"image-title\":\"Resim Bal\",\"submit\":\"Gnder\",\"title-placeholder\":\"Bal buraya girin\",\"upload-complete\":\"Ykleme Tamamland\",\"uploading\":\"Ykleniyor\",\"video-title\":\"Video Bal\"},\"pie-chart\":{\"touch-to-begin\":\"Balamak iin dokunun\"},\"slide-answer\":{\"times-up\":\"Sre bitti!\",\"too-slow\":\"ok Yava!\"},\"slider\":{\"touch-to-slide\":\"Kaydrmak iin dokunun\"},\"social\":{\"be-first\":\"lk sizin sesiniz duyulsun.\",\"delete\":\"Sil\",\"have-your-say\":\"Sesinizi duyurun\",\"report\":\"Bildir\",\"reported\":\"Bildirildi\",\"thats-all\":\"imdilik hepsi bu kadar.\"},\"stars\":{\"all-earned\":\"1 yldz kazanld |||| %{smart_count} yldz kazanld\",\"available\":\"1 yldz var |||| %{smart_count} yldz var\",\"earned\":\"Kazandnz yldz: %{earned} / %{smart_count} |||| Kazandnz yldz: %{earned} / %{smart_count}\"},\"text-sequence\":{\"of\":\"arasnda\"},\"video\":{\"not-available\":\"zgnz, bu video </br> u an mevcut deil.\",\"skip-video\":\"Videoyu Atla\"}}","module.exports = {\"audio-popup\":{\"allow\":\"    \",\"cancel\":\"\",\"description\":\"  ,     .\",\"title\":\"   \"},\"buttons\":{\"close-lesson\":\" \",\"continue\":\"\",\"done\":\"Ok,  \",\"open-ed\":\" Ed\",\"send\":\"\"},\"dial-distribution\":{\"touch-to-rotate\":\",&nbsp;&nbsp;\"},\"dial\":{\"touch-to-rotate\":\",&nbsp;&nbsp;\"},\"dialogs\":{\"disconnection\":{\"needs-background\":\"    Ed    &nbsp;.\",\"please-open-ed\":\"   Ed   ,   &nbsp; .\"}},\"game-jeopardy\":{\"is-false\":\"\",\"is-true\":\"\"},\"game-jumble\":{\"drag-letters\":\"    \"},\"game\":{\"bonus-time\":\"  : +%{bonus_time}\",\"go\":\"\",\"labels\":{\"score\":\"\",\"timer\":\"\"},\"move-on\":\"\",\"of\":\"\",\"play-again\":\" \",\"play-game\":\"OK, !\",\"your-best\":\"  \",\"your-score\":\" \",\"your-stars\":\" \"},\"image\":{\"tap-to-continue\":\",  \"},\"lesson-info\":{\"lesson-label\":\"\"},\"menu\":{\"brainboost-page-count\":\"   **%{index}**  **%{total}**\",\"cancel\":\"\",\"exit\":\"  \",\"exit-quiz\":\"  \",\"go-back\":\"  \",\"page-count\":\"   **%{index}**  **%{total}**\",\"restart\":\" \",\"resume\":\"\"},\"peer-authoring\":{\"image-title\":\" \",\"submit\":\"\",\"title-placeholder\":\"  \",\"upload-complete\":\" \",\"uploading\":\"\",\"video-title\":\" \"},\"pie-chart\":{\"touch-to-begin\":\",  \"},\"slide-answer\":{\"times-up\":\" !\",\"too-slow\":\" !\"},\"slider\":{\"touch-to-slide\":\",  \"},\"social\":{\"be-first\":\"   .\",\"delete\":\"\",\"have-your-say\":\" \",\"report\":\"\",\"reported\":\"\",\"thats-all\":\"  .\"},\"stars\":{\"all-earned\":\" 1 ||||  : %{smart_count}\",\"available\":\" 1 ||||  : %{smart_count}\",\"earned\":\" (-) : %{earned}  %{smart_count} ||||  (-) : %{earned}  %{smart_count}\"},\"text-sequence\":{\"of\":\"\"},\"video\":{\"not-available\":\",   </br>  .\",\"skip-video\":\" \"}}","module.exports = {\"audio-popup\":{\"allow\":\"Bt m thanh cho bi hc ny\",\"cancel\":\"Hy\",\"description\":\" nghe tng thut, xin vui lng bt m thanh cho bi hc ny.\",\"title\":\"Bi hc ny c thut li\"},\"buttons\":{\"close-lesson\":\"ng Bi hc\",\"continue\":\"Tip tc\",\"done\":\"Tip tc\",\"open-ed\":\"M Ed\",\"send\":\"Gi\"},\"dial-distribution\":{\"touch-to-rotate\":\"Chm&nbsp;&nbsp;xoay\"},\"dial\":{\"touch-to-rotate\":\"Chm&nbsp;&nbsp;xoay\"},\"dialogs\":{\"disconnection\":{\"needs-background\":\" hon thnh bi hc ny, Ed cn chy trong&nbsp;nn.\",\"please-open-ed\":\" tip tc, xin vui lng m Ed v bt u li bi hc  c th theo di tin  ca bn&nbsp;chnh xc.\"}},\"game-jeopardy\":{\"is-false\":\"Sai\",\"is-true\":\"ng\"},\"game-jumble\":{\"drag-letters\":\"Ko cc ch ci vo t pha trn\"},\"game\":{\"bonus-time\":\"+%{bonus_time} giy\",\"go\":\"TIN HNH\",\"labels\":{\"score\":\"im\",\"timer\":\"ng h m gi\"},\"move-on\":\"Tin ln\",\"of\":\"ca\",\"play-again\":\"Pht Li\",\"play-game\":\"OK, ti  sn sng!\",\"your-best\":\"im cao nht ca bn\",\"your-score\":\"im ca bn\",\"your-stars\":\"Sao ca bn\"},\"image\":{\"tap-to-continue\":\"Nhn  tip tc\"},\"lesson-info\":{\"lesson-label\":\"Bi hc\"},\"menu\":{\"brainboost-page-count\":\"Bn ang  cu hi **%{index}** trn **%{total}**\",\"cancel\":\"Hy\",\"exit\":\"Thot bi hc\",\"exit-quiz\":\"Thot bi kim tra\",\"go-back\":\"Xem li trang trnh by cui cng\",\"page-count\":\"Bn ang  trang trnh by **%{index}** trn **%{total}**\",\"restart\":\"Bt u li bi hc\",\"resume\":\"Tip tc\"},\"peer-authoring\":{\"image-title\":\"Tiu  Hnh nh\",\"submit\":\"Gi\",\"title-placeholder\":\"Nhp tiu   y\",\"upload-complete\":\"Ti ln Hon tt\",\"uploading\":\"ang ti ln...\",\"video-title\":\"Tiu  Video\"},\"pie-chart\":{\"touch-to-begin\":\"Chm  bt u\"},\"slide-answer\":{\"times-up\":\"Ht Gi!\",\"too-slow\":\"Qu Chm!\"},\"slider\":{\"touch-to-slide\":\"Chm  trt\"},\"social\":{\"be-first\":\"Hy l ngi u tin nu ln  kin.\",\"delete\":\"Xa\",\"have-your-say\":\"Nu ln  kin\",\"report\":\"Bo co\",\"reported\":\" bo co\",\"thats-all\":\"Hin ti ch c by nhiu thi.\"},\"stars\":{\"all-earned\":\" kim c 1 sao ||||  kim c %{smart_count} sao\",\"available\":\"C sn 1 sao |||| C sn %{smart_count} sao\",\"earned\":\"Bn  kim c %{earned} trn %{smart_count} sao |||| Bn  kim c %{earned} trn %{smart_count} sao\"},\"text-sequence\":{\"of\":\"ca\"},\"video\":{\"not-available\":\"Rt tic, video ny </br> hin khng kh dng.\",\"skip-video\":\"B qua Video\"}}","module.exports = {\"audio-popup\":{\"allow\":\"\",\"cancel\":\"\",\"description\":\",\",\"title\":\"\"},\"buttons\":{\"close-lesson\":\"\",\"continue\":\"\",\"done\":\"\",\"open-ed\":\" Ed\",\"send\":\"\"},\"dial-distribution\":{\"touch-to-rotate\":\"&nbsp;&nbsp;\"},\"dial\":{\"touch-to-rotate\":\"&nbsp;&nbsp;\"},\"dialogs\":{\"disconnection\":{\"needs-background\":\",Ed &nbsp;\",\"please-open-ed\":\", Ed ,&nbsp;\"}},\"game-jeopardy\":{\"is-false\":\"\",\"is-true\":\"\"},\"game-jumble\":{\"drag-letters\":\"\"},\"game\":{\"bonus-time\":\"+%{bonus_time} \",\"go\":\"\",\"labels\":{\"score\":\"\",\"timer\":\"\"},\"move-on\":\"\",\"of\":\"/\",\"play-again\":\"\",\"play-game\":\"\",\"your-best\":\"\",\"your-score\":\"\",\"your-stars\":\"\"},\"image\":{\"tap-to-continue\":\"\"},\"lesson-info\":{\"lesson-label\":\"\"},\"menu\":{\"brainboost-page-count\":\" **%{index}**, **%{total}**\",\"cancel\":\"\",\"exit\":\"\",\"exit-quiz\":\"\",\"go-back\":\"\",\"page-count\":\" **%{index}**, **%{total}**\",\"restart\":\"\",\"resume\":\"\"},\"peer-authoring\":{\"image-title\":\"\",\"submit\":\"\",\"title-placeholder\":\"\",\"upload-complete\":\"\",\"uploading\":\"...\",\"video-title\":\"\"},\"pie-chart\":{\"touch-to-begin\":\"\"},\"slide-answer\":{\"times-up\":\"\",\"too-slow\":\"\"},\"slider\":{\"touch-to-slide\":\"\"},\"social\":{\"be-first\":\"\",\"delete\":\"\",\"have-your-say\":\"\",\"report\":\"\",\"reported\":\"\",\"thats-all\":\"\"},\"stars\":{\"all-earned\":\" 1  ||||  %{smart_count} \",\"available\":\" 1  ||||  %{smart_count} \",\"earned\":\" %{smart_count}  %{earned}  ||||  %{smart_count}  %{earned} \"},\"text-sequence\":{\"of\":\"/\"},\"video\":{\"not-available\":\",</br>\",\"skip-video\":\"\"}}","module.exports = {\"audio-popup\":{\"allow\":\"\",\"cancel\":\"\",\"description\":\"\",\"title\":\"\"},\"buttons\":{\"close-lesson\":\"\",\"continue\":\"\",\"done\":\"\",\"open-ed\":\" Ed\",\"send\":\"\"},\"dial-distribution\":{\"touch-to-rotate\":\"\"},\"dial\":{\"touch-to-rotate\":\"\"},\"dialogs\":{\"disconnection\":{\"needs-background\":\"Ed \",\"please-open-ed\":\" Ed \"}},\"game-jeopardy\":{\"is-false\":\"\",\"is-true\":\"\"},\"game-jumble\":{\"drag-letters\":\"\"},\"game\":{\"bonus-time\":\"+%{bonus_time} \",\"go\":\"\",\"labels\":{\"score\":\"\",\"timer\":\"\"},\"move-on\":\"\",\"of\":\"/\",\"play-again\":\"\",\"play-game\":\"\",\"your-best\":\"\",\"your-score\":\"\",\"your-stars\":\"\"},\"image\":{\"tap-to-continue\":\"\"},\"lesson-info\":{\"lesson-label\":\"\"},\"menu\":{\"brainboost-page-count\":\" **%{index}** , **%{total}** \",\"cancel\":\"\",\"exit\":\"\",\"exit-quiz\":\"\",\"go-back\":\"\",\"page-count\":\" **%{index}**  **%{total}** \",\"restart\":\"\",\"resume\":\"\"},\"peer-authoring\":{\"image-title\":\"\",\"submit\":\"\",\"title-placeholder\":\"\",\"upload-complete\":\"\",\"uploading\":\"\",\"video-title\":\"\"},\"pie-chart\":{\"touch-to-begin\":\"\"},\"slide-answer\":{\"times-up\":\"\",\"too-slow\":\"\"},\"slider\":{\"touch-to-slide\":\"\"},\"social\":{\"be-first\":\"\",\"delete\":\"\",\"have-your-say\":\"\",\"report\":\"\",\"reported\":\"\",\"thats-all\":\"\"},\"stars\":{\"all-earned\":\" 1  ||||  %{smart_count} \",\"available\":\"1  |||| %{smart_count} \",\"earned\":\" %{smart_count}  %{earned}  ||||  %{smart_count}  %{earned} \"},\"text-sequence\":{\"of\":\"/\"},\"video\":{\"not-available\":\"\",\"skip-video\":\"\"}}","module.exports = {\"title\":\"aicc\",\"display\":\"AICC\",\"category\":\"Advanced\",\"description\":\"Play an AICC Package\",\"hideFrom\":[\"freemium\",\"sponsor\"],\"features\":{\"stars\":true},\"model\":{\"package\":{\"type\":\"aicc\",\"default\":\"about:blank\",\"display\":\"AICC File\",\"help\":\"Upload your AICC package.\"},\"shouldOpenInPopup\":{\"default\":false,\"type\":\"boolean\",\"display\":\"Open in a new window\",\"help\":\"Some AICC content performs better in a separate window. If your AICC package is performing poorly, this option may help.\\n\"},\"isRequiredForLessonCompletion\":{\"default\":true,\"type\":\"boolean\",\"display\":\"Required Content\",\"help\":\"The learner must complete the AICC content before the lesson is marked as complete.\\n\"},\"background\":{\"type\":\"string\",\"default\":\"\",\"display\":\"Background Color\",\"help\":\"This color (eg. \\\"orange\\\", \\\"#f90\\\", \\\"rgb(255,160,0)\\\") will be used for the background of the entire screen in lightbox mode.\\n\"},\"button\":{\"text\":{\"type\":\"text\",\"default\":\"Continue\",\"display\":\"Done text\"},\"position\":{\"type\":\"select\",\"enum\":[\"Below\",\"Overlay Bottom\",\"Overlay Top\",\"None\"],\"default\":\"Below\",\"help\":\"Choose the best position based on your content. If you choose not to display the button, your AICC content must allow the learner to exit, or they will not be able to continue.\\n\"}}}}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (button, i18n) {\nbuf.push(\"<div class=\\\"full-screen content-fill hide-overflow\\\"><iframe type=\\\"text/html\\\" frameborder=\\\"0\\\" class=\\\"scorm-object\\\"></iframe><div class=\\\"exit-btn btn\\\">\" + (jade.escape(null == (jade_interp = button.text || i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");}.call(this,\"button\" in locals_for_with?locals_for_with.button:typeof button!==\"undefined\"?button:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView           = require(\"views/slide\")\n{ Session, Lesson } = Application.actions()\nDevice              = require \"lib/device\"\n\nlookupCaseInsensitive = (ob, key) ->\n  for k, v of ob\n    return ob[k] if k.toLowerCase() is key.toLowerCase()\n  return null\n\nlessonPassed = (attemptData) ->\n  return lookupCaseInsensitive(attemptData.core, \"Lesson_Status\")\n\nclass AICCView extends SlideView\n  template: require(\"./template\")\n  events: ->\n    \"iostap .exit-btn\": \"stopAICC\"\n\n  initialize: ->\n    super\n\n  beforeShow: ->\n    position = @options.data.button?.position?.toLowerCase() or \"none\"\n    @setState written.hyphenCase(position), \"exit-btn\"\n\n    @trigger \"ui\", { lightbox: @options.data.background or true, fullscreen: true }\n\n    @onResize()\n\n  beforeHide: ->\n    @trigger \"ui\", { lightbox: false, fullscreen: false }\n\n  show: ->\n    @listenTo this, \"resize\", @onResize\n    @initAICC (err) ->\n      if err?\n        console.error(\"Error while initializing AICC\", err)\n\n  onRefresh: ->\n    @beforeShow()\n    super\n\n  onResize: ->\n    if @currentState[\"exit-btn\"] is \"below\"\n      button = @findOne(\".exit-btn\")\n      iframe = @findOne(\".scorm-object\")\n\n      iframe.style.bottom = \"#{button.offsetHeight}px\"\n      iframe.style.height =\n        \"#{iframe.parentNode.offsetHeight - button.offsetHeight}px\"\n\n  getAttempt: (done) ->\n    @getAICCPackageURLAndSID (err, { aiccURL, aiccSID }) ->\n      $.ajax\n        url: \"#{aiccURL}/result\"\n        type: \"POST\"\n        data: { session_id: aiccSID }\n        success: (d) ->\n          done(null, d)\n        error: (e) ->\n          done(e)\n\n  stopAICC: ->\n    @getAttempt (err, attempt) =>\n      # according to AICC spec keys can be written in any case\n      coreAttempt       = lookupCaseInsensitive(attempt, \"core\") or {}\n      attemptCompletion = lookupCaseInsensitive(coreAttempt, \"Lesson_Status\") or \"\"\n      attemptScore      = lookupCaseInsensitive(coreAttempt, \"Score\") or \"0\"\n\n      score       = parseInt(attemptScore) * 0.01\n\n      # According to AICC spec only the first character is significant.\n      # We consider \"passed\" and \"completed\" both to count, mainly because\n      # of mbusa T0628E-US.TTC sending \"completed\" instead of \"passed\".\n      # This property only matters if *Required Content* is checked in the authoring tool.\n      completed   = attemptCompletion.toLowerCase().match(/^[pc]/)?\n\n      Session.get (err, { attempt }) =>\n        interaction =\n          id:              @options.id\n          name:            @options.name\n          type:            @options.type\n          slideData:       @options.data\n          attempt:         attempt\n          answerDetails:   []\n          metadata:        @options.metadata\n          isAiccAttempt:   true\n          isCompleted:     completed\n          isRequiredForLessonCompletion: @options.data.isRequiredForLessonCompletion\n          score:           score\n          configuration:   @options.data?.challenge_configuration\n          success:         completed\n\n        @lesson.processInteraction(interaction)\n        \n        if window.ED_LMS_PREVIEW or window.ED_PUBLIC_PREVIEW\n          return\n        else if @isLastSlide\n          Lesson.complete()\n          @exit()\n        else\n          @next()\n\n  getAICCPackageURLAndSID: (done) ->\n    slideId = @options.id\n    Session.get (err, { id, userId, attempt, aiccURL }) ->\n      return done(err) if err?\n\n      # Id is the lesson id\n      lessonId = id\n      # We add slide Id to be able to differentiate\n      # between 2 AICC slides within the same lesson\n      aiccSID = if lessonId\n        \"#{lessonId}|#{slideId}|#{userId}|#{attempt}\"\n      else\n        \"lessonId|slideId||userId|attempt\"\n\n      # If the url has not been passed to the session\n      # we use the same domain as what is serving the package\n      aiccURL = window.location.origin + \"/api/aicc\" # If not defined\n\n      done(null, { aiccURL, aiccSID })\n\n  serialize: ->\n    super\n\n  initAICCResource: (done) ->\n    data     = @serialize()\n    resource = data.package\n\n    @getAICCPackageURLAndSID (err, { aiccURL, aiccSID }) =>\n      return done(err) if err?\n      params   = \"aicc_url=#{aiccURL}&aicc_sid=#{aiccSID}\"\n      resource += if resource.match(/\\?/)\n        if resource.match(/\\&$/)\n          \"#{params}\"\n        else\n          \"&#{params}\"\n      else\n        \"?#{params}\"\n\n      if not(window.ED_LMS_PREVIEW or window.ED_PUBLIC_PREVIEW) and data.shouldOpenInPopup\n        aiccWindow = window.open(resource)\n        pollTimer  = window.setInterval =>\n          if aiccWindow.closed isnt false\n            window.clearInterval(pollTimer)\n            @stopAICC()\n        , 200\n      else\n        @findOne(\".scorm-object\").src = resource\n\n      done()\n\n\n  initAICC: (done) ->\n    @initAICCResource(done)\n\nmodule.exports = AICCView\n","module.exports = {\"title\":\"carousel\",\"display\":\"Carousel\",\"category\":\"Multiple Choice\",\"features\":{\"stars\":true,\"social\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"Ask a question\"},\"answers\":{\"min\":2,\"max\":8,\"type\":[{\"content\":{\"type\":\"html\"},\"correct\":{\"type\":\"boolean\"}}]},\"randomize\":{\"type\":\"boolean\",\"default\":false,\"help\":\"Shuffle the order of carousel items from left to right\\n\"},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (seconds)\"},\"out-of-time-prompt\":{\"type\":\"html\",\"display\":\"Out of time prompt\"}}},\"prompt\":{\"type\":\"html\",\"default\":\"Swipe to select an answer\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"true-or-false\",\"title\":\"What's the correct answer?\",\"answers\":[{\"content\":\"Answer 1\"},{\"correct\":true,\"content\":\"Answer 2.<br> This is the correct answer and it contains more text.\\n\"},{\"content\":\"Answer 3\"}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (answers, continueBtnText, doneText, game, hasNarration, hasPrompt, i18n, prompt, submitUp, title, undefined) {\nif ( game && game.timer && game.timer.limit > 0 && !game.timer.isDisabled)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-fill\\\"><div class=\\\"content-md-fill content-sm-ver content-fit\\\"><div class=\\\"content-md-ver text-center block-v-lg\\\"><h1 class=\\\"block-h-xl fade-in\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"row carousel-container block-h-xl block-v-lg\\\"><div class=\\\"col-md-8 col-md-offset-2 col-sm-12\\\"><div class=\\\"carousel slide-up delay-6\\\"><div\" + (jade.attr(\"style\", \"width: \" + (answers.length * 100) + \"%;\", true, false)) + \" class=\\\"carousel-slider block-flex-ver clearfix\\\">\");\n// iterate answers\n;(function(){\n  var $$obj = answers;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var answer = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"data-is-correct\", answer.correct, true, false)) + (jade.attr(\"data-answer-id\", answer.id, true, false)) + (jade.attr(\"style\", \"width: \" + (100 / answers.length) + \"%;\", true, false)) + (jade.cls(['carousel-item','block-md',answer.correct ? \"carousel-item-correct\" : \"\"], [null,null,true])) + \"><div class=\\\"carousel-block block-md block-dk draggy draggy-ver delay-3\\\"><div\" + (jade.cls(['carousel-btn','btn','btn-solid','btn-block',answer.content.length > 20 ? \"btn-long\" : \"\"], [null,null,null,null,true])) + \"><div class=\\\"text-center\\\">\" + (null == (jade_interp = answer.content) ? \"\" : jade_interp) + \"</div></div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var answer = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"data-is-correct\", answer.correct, true, false)) + (jade.attr(\"data-answer-id\", answer.id, true, false)) + (jade.attr(\"style\", \"width: \" + (100 / answers.length) + \"%;\", true, false)) + (jade.cls(['carousel-item','block-md',answer.correct ? \"carousel-item-correct\" : \"\"], [null,null,true])) + \"><div class=\\\"carousel-block block-md block-dk draggy draggy-ver delay-3\\\"><div\" + (jade.cls(['carousel-btn','btn','btn-solid','btn-block',answer.content.length > 20 ? \"btn-long\" : \"\"], [null,null,null,null,true])) + \"><div class=\\\"text-center\\\">\" + (null == (jade_interp = answer.content) ? \"\" : jade_interp) + \"</div></div></div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div></div></div></div></div><div class=\\\"pagination\\\">\");\n// iterate answers\n;(function(){\n  var $$obj = answers;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var answer = $$obj[i];\n\nbuf.push(\"<div class=\\\"page\\\"></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var answer = $$obj[i];\n\nbuf.push(\"<div class=\\\"page\\\"></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"answers\" in locals_for_with?locals_for_with.answers:typeof answers!==\"undefined\"?answers:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView    = require \"views/base/game\"\n{ AutoCursorRemoveDraggy }  = require(\"views/components/draggy\")\n\nclass CarouselView extends GameView\n  template: require(\"./template\")\n\n  currentIndex: 0\n\n  events:\n    \"iostap .btn-done\": \"endGame\"\n\n  serialize: ->\n    data = super\n\n    { randomize } = data\n\n    # We read the data from the metadata associated with the slide\n    # To get the answer Ids and track them\n    answers = (data.metadata.questions?[0]?.answers or []).map (a) ->\n      content: a.content, correct: a.correct, id: a.id\n\n    answers = answers.filter (m) -> m.content?\n    answers = answers.reverse() if @options.config().direction is \"rtl\"\n    answers = _.shuffle(answers) if randomize\n\n    data.answers = answers\n    data\n\n  show: (index = 0) ->\n    super\n    el = @findOne(\".carousel\")\n\n    @setEl @findOne(\".pagination\"), \"pagination\"\n    @setEl el.firstChild, \"scroller\"\n\n    ln  = @serialize().answers.length\n    min = -el.offsetWidth * (ln - 1)\n\n    @draggy  = new AutoCursorRemoveDraggy\n      el: el\n      minX: min\n      maxX: 0\n      lock: \"y\"\n\n    @listenTo @draggy, \"drag\", @onDrag\n    @listenTo @draggy, \"drop\", @onDrop\n    @listenTo this, \"resize\", @onResize\n\n    if @options.config().direction is \"rtl\"\n      x = -@draggy.el.offsetWidth * (ln - 1 - index)\n    else\n      x = -@draggy.el.offsetWidth * index\n\n    @draggy.reset { x }\n    @onResize()\n\n    @enterGame()\n\n  onDrag: (draggy, isInitial) ->\n    @transform @getEl(\"scroller\"),\n      x: @getScrollDist(draggy)\n      transition: if isInitial then \"all 300ms\" else \"\"\n\n    @updateChildren(draggy, isInitial and \"none\")\n\n  onDrop: (draggy, isReset) ->\n    if isReset\n      transition    = if @currentIndex? then \"all 300ms\" else \"\"\n      @currentIndex = Math.floor(-draggy.x / draggy.offset.width)\n      @setState @currentIndex, \"page\"\n\n      for child, i in @getEl(\"pagination\").children\n        child.classList.toggle(\"active\", i is @currentIndex)\n\n      @transform @getEl(\"scroller\"),\n        x: @getScrollDist(draggy)\n        transition: transition\n\n      @updateChildren(draggy, transition)\n\n    else\n      x = draggy.velocity.x\n      m = 0.9\n      func =\n        if x < -m then \"ceil\"\n        else if x > m then \"floor\"\n        else \"round\"\n\n      step = Math[func](Math.min(draggy.x / draggy.offset.width, 1))\n\n      draggy.reset x: step * draggy.offset.width\n\n      @setState(\"touched\") if @currentState.state is \"prompt\"\n\n  updateChildren: (draggy, transition) ->\n    { width } = draggy.offset\n\n    for child, i in @getEl(\"scroller\").children\n      return unless button = child.querySelector(\".btn\")\n\n      if transition\n        child.classList.toggle(\"active\", i is @currentIndex)\n        @transition(button, transition, true)\n\n      @transform button,\n        scale: 1 - Math.abs(draggy.x + (i * width)) / width / 5\n        opacity: 1 - Math.abs(draggy.x + (i * width)) / width\n\n  getScrollDist: (draggy) ->\n    \"#{\n      draggy.x / draggy.offset.width / @options.data.answers.length * 100\n    }%\"\n\n  answerDetails: ->\n    questions    = @options.metadata?.questions or []\n    return [] unless questions.length > 0\n\n    question = questions[0]\n    selectedAnswerId =\n      $(@getEl(\"scroller\")?.children[@currentIndex or 0]).data(\"answer-id\")\n    answer = _.find question.answers, (a) -> a.id is selectedAnswerId\n    details = question: question.question, answer: answer\n    [ details ]\n\n  isCorrect: ->\n    @getEl(\"scroller\")?.children[@currentIndex or 0].dataset.isCorrect?\n\n  onResize: ->\n    if scroller = @getEl(\"scroller\")\n      @draggy?.options.minX =\n        -@draggy.el.offsetWidth * (@options.data.answers.length - 1)\n\n      scroller.style.height = \"\"\n      height = scroller.offsetHeight\n      scroller.style.height = \"#{height}px\"\n      height\n\n  refresh: (params) ->\n    for { content }, i in params.data.answers\n      changed = i if content and @options.data.answers[i]?.content isnt content\n\n    super\n\n    @currentIndex = null\n    @show(changed)\n\n  endGame: ->\n    super\n\n    @submit()\n\nmodule.exports = CarouselView\n","module.exports = {\"title\":\"categorise\",\"display\":\"Categorise\",\"category\":\"Multiple Choice\",\"links\":{\"academy\":\"https://academy.edapp.com/how-to-categorise/\"},\"features\":{\"stars\":true,\"social\":true},\"model\":{\"title\":{\"types\":[\"text\",\"image\",\"video\",\"audio\"],\"default\":\"Which category?\"},\"buttonText\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer\"},\"categories\":{\"min\":2,\"max\":2,\"type\":[{\"text\":{\"type\":\"html\"},\"correct\":{\"type\":\"boolean\"}}]},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (seconds)\"},\"out-of-time-prompt\":{\"type\":\"html\",\"display\":\"Out of time prompt\"}}},\"prompt\":{\"type\":\"html\",\"default\":\"Drag to the correct category\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"true-or-false\",\"title\":\"Is the following statement true or false?\",\"buttonText\":\"Product Z is the newest feature and offers a new level of feedback for the user.\",\"categories\":[{\"text\":\"True\",\"correct\":true},{\"text\":\"False\",\"correct\":false}],\"answer\":{\"text\":\"This statement is correct.\"}},{\"subtype\":\"classification\",\"title\":\"Is Product X type 1 or type 2?\",\"buttonText\":\"Product X\",\"categories\":[{\"text\":\"Type 1\",\"correct\":true},{\"text\":\"Type 2\",\"correct\":false}],\"answer\":{\"text\":\"Product X is type 1.\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (buttonClass, buttonText, categories, config, continueBtnText, doneText, game, hasNarration, hasPrompt, i18n, playinline, prompt, submitUp) {\njade_mixins[\"video-stream\"] = jade_interp = function(videoUrl, playsinline, controls, klass, poster){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nplayinline = playinline || true\ncontrols = controls || true\nklass = klass || 'video vjs-fluid'\nvar cloudinaryVideoFolderUrl = config.CLOUDINARY_CDN_URL+config.CLOUDINARY_VIDEO_FOLDER\nvar streamUrl = ''\nif ( videoUrl && videoUrl.indexOf(cloudinaryVideoFolderUrl) > -1)\n{\nstreamUrl = videoUrl.replace(cloudinaryVideoFolderUrl, cloudinaryVideoFolderUrl+'sp_full_hd/')\nstreamUrl = streamUrl.replace('.mp4', '.m3u8')\n}\nbuf.push(\"<video\" + (jade.attr(\"webkit-playsinline\", playsinline, true, false)) + (jade.attr(\"controls\", controls, true, false)) + \" preload=\\\"auto\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + (jade.attr(\"poster\", poster, true, false)) + (jade.cls(['video-js',klass], [null,true])) + \"><source\" + (jade.attr(\"src\", videoUrl, true, false)) + \"/>\");\nif ( streamUrl)\n{\nbuf.push(\"<source\" + (jade.attr(\"src\", streamUrl, true, false)) + \"/>\");\n}\nbuf.push(\"</video>\");\n};\njade_mixins[\"image\"] = jade_interp = function(imageUrl, klass){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nbuf.push(\"<img\" + (jade.attr(\"src\", imageUrl, true, false)) + (jade.cls([klass], [true])) + \"/>\");\n};\njade_mixins[\"multi-content\"] = jade_interp = function(prop, obj){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nobj = obj || locals;\nswitch (obj[prop + \"Type\"]){\ncase \"image\":\nbuf.push(\"<div\" + (jade.attr(\"data-content\", obj.image, true, false)) + \" class=\\\"multi-content-wrapper multi-content-wrapper-image block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\">\");\njade_mixins[\"image\"](obj[prop], 'multi-content multi-content-image');\nbuf.push(\"</div></div>\");\n  break;\ncase \"video\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-video block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\">\");\njade_mixins[\"video-stream\"](obj[prop], true, true,\"multi-content multi-content-video block-dk\");\nbuf.push(\"</div></div>\");\n  break;\ncase \"audio\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-audio block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><audio\" + (jade.attr(\"src\", obj[prop], true, false)) + \" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"multi-content multi-content-audio block-dk\\\"></audio></div></div>\");\n  break;\ncase \"iframe\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-iframe block-md block-lt\\\"><div class=\\\"block-sm multi-content-iframe\\\">\");\nvar iframe = obj[prop].match(/<iframe[^<]*<\\/iframe>/)\nif ( iframe)\n{\nbuf.push(null == (jade_interp = iframe[0].replace(/ (width|height)=[\"'\\d\\w]+/g, \"\")) ? \"\" : jade_interp);\n}\nbuf.push(\"</div></div>\");\n  break;\ndefault:\nbuf.push(\"<span class=\\\"multi-content multi-content-text\\\">\" + (null == (jade_interp = obj[prop]) ? \"\" : jade_interp) + \"</span>\");\n  break;\n}\n};\nif ( game && game.timer && game.timer.limit > 0 && !game.timer.isDisabled)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-fill content-fit\\\"><div class=\\\"row content-lg-fill content-sm-ver content-md-ver\\\"><div class=\\\"col-lg-6 col-sm-12 content-lg-ver block-v-md\\\"><h1 class=\\\"slide-title text-lg-right text-md-center text-sm-center fade-in tight\\\">\");\njade_mixins[\"multi-content\"](\"title\");\nbuf.push(\"</h1></div><div class=\\\"col-lg-6 col-sm-12 content-lg-ver block-v-md\\\"><div class=\\\"draggy-parent\\\"><div\" + (jade.attr(\"data-correct\", categories[0].correct, true, false)) + (jade.attr(\"data-answer-id\", categories[0].id, true, false)) + (jade.cls(['category','droppy','droppy-top','block-v-md','delay-4',\"droppy-\" + (categories[0].correct) + \"\"], [null,null,null,null,null,true])) + \"><div class=\\\"droppy-child block-dk text-center text-lg slide-left\\\"><div class=\\\"content-ver block-sm\\\">\" + (null == (jade_interp = categories[0].content) ? \"\" : jade_interp) + \"</div></div></div><div class=\\\"draggy block-v-md\\\"><div\" + (jade.cls(['btn','btn-solid','btn-block','selectable','draggy-btn','fade-in','delay-6',buttonClass], [null,null,null,null,null,null,null,true])) + \"><div class=\\\"btn-text\\\">\" + (null == (jade_interp = buttonText) ? \"\" : jade_interp) + \"</div></div></div><div\" + (jade.attr(\"data-correct\", categories[1].correct, true, false)) + (jade.attr(\"data-answer-id\", categories[1].id, true, false)) + (jade.cls(['category','droppy','droppy-bottom','block-v-md','delay-4',\"droppy-\" + (categories[1].correct) + \"\"], [null,null,null,null,null,true])) + \"><div class=\\\"droppy-child block-dk text-center text-lg slide-right\\\"><div class=\\\"content-ver\\\">\" + (null == (jade_interp = categories[1].content) ? \"\" : jade_interp) + \"</div></div></div></div></div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"buttonClass\" in locals_for_with?locals_for_with.buttonClass:typeof buttonClass!==\"undefined\"?buttonClass:undefined,\"buttonText\" in locals_for_with?locals_for_with.buttonText:typeof buttonText!==\"undefined\"?buttonText:undefined,\"categories\" in locals_for_with?locals_for_with.categories:typeof categories!==\"undefined\"?categories:undefined,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"playinline\" in locals_for_with?locals_for_with.playinline:typeof playinline!==\"undefined\"?playinline:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView = require \"views/base/game\"\n{ DraggyView }  = require(\"views/components/draggy\")\nDevice = require(\"lib/device\")\n\nclass CategoriseView extends GameView\n  template: require(\"./template\")\n  fitTextOnResize: false\n  fitTextOnRender: false\n\n  serialize: ->\n    data = super\n    maxTextLength = if data.width > 375 then 30 else 20\n    data.buttonClass = \"btn-long\" if data.buttonText.length > maxTextLength\n    data.categories = _.shuffle data.metadata.questions[0].answers\n    data\n\n  events: ->\n    \"iostap .btn-done\": \"endGame\"\n\n  show: ->\n    super\n    delete @index\n\n    @setEl @findOne(\".draggy-btn\"), \"draggyBtn\"\n    @setEl @findOne(\".draggy-parent\"), \"draggyParent\"\n    @setEl @findAll(\".droppy\"), \"droppies\"\n    @setEl @findAll(\".droppy-child\"), \"droppyChild\"\n    @createDraggy()\n\n    @enterGame()\n\n  createDraggy: ->\n    @draggy = new DraggyView\n      el: @findOne(\".draggy\")\n      lock: \"x\"\n\n    @draggy.el.classList.add(\"no-delay\")\n\n    @listenTo @draggy, \"drag\", @onDrag\n    @listenTo @draggy, \"drop\", @onDrop\n    @listenTo this, \"resize\", @onResize\n\n    @updateDroppyHeight()\n\n  onDrag: (draggy, isInitialDrag) ->\n    @index = if draggy.y < 0 then 0 else 1\n\n    for droppy, i in @getEl \"droppies\"\n      droppy.classList.add \"no-delay\"\n      droppy.classList.toggle \"active\", i is @index\n\n    @transform draggy.el,\n      y: draggy.y\n      scale: 1.05\n      transition: if isInitialDrag then \"all 300ms\" else \"none\"\n\n  onDrop: (draggy, isReset) ->\n    if isReset\n      @transform draggy.el,\n        y: draggy.y\n        transition: \"all 300ms\"\n\n    else\n      return unless @currentDroppy = @getEl(\"droppies\")[@index]\n\n      @draggy.el.classList.add(\"draggy-drop\")\n\n      @moveDroppies()\n\n      y = (@currentDroppy.offsetHeight - @draggy.offset.height) / 2\n\n      if draggy.y < 0\n        y = -y - draggy.offset.height / 2\n      else\n        y =  y + draggy.offset.height / 2\n\n      draggy.reset x: 0, y: y\n\n    @setState \"touched\"\n\n  moveDroppies: ->\n    y = @draggy.offset.height / 2\n    toTransform = [@getEl(\"droppies\")...]\n\n    if Device.breakpoint([\"xs\", \"sm\", \"md\"])\n      toTransform.push(@findOne(\".slide-title\"))\n\n    for el, i in toTransform\n      @transform el,\n        y: if i is 1 then -y else y\n        transition: \"all 300ms\"\n\n  updateDroppyHeight: ->\n    @draggy.getOffset()\n\n    unless @currentState?.refresh\n      @el.classList.remove(\"active\")\n\n    el.firstChild.style.height = \"\" for el, i in @getEl \"droppies\"\n\n    fontSize = parseInt(window.getComputedStyle(@getEl(\"droppies\")[0]).fontSize)\n    height   = _.reduce @getEl(\"droppies\"), (m, el) ->\n      if m > el.offsetHeight then m else el.offsetHeight\n    , @draggy.el.firstChild.offsetHeight\n\n    for el, i in @getEl \"droppies\"\n      el.firstChild.style.height = \"#{height / fontSize}em\"\n\n    @draggy.options.minY = -height\n    @draggy.options.maxY =  height\n\n    @fitText =>\n      window.setTimeout (=> @el.classList.add(\"active\")), 300\n\n  answerDetails: ->\n    questions = @options.metadata?.questions or []\n    return [] unless questions.length > 0 and @currentDroppy?\n\n    question = questions[0]\n    id       = @currentDroppy.dataset.answerId\n    answer   = _.findWhere question.answers, { id }\n    details  = question: question.question, answer: answer\n    [ details ]\n\n  isCorrect: ->\n    @currentDroppy?.dataset.correct?\n\n  onRefresh: ->\n    if @draggy\n      @draggy.el.classList.remove(\"no-delay\")\n      for el, i in @getEl \"droppies\"\n        el.classList.remove \"no-delay\"\n\n    super\n\n  onResize: ->\n    @updateDroppyHeight()\n    @onDrop(@draggy)\n\n  endGame: ->\n    super\n\n    @submit()\n\nmodule.exports = CategoriseView\n","module.exports = {\"title\":\"chat\",\"display\":\"Chat\",\"category\":\"Multiple Choice\",\"links\":{\"academy\":\"https://academy.edapp.com/how-to-chat/\"},\"features\":{\"stars\":true,\"social\":true},\"model\":{\"title\":{\"type\":\"html\"},\"message\":{\"content\":{\"type\":\"html\"},\"sender\":{\"type\":\"html\"},\"responder\":{\"type\":\"html\",\"default\":\"You\"}},\"answers\":{\"correct\":{\"display\":\"Correct Answer\",\"type\":\"html\"},\"incorrect\":{\"display\":\"Incorrect Answers\",\"type\":[{\"type\":\"html\"}],\"min\":1,\"max\":2}},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (seconds)\"},\"out-of-time-prompt\":{\"type\":\"html\",\"display\":\"Out of time prompt\"}}},\"prompt\":{\"type\":\"html\",\"default\":\"Select the correct answer\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"one-of-three\",\"message\":{\"sender\":\"The customer asks\",\"responder\":\"What's your answer?\",\"content\":\"Which product is the cheapest?\"},\"answers\":{\"correct\":\"Product X is cheapest\",\"incorrect\":[\"Product Y is cheapest\",\"Product Z is cheapest\"]},\"answer\":{\"text\":\"It's important to help the customer understand that Product X is in fact the cheapest product.\\n\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (allAnswers, continueBtnText, doneText, game, hasNarration, hasPrompt, i18n, message, prompt, submitUp, title, undefined) {\nif ( game && game.timer && game.timer.limit > 0 && !game.timer.isDisabled)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-fill\\\"><div class=\\\"block-v-md content-ver text-md content-fit\\\">\");\nif ( title)\n{\nbuf.push(\"<h2 class=\\\"fade-in\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h2>\");\n}\nbuf.push(\"<div class=\\\"row\\\">\");\nif ( message.content)\n{\nbuf.push(\"<div class=\\\"col-lg-10 col-sm-12\\\">\");\nif ( message.sender)\n{\nbuf.push(\"<h4 class=\\\"fade-in block-v-sm\\\">\" + (null == (jade_interp = message.sender) ? \"\" : jade_interp) + \"</h4>\");\n}\nbuf.push(\"<div class=\\\"message message--question chat-msg quote quote-dk pull-left\\\"><div class=\\\"quote-content\\\"><div class=\\\"chat-msg-elli\\\"><span class=\\\"bullet delay-1\\\">&bullet;</span><span class=\\\"bullet delay-2\\\">&bullet;</span><span class=\\\"bullet delay-3\\\">&bullet;</span></div><div class=\\\"chat-msg-text\\\">\" + (null == (jade_interp = message.content) ? \"\" : jade_interp) + \"</div></div></div></div>\");\n}\nif ( message.responder)\n{\nbuf.push(\"<div class=\\\"col-sm-12 block-v-sm text-right chat-responder delay-4\\\"><h4>\" + (null == (jade_interp = message.responder) ? \"\" : jade_interp) + \"</h4></div>\");\n}\nbuf.push(\"<div class=\\\"col-md-10 col-md-offset-2 col-sm-12\\\">\");\n// iterate allAnswers\n;(function(){\n  var $$obj = allAnswers;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var answer = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"data-id\", answer.id, true, false)) + (jade.cls(['message','message--answer','chat-msg','quote','quote-lt','pull-right','text-right','selectable',([\n              \"delay-\" + (answer.delay) + \"\",\n              answer.isCorrect ? \"correct\" : \"incorrect\"\n            ].join(\" \"))], [null,null,null,null,null,null,null,null,true])) + \"><div class=\\\"quote-content\\\">\" + (null == (jade_interp = answer.text) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var answer = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"data-id\", answer.id, true, false)) + (jade.cls(['message','message--answer','chat-msg','quote','quote-lt','pull-right','text-right','selectable',([\n              \"delay-\" + (answer.delay) + \"\",\n              answer.isCorrect ? \"correct\" : \"incorrect\"\n            ].join(\" \"))], [null,null,null,null,null,null,null,null,true])) + \"><div class=\\\"quote-content\\\">\" + (null == (jade_interp = answer.text) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"allAnswers\" in locals_for_with?locals_for_with.allAnswers:typeof allAnswers!==\"undefined\"?allAnswers:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"message\" in locals_for_with?locals_for_with.message:typeof message!==\"undefined\"?message:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView    = require \"views/base/game\"\n\nclass ChatView extends GameView\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap .selectable\": \"selectAnswer\"\n    \"iostap .btn-done\": \"endGame\"\n\n  serialize: ->\n    d = super\n    answers = d.metadata?.questions?[0]?.answers or []\n\n    d.allAnswers = _.shuffle(answers).map (a, i) ->\n      id:        a.id\n      text:      typogr.typogrify(a.content.toString() or \"\")\n      isCorrect: a.correct\n      delay:     6 + i * 2\n    d\n\n  onRefresh: ->\n    super\n    @resetChat(true)\n\n  resetChat: (isRefresh) ->\n    @setState(\"prompt\")\n    @setState(false, \"show-msg\")\n\n    delay =\n      if isRefresh then 0\n      else if not @options.data.message.content then 300\n      else 1000\n\n    if @options.data.game?.timer.limit > 0\n      for el in @getEl \"answers\"\n        el.classList.add(\"no-delay\")\n\n    if isRefresh\n      @getEl(\"chatElli\").classList.add(\"hide\")\n\n    window.clearTimeout @timeout\n    @timeout = window.setTimeout (=>\n      @setState(true, \"show-msg\")\n      @getEl(\"chatElli\").classList.remove(\"hide\")\n    ), delay\n\n  show: ->\n    super\n    @setEl @findAll(\".selectable\"), \"answers\"\n    @setEl @findOne(\".chat-msg-elli\"), \"chatElli\"\n    @resetChat()\n\n    @enterGame()\n\n  hide: ->\n    @setState(false, \"show-msg\")\n    super\n\n  endGame: ->\n    super\n\n    @submit()\n\n  selectAnswer: (e) ->\n    return if @currentState.state is \"complete\"\n\n    for el in @getEl \"answers\"\n      el.classList.remove(\"active\")\n      @transform el, scale: 1\n\n    target = e.currentTarget\n    width  = target.offsetWidth\n    target.classList.add(\"active\", \"no-delay\")\n    @transform target, scale: 1 + 16 / width\n\n    @setEl(target, \"selected\")\n    @setState(\"touched\")\n\n  answerDetails: ->\n    questions = @options.metadata?.questions or []\n    return [] unless questions.length > 0\n\n    question = questions[0]\n    id       = @getEl(\"selected\")?.dataset.id\n\n    details =\n      answer: _.find(question.answers, { id })\n      question: question.question\n    [ details ]\n\n  isCorrect: ->\n    @getEl(\"selected\")?.classList.contains(\"correct\") ? false\n\n  screenshot: ->\n    @setState(true, \"show-msg\")\n\n    super(arguments...)\n\nmodule.exports = ChatView\n","module.exports = {\"title\":\"circle-the-answer\",\"display\":\"Circle the Answer\",\"category\":\"Multiple Choice\",\"features\":{\"stars\":true,\"social\":true},\"model\":{\"title\":{\"types\":[\"text\",\"image\",\"video\",\"audio\"],\"default\":\"\"},\"answers\":{\"correct\":{\"display\":\"Correct Answer\",\"type\":\"html\"},\"incorrect\":{\"display\":\"Incorrect Answers\",\"type\":[{\"type\":\"html\"}],\"min\":1,\"max\":3}},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (seconds)\"},\"out-of-time-prompt\":{\"type\":\"html\",\"display\":\"Out of time prompt\"}}},\"prompt\":{\"type\":\"html\",\"default\":\"Circle the correct answer\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"circle-the-answer\",\"title\":\"Ed makes learning fun with a massive range of engaging templates\",\"titleType\":\"text\",\"answers\":{\"correct\":\"Thats right!\",\"incorrect\":[\"Yes, I suppose so...\",\"I'm not sure\"]}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (allAnswers, config, continueBtnText, doneText, game, hasNarration, hasPrompt, i18n, playinline, prompt, submitUp, undefined) {\njade_mixins[\"video-stream\"] = jade_interp = function(videoUrl, playsinline, controls, klass, poster){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nplayinline = playinline || true\ncontrols = controls || true\nklass = klass || 'video vjs-fluid'\nvar cloudinaryVideoFolderUrl = config.CLOUDINARY_CDN_URL+config.CLOUDINARY_VIDEO_FOLDER\nvar streamUrl = ''\nif ( videoUrl && videoUrl.indexOf(cloudinaryVideoFolderUrl) > -1)\n{\nstreamUrl = videoUrl.replace(cloudinaryVideoFolderUrl, cloudinaryVideoFolderUrl+'sp_full_hd/')\nstreamUrl = streamUrl.replace('.mp4', '.m3u8')\n}\nbuf.push(\"<video\" + (jade.attr(\"webkit-playsinline\", playsinline, true, false)) + (jade.attr(\"controls\", controls, true, false)) + \" preload=\\\"auto\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + (jade.attr(\"poster\", poster, true, false)) + (jade.cls(['video-js',klass], [null,true])) + \"><source\" + (jade.attr(\"src\", videoUrl, true, false)) + \"/>\");\nif ( streamUrl)\n{\nbuf.push(\"<source\" + (jade.attr(\"src\", streamUrl, true, false)) + \"/>\");\n}\nbuf.push(\"</video>\");\n};\njade_mixins[\"image\"] = jade_interp = function(imageUrl, klass){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nbuf.push(\"<img\" + (jade.attr(\"src\", imageUrl, true, false)) + (jade.cls([klass], [true])) + \"/>\");\n};\njade_mixins[\"multi-content\"] = jade_interp = function(prop, obj){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nobj = obj || locals;\nswitch (obj[prop + \"Type\"]){\ncase \"image\":\nbuf.push(\"<div\" + (jade.attr(\"data-content\", obj.image, true, false)) + \" class=\\\"multi-content-wrapper multi-content-wrapper-image block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\">\");\njade_mixins[\"image\"](obj[prop], 'multi-content multi-content-image');\nbuf.push(\"</div></div>\");\n  break;\ncase \"video\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-video block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\">\");\njade_mixins[\"video-stream\"](obj[prop], true, true,\"multi-content multi-content-video block-dk\");\nbuf.push(\"</div></div>\");\n  break;\ncase \"audio\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-audio block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><audio\" + (jade.attr(\"src\", obj[prop], true, false)) + \" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"multi-content multi-content-audio block-dk\\\"></audio></div></div>\");\n  break;\ncase \"iframe\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-iframe block-md block-lt\\\"><div class=\\\"block-sm multi-content-iframe\\\">\");\nvar iframe = obj[prop].match(/<iframe[^<]*<\\/iframe>/)\nif ( iframe)\n{\nbuf.push(null == (jade_interp = iframe[0].replace(/ (width|height)=[\"'\\d\\w]+/g, \"\")) ? \"\" : jade_interp);\n}\nbuf.push(\"</div></div>\");\n  break;\ndefault:\nbuf.push(\"<span class=\\\"multi-content multi-content-text\\\">\" + (null == (jade_interp = obj[prop]) ? \"\" : jade_interp) + \"</span>\");\n  break;\n}\n};\nif ( game && game.timer && game.timer.limit > 0 && !game.timer.isDisabled)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"full-screen circle-canvas-container\\\"><canvas class=\\\"circle-canvas\\\"></canvas></div><div class=\\\"block-v-lg content-fill content-fit circle-boxes\\\"><div class=\\\"row content-lg-fill content-sm-ver content-md-ver\\\"><div class=\\\"col-lg-6 col-sm-12 content-lg-ver block-v-md\\\"><h1 class=\\\"fade-in text-lg-right text-md-center text-sm-center\\\">\");\njade_mixins[\"multi-content\"](\"title\");\nbuf.push(\"</h1></div><div class=\\\"col-lg-6 col-sm-12 content-lg-ver block-v-md text-center\\\">\");\n// iterate allAnswers\n;(function(){\n  var $$obj = allAnswers;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var answer = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-correct\", answer.isCorrect, true, false)) + (jade.attr(\"data-answer-id\", answer.id, true, false)) + (jade.cls(['circle-box','slide-up','text-md',([\n            \"delay-\" + (answer.delay) + \"\",\n            answer.isCorrect ? \"correct\" : \"incorrect\"\n          ].join(\" \"))], [null,null,null,true])) + \"><div class=\\\"block-lg circle-box-text\\\">\" + (null == (jade_interp = answer.text) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var answer = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-correct\", answer.isCorrect, true, false)) + (jade.attr(\"data-answer-id\", answer.id, true, false)) + (jade.cls(['circle-box','slide-up','text-md',([\n            \"delay-\" + (answer.delay) + \"\",\n            answer.isCorrect ? \"correct\" : \"incorrect\"\n          ].join(\" \"))], [null,null,null,true])) + \"><div class=\\\"block-lg circle-box-text\\\">\" + (null == (jade_interp = answer.text) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"allAnswers\" in locals_for_with?locals_for_with.allAnswers:typeof allAnswers!==\"undefined\"?allAnswers:undefined,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"playinline\" in locals_for_with?locals_for_with.playinline:typeof playinline!==\"undefined\"?playinline:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView    = require \"views/base/game\"\n{ DraggyView }  = require(\"views/components/draggy\")\nSmoothLine  = require(\"lib/draw/smooth-line\")\neasie       = require(\"lib/easie\")\nanimate     = require(\"lib/animate\")\n{ dpi }     = require(\"lib/device\")\n\nclass CircleTheAnswerView extends GameView\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap .btn-done\": \"endGame\"\n\n  serialize: ->\n    d = super\n\n    allAnswers   = d.metadata?.questions?[0]?.answers or []\n    answers = allAnswers.map (a, i) ->\n      id:        a.id\n      text:      typogr.typogrify(a.content.toString() or \"\")\n      isCorrect: a.correct\n      delay:     4 + i * 2\n\n    d.allAnswers = _.shuffle(answers)\n    d\n\n  show: ->\n    super\n    @setEl @findAll(\".circle-box\"), \"boxes\"\n\n    @draggy = new DraggyView\n      el: @findOne(\"canvas\")\n      isParent: true\n\n    @context = @draggy.el.getContext?(\"2d\") or {}\n\n    @listenTo @draggy, \"drag\", @onDrag\n    @listenTo @draggy, \"drop\", @onDrop\n    @listenTo this, \"resize\", @onResize\n\n    @onResize()\n\n    @context.clearRect?(0, 0, @draggy.el.width, @draggy.el.height)\n    el.classList.remove(\"active\", \"complete\") for el in @getEl(\"boxes\")\n\n    @enterGame()\n\n  onResize: ->\n    if el = @draggy?.el\n      el.width  = @el.firstChild.offsetWidth * dpi\n      el.height = @el.firstChild.offsetHeight * dpi\n\n  onDrag: (draggy, isInitial) ->\n    window.clearTimeout @timeout\n    { left, top } = @getBounds(@el.firstChild)\n\n    if isInitial\n      @line?.animation?.cancel()\n      @animation?.cancel()\n      @context.lineCap = \"round\"\n      @context.globalAlpha = 1\n      @line = new SmoothLine([], window.getComputedStyle(@el).color, 4 * dpi)\n      @activeBox = null\n\n      for box in @getEl(\"boxes\")\n        box.classList.remove(\"active\")\n\n    @addPoint(draggy)\n\n  onDrop: ->\n    @findAnswer(@line.getPoints())\n\n    if @activeBox\n      @setState(\"touched\")\n    else\n      @setState(\"prompt\")\n\n  addPoint: ({x, y}) ->\n    @line.add x: x * dpi, y: y * dpi\n    @drawLines()\n\n  drawLines: ->\n    @draggy.el.offsetHeight\n    @context.clearRect(0, 0, @draggy.el.width, @draggy.el.height)\n    @context.beginPath()\n    @line.draw(@context)\n\n  getClosestBox: (centerX, centerY) ->\n    offset = x: -@draggy.offset.left, y: -@draggy.offset.top\n    _.sortBy(@getEl(\"boxes\"), (box) =>\n      bounds = @getBounds(box, offset)\n      x = (bounds.left + bounds.width / 2) - centerX / dpi\n      y = (bounds.top + bounds.height / 2) - centerY / dpi\n      Math.sqrt(x * x + y * y)\n    )[0]\n\n  getDistance: (p1, p2) ->\n    distX = p1.x - p2.x\n    distY = p1.y - p2.y\n    Math.sqrt(Math.pow(distX, 2) + Math.pow(distY, 2))\n\n  findAnswer: (points) ->\n    minX = minY = Infinity\n    maxX = maxY = -Infinity\n\n    for { x, y } in points\n      minX = x if x < minX\n      maxX = x if x > maxX\n      minY = y if y < minY\n      maxY = y if y > maxY\n\n    buffer  = 80\n    centerX = _.average(_.pluck(points, \"x\"))\n    centerY = _.average(_.pluck(points, \"y\"))\n    radius  = ((maxX - minX) / 2 + (maxY - minY) / 2) / 2\n\n    el = @getClosestBox(centerX, centerY)\n    offset = x: -@draggy.offset.left, y: -@draggy.offset.top\n    bounds = @getBounds(el, offset)\n    boxX = bounds.left + bounds.width / 2\n    boxY = bounds.top + bounds.height / 2\n\n    isACircle = @getDistance(points[0], _.last(points)) < 250\n    isWithin  = boxX * dpi > minX - buffer and boxX * dpi < maxX + buffer and\n                boxY * dpi > minY - buffer and boxY * dpi < maxY + buffer\n\n    @activeBox = if isACircle and isWithin then el\n    @activeBox?.classList.add(\"active\")\n\n    type = if not isACircle then \"line\" else if isWithin then \"on\" else \"off\"\n    @animateAnswer(type, centerX, centerY, radius)\n\n  animateAnswer: (type, x, y, radius) ->\n    switch type\n      when \"line\"\n        @line.erase @context, =>\n          @context.clearRect(0, 0, @draggy.el.width, @draggy.el.height)\n\n      when \"on\"\n        duration = 1000\n        @context.fillStyle = window.getComputedStyle(@el).color\n        draw = (dist) =>\n          scale = easie.elasticInOut(dist + 1, 0, 1.25, 2, 1.25, 1.25)\n          @context.arc(x, y, radius * scale, 0, 2 * Math.PI)\n          @context.fill()\n\n      when \"off\"\n        duration = 1000\n        draw = (dist) =>\n          scale = easie.elasticIn(1 - dist, 0.8, 0.2, 1, 0.5)\n          @context.arc(x, y, radius * scale, 0, 2 * Math.PI)\n          @context.stroke()\n\n    if draw\n      wrap = (d) =>\n        @context.clearRect(0, 0, @draggy.el.width, @draggy.el.height)\n        @context.beginPath()\n        @context.globalAlpha = 1 - d\n        draw(d)\n\n      @animation = animate(wrap, duration)\n\n  isCorrect: ->\n    @activeBox?.dataset.correct?\n\n  isMatch: (left, right) ->\n    lr = @options.data.pairs[+left.dataset.index].right\n    rr = @options.data.pairs[+right.dataset.index].right\n    ll = @options.data.pairs[+left.dataset.index].left\n    rl = @options.data.pairs[+right.dataset.index].left\n    lr is rr or ll is rl\n\n  endGame: ->\n    super\n\n    @submit()\n\n  answerDetails: ->\n    questions = @options.metadata?.questions or []\n    return [] unless questions.length > 0\n\n    question = questions[0]\n    id       = @$(@activeBox).data(\"answer-id\")\n    details =\n      answer: _.find(question.answers, { id })\n      question: question.question\n\n    [ details ]\n\nmodule.exports = CircleTheAnswerView\n","module.exports = {\"title\":\"comparison\",\"display\":\"Comparison\",\"category\":\"Content\",\"description\":\"Juxtapose two items in a slider\",\"features\":{\"narration\":true,\"social\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"Ask a question\"},\"before\":{\"content\":{\"types\":[\"text\",\"image\"]},\"label\":{\"type\":\"text\"}},\"after\":{\"content\":{\"types\":[\"text\",\"image\"]},\"label\":{\"type\":\"text\"}},\"startPosition\":{\"type\":\"select\",\"enum\":[\"Before - Start with the first section visible\",\"Middle - Show the content equally divided\",\"After - The second section is shown first\"],\"default\":\"Middle - Show the content equally divided\",\"display\":\"Start Position\"},\"prompt\":{\"type\":\"html\",\"default\":\"Drag to compare the content\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"compare-two\",\"title\":\"Product X vs. Product Y\",\"before\":{\"content\":\"img/examples/product-phone.png\",\"contentType\":\"image\",\"label\":\"**Product X**\\n\\nBrilliant. In every way.\\n\"},\"after\":{\"content\":\"img/examples/product-laptop.png\",\"contentType\":\"image\",\"label\":\"**Product Y**\\n\\nMore power. More performance.\\n\"},\"startPosition\":\"Middle - Show the content equally divided\"},{\"subtype\":\"reveal-further-information\",\"title\":\"Product X\",\"before\":{\"content\":\"## Brilliant in every way\\n\",\"contentType\":\"text\"},\"after\":{\"content\":\"Our brilliant new sleek design allows the user to have unparalleled  comfort when using the device\\n\",\"contentType\":\"text\"},\"startPosition\":\"Before - Start with the first section visible\",\"prompt\":\"Drag to reveal the content\"}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (after, before, config, continueBtnText, doneText, hasNarration, hasPrompt, i18n, playinline, prompt, submitUp, title, undefined) {\njade_mixins[\"video-stream\"] = jade_interp = function(videoUrl, playsinline, controls, klass, poster){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nplayinline = playinline || true\ncontrols = controls || true\nklass = klass || 'video vjs-fluid'\nvar cloudinaryVideoFolderUrl = config.CLOUDINARY_CDN_URL+config.CLOUDINARY_VIDEO_FOLDER\nvar streamUrl = ''\nif ( videoUrl && videoUrl.indexOf(cloudinaryVideoFolderUrl) > -1)\n{\nstreamUrl = videoUrl.replace(cloudinaryVideoFolderUrl, cloudinaryVideoFolderUrl+'sp_full_hd/')\nstreamUrl = streamUrl.replace('.mp4', '.m3u8')\n}\nbuf.push(\"<video\" + (jade.attr(\"webkit-playsinline\", playsinline, true, false)) + (jade.attr(\"controls\", controls, true, false)) + \" preload=\\\"auto\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + (jade.attr(\"poster\", poster, true, false)) + (jade.cls(['video-js',klass], [null,true])) + \"><source\" + (jade.attr(\"src\", videoUrl, true, false)) + \"/>\");\nif ( streamUrl)\n{\nbuf.push(\"<source\" + (jade.attr(\"src\", streamUrl, true, false)) + \"/>\");\n}\nbuf.push(\"</video>\");\n};\njade_mixins[\"image\"] = jade_interp = function(imageUrl, klass){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nbuf.push(\"<img\" + (jade.attr(\"src\", imageUrl, true, false)) + (jade.cls([klass], [true])) + \"/>\");\n};\njade_mixins[\"multi-content\"] = jade_interp = function(prop, obj){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nobj = obj || locals;\nswitch (obj[prop + \"Type\"]){\ncase \"image\":\nbuf.push(\"<div\" + (jade.attr(\"data-content\", obj.image, true, false)) + \" class=\\\"multi-content-wrapper multi-content-wrapper-image block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\">\");\njade_mixins[\"image\"](obj[prop], 'multi-content multi-content-image');\nbuf.push(\"</div></div>\");\n  break;\ncase \"video\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-video block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\">\");\njade_mixins[\"video-stream\"](obj[prop], true, true,\"multi-content multi-content-video block-dk\");\nbuf.push(\"</div></div>\");\n  break;\ncase \"audio\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-audio block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><audio\" + (jade.attr(\"src\", obj[prop], true, false)) + \" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"multi-content multi-content-audio block-dk\\\"></audio></div></div>\");\n  break;\ncase \"iframe\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-iframe block-md block-lt\\\"><div class=\\\"block-sm multi-content-iframe\\\">\");\nvar iframe = obj[prop].match(/<iframe[^<]*<\\/iframe>/)\nif ( iframe)\n{\nbuf.push(null == (jade_interp = iframe[0].replace(/ (width|height)=[\"'\\d\\w]+/g, \"\")) ? \"\" : jade_interp);\n}\nbuf.push(\"</div></div>\");\n  break;\ndefault:\nbuf.push(\"<span class=\\\"multi-content multi-content-text\\\">\" + (null == (jade_interp = obj[prop]) ? \"\" : jade_interp) + \"</span>\");\n  break;\n}\n};\nbuf.push(\"<div class=\\\"content-fit content-fill\\\"><div class=\\\"content-sm-ver content-md-fill text-center block-v-lg\\\"><div class=\\\"row content-md-fill\\\">\");\nif ( title)\n{\nbuf.push(\"<div class=\\\"col-sm-12 col-md-6 content-md-ver\\\"><div class=\\\"block-v-md slider-title\\\"><h1 class=\\\"slide-down\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1></div></div>\");\n}\nbuf.push(\"<div\" + (jade.cls(['col-sm-12','content-md-ver','block-v-md',title ? \"col-md-6\" : \"col-md-8 col-md-offset-2\"], [null,null,null,true])) + \"><div class=\\\"fade-in delay-3 slider-wrapper\\\"><div class=\\\"slider\\\"><div class=\\\"slider-knob\\\"></div><div class=\\\"slider-items\\\">\");\n// iterate [ before, after ]\n;(function(){\n  var $$obj = [ before, after ];\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var item = $$obj[i];\n\nbuf.push(\"<div\" + (jade.cls(['slider-item','content-fill',\"slider-item-\" + (i) + \"\"], [null,null,true])) + \"><div class=\\\"slider-content content-fill\\\">\");\njade_mixins[\"multi-content\"](\"content\", item);\nbuf.push(\"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var item = $$obj[i];\n\nbuf.push(\"<div\" + (jade.cls(['slider-item','content-fill',\"slider-item-\" + (i) + \"\"], [null,null,true])) + \"><div class=\\\"slider-content content-fill\\\">\");\njade_mixins[\"multi-content\"](\"content\", item);\nbuf.push(\"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div><div class=\\\"slider-labels text-md\\\"><div class=\\\"slider-label slider-label-before\\\">\" + (null == (jade_interp = before.label) ? \"\" : jade_interp) + \"</div><div class=\\\"slider-label slider-label-after\\\">\" + (null == (jade_interp = after.label) ? \"\" : jade_interp) + \"</div></div></div></div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"after\" in locals_for_with?locals_for_with.after:typeof after!==\"undefined\"?after:undefined,\"before\" in locals_for_with?locals_for_with.before:typeof before!==\"undefined\"?before:undefined,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"playinline\" in locals_for_with?locals_for_with.playinline:typeof playinline!==\"undefined\"?playinline:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView = require \"views/slide\"\n{ DraggyView }    = require \"views/components/draggy\"\nPreloader = require \"lib/preload\"\nDevice    = require \"lib/device\"\n\nclass ComparisonView extends SlideView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-done\": \"submit\"\n    \"fittextend\": \"onFitTextEnd\"\n\n  show: ->\n    @createDraggy()\n    @slideToStart()\n\n    @trigger(\"resize\")\n\n  getStartPosition: ->\n    @options.data.startPosition?.split?(\" \")[0].toLowerCase() or \"middle\"\n\n  slideToStart: ->\n    offset =\n      switch @getStartPosition()\n        when \"before\" then 1\n        when \"after\"  then 0\n        else 0.5\n\n    window.setTimeout =>\n      @draggy?.reset x: @draggy.offset.width * offset\n    , 1\n\n  beforeShow: ->\n    images = @findAll(\"img\")\n    @setEl @findOne(\".slider-wrapper\"), \"slider-wrapper\"\n    @setEl @findOne(\".slider\"), \"slider\"\n    @setEl @findOne(\".slider-knob\"), \"knob\"\n    @setEl @findAll(\".slider-item\"), \"items\"\n    @setEl @findOne(\".slider-title\"), \"title\"\n    @setEl @findOne(\".slider-labels\"), \"labels\"\n\n    @draggy?.undelegateEvents()\n    @draggy = null\n    delete @draggy\n\n    if images.length > 0\n      Preloader.load _.pluck(images, \"src\"), => @sizeContent()\n    else\n      @sizeContent()\n\n    if @options.name is 0\n      window.setTimeout =>\n        @fitText()\n        @show()\n      , 400\n\n  refresh: (params) ->\n    position =\n      if not _.isEqual(params.data.before, @options.data.before)\n        0.75\n      else if not _.isEqual(params.data.after, @options.data.after)\n        0.25\n\n    super\n\n    @beforeShow()\n\n    if position\n      @createDraggy()\n      @draggy.reset { x: @draggy.offset.width * position }\n      @onDrag(@draggy, false, 1, true)\n    else\n      @show()\n\n  onRefresh: ->\n    # don't call @show\n\n  onFitTextEnd: ->\n    @sizeContent(true)\n\n  createDraggy: ->\n    if @draggy\n      @draggy.undelegateEvents()\n\n    width = @getEl(\"slider\").offsetWidth\n\n    @draggy = new DraggyView\n      el: @getEl(\"slider\")\n      minX: 0\n      maxX: width\n      lock: \"y\"\n      isParent: true\n\n    @listenTo @draggy, \"drag\", @onDrag\n    @listenTo @draggy, \"drop\", @onDrop\n\n  onDrag: (draggy, shouldTransit, scale = 1.1, isInitialDrag = false) ->\n    transition = if shouldTransit then \"all 300ms\" else \"\"\n\n    @transform @getEl(\"knob\"),\n      x: Math.round draggy.x\n      scale: scale\n      transition: transition\n\n    x = Math.round Math.max Math.min(draggy.x, draggy.offset.width), 0\n\n    if not @draggy or draggy.x is draggy.offset.width / 2\n      @setState false, \"side\"\n    else\n      side = if x > draggy.offset.width / 2 then \"before\" else \"after\"\n      @setState side, \"side\"\n      @transform @getEl(\"slider-wrapper\"), y: 0, transition: \"500ms\"\n      @transform @getEl(\"title\"),  y: 0, transition: \"500ms\"\n      \n    if not isInitialDrag  \n      @setState(\"touched\")\n    else\n      sliderLabels = @getEl(\"labels\")\n      sliderLabels.classList.add(\"initialized\")\n\n    for el, i in @getEl(\"items\")\n      s = if i is 0 then draggy.offset.width + .5 else -.5\n      @transform el, { x: x - s, transition }\n      @transform el.firstChild, { x: s - x, transition }\n\n  onDrop: (draggy, isReset) ->\n    if isReset\n      @onDrag(draggy, true, 1, true)\n    else\n      @onDrag(draggy, true, 1, false)\n\n  sizeContent: () ->\n    @setState false, \"sized\"\n\n    els    = @findAll(\".multi-content-wrapper, .multi-content-text\")\n    labels = @findOne(\".slider-labels\")\n\n    @getEl(\"slider\").style.height = \"\"\n    @getEl(\"slider\").style.width  = \"\"\n\n    fs = parseFloat window.getComputedStyle(@getEl(\"slider\")).fontSize\n\n    height = _.reduce labels.children, (m, el) ->\n      Math.max(m, el.offsetHeight)\n    , 0\n\n    labels.style.height = \"#{height / fs}em\"\n\n    size = _.reduce els, (m, el) ->\n      h: Math.max(m.h, el.offsetHeight)\n      w: Math.max(m.w, el.offsetWidth)\n    , { h: 80, w: 0}\n\n    @getEl(\"slider\").style.height = \"#{size.h / fs}em\"\n    @getEl(\"slider\").style.width  = \"#{size.w / fs}em\"\n\n    @setState true, \"sized\"\n\n    yOffset = (height + fs * 1.2) / 2\n    @transform(@getEl(\"slider-wrapper\"), y: yOffset)\n    @transform(@getEl(\"title\"), y: yOffset) unless Device.breakpoint([\"md\",\"lg\"])\n\n    if @draggy\n      @draggy.options.maxX = size.w\n      @draggy.getOffset()\n      @onDrag(@draggy, false, 1, true)\n    else\n      start =\n        switch @getStartPosition()\n          when \"before\" then 0\n          when \"after\" then 1\n          else 0.5\n\n      @onDrag { x: size.w * start, offset: { width: size.w } }, false, 1, true\n\n\nmodule.exports = ComparisonView\n","module.exports = {\"title\":\"connect\",\"display\":\"Connect\",\"category\":\"Relationships\",\"features\":{\"stars\":true,\"social\":true},\"model\":{\"title\":{\"types\":[\"text\",\"image\",\"video\",\"audio\"],\"default\":\"\"},\"pairs\":{\"min\":2,\"max\":4,\"type\":[{\"left\":{\"types\":[\"text\",\"image\"]},\"right\":{\"types\":[\"text\",\"image\"]}}]},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (seconds)\"},\"out-of-time-prompt\":{\"type\":\"html\",\"display\":\"Out of time prompt\"}}},\"prompt\":{\"type\":\"html\",\"default\":\"Draw a line between each pair\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"connect-three\",\"title\":\"Match the products with their attributes\",\"titleType\":\"text\",\"pairs\":[{\"left\":\"Product X\",\"right\":\"The first product\"},{\"left\":\"Product Y\",\"right\":\"The second one\"},{\"left\":\"Product Z\",\"right\":\"The last product\"}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (config, continueBtnText, doneText, game, hasNarration, hasPrompt, i18n, leftItems, playinline, prompt, rightItems, submitUp, undefined) {\njade_mixins[\"video-stream\"] = jade_interp = function(videoUrl, playsinline, controls, klass, poster){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nplayinline = playinline || true\ncontrols = controls || true\nklass = klass || 'video vjs-fluid'\nvar cloudinaryVideoFolderUrl = config.CLOUDINARY_CDN_URL+config.CLOUDINARY_VIDEO_FOLDER\nvar streamUrl = ''\nif ( videoUrl && videoUrl.indexOf(cloudinaryVideoFolderUrl) > -1)\n{\nstreamUrl = videoUrl.replace(cloudinaryVideoFolderUrl, cloudinaryVideoFolderUrl+'sp_full_hd/')\nstreamUrl = streamUrl.replace('.mp4', '.m3u8')\n}\nbuf.push(\"<video\" + (jade.attr(\"webkit-playsinline\", playsinline, true, false)) + (jade.attr(\"controls\", controls, true, false)) + \" preload=\\\"auto\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + (jade.attr(\"poster\", poster, true, false)) + (jade.cls(['video-js',klass], [null,true])) + \"><source\" + (jade.attr(\"src\", videoUrl, true, false)) + \"/>\");\nif ( streamUrl)\n{\nbuf.push(\"<source\" + (jade.attr(\"src\", streamUrl, true, false)) + \"/>\");\n}\nbuf.push(\"</video>\");\n};\njade_mixins[\"image\"] = jade_interp = function(imageUrl, klass){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nbuf.push(\"<img\" + (jade.attr(\"src\", imageUrl, true, false)) + (jade.cls([klass], [true])) + \"/>\");\n};\njade_mixins[\"multi-content\"] = jade_interp = function(prop, obj){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nobj = obj || locals;\nswitch (obj[prop + \"Type\"]){\ncase \"image\":\nbuf.push(\"<div\" + (jade.attr(\"data-content\", obj.image, true, false)) + \" class=\\\"multi-content-wrapper multi-content-wrapper-image block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\">\");\njade_mixins[\"image\"](obj[prop], 'multi-content multi-content-image');\nbuf.push(\"</div></div>\");\n  break;\ncase \"video\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-video block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\">\");\njade_mixins[\"video-stream\"](obj[prop], true, true,\"multi-content multi-content-video block-dk\");\nbuf.push(\"</div></div>\");\n  break;\ncase \"audio\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-audio block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><audio\" + (jade.attr(\"src\", obj[prop], true, false)) + \" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"multi-content multi-content-audio block-dk\\\"></audio></div></div>\");\n  break;\ncase \"iframe\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-iframe block-md block-lt\\\"><div class=\\\"block-sm multi-content-iframe\\\">\");\nvar iframe = obj[prop].match(/<iframe[^<]*<\\/iframe>/)\nif ( iframe)\n{\nbuf.push(null == (jade_interp = iframe[0].replace(/ (width|height)=[\"'\\d\\w]+/g, \"\")) ? \"\" : jade_interp);\n}\nbuf.push(\"</div></div>\");\n  break;\ndefault:\nbuf.push(\"<span class=\\\"multi-content multi-content-text\\\">\" + (null == (jade_interp = obj[prop]) ? \"\" : jade_interp) + \"</span>\");\n  break;\n}\n};\nif ( game && game.timer && game.timer.limit > 0 && !game.timer.isDisabled)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"full-screen connect-canvas-container\\\"><canvas class=\\\"connect-canvas\\\"></canvas></div><div class=\\\"content-fill\\\"><div class=\\\"content-fit connect-boxes content-md-fill content-sm-ver block-v-lg\\\"><div class=\\\"content-md-ver text-center\\\"><h1 class=\\\"fade-in\\\">\");\njade_mixins[\"multi-content\"](\"title\");\nbuf.push(\"</h1>\");\n// iterate leftItems\n;(function(){\n  var $$obj = leftItems;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var left = $$obj[i];\n\nbuf.push(\"<div class=\\\"row\\\"><div\" + (jade.cls(['block-v-sm','col-sm-6','col-lg-5','col-lg-offset-1','slide-right',\"delay-\" + (i + 4) + \"\"], [null,null,null,null,null,true])) + \"><div\" + (jade.attr(\"data-index\", left.index, true, false)) + \" data-type=\\\"left\\\"\" + (jade.attr(\"data-question-id\", left.id, true, false)) + \" class=\\\"connect-box block-md block-dk\\\">\");\njade_mixins[\"multi-content\"](\"content\", left);\nbuf.push(\"</div></div><div\" + (jade.cls(['block-v-sm','col-sm-6','col-lg-5','slide-left',\"delay-\" + (i + 4) + \"\"], [null,null,null,null,true])) + \"><div\" + (jade.attr(\"data-index\", rightItems[left.index].index, true, false)) + \" data-type=\\\"right\\\"\" + (jade.attr(\"data-answer-ids\", rightItems[left.index].ids, true, false)) + \" class=\\\"connect-box block-md block-dk\\\">\");\njade_mixins[\"multi-content\"](\"content\", rightItems[left.index]);\nbuf.push(\"</div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var left = $$obj[i];\n\nbuf.push(\"<div class=\\\"row\\\"><div\" + (jade.cls(['block-v-sm','col-sm-6','col-lg-5','col-lg-offset-1','slide-right',\"delay-\" + (i + 4) + \"\"], [null,null,null,null,null,true])) + \"><div\" + (jade.attr(\"data-index\", left.index, true, false)) + \" data-type=\\\"left\\\"\" + (jade.attr(\"data-question-id\", left.id, true, false)) + \" class=\\\"connect-box block-md block-dk\\\">\");\njade_mixins[\"multi-content\"](\"content\", left);\nbuf.push(\"</div></div><div\" + (jade.cls(['block-v-sm','col-sm-6','col-lg-5','slide-left',\"delay-\" + (i + 4) + \"\"], [null,null,null,null,true])) + \"><div\" + (jade.attr(\"data-index\", rightItems[left.index].index, true, false)) + \" data-type=\\\"right\\\"\" + (jade.attr(\"data-answer-ids\", rightItems[left.index].ids, true, false)) + \" class=\\\"connect-box block-md block-dk\\\">\");\njade_mixins[\"multi-content\"](\"content\", rightItems[left.index]);\nbuf.push(\"</div></div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"leftItems\" in locals_for_with?locals_for_with.leftItems:typeof leftItems!==\"undefined\"?leftItems:undefined,\"playinline\" in locals_for_with?locals_for_with.playinline:typeof playinline!==\"undefined\"?playinline:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"rightItems\" in locals_for_with?locals_for_with.rightItems:typeof rightItems!==\"undefined\"?rightItems:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView    = require \"views/base/game\"\n{ DraggyView } = require(\"views/components/draggy\")\nSmoothLine = require(\"lib/draw/smooth-line\")\nPreloader  = require(\"lib/preload\")\n{ dpi }    = require(\"lib/device\")\n\nclass ConnectView extends GameView\n  template: require(\"./template\")\n  fitTextOnResize: false\n  fitTextOnRender: false\n\n  events: ->\n    \"iostap .btn-done\": \"endGame\"\n\n  serialize: ->\n    data = super()\n\n    data.pairs = \n      _.chain(@options.metadata.questions)\n        .map(({ question, answers }) ->\n\n          # questions use id outside of a question pool and questionId inside a question pool\n          # answers use id outside of a question pool and answerId inside a question pool\n          question.id = question.id or question.questionId\n          answers = _.each answers, (answer) ->\n            answer.id = answer.id or answer.answerId\n\n          left: question, right: _.find(answers, 'correct'))\n        .filter(({ left, right }) -> left and right)\n        .value()\n\n    # Render with array of correct answer IDs for the case where answers\n    # have the same answer text content so the user may use more than one\n    # answer 'box' to correctly answer the question\n    answerIdsByContentDict = _.chain(@options.metadata.questions)\n      .map(({answers}) -> answers)\n      .flatten()\n      .groupBy((i) -> i.content)\n      .mapObject((answers) -> _.pluck(answers, 'id'))\n      .value()\n\n    data.leftItems = _.chain(data.pairs)\n      .pluck('left')\n      .map(({ content, type, id }, index) ->\n        { content, contentType: type, index, id }\n      )\n      .shuffle()\n      .value()\n    data.rightItems = _.chain(data.pairs)\n      .pluck('right')\n      .map(({ content, type }, index) ->\n        {\n          content,\n          contentType: type,\n          index,\n          ids: answerIdsByContentDict[content]\n        }\n      )\n      .shuffle()\n      .value()\n\n    data\n\n  show: ->\n    super\n    @setEl @findAll(\".connect-box\"), \"boxes\"\n\n    @draggy = new DraggyView\n      el: @findOne(\"canvas\")\n      isParent: true\n\n    @context = @draggy.el.getContext?(\"2d\") or {}\n\n    @listenTo @draggy, \"drag\", @onDrag\n    @listenTo @draggy, \"drop\", @onDrop\n    @listenTo this, \"resize\", @onResize\n\n    @onResize()\n\n    @pairs = []\n\n    @context.clearRect?(0, 0, @draggy.el.width, @draggy.el.height)\n    el.classList.remove(\"active\", \"complete\") for el in @getEl(\"boxes\")\n\n    @enterGame()\n\n  onRefresh: ->\n    super\n\n    for el in @getEl(\"boxes\") or []\n      el.style.height = \"\"\n      el.offsetHeight\n\n  onResize: (done) ->\n    @findOne(\".content-fit\")?.style.fontSize = \"\"\n    el.style.height = \"\" for el in @getEl(\"boxes\")\n\n    unless @currentState?.refresh\n      @el.classList.remove(\"active\")\n\n    images = @findAll(\"img\")\n    Preloader.load _.pluck(images, \"src\"), (errors = []) =>\n      fontSize = parseInt window.getComputedStyle(@el).fontSize\n      height = _.reduce @getEl(\"boxes\"), (m, el) ->\n        if el.offsetHeight > m then el.offsetHeight else m\n      , 0\n\n      for el in @getEl(\"boxes\")\n        el.style.height = height / fontSize + \"em\"\n        el.classList.remove(\"active\")\n\n      if el = @draggy?.el\n        el.width  = @el.firstChild.offsetWidth * dpi\n        el.height = @el.firstChild.offsetHeight * dpi\n\n      @fitText =>\n        window.setTimeout (=> @el.classList.add(\"active\")), 300\n\n  onDrag: (draggy, isInitial) ->\n    window.clearTimeout @timeout\n    { left, top } = @getBounds(@el.firstChild)\n\n    if isInitial\n      @line?.animation?.cancel()\n      @context.lineCap = \"round\"\n      @context.globalAlpha = 1\n      @line = new SmoothLine([], window.getComputedStyle(@el).color, 4 * dpi)\n      @activeBox = null\n\n      for el, i in @getEl(\"boxes\")\n        bounds   = @getBounds el, { x: -left, y: -top }\n        isWithin = draggy.isWithin(bounds, 0)\n        el.classList.toggle(\"active\", isWithin)\n\n        if isWithin\n          el.classList.remove(\"complete\")\n          @activeBox = el\n          @removeActivePairs(el)\n\n    else if @activeBox\n      for el in @getEl(\"boxes\")\n        if el isnt @activeBox and\n           el.dataset.type isnt @activeBox.dataset.type\n\n          bounds   = @getBounds el, { x: -left, y: -top }\n          isWithin = draggy.isWithin(bounds, 0)\n          el.classList.toggle(\"active\", isWithin)\n\n    @addPoint(draggy)\n\n  onDrop: ->\n    active = (b for b in @getEl(\"boxes\") when b.classList.contains(\"active\"))\n\n    if active.length is 2\n      for el in active\n        el.classList.add(\"complete\")\n        @removeActivePairs(el)\n\n      @pairs.push\n        active: active\n        line: new SmoothLine(@line.getPoints(), \"rgba(0,0,0,.25)\", 8 * dpi)\n\n    for el in active\n      el.classList.remove(\"active\")\n\n    @line.erase @context, =>\n      @context.clearRect(0, 0, @draggy.el.width, @draggy.el.height)\n      @context.globalAlpha = 1\n      line.draw(@context) for { line } in @pairs\n\n    if @pairs.length is @options.data.pairs.length\n      @setState(\"touched\")\n    else\n      @setState(\"prompt\")\n\n  removeActivePairs: (el) ->\n    for pair in @pairs\n      if _.include pair.active, el\n        @pairs = _.without @pairs, pair\n        for active in pair.active when active isnt el\n          active.classList.remove(\"complete\")\n\n  addPoint: ({x, y}) ->\n    @line.add x: x * dpi, y: y * dpi\n    @drawLines()\n\n  drawLines: ->\n    @draggy.el.offsetHeight\n    @context.clearRect(0, 0, @draggy.el.width, @draggy.el.height)\n\n    line.draw(@context) for { line } in @pairs\n    @line.draw(@context)\n\n  showAnswer: ->\n    for { active: [left, right] } in @pairs\n      isIncorrect = not @isMatch left, right\n      left.classList.toggle(\"incorrect\", isIncorrect)\n      right.classList.toggle(\"incorrect\", isIncorrect)\n\n  isCorrect: ->\n    correct = _.filter @pairs, ({ active: [left, right] }) =>\n      @isMatch left, right\n\n    correct.length is @options.data.pairs.length\n\n  getQuestionAnswerFromInput: (questions) -> (els) ->\n    questionsById = _.indexBy(questions, ({ question }) -> question.id)\n    questionId    = _.find(els,((e) -> e.dataset.questionId)).dataset?.questionId\n    answerIds     = JSON.parse(_.find(els,((e) -> e.dataset.answerIds)).dataset.answerIds)\n    { question, answers }  = questionsById[questionId]\n\n    # Find the correct answer ID from the answer IDs associated with the question\n    # for the case where multiple answers have the same text content\n    answer = _.find answers, ({ id }) -> id in answerIds\n\n    { question, answer }\n\n  isMatch: (left, right) ->\n    { answer } = @getQuestionAnswerFromInput(@options.metadata?.questions)([left, right])\n    answer?.correct\n\n  answerDetails: ->\n    questions = @options.metadata?.questions or []\n    return [] unless questions.length > 0\n\n    getQuestionAnswerFromInput = @getQuestionAnswerFromInput(questions)\n\n    return _.chain(@pairs)\n      .map(({ active }) => # Find question/answer id from the active element pairs on the page\n        getQuestionAnswerFromInput active\n      )\n      # Filter out elements without a question/answer ID\n      .filter(({ question, answer }) -> question and answer)\n      .value()\n\n  endGame: ->\n    super\n\n    @submit()\n\nmodule.exports = ConnectView\n","module.exports = {\"title\":\"construct-sentence\",\"display\":\"Sentence Construction\",\"category\":\"Concepts\",\"features\":{\"stars\":true,\"social\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"Select the missing words in this sentence\"},\"decoys\":{\"min\":0,\"max\":3,\"type\":[{\"type\":\"html\",\"default\":\"\"}]},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (seconds)\"},\"out-of-time-prompt\":{\"type\":\"html\",\"display\":\"Out of time prompt\"}}},\"prompt\":{\"type\":\"html\",\"default\":\"Drag the words into order\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"construct-sentence\",\"title\":\"Fillin the important information about Product X\",\"decoys\":[\"Y\"],\"answer\":{\"text\":\"Reinforce concepts by constructing the sentence in order.\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, doneText, game, hasNarration, hasPrompt, i18n, prompt, submitUp, undefined, words) {\nif ( game && game.timer && game.timer.limit > 0 && !game.timer.isDisabled)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-fill\\\"><div class=\\\"content-fit text-center block-v-md content-ver\\\"><div class=\\\"row fade-in\\\"><div class=\\\"col-lg-10 col-lg-offset-1 col-sm-12\\\"><div class=\\\"block-v-md block-box-sizing\\\"><div class=\\\"block-dk content-fill block-sm\\\"><div class=\\\"droppy-container content-fill\\\"><div class=\\\"droppy-placeholder block-sm\\\"><div class=\\\"block-dk content-fill\\\"></div></div></div></div></div><div class=\\\"block-v-md block-box-sizing\\\"><div class=\\\"draggy-container block-dk content-fill block-sm\\\">\");\n// iterate words \n;(function(){\n  var $$obj = words ;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var component = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-word\", component.word, true, false)) + (jade.attr(\"data-index\", component.index, true, false)) + \" class=\\\"draggy block-sm block-inline\\\"><div\" + (jade.cls(['btn','btn-sm','btn-solid','slide-up',\"delay-\" + (i) + \"\"], [null,null,null,null,true])) + \">\" + (null == (jade_interp = component.word) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var component = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-word\", component.word, true, false)) + (jade.attr(\"data-index\", component.index, true, false)) + \" class=\\\"draggy block-sm block-inline\\\"><div\" + (jade.cls(['btn','btn-sm','btn-solid','slide-up',\"delay-\" + (i) + \"\"], [null,null,null,null,true])) + \">\" + (null == (jade_interp = component.word) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div></div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined,\"words\" in locals_for_with?locals_for_with.words:typeof words!==\"undefined\"?words:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView    = require \"views/base/game\"\n{ DraggyView }    = require(\"views/components/draggy\")\nconvert   = require(\"lib/convert\")\n\nclass ConstructSentenceView extends GameView\n  template: require(\"./template\")\n  fitTextOnRender: false\n  fitTextOnResize: false\n\n  events:\n    \"iostap .btn-done\": \"endGame\"\n\n  initialize: -> \n    super\n\n    @orderedDraggy ?= []\n\n  serialize: ->\n    data = super()\n\n    { title, decoys } = data\n\n    title = convert.toText title\n    @words = title.trim().split(\" \")\n    decoys ?= []\n\n    data.words = ({ word, index } for word, index in @words)\n    data.words = data.words.concat ({ word, index: -1 } for word in decoys)...\n    data.words = _.shuffle(data.words)\n\n    data\n\n  beforeShow: ->\n    @sizeDroppyContainer()\n\n  show: ->\n    super()\n\n    @el.classList.remove(\"active\")\n\n    @fitText =>\n      draggyEl = @findOne \".draggy-container\"\n\n      @draggies =\n        for el, i in @findAll(\".draggy\")\n          draggy = new DraggyView\n            el: el\n\n          @listenTo draggy, \"drag\", @onDrag\n          @listenTo draggy, \"drop\", @onDrop\n          draggy\n\n      @resetDraggies()\n      @listenTo this, \"resize\", @onResize\n      \n      @enterGame()\n      window.setTimeout (=> @el.classList.add(\"active\")), 300\n\n  onRefresh: ->\n    @beforeShow()\n    super()\n\n  onDrag: (draggy, isInitialDrag) ->\n    if isInitialDrag\n      @droppy.bounds = @droppy.el.getBoundingClientRect()\n\n      draggy.el.className = draggy.el.className.replace(/delay-\\d/, \"\")\n      child = draggy.el.firstChild\n      @droppy.placeholder.style.width  = child.offsetWidth + \"px\"\n      @droppy.placeholder.style.height = child.offsetHeight + \"px\"\n\n    if isWithin = draggy.isWithin @droppy.bounds, 60\n      draggy.isPositioned = true\n      @droppy.el.classList.add \"active\"\n      @droppy.placeholder.classList.add(\"active\")\n    else\n      draggy.isPositioned = false\n      @droppy.el.classList.remove \"active\"\n      @droppy.placeholder.classList.remove(\"active\")\n\n    # @rearrangeDraggies(@draggiesInOrder(), draggy)\n\n    @transform draggy.el,\n      x: draggy.x\n      y: draggy.y\n      transition: if isInitialDrag then \"all 300ms\" else \"none\"\n\n  onDrop: (draggy, isReset) ->\n    unless isReset\n      @droppy.placeholder.classList.remove(\"active\")\n      @setState \"touched\"\n\n      if draggy.isPositioned\n        @orderedDraggy = @draggiesInOrder()\n        @rearrangeDraggies(@orderedDraggy)\n      else\n        draggy.reset x: 0, y: 0\n\n    @transform draggy.el,\n      x: draggy.x\n      y: draggy.y\n      transition: \"all 300ms\"\n\n  rearrangeDraggies: (order, activeDraggy) ->\n    width   = @droppy.bounds.width\n    offsetX = 0\n    offsetY = 0\n\n    for draggy, i in order\n      x = -draggy.offset.left + offsetX + @droppy.bounds.left\n      y = -draggy.offset.top  + offsetY + @droppy.bounds.top\n\n      if @options.config().direction is \"rtl\"\n        x = -draggy.offset.right - offsetX + @droppy.bounds.right\n\n      if (draggy.x isnt x or draggy.y isnt y) and draggy isnt activeDraggy\n        draggy.setPosition({ x, y })\n        @transform draggy.el, {\n          x: x\n          y: y\n        }\n\n      if draggy is activeDraggy\n        x = offsetX\n        y = offsetY\n        if @options.config().direction is \"rtl\"\n          x = width - x - @droppy.placeholder.offsetWidth\n        @transform @droppy.placeholder, { x, y }\n\n      offsetX += draggy.offset.width\n      \n      if offsetX >= width - (order[i + 1]?.offset.width or 0)\n        offsetX = 0\n        offsetY += draggy.offset.height\n\n  draggiesInOrder: ->\n    { width, height, top } = @droppy.bounds\n\n    _.chain(@draggies)\n      .where(isPositioned: true)\n      .groupBy (d) ->\n        Math.floor(Math.max(d.y + d.offset.top, top) / d.offset.height)\n\n      .map (group, key) =>\n        group.sort (a, b) =>\n          d = if @options.config().direction is \"rtl\" then -1 else 1\n          (a.offset.left + (a.x + a.offset.width / 2)) * d -\n          (b.offset.left + (b.x + b.offset.width / 2)) * d\n\n      .flatten()\n      .value()\n\n  showAnswer: ->\n    decoys = _.filter @draggies, (d) -> +d?.el.dataset.index < 0\n    clone  = _.clone @words\n\n    # Make it so that the abritrary order of duplicates doesn't result in the\n    # correct answer being rearranged...\n    kindOrder = _.chain(@draggiesInOrder())\n      .union(@draggies)\n      .without(decoys...)\n      .uniq()\n      .map (d, i) ->\n        index = clone.indexOf(d.el.dataset.word)\n        clone[index] = undefined\n        { draggy: d, index }\n      .sortBy(\"index\")\n      .pluck(\"draggy\")\n      .value()\n\n    @rearrangeDraggies kindOrder\n    d.reset(x: 0, y: 0) for d in decoys\n\n  onResize: ->\n    window.setTimeout =>\n      @sizeDroppyContainer()\n      @resetDraggies()\n    , 300\n\n  sizeDroppyContainer: ->\n    draggyEl = @findOne \".draggy-container\"\n    droppyEl = @findOne \".droppy-container\"\n\n    # hidden slide have height 0 so use slide-scroller (parent)\n    droppyEl.style.height = \"#{@el.parentElement.offsetHeight / 2}px\"\n\n    @droppy =\n      el: droppyEl\n      placeholder: @findOne \".droppy-placeholder\"\n\n  resetDraggies: ->\n    if @draggies and @droppy\n      @droppy.bounds = @droppy.el.getBoundingClientRect()\n      d.getOffset() for d in @draggies\n      # use the existing order instead of re-calculating the order draggies again\n      @rearrangeDraggies(@orderedDraggy)\n\n  isCorrect: ->\n    correct   = _.filter @draggies, (d) -> +d?.el.dataset.index >= 0\n    inOrder   = @draggiesInOrder()\n    isCorrect = false # assume it's not correct initially\n\n    # the correct answer length shd match with the selected word length\n    # if it doesn't, we'll just return the previously assigned false value in isCorrect\n    if inOrder.length is correct.length\n      # if it doees, we'll attempt to check the values, which can yield either true or false\n      isCorrect = @words.every (word, i) => word is inOrder[i].el.dataset.word\n\n    isCorrect\n\n  answerDetails: ->\n\n    questions = @options.metadata.questions or []\n    return [] unless questions.length > 0\n\n    wordsInOrder = _.map @draggiesInOrder(), (draggy) -> draggy.$el.text()\n    isCorrect = @isCorrect()\n    answer = _.find questions[0].answers, (a) -> a.correct is isCorrect\n    answer.content = wordsInOrder.join(\" \")\n    details = question: questions[0].question, answer: answer\n\n    [details]\n\n  endGame: ->\n    super()\n\n    @submit()\n\nmodule.exports = ConstructSentenceView\n","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (undefined, word) {\nbuf.push(\"<div class=\\\"block-md block-dk\\\">\");\n// iterate word\n;(function(){\n  var $$obj = word;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var letter = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"data-letter\", letter.toLowerCase(), true, false)) + \" class=\\\"letter btn btn-solid\\\">\" + (null == (jade_interp = letter) ? \"\" : jade_interp) + \"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var letter = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"data-letter\", letter.toLowerCase(), true, false)) + \" class=\\\"letter btn btn-solid\\\">\" + (null == (jade_interp = letter) ? \"\" : jade_interp) + \"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");}.call(this,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined,\"word\" in locals_for_with?locals_for_with.word:typeof word!==\"undefined\"?word:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","module.exports = {\"title\":\"construct\",\"display\":\"Word Construction\",\"category\":\"Concepts\",\"features\":{\"stars\":true,\"social\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"\"},\"words\":{\"min\":1,\"max\":8,\"type\":[{\"type\":\"html\"}]},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (seconds)\"},\"out-of-time-prompt\":{\"type\":\"html\",\"display\":\"Out of time prompt\"}}},\"prompt\":{\"type\":\"html\",\"default\":\"Fill in the missing words\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"construct-two-words\",\"title\":\"Fill in the missing words in this sentence.\",\"subtitle\":\"\",\"prompt\":\"Fill in the missing words\",\"words\":[\"missing\",\"this\"]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (components, continueBtnText, doneText, game, hasNarration, hasPrompt, i18n, prompt, submitUp, titleClass, undefined) {\nif ( game && game.timer && game.timer.limit > 0 && !game.timer.isDisabled)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-fill\\\"><div class=\\\"content-md-fill content-sm-ver text-center content-fit\\\"><div class=\\\"row content-md-ver\\\"><div class=\\\"col-sm-12 col-md-10 col-md-offset-1 col-lg-12 col-lg-offset-0\\\"><h1\" + (jade.cls(['statement','fade-in',titleClass], [null,null,true])) + \">\");\n// iterate components\n;(function(){\n  var $$obj = components;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var component = $$obj[i];\n\nif ( component.hidden)\n{\nbuf.push(\"<span\" + (jade.attr(\"data-word\", component.word.replace(/[\\s\\.\\,]/g, \"\"), true, false)) + \" data-guess=\\\"\\\" class=\\\"word-hidden\\\">\");\n// iterate component.word\n;(function(){\n  var $$obj = component.word;\n  if ('number' == typeof $$obj.length) {\n\n    for (var j = 0, $$l = $$obj.length; j < $$l; j++) {\n      var letter = $$obj[j];\n\nif ( letter.match(/[\\s\\.\\,]/g))\n{\nbuf.push(jade.escape(null == (jade_interp = letter) ? \"\" : jade_interp));\n}\nelse\n{\nbuf.push(\"<span\" + (jade.attr(\"data-letter\", letter.toLowerCase(), true, false)) + \" class=\\\"blank hidden-letter\\\"><span class=\\\"letter-inner\\\">\" + (jade.escape(null == (jade_interp = letter) ? \"\" : jade_interp)) + \"</span></span>\");\n}\n    }\n\n  } else {\n    var $$l = 0;\n    for (var j in $$obj) {\n      $$l++;      var letter = $$obj[j];\n\nif ( letter.match(/[\\s\\.\\,]/g))\n{\nbuf.push(jade.escape(null == (jade_interp = letter) ? \"\" : jade_interp));\n}\nelse\n{\nbuf.push(\"<span\" + (jade.attr(\"data-letter\", letter.toLowerCase(), true, false)) + \" class=\\\"blank hidden-letter\\\"><span class=\\\"letter-inner\\\">\" + (jade.escape(null == (jade_interp = letter) ? \"\" : jade_interp)) + \"</span></span>\");\n}\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</span>\");\n}\nelse\n{\nbuf.push(\"<span\" + (jade.cls(['word',component.klass], [null,true])) + \">\" + (null == (jade_interp = component.word) ? \"\" : jade_interp) + \"</span>\");\n}\nbuf.push(jade.escape(null == (jade_interp = \" \") ? \"\" : jade_interp));\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var component = $$obj[i];\n\nif ( component.hidden)\n{\nbuf.push(\"<span\" + (jade.attr(\"data-word\", component.word.replace(/[\\s\\.\\,]/g, \"\"), true, false)) + \" data-guess=\\\"\\\" class=\\\"word-hidden\\\">\");\n// iterate component.word\n;(function(){\n  var $$obj = component.word;\n  if ('number' == typeof $$obj.length) {\n\n    for (var j = 0, $$l = $$obj.length; j < $$l; j++) {\n      var letter = $$obj[j];\n\nif ( letter.match(/[\\s\\.\\,]/g))\n{\nbuf.push(jade.escape(null == (jade_interp = letter) ? \"\" : jade_interp));\n}\nelse\n{\nbuf.push(\"<span\" + (jade.attr(\"data-letter\", letter.toLowerCase(), true, false)) + \" class=\\\"blank hidden-letter\\\"><span class=\\\"letter-inner\\\">\" + (jade.escape(null == (jade_interp = letter) ? \"\" : jade_interp)) + \"</span></span>\");\n}\n    }\n\n  } else {\n    var $$l = 0;\n    for (var j in $$obj) {\n      $$l++;      var letter = $$obj[j];\n\nif ( letter.match(/[\\s\\.\\,]/g))\n{\nbuf.push(jade.escape(null == (jade_interp = letter) ? \"\" : jade_interp));\n}\nelse\n{\nbuf.push(\"<span\" + (jade.attr(\"data-letter\", letter.toLowerCase(), true, false)) + \" class=\\\"blank hidden-letter\\\"><span class=\\\"letter-inner\\\">\" + (jade.escape(null == (jade_interp = letter) ? \"\" : jade_interp)) + \"</span></span>\");\n}\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</span>\");\n}\nelse\n{\nbuf.push(\"<span\" + (jade.cls(['word',component.klass], [null,true])) + \">\" + (null == (jade_interp = component.word) ? \"\" : jade_interp) + \"</span>\");\n}\nbuf.push(jade.escape(null == (jade_interp = \" \") ? \"\" : jade_interp));\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</h1></div></div></div><div class=\\\"word-letters block-xl\\\"></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"components\" in locals_for_with?locals_for_with.components:typeof components!==\"undefined\"?components:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"titleClass\" in locals_for_with?locals_for_with.titleClass:typeof titleClass!==\"undefined\"?titleClass:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView    = require \"views/base/game\"\nconvert   = require(\"lib/convert\")\ntheAlphabet = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\".split(\"\")\ntheNumerals = \"0123456789\".split(\"\")\n\nclass ConstructView extends GameView\n  template: require(\"./template\")\n\n  templates:\n    letters: require(\"./components/letters\")\n\n  events: ->\n    \"iostap .letter\": \"onTapLetter\"\n    \"iostap .word-hidden\": \"activateWord\"\n    \"iostap .word-letters\": \"selectContainer\"\n    \"iostap .btn-done\": \"endGame\"\n    \"iostap\": \"deactivateWord\"\n\n  show: ->\n    super\n    @setEl @findOne(\".word-letters\"), \"letters\"\n    @setEl @findOne(\".statement\"),    \"statement\"\n    @setEl @findAll(\".word-hidden\"),  \"words\"\n\n    @enterGame()\n\n    @listenTo this, \"resize\", @onResize\n    @listenTo this, \"keypress\", @onKeyPress\n\n  onResize: ->\n    for el in  @findAll(\".hyphen\")\n      el.parentNode.removeChild(el)\n\n    hyphen = ->\n      el = document.createElement(\"span\")\n      el.classList.add \"hyphen\"\n      el.innerHTML = \"-\"\n      el\n\n    width = @getEl(\"statement\").offsetWidth\n    word.classList.remove(\"break\") for word in @getEl(\"words\")\n\n    for word in @getEl(\"words\") when word.offsetWidth > width\n      word.classList.add(\"break\")\n      offsetTop = word.children[0].offsetTop\n      for next in word.children\n        if next.offsetTop > offsetTop\n          next.insertAdjacentElement(\"beforeBegin\", hyphen())\n        offsetTop = next.offsetTop\n\n  serialize: ->\n    data = super\n\n    { title, words } = data\n\n    title = convert.toText title or \"\"\n\n    filteredWords = _.filter(words, (item) -> item != \"\")\n\n    words =\n      for word, i in filteredWords\n        escapedWord = word.replace(/\\W/g, ((w) -> \"\\\\#{w}\"))\n        word = convert.toText word \n        rx   = new RegExp \"([^A-Z]|^)#{escapedWord}([^A-Z]|$)\", \"i\"\n        if title.match(rx)?\n          title = title.replace(rx, \" {{#{i}}} \")\n          word\n  \n    # Class assignment for large text\n    length = title.length\n    data.titleClass = if length > 120 then \"text-lg\" else \"\"\n\n    data.components =\n      for component in title.trim().split(\" \")\n        index = +component.match(/\\{\\{(\\d+)\\}\\}/)?[1]\n        klass: \"delay-#{_.random(3)} scale-#{_.sample([\"down\", \"up\"])}\"\n        word: component.replace(/\\{\\{(\\d+)\\}\\}/, words[index] or \"\")\n        hidden: words[index]?\n\n    data\n\n  selectContainer: (e) ->\n    e.stopImmediatePropagation()\n\n  deactivateWord: (e) ->\n    if activeEl = @getEl(\"active\")\n      for el in [activeEl, activeEl.querySelector(\".active\")]\n        el?.classList.remove \"active\"\n\n      @elements.active = null\n\n      @getEl(\"letters\").classList.remove \"active\"\n\n      window.clearTimeout @timeout\n      @timeout = window.setTimeout =>\n        @transform @getEl(\"statement\"), y: 0\n      , 150\n\n  activateWord: (e, el) ->\n    e?.stopImmediatePropagation()\n    el ?= e.currentTarget\n\n    return if el is @getEl \"active\"\n\n    @deactivateWord()\n\n    @setEl el, \"active\"\n    el.classList.add \"active\"\n\n    @activateNextLetter(el.dataset.guess.length)\n\n    word = el.dataset.word.slice(el.dataset.guess.length)\n\n    if word.match(/^\\d+$/)\n      extra = theNumerals\n    else if word.match(/\\w/)\n      extra = theAlphabet\n    else # for non-alphabetic languages such as Chinese, Korean, etc, just duplicate the characters\n      extra = word\n\n    letters = word.split(\"\")\n    extra = _.sample extra, _.random(1, 3)\n    mixed = _.shuffle letters.concat(extra)\n\n    window.clearTimeout @timeout\n    @timeout = window.setTimeout =>\n      @getEl(\"letters\").innerHTML = @templates.letters word: mixed\n      offset = @getEl(\"letters\").firstChild.offsetHeight / 2\n      @transform @getEl(\"statement\"), y: -offset\n      @getEl(\"letters\").classList.add \"active\"\n    , 300\n\n  onKeyPress: (e) ->\n    for el in @getEl(\"letters\").querySelectorAll(\".letter\")\n      if not el.classList.contains(\"disabled\") and\n         el.dataset.letter.toLowerCase() is e.key.toLowerCase()\n        @selectLetter e.key, el\n        break\n\n  onTapLetter: (e) ->\n    e.stopImmediatePropagation()\n    el = e.currentTarget\n    @selectLetter(el.dataset.letter, el)\n\n  selectLetter: (letter, el) ->\n    index     = @getEl(\"active\").dataset.guess.length\n    blanks    = @getEl(\"active\").querySelectorAll(\".blank\")\n    next      = blanks.item(index)\n    isCorrect = el.dataset.letter is next.dataset.letter\n\n    if isCorrect\n      @getEl(\"active\").dataset.guess += next.dataset.letter\n\n    if el.dataset.letter.toLowerCase() is next.dataset.letter.toLowerCase()\n      next.classList.add \"visible\"\n      el.classList.add \"disabled\"\n      @activateNextLetter(index + 1)\n    else\n      el.classList.add \"incorrect\"\n      window.setTimeout (-> el.classList.remove \"incorrect\"), 300\n\n    if @getEl(\"active\").dataset.guess.length is blanks.length\n      @getEl(\"active\").classList.add(\"disabled\")\n      index = _.indexOf(@getEl(\"words\"), @getEl(\"active\")) + 1\n      @activateNextWord(index)\n\n    @setState(\"touched\")\n\n  activateNextWord: (index) ->\n    words = @getEl(\"words\")\n    el    = words.item(index)\n\n    hasLetters = (el) ->\n      el.querySelectorAll(\".visible\").length < el.dataset.word.length\n\n    if el and hasLetters(el)\n      @activateWord(null, el)\n    else\n      @deactivateWord()\n      el = _.filter(words, hasLetters)[0]\n      @activateWord(null, el) if el?\n\n  activateNextLetter: (index = 0) ->\n    blanks = @getEl(\"active\").querySelectorAll(\".blank\")\n    next   = blanks.item(index)\n\n    el.classList.toggle(\"active\", index is i) for el, i in blanks\n\n  isCorrect: ->\n    total   = @findAll(\".blank\").length\n    visible = @findAll(\".blank.visible\").length\n    total is visible\n\n  answerDetails: ->\n\n    questions = @options.metadata.questions or []\n    return [] unless questions.length > 0\n    details = []\n\n    words = @$(\".word-hidden\")\n    isCorrect = @isCorrect()\n\n    for q in questions\n      answer = _.find q.answers, (a) -> a.correct is isCorrect\n      answer.content = @$(words[questions.indexOf(q)]).data(\"guess\")\n      questionDetails = question: q.question, answer: answer\n      details.push questionDetails\n\n    details\n\n  endGame: ->\n    super\n\n    @submit()\n\n\nmodule.exports = ConstructView\n","module.exports = {\"title\":\"dial-distribution\",\"display\":\"Dial - Distribution\",\"category\":\"Numbers\",\"features\":{\"stars\":true,\"social\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"Ask a question\"},\"dial\":{\"correct\":{\"type\":\"number\"},\"incorrect\":{\"min\":1,\"max\":8,\"type\":[{\"type\":\"number\"}]},\"prefix\":{\"type\":\"html\",\"default\":\"\"},\"suffix\":{\"type\":\"html\",\"default\":\"\"}},\"distribution\":{\"enum\":[\"Equal\",\"Linear\",\"Logarithmic\"],\"default\":\"Linear\",\"type\":\"text\",\"help\":\"Use distribution to determine how the numbers are positioned on the dial. Equal spreads the options out evenly regardless of their number value, whereas Linear and Logarithmic compute the distribution based on those scales. Linear works best for equidistant numbers, where Logarithmic is best for numbers which differ by an order of magnitude.\\n\"},\"overlap\":{\"type\":\"boolean\",\"default\":true,\"display\":\"Overlap Extremes\",\"help\":\"Display the minimum and maximum values at the same position on thedial.\\n\"},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (seconds)\"},\"out-of-time-prompt\":{\"type\":\"html\",\"display\":\"Out of time prompt\"}}},\"prompt\":{\"type\":\"html\",\"default\":\"Drag to set the correct value\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"dial-distribution\",\"title\":\"How much growth has Product X seen in the last sales cycle?\",\"dial\":{\"correct\":37,\"incorrect\":[0,19,7,53,100],\"prefix\":\"\",\"suffix\":\"%\"},\"answer\":{\"text\":\"Product X saw a massive **37% increase in growth** during the last sales cycle\\n\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, dial, doneText, game, hasNarration, hasPrompt, i18n, overlap, prompt, submitUp, title, undefined, values) {\nif ( game && game.timer && game.timer.limit > 0 && !game.timer.isDisabled)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-fit block-v-xl content-fill\\\"><div class=\\\"row content-lg-fill content-sm-ver content-md-ver\\\"><div class=\\\"col-lg-6 col-sm-12 content-lg-ver block-v-lg block-v-lg\\\"><h1 class=\\\"text-lg-right text-center fade-in\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1></div><div class=\\\"col-lg-6 col-sm-12 content-lg-ver text-center block-v-lg\\\"><div\" + (jade.cls(['dial','scale-up',overlap ? \"dial-overlap\" : \"dial-discreet\"], [null,null,true])) + \"><div class=\\\"dial-ring\\\"></div><div class=\\\"dial-knob dial-knob-input\\\"><div class=\\\"dial-knob-value dial-knob-input-value text-lg\\\">\" + (null == (jade_interp = i18n(\"dial.touch-to-rotate\")) ? \"\" : jade_interp) + \"</div></div><div class=\\\"dial-knob dial-knob-answer\\\"><div class=\\\"dial-knob-value dial-knob-answer-value text-lg\\\">\" + (null == (jade_interp = dial.prefix) ? \"\" : jade_interp) + (null == (jade_interp = dial.correct) ? \"\" : jade_interp) + (null == (jade_interp = dial.suffix) ? \"\" : jade_interp) + \"</div></div><div class=\\\"dial-notches\\\">\");\n// iterate values\n;(function(){\n  var $$obj = values;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var label = $$obj[$index];\n\nbuf.push(\"<div class=\\\"dial-notch\\\"></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var label = $$obj[$index];\n\nbuf.push(\"<div class=\\\"dial-notch\\\"></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div><div class=\\\"dial-labels\\\">\");\n// iterate values\n;(function(){\n  var $$obj = values;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var label = $$obj[$index];\n\nbuf.push(\"<div class=\\\"dial-label\\\"><div class=\\\"dial-label-text\\\">\" + (null == (jade_interp = dial.prefix) ? \"\" : jade_interp) + (null == (jade_interp = dial.decimals ? label.content.toFixed(dial.decimals) : label.content) ? \"\" : jade_interp) + (null == (jade_interp = dial.suffix) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var label = $$obj[$index];\n\nbuf.push(\"<div class=\\\"dial-label\\\"><div class=\\\"dial-label-text\\\">\" + (null == (jade_interp = dial.prefix) ? \"\" : jade_interp) + (null == (jade_interp = dial.decimals ? label.content.toFixed(dial.decimals) : label.content) ? \"\" : jade_interp) + (null == (jade_interp = dial.suffix) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"dial\" in locals_for_with?locals_for_with.dial:typeof dial!==\"undefined\"?dial:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"overlap\" in locals_for_with?locals_for_with.overlap:typeof overlap!==\"undefined\"?overlap:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined,\"values\" in locals_for_with?locals_for_with.values:typeof values!==\"undefined\"?values:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView = require \"views/base/game\"\nPrefix = require(\"lib/prefix\")\n{ DraggyView }  = require(\"views/components/draggy\")\n\nclass DialDistributionView extends GameView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-done\": \"endGame\"\n\n  serialize: ->\n    d = super\n\n    d.values = _.chain(d.metadata.questions[0].answers)\n      .filter((a) -> _.isNumber(a.content))\n      .map (a) ->\n        a.content = parseFloat(a.content) or 0\n        a\n      .sort((a, b) -> a.content - b.content)\n      .value()\n\n    d\n\n  beforeShow: ->\n    @distribution = @getDistribution()\n\n    @setEl @findOne(\".dial\"), \"dial\"\n    @setEl @findOne(\".dial-knob-input\"), \"knob-input\"\n    @setEl @findOne(\".dial-knob-input-value\"), \"knob-input-value\"\n    @setEl @findOne(\".dial-knob-answer\"), \"knob-answer\"\n    @setEl @findOne(\".dial-knob-answer-value\"), \"knob-answer-value\"\n    @setEl @findOne(\".dial-knob-value\"), \"knob-value\"\n    @setEl @findAll(\".dial-notch\"), \"notches\"\n    @setEl @findAll(\".dial-label\"), \"labels\"\n\n    @rotateElements(@getEl(\"notches\"))\n    @rotateElements(@getEl(\"labels\"))\n\n  onRefresh: ->\n    @beforeShow()\n    super\n\n  show: ->\n    super\n\n    el = @findOne(\".content-fit\")\n\n    @draggy = new DraggyView\n      el: @getEl(\"dial\")\n      radius: @getEl(\"dial\").offsetWidth / 2\n      isParent: true\n\n    @listenTo @draggy, \"drag\", @onDrag\n    @listenTo @draggy, \"drop\", @onDrop\n\n    @enterGame()\n\n  rotateElements: (elements) ->\n    dir = if @options.config().direction is \"rtl\" then -1 else 1\n\n    for el, i in elements\n      @transform el,\n        rotate: @distribution[i] * 360 * dir\n\n  getDistribution: ->\n    { values, distribution, overlap } = @serialize()\n\n    min    = values[0].content\n    max    = values[values.length - 1].content\n    dist   = Math.abs(max - min)\n    base   = Math.log(dist) * Math.log(dist)\n    factor = if overlap then 1 else 1 - 1 / values.length\n\n    for v, i in values\n      switch distribution\n        when \"Equal\"\n          factor * i / (values.length - 1)\n        when \"Linear\"\n          factor * (v.content - min) / (dist)\n        when \"Logarithmic\"\n          d = Math.abs(v.content - min)\n          if d is 0 then 0 else factor * (Math.log(d) * Math.log(dist)) / base\n\n  onDrag: (draggy, isInitialDrag) ->\n    @currentAnswer = @getSelectedAnswer(draggy)\n    @currentValue = @currentAnswer.content\n    @labelEl @getEl(\"knob-value\"), @currentValue\n\n    @transform @getEl(\"knob-input\"),\n      rotate: \"#{draggy.t}rad\"\n      transition: if isInitialDrag then \"all 300ms\" else \"none\"\n\n    @transform @getEl(\"knob-input-value\"),\n      x: \"-50%\"\n      rotate: \"#{-draggy.t}rad\"\n      transition: if isInitialDrag then \"all 300ms\" else \"none\"\n\n  onDrop: (draggy, isReset) ->\n    if not isReset\n      draggy.reset({t: @roundPos(draggy)})\n    else\n      @currentAnswer = @getSelectedAnswer(draggy)\n      @currentValue = @currentAnswer.content\n      @labelEl @getEl(\"knob-value\"), @currentValue\n\n      @transform @getEl(\"knob-input\"),\n        rotate: \"#{draggy.t}rad\"\n        transition: \"all 300ms\"\n\n      @transform @getEl(\"knob-input-value\"),\n        x: \"-50%\"\n        rotate: \"#{-draggy.t}rad\"\n        transition: \"all 300ms\"\n\n      if @currentValue?\n        @setState(\"touched\")\n\n  getSelectedAnswer: (draggy) ->\n    { values } = @serialize()\n    percent = @roundPercent(draggy)\n    index   = @distribution.indexOf(percent)\n    index   = 0 if index is -1\n\n    if @options.config().direction is \"rtl\"\n      values[values.length - 1 - index]\n    else\n      values[index]\n\n  roundPos: (draggy) ->\n    (Math.PI * 2) * @roundPercent(draggy)\n\n  roundPercent: (draggy) ->\n    { values } = @serialize()\n\n    length  = values.length\n    percent = _.limit(draggy.t / (Math.PI * 2), 0, 1)\n\n    _.nearest([1].concat(@distribution), percent)\n\n  labelEl: (el, value) ->\n    {prefix, suffix} = @options.data.dial\n\n    value = @currentValue\n    el.innerHTML = \"#{prefix}#{value}#{suffix}\"\n\n  showAnswer: ->\n    @animateAnswerKnob()\n    @draggy.lock()\n\n  isCorrect: ->\n    @currentValue? and\n    @currentValue is @options.data.dial.correct\n\n  animateAnswerKnob: ->\n    { dial, values }  = @serialize()\n\n    correctIndex = _.findIndex(values, (v) -> v.correct)\n    percent = @distribution[correctIndex]\n\n    @transform @getEl(\"knob-answer\"),\n      rotate: \"#{@draggy.t}rad\"\n      transition: \"none\"\n\n    @transform @getEl(\"knob-answer-value\"),\n      x: \"-50%\"\n      rotate: \"-#{@draggy.t}rad\"\n      transition: \"none\"\n\n    @getEl(\"knob-answer\").offsetWidth\n\n    @transform @getEl(\"knob-answer\"),\n      rotate: \"#{percent * Math.PI * 2}rad\"\n      transition: if @draggy.locked then \"none\" else \"all 600ms\"\n\n    @transform @getEl(\"knob-answer-value\"),\n      x: \"-50%\"\n      rotate: \"-#{percent * Math.PI * 2}rad\"\n      transition: if @draggy.locked then \"none\" else \"all 600ms\"\n\n  answerDetails: ->\n    question = @options.metadata?.questions?[0]\n\n    return if question and @currentAnswer\n      [{ question:question.question, answer: @currentAnswer }]\n    else\n      []\n\n  endGame: ->\n    super\n\n    @submit()\n\n\nmodule.exports = DialDistributionView\n","module.exports = {\"title\":\"dial\",\"display\":\"Dial\",\"category\":\"Numbers\",\"features\":{\"stars\":true,\"social\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"Ask a question\"},\"dial\":{\"min\":{\"type\":\"number\",\"default\":0,\"display\":\"Min. Value\"},\"max\":{\"type\":\"number\",\"default\":10,\"display\":\"Max. Value\"},\"prefix\":{\"type\":\"html\",\"default\":\"\"},\"suffix\":{\"type\":\"html\",\"default\":\"\"},\"increment\":{\"type\":\"number\",\"default\":1,\"min\":1},\"labels\":{\"type\":\"int\",\"min\":0,\"max\":10,\"default\":4},\"decimals\":{\"type\":\"int\",\"min\":0,\"max\":8,\"default\":0}},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"value\":{\"type\":\"number\",\"default\":5,\"display\":\"Correct Value\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (seconds)\"},\"out-of-time-prompt\":{\"type\":\"html\",\"display\":\"Out of time prompt\"}}},\"prompt\":{\"type\":\"html\",\"default\":\"Drag to set the correct value\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"dial\",\"title\":\"How many states have over 10% market share?\",\"dial\":{\"min\":0,\"max\":20,\"labels\":4,\"prefix\":\"\",\"suffix\":\"\"},\"answer\":{\"value\":10,\"takeaway\":\"There are 10 states with over 10% market share\",\"text\":\"We're a true market leader with 10 states.\\n\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (Array, answer, continueBtnText, dial, doneText, game, hasNarration, hasPrompt, i18n, labelValues, notches, prompt, submitUp, title, undefined) {\nif ( game && game.timer && game.timer.limit > 0 && !game.timer.isDisabled)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-fit block-v-xl content-fill\\\"><div class=\\\"row content-lg-fill content-sm-ver content-md-ver\\\"><div class=\\\"col-lg-6 col-sm-12 content-lg-ver block-v-lg block-v-lg\\\"><h1 class=\\\"text-lg-right text-center fade-in\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1></div><div class=\\\"col-lg-6 col-sm-12 content-lg-ver text-center block-v-lg\\\"><div class=\\\"dial scale-up\\\"><div class=\\\"dial-ring\\\"></div><div class=\\\"dial-knob dial-knob-input\\\"><div class=\\\"dial-knob-value dial-knob-input-value text-lg\\\">\" + (null == (jade_interp = i18n(\"dial.touch-to-rotate\")) ? \"\" : jade_interp) + \"</div></div><div class=\\\"dial-knob dial-knob-answer\\\"><div class=\\\"dial-knob-value dial-knob-answer-value text-lg\\\">\" + (null == (jade_interp = dial.prefix) ? \"\" : jade_interp) + (null == (jade_interp = answer.value) ? \"\" : jade_interp) + (null == (jade_interp = dial.suffix) ? \"\" : jade_interp) + \"</div></div><div class=\\\"dial-notches\\\">\");\n// iterate new Array(notches)\n;(function(){\n  var $$obj = new Array(notches);\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var notch = $$obj[i];\n\nbuf.push(\"<div class=\\\"dial-notch\\\"></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var notch = $$obj[i];\n\nbuf.push(\"<div class=\\\"dial-notch\\\"></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\nif ( dial.labels)\n{\nbuf.push(\"<div class=\\\"dial-labels\\\">\");\n// iterate labelValues\n;(function(){\n  var $$obj = labelValues;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var label = $$obj[$index];\n\nbuf.push(\"<div class=\\\"dial-label\\\"><div class=\\\"dial-label-text\\\">\" + (null == (jade_interp = dial.prefix) ? \"\" : jade_interp) + (null == (jade_interp = dial.decimals ? label.toFixed(dial.decimals) : label) ? \"\" : jade_interp) + (null == (jade_interp = dial.suffix) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var label = $$obj[$index];\n\nbuf.push(\"<div class=\\\"dial-label\\\"><div class=\\\"dial-label-text\\\">\" + (null == (jade_interp = dial.prefix) ? \"\" : jade_interp) + (null == (jade_interp = dial.decimals ? label.toFixed(dial.decimals) : label) ? \"\" : jade_interp) + (null == (jade_interp = dial.suffix) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\n}\nbuf.push(\"</div></div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"Array\" in locals_for_with?locals_for_with.Array:typeof Array!==\"undefined\"?Array:undefined,\"answer\" in locals_for_with?locals_for_with.answer:typeof answer!==\"undefined\"?answer:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"dial\" in locals_for_with?locals_for_with.dial:typeof dial!==\"undefined\"?dial:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"labelValues\" in locals_for_with?locals_for_with.labelValues:typeof labelValues!==\"undefined\"?labelValues:undefined,\"notches\" in locals_for_with?locals_for_with.notches:typeof notches!==\"undefined\"?notches:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView = require \"views/base/game\"\nPrefix = require(\"lib/prefix\")\n{ DraggyView }  = require(\"views/components/draggy\")\n\nclass DialView extends GameView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-done\": \"endGame\"\n\n  serialize: ->\n    d = super\n\n    increment = parseFloat(d.dial.increment, 10) or 1\n    min = parseFloat(d.dial.min, 10)\n    max = parseFloat(d.dial.max, 10)\n    min = 0 if _.isNaN(min)\n    max = 10 if _.isNaN(max)    \n\n    if min > max\n      min = max\n\n    d.notches = Math.round((max - min) / increment)\n\n    d.labels  = _.nearest _.factors(d.notches).map((m) -> m), d.dial.labels\n\n    d.labelValues = [0...d.labels].map (i) ->\n      value = new Big(Math.round(i * d.notches / d.labels))\n      value = value.mul(increment).add(min)\n      value\n\n    d\n\n  beforeShow: ->\n    @setEl @findOne(\".dial\"), \"dial\"\n    @setEl @findOne(\".dial-knob-input\"), \"knob-input\"\n    @setEl @findOne(\".dial-knob-input-value\"), \"knob-input-value\"\n    @setEl @findOne(\".dial-knob-answer\"), \"knob-answer\"\n    @setEl @findOne(\".dial-knob-answer-value\"), \"knob-answer-value\"\n    @setEl @findOne(\".dial-knob-value\"), \"knob-value\"\n    @setEl @findAll(\".dial-notch\"), \"notches\"\n    @setEl @findAll(\".dial-label\"), \"labels\"\n\n    @rotateElements(@getEl(\"notches\"))\n    @rotateElements(@getEl(\"labels\"))\n\n  onRefresh: ->\n    @beforeShow()\n    super\n\n  show: ->\n    super\n    el = @findOne(\".content-fit\")\n\n    @draggy = new DraggyView\n      el: @getEl(\"dial\")\n      radius: @getEl(\"dial\").offsetWidth / 2\n      isParent: true\n\n    @listenTo @draggy, \"drag\", @onDrag\n    @listenTo @draggy, \"drop\", @onDrop\n\n    @enterGame()\n\n  rotateElements: (elements) ->\n    dir = if @options.config().direction is \"rtl\" then -1 else 1\n    for el, i in elements\n      @transform el,\n        rotate: i / elements.length * 360 * dir\n\n  onDrag: (draggy, isInitialDrag) ->\n    @currentValue = @roundValue(draggy)\n    @labelEl @getEl(\"knob-value\"), @currentValue\n\n    @transform @getEl(\"knob-input\"),\n      rotate: \"#{draggy.t}rad\"\n      transition: if isInitialDrag then \"all 300ms\" else \"none\"\n\n    @transform @getEl(\"knob-input-value\"),\n      x: \"-50%\"\n      rotate: \"#{-draggy.t}rad\"\n      transition: if isInitialDrag then \"all 300ms\" else \"none\"\n\n  onDrop: (draggy, isReset) ->\n    if not isReset\n      draggy.reset({t: @roundPos(draggy)})\n    else\n      @currentValue = @roundValue(draggy)\n      @labelEl @getEl(\"knob-value\"), @currentValue\n\n      @transform @getEl(\"knob-input\"),\n        rotate: \"#{draggy.t}rad\"\n        transition: \"all 300ms\"\n\n      @transform @getEl(\"knob-input-value\"),\n        x: \"-50%\"\n        rotate: \"#{-draggy.t}rad\"\n        transition: \"all 300ms\"\n\n      if @currentValue?\n        @setState(\"touched\")\n\n  roundValue: (draggy) ->\n    {increment, min, max} = @options.data.dial\n    value = Big(max - min)\n      .mul(@roundPercent(draggy))\n      .div(increment)\n      .round()\n      .mul(increment)\n      .plus(min)\n\n    if @options.config().direction is \"rtl\" then Big(max - value) else value\n\n  roundPos: (draggy) ->\n    (Math.PI * 2) * @roundPercent(draggy)\n\n  roundPercent: (draggy) ->\n    {increment, min, max} = @options.data.dial\n\n    max     = Big(max).sub(min).div(increment).round().mul(increment).plus(min)\n    percent = _.limit(draggy.t / (Math.PI * 2), 0, 1)\n    steps   = Big(max).sub(min).div(increment).valueOf()\n\n    Big(steps)\n      .mul(percent)\n      .round()\n      .div(steps)\n\n\n  labelEl: (el, value) ->\n    {prefix, suffix, decimals} = @options.data.dial\n\n    decimals = parseFloat(decimals, 10) or 0\n    value = parseFloat(value, 10).toFixed(decimals) if decimals > 0\n    el.innerHTML = \"#{prefix}#{value}#{suffix}\"\n\n  showAnswer: ->\n    @animateAnswerKnob()\n    @draggy.lock()\n\n  isCorrect: ->\n    @currentValue? and\n    @currentValue.eq @options.data.answer.value\n\n  animateAnswerKnob: ->\n    {answer, dial} = @options.data\n    {increment, min, max} = dial\n    max     = Big(max).sub(min).div(increment).round().mul(increment).plus(min)\n    percent = (answer.value - min) / (max - min)\n    percent = 1 - percent if @options.config().direction is \"rtl\"\n\n    @transform @getEl(\"knob-answer\"),\n      rotate: \"#{@draggy.t}rad\"\n      transition: \"none\"\n\n    @transform @getEl(\"knob-answer-value\"),\n      x: \"-50%\"\n      rotate: \"-#{@draggy.t}rad\"\n      transition: \"none\"\n\n    @getEl(\"knob-answer\").offsetWidth\n\n    @transform @getEl(\"knob-answer\"),\n      rotate: \"#{percent * Math.PI * 2}rad\"\n      transition: if @draggy.locked then \"none\" else \"all 600ms\"\n\n    @transform @getEl(\"knob-answer-value\"),\n      x: \"-50%\"\n      rotate: \"-#{percent * Math.PI * 2}rad\"\n      transition: if @draggy.locked then \"none\" else \"all 600ms\"\n\n  endGame: ->\n    super\n\n    @submit()\n\n  answerDetails: ->\n    questions = @options.metadata?.questions or []\n    return [] unless questions.length > 0\n    question = questions[0]\n\n    correct = @isCorrect()\n    value = parseInt(@currentValue)\n\n    answer = _.find question.answers, (a) -> a.correct is correct\n    details = question: question.question, answer: answer\n\n    details.answer.content = value\n\n    [ details ]\n\n\nmodule.exports = DialView\n","module.exports = {\"title\":\"drag-to-match\",\"display\":\"Drag to Match\",\"category\":\"Relationships\",\"features\":{\"stars\":true,\"social\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"\"},\"reject\":{\"type\":\"boolean\",\"default\":false,\"display\":\"Reject Answers\",\"help\":\"Images will go back to where they came from when placed incorrectly\\n\"},\"list\":{\"min\":2,\"max\":4,\"type\":[{\"image\":{\"display\":\"Left\",\"types\":[\"text\",\"image\"]},\"name\":{\"display\":\"Right\",\"types\":[\"text\",\"image\"],\"default\":\"Image 1\"}}]},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (seconds)\"},\"out-of-time-prompt\":{\"type\":\"html\",\"display\":\"Out of time prompt\"}}},\"prompt\":{\"type\":\"html\",\"default\":\"Drag the images to their labels\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"classify-three\",\"title\":\"Match the product with its name\",\"answer\":{\"takeaway\":\"Product X, Y and Z are best-sellers\\n\",\"text\":\"The first is Product X, then Product Y and thirdly Product Z.\\n\"},\"list\":[{\"image\":\"img/examples/product-phone.png\",\"imageType\":\"image\",\"name\":\"Product X\"},{\"image\":\"img/examples/product-laptop.png\",\"imageType\":\"image\",\"name\":\"Product Y\"},{\"image\":\"img/examples/product-tablet.png\",\"imageType\":\"image\",\"name\":\"Product Z\"}]},{\"subtype\":\"classify-three-into-two\",\"title\":\"Match the product with its features\",\"reject\":true,\"answer\":{\"takeaway\":\"Product X, Y and Z have a range of features\\n\",\"text\":\"Product X and Z have touch screens, Product Y has a multi-touch trackpad\\n\"},\"list\":[{\"image\":\"img/examples/product-phone.png\",\"imageType\":\"image\",\"name\":\"Touch Screen\"},{\"image\":\"img/examples/product-laptop.png\",\"imageType\":\"image\",\"name\":\"Multi-Touch Trackpad\"},{\"image\":\"img/examples/product-tablet.png\",\"imageType\":\"image\",\"name\":\"Touch Screen\"}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (config, continueBtnText, doneText, game, hasNarration, hasPrompt, i18n, isLong, list, names, playinline, prompt, submitUp, title, undefined) {\njade_mixins[\"video-stream\"] = jade_interp = function(videoUrl, playsinline, controls, klass, poster){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nplayinline = playinline || true\ncontrols = controls || true\nklass = klass || 'video vjs-fluid'\nvar cloudinaryVideoFolderUrl = config.CLOUDINARY_CDN_URL+config.CLOUDINARY_VIDEO_FOLDER\nvar streamUrl = ''\nif ( videoUrl && videoUrl.indexOf(cloudinaryVideoFolderUrl) > -1)\n{\nstreamUrl = videoUrl.replace(cloudinaryVideoFolderUrl, cloudinaryVideoFolderUrl+'sp_full_hd/')\nstreamUrl = streamUrl.replace('.mp4', '.m3u8')\n}\nbuf.push(\"<video\" + (jade.attr(\"webkit-playsinline\", playsinline, true, false)) + (jade.attr(\"controls\", controls, true, false)) + \" preload=\\\"auto\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + (jade.attr(\"poster\", poster, true, false)) + (jade.cls(['video-js',klass], [null,true])) + \"><source\" + (jade.attr(\"src\", videoUrl, true, false)) + \"/>\");\nif ( streamUrl)\n{\nbuf.push(\"<source\" + (jade.attr(\"src\", streamUrl, true, false)) + \"/>\");\n}\nbuf.push(\"</video>\");\n};\njade_mixins[\"image\"] = jade_interp = function(imageUrl, klass){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nbuf.push(\"<img\" + (jade.attr(\"src\", imageUrl, true, false)) + (jade.cls([klass], [true])) + \"/>\");\n};\njade_mixins[\"multi-content\"] = jade_interp = function(prop, obj){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nobj = obj || locals;\nswitch (obj[prop + \"Type\"]){\ncase \"image\":\nbuf.push(\"<div\" + (jade.attr(\"data-content\", obj.image, true, false)) + \" class=\\\"multi-content-wrapper multi-content-wrapper-image block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\">\");\njade_mixins[\"image\"](obj[prop], 'multi-content multi-content-image');\nbuf.push(\"</div></div>\");\n  break;\ncase \"video\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-video block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\">\");\njade_mixins[\"video-stream\"](obj[prop], true, true,\"multi-content multi-content-video block-dk\");\nbuf.push(\"</div></div>\");\n  break;\ncase \"audio\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-audio block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><audio\" + (jade.attr(\"src\", obj[prop], true, false)) + \" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"multi-content multi-content-audio block-dk\\\"></audio></div></div>\");\n  break;\ncase \"iframe\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-iframe block-md block-lt\\\"><div class=\\\"block-sm multi-content-iframe\\\">\");\nvar iframe = obj[prop].match(/<iframe[^<]*<\\/iframe>/)\nif ( iframe)\n{\nbuf.push(null == (jade_interp = iframe[0].replace(/ (width|height)=[\"'\\d\\w]+/g, \"\")) ? \"\" : jade_interp);\n}\nbuf.push(\"</div></div>\");\n  break;\ndefault:\nbuf.push(\"<span class=\\\"multi-content multi-content-text\\\">\" + (null == (jade_interp = obj[prop]) ? \"\" : jade_interp) + \"</span>\");\n  break;\n}\n};\nif ( game && game.timer && game.timer.limit > 0 && !game.timer.isDisabled)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-fill\\\"><div class=\\\"block-v-lg content-fill text-center\\\"><div\" + (jade.cls(['drag-to-match-outer','content-fill',isLong ? \"long-text\" : \"short-text\"], [null,null,true])) + \"><div class=\\\"title-wrapper\\\"><h1 class=\\\"drag-to-match-title block-v-sm tight\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1></div><div class=\\\"drag-to-match-inner row block-v-md block-box-sizing\\\"><div class=\\\"col-sm-6 draggy-container slide-up content-fill\\\"><div\" + (jade.cls(['draggies','clearfix','content-fill',list.length > 1 ? \"text-right\" : \"\"], [null,null,null,true])) + \">\");\n// iterate list\n;(function(){\n  var $$obj = list;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var item = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"height: \" + (100/list.length) + \"%\", true, false)) + \" class=\\\"drag-to-match-item block-v-sm block-box-sizing block-inline\\\"><div class=\\\"content-fill block-dk block-sm\\\"><div\" + (jade.attr(\"data-id\", item.id, true, false)) + (jade.attr(\"data-name\", item.name, true, false)) + \" class=\\\"draggy\\\">\");\njade_mixins[\"multi-content\"](\"image\", item);\nbuf.push(\"</div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var item = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"height: \" + (100/list.length) + \"%\", true, false)) + \" class=\\\"drag-to-match-item block-v-sm block-box-sizing block-inline\\\"><div class=\\\"content-fill block-dk block-sm\\\"><div\" + (jade.attr(\"data-id\", item.id, true, false)) + (jade.attr(\"data-name\", item.name, true, false)) + \" class=\\\"draggy\\\">\");\njade_mixins[\"multi-content\"](\"image\", item);\nbuf.push(\"</div></div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div><div class=\\\"col-sm-6 droppy-container slide-up content-fill\\\"><div\" + (jade.cls(['droppies','clearfix','content-fill',names.length > 1 ? \"text-left\" : \"\"], [null,null,null,true])) + \">\");\n// iterate names\n;(function(){\n  var $$obj = names;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var item = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"height: \" + (100/names.length) + \"%\", true, false)) + \" class=\\\"drag-to-match-item block-v-sm block-box-sizing block-inline\\\"><div\" + (jade.attr(\"data-name\", item.name, true, false)) + \" class=\\\"content-fill droppy block-sm block-dk\\\"><div class=\\\"droppy-zone\\\"></div>\");\njade_mixins[\"multi-content\"](\"name\", item);\nbuf.push(\"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var item = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"height: \" + (100/names.length) + \"%\", true, false)) + \" class=\\\"drag-to-match-item block-v-sm block-box-sizing block-inline\\\"><div\" + (jade.attr(\"data-name\", item.name, true, false)) + \" class=\\\"content-fill droppy block-sm block-dk\\\"><div class=\\\"droppy-zone\\\"></div>\");\njade_mixins[\"multi-content\"](\"name\", item);\nbuf.push(\"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div></div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"isLong\" in locals_for_with?locals_for_with.isLong:typeof isLong!==\"undefined\"?isLong:undefined,\"list\" in locals_for_with?locals_for_with.list:typeof list!==\"undefined\"?list:undefined,\"names\" in locals_for_with?locals_for_with.names:typeof names!==\"undefined\"?names:undefined,\"playinline\" in locals_for_with?locals_for_with.playinline:typeof playinline!==\"undefined\"?playinline:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView    = require \"views/base/game\"\nSlideView = require(\"views/slide\")\nPrefix = require(\"lib/prefix\")\n{ DraggyView }  = require(\"views/components/draggy\")\n\nclass DragToMatchView extends GameView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-done\": \"endGame\"\n\n  serialize: ->\n    data = super\n\n    data.list =\n      for item, i in data.list when item.image and item.name\n        _.extend { id: i }, item\n\n    data.list   = _.shuffle(data.list)\n\n    data.names  =\n      _.chain(data.list)\n        .shuffle()\n        .filter(({name}, i, arr) -> _.pluck(arr, \"name\").indexOf(name) is i)\n        .value()\n\n    isLong = false\n    for item in data.list\n      if item.nameType is \"text\" or item.nameType is \"\" or not item.nameType\n        isLong = isLong or (item.name or \"\").length > 32\n      if item.imageType is \"text\" or item.imageType is \"\"\n        isLong = isLong or (item.image or \"\").length > 32\n      continue if isLong\n\n    data.isLong = isLong\n\n    data\n\n  onRefresh: ->\n    @beforeShow()\n    super\n\n  beforeShow: ->\n    @setHeight()\n\n  show: ->\n    super\n    @listenTo this, \"resize\", @onResize\n    @droppies = @getElements(\".droppy\")\n\n    @draggies =\n      for el in @findAll(\".draggy\")\n        draggy = new DraggyView({el})\n        draggy.id = el.dataset.id\n        @listenTo draggy, \"drag\", @onDrag\n        @listenTo draggy, \"drop\", @onDrop\n        draggy\n\n    @enterGame()\n\n  setHeight: ->\n    outer = @findOne \".drag-to-match-outer\"\n    title = @findOne \".title-wrapper\"\n    inner = @findOne \".drag-to-match-inner\"\n\n    inner.style.height = outer.offsetHeight - title.offsetHeight + \"px\"\n\n  onDrag: (draggy, isInitialDrag) ->\n    @droppies   = @getElements(\".droppy\", @droppies) if isInitialDrag\n    activeIndex = draggy.closest(_.pluck(@droppies, \"bounds\"))\n\n    for droppy, i in @droppies\n      droppy.el.classList.toggle(\"active\", i is activeIndex)\n      droppy.isActive = i is activeIndex\n\n    if isInitialDrag\n      draggy.el.classList.remove(\"fade\")\n      droppy   = @droppies[activeIndex]\n      contains = _.without(droppy?.contains, draggy.id)\n      if contains.length\n        @getDraggyFromId(_.last(contains)).el.classList.remove(\"fade\")\n      else if droppy\n        droppy.el.classList.remove(\"contains\")\n\n    @transform draggy.el,\n      x: draggy.x\n      y: draggy.y\n      scale: 1.25\n      transition: if isInitialDrag then \"all 300ms\" else \"none\"\n\n  onDrop: (draggy) ->\n    {left, top, width, height} = draggy.offset\n\n    droppy = (droppy for droppy in @droppies when droppy.isActive)[0]\n\n    x = y = 0\n\n    if droppy\n      {bounds} = droppy\n      x = Math.round bounds.left + bounds.width / 2 - left - width / 2\n      y = Math.round bounds.top + bounds.height / 2 - top - height / 2\n    else\n      draggy.isPositioned = false\n\n    if @options.data.reject and\n       droppy?.el.dataset.name isnt draggy.el.dataset.name\n      droppy?.isActive = false\n      x = y = 0\n\n      if droppy\n        droppy.el.classList.add(\"incorrect\")\n        window.setTimeout (-> droppy.el.classList.remove(\"incorrect\")), 400\n\n    if draggy.x isnt x or draggy.y isnt y\n      draggy.reset({x, y})\n    else\n      @transform draggy.el,\n        x: draggy.x\n        y: draggy.y\n        transition: \"all 300ms\"\n\n      @checkAnswer(draggy)\n\n    @setState(if @isTouched() then \"touched\" else \"prompt\")\n\n  onResize: (e) ->\n    @setHeight()\n    for droppy in @droppies or []\n      for id in droppy.contains or []\n        draggy = @getDraggyFromId(id)\n        # remove transition while recalc to avoid janky experience\n        @transition draggy.el, \"none\"\n        draggy.getOffset()\n\n        # re-calculate x-axis and y-axis\n        bounds = droppy.el.getBoundingClientRect()\n        { left, top, width, height } = draggy.offset\n        x = Math.round bounds.left + bounds.width / 2 - left - width / 2\n        y = Math.round bounds.top + bounds.height / 2 - top - height / 2\n        \n        #  set draggy position and transform\n        draggy.setPosition({ x, y })\n        @transform draggy.el, {\n          x: x\n          y: y\n        } \n\n  getDraggyFromId: (id) ->\n    _.findWhere(@draggies, { id })\n\n  getElements: (selector, original) ->\n    if original\n      for {el, contains} in original\n        { el, contains, bounds: el.getBoundingClientRect() }\n    else\n      for el, i in @findAll(selector)\n        el: el\n        bounds: el.getBoundingClientRect()\n        contains: []\n\n  resetDraggy: (draggy) ->\n    draggy.reset()\n    draggy.el.classList.remove(\"is-positioned\")\n    draggy.isPositioned = false\n\n  checkAnswer: (draggy) ->\n    for droppy in @droppies\n      droppy.el.classList.remove(\"active\")\n      doesContain = _.include(droppy.contains, draggy.id)\n\n      if droppy.isActive\n        draggy.el.classList.add(\"is-positioned\")\n        draggy.isPositioned = true\n\n        if droppy.contains.length > 0 and not doesContain and @isOnlyUnique()\n          droppy.isActive = false\n          @resetDraggy @getDraggyFromId(droppy.contains[0])\n\n        droppy.contains =\n          _.uniq(droppy.contains.concat(draggy.id))\n\n      else if doesContain\n        droppy.contains = _.without(droppy.contains, draggy.id)\n\n      for id, i in droppy.contains\n        d = @getDraggyFromId(id)\n        d.el.classList.toggle(\"fade\", i isnt droppy.contains.length - 1)\n\n      droppy.el.classList.toggle(\"contains\", droppy.contains.length > 0)\n\n  isTouched: ->\n    touchedDraggies = (draggy for draggy in @draggies when draggy.isPositioned)\n    touchedDraggies.length is @options.data.list.length\n\n  isCorrect: ->\n    correctDraggies =\n      droppy for droppy in @droppies when (\n        _.filter(droppy.contains, (id) =>\n          droppy.el.dataset.name is @getDraggyFromId(id).el.dataset.name\n        ).length is droppy.contains.length\n      )\n\n    correctDraggies.length is @droppies.length\n\n  showAnswer: ->\n    for droppy in @droppies\n      droppyCorrect = true\n      for id in droppy.contains\n        draggy    = @getDraggyFromId(id)\n        isCorrect = droppy.el.dataset.name is draggy.el.dataset.name\n        draggy.el.classList.toggle \"incorrect\", not isCorrect\n        droppyCorrect = false if not isCorrect\n\n      droppy.el.classList.toggle \"correct\", droppyCorrect\n\n  isOnlyUnique: ->\n    _.chain(@options.data.list)\n      .pluck(\"name\")\n      .uniq()\n      .value().length is @options.data.list.length\n\n  answerDetails: ->\n    questions = @options.metadata?.questions or []\n    return [] unless questions.length > 0\n    details = []\n\n    draggiesByContentDict = _.indexBy @draggies, (d) ->\n      if d.el.children[0].dataset.content? then d.el.children[0].dataset.content else d.el.innerText.toLowerCase()\n\n    for q in questions\n      if selectedDraggy = draggiesByContentDict[q.question.content.toLowerCase()]\n        selectedDroppy = _.find @droppies, (droppy) ->\n          selectedDraggy.el.dataset.id in droppy.contains\n        details.push\n          question: q.question\n          answer: _.find q.answers, (a) ->\n            a.content is selectedDroppy.el.dataset.name\n    details\n\n  endGame: ->\n    super\n\n    @submit()\n\nmodule.exports = DragToMatchView\n","module.exports = {\"title\":\"exit\",\"display\":\"Exit Lesson\",\"category\":\"Exit\",\"model\":{\"title\":{\"type\":\"html\",\"default\":\"That's it!\"},\"content\":{\"type\":\"html\",\"default\":\"Nice work. Youve reached the end of this lesson.\"},\"buttonText\":{\"type\":\"html\",\"default\":\"Exit Lesson\",\"display\":\"Button CTA\"}}}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (buttonText, config, content, title) {\nbuf.push(\"<div class=\\\"content-scroll content-fit content-ver text-center block-v-md\\\"><div class=\\\"content-scroll-inner\\\"><div class=\\\"block-v-md\\\"><h1 class=\\\"slide-up\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"slide-up delay-1 text-md\\\">\" + (null == (jade_interp = content) ? \"\" : jade_interp) + \"</div></div>\");\nif ( config.contextRequiresExitButton)\n{\nbuf.push(\"<div class=\\\"block-v-md\\\"><div class=\\\"btn btn-solid slide-up\\\">\" + (null == (jade_interp = buttonText) ? \"\" : jade_interp) + \"</div></div>\");\n}\nbuf.push(\"</div></div>\");}.call(this,\"buttonText\" in locals_for_with?locals_for_with.buttonText:typeof buttonText!==\"undefined\"?buttonText:undefined,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"content\" in locals_for_with?locals_for_with.content:typeof content!==\"undefined\"?content:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView  = require(\"views/slide\")\n{ Lesson } = Application.actions()\n\nclass ExitView extends SlideView\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap .btn\": \"exit\"\n\n  show: ->\n    Lesson.complete()\n\n  beforeShow: ->\n    @trigger(\"ui\", flexibleHeight: true)\n\n  beforeHide: ->\n    @trigger(\"ui\", flexibleHeight: false)\n\nmodule.exports = ExitView\n","module.exports = {\"title\":\"expandable-list\",\"display\":\"Expandable List\",\"category\":\"Content\",\"features\":{\"narration\":true,\"social\":true},\"description\":\"Display a list of bullet points\",\"model\":{\"title\":{\"type\":\"html\",\"default\":\"\"},\"list\":{\"type\":[{\"title\":{\"type\":\"html\"},\"content\":{\"type\":\"html\"}}],\"min\":1,\"max\":6},\"focus\":{\"type\":\"boolean\",\"default\":true,\"help\":\"Only reveal one item at a time.\\n\"},\"prompt\":{\"type\":\"html\",\"default\":\"Select an item to see more\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"three\",\"title\":\"Learn more about our product range\",\"list\":[{\"title\":\"Product X\",\"content\":\"Our brilliant new sleek design allows the user to have unparalleled comfort when using the device.\\n\"},{\"title\":\"Product Y\",\"content\":\"Crystal clear display performs better than any of our competitors.\\n\"},{\"title\":\"Product Z\",\"content\":\"The newest feature offers a new level of feedback for the user.\\n\"}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, doneText, hasNarration, hasPrompt, i18n, list, prompt, submitUp, title, undefined) {\nbuf.push(\"<div class=\\\"content-scroll content-fill\\\"><div class=\\\"content-scroll-inner block-v-md\\\"><div class=\\\"block-v-md\\\"><div class=\\\"text-xxl text-center slide-up\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</div></div><div class=\\\"row block-v-md\\\"><div class=\\\"col-sm-12 col-md-10 col-md-offset-1\\\"><div class=\\\"accordion\\\">\");\n// iterate list\n;(function(){\n  var $$obj = list;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var item = $$obj[i];\n\nvar klass = \"middle\";\nif (i === 0) klass = \"first\";\nif (i === list.length - 1 ) klass = \"last\";\nbuf.push(\"<div\" + (jade.cls(['item',\"item-\" + (klass) + \"\"], [null,true])) + \"><div class=\\\"item-button btn btn-solid\\\"><div class=\\\"accordion-text text-start\\\">\" + (null == (jade_interp = item.title) ? \"\" : jade_interp) + \"</div></div><div class=\\\"item-content block-dk block-md\\\"><div class=\\\"text-md\\\">\" + (null == (jade_interp = item.content) ? \"\" : jade_interp) + \"</div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var item = $$obj[i];\n\nvar klass = \"middle\";\nif (i === 0) klass = \"first\";\nif (i === list.length - 1 ) klass = \"last\";\nbuf.push(\"<div\" + (jade.cls(['item',\"item-\" + (klass) + \"\"], [null,true])) + \"><div class=\\\"item-button btn btn-solid\\\"><div class=\\\"accordion-text text-start\\\">\" + (null == (jade_interp = item.title) ? \"\" : jade_interp) + \"</div></div><div class=\\\"item-content block-dk block-md\\\"><div class=\\\"text-md\\\">\" + (null == (jade_interp = item.content) ? \"\" : jade_interp) + \"</div></div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"list\" in locals_for_with?locals_for_with.list:typeof list!==\"undefined\"?list:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","ScrollableView = require(\"../scrollable/view\")\n\nclass ExpandableListView extends ScrollableView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .item-button\": \"toggleItem\"\n    \"iostap .btn-done\":    \"submit\"\n\n  serialize: ->\n    data = super\n    data.list = _.filter data.list, (el) -> el.title and el.content\n    data.hasPrompt = true\n    data\n\n  beforeShow: ->\n    @setEl @findAll(\".item\"), \"items\"\n    @setEl @findOne(\".content-scroll-inner\"), \"container\"\n    @setEl @findOne(\".accordion\"), \"accordion\"\n\n    @$(\".item-button .md-list\").removeClass(\"md-list\")\n\n    @transformItems(false)\n\n    @trigger(\"ui\", flexibleHeight: true)\n\n  beforeHide: ->\n    @trigger(\"ui\", flexibleHeight: false)\n\n  show: ->\n    @touchedItems = []\n    @setState(\"prompt\")\n    @listenTo this, \"resize\", @onResize\n\n  onResize: ->\n    @beforeShow()\n\n  onRefresh: ->\n\n  toggleItem: (e, element) ->\n    button       = e?.currentTarget or element\n    currentItem  = button.parentNode\n    transition   = e?\n\n    @touchedItems = _.uniq @touchedItems.concat(currentItem)\n    @setState(\"touched\") if @touchedItems.length is @getEl(\"items\").length\n\n    for other in @getEl(\"items\")\n      @transition other, if transition then \"all 300ms\" else \"\"\n\n      if @options.data.focus and other isnt currentItem\n        other.classList.remove(\"active\")\n\n    currentItem.offsetHeight\n    currentItem.classList.toggle \"active\"\n\n    @transformItems(transition)\n\n  transformItems: (transition) ->\n    accordion = @getEl(\"accordion\")\n\n    return unless accordion? and @getEl(\"items\").length\n\n    window.clearTimeout @timeout\n\n    yOffset = 0\n    height  = 0\n\n    for item, i in @getEl(\"items\")\n      button = item.firstChild\n      height += button.offsetHeight\n\n      @transform item, y: yOffset\n\n      if item.classList.contains \"active\"\n        height  += item.lastChild.offsetHeight\n        yOffset += item.lastChild.offsetHeight\n\n    if height > accordion.offsetHeight or not transition\n      @transformContainer(height, transition)\n    else\n      @timeout = window.setTimeout =>\n        @transformContainer(height, transition)\n      , 300\n\n  transformContainer: (height, transition) ->\n    container = @getEl(\"container\")\n    accordion = @getEl(\"accordion\")\n\n    accordion.style.height = height + \"px\"\n\n    diff = @el.offsetHeight - container.offsetHeight\n    newY = Math.max diff / 2, 0\n\n    @transform container,\n      y: newY\n      transition: if transition then \"all 300ms\" else \"\"\n\n  refresh: (params) ->\n    for item, i in params.data.list\n      changed = i unless _.isEqual @options.data.list[i], item\n\n    super\n\n    @beforeShow()\n    @show()\n\n    if changed? and changed < @getEl(\"items\").length\n      @toggleItem null, @getEl(\"items\")[changed].firstChild\n\n\nmodule.exports = ExpandableListView\n","module.exports = {\"title\":\"find-a-word\",\"display\":\"Find-a-word\",\"category\":\"Game\",\"visible\":true,\"features\":{\"narration\":false,\"stars\":true},\"model\":{\"title\":{\"type\":\"text\"},\"words\":{\"min\":3,\"max\":12,\"type\":[{\"type\":\"text\"}]},\"answer\":{\"text\":{\"type\":\"text\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"text\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"text\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"text\",\"default\":\"\",\"display\":\"Core Message\"}},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":30000,\"display\":\"Time Limit (seconds)\",\"min\":1},\"out-of-time-prompt\":{\"type\":\"html\",\"display\":\"Out of time prompt\"},\"isDisabled\":{\"type\":\"boolean\",\"default\":true,\"display\":\"Disable\",\"help\":\"Disabling the timer lets users find words at their own pace.\\n\"}}},\"prompt\":{\"type\":\"text\",\"default\":\"Find the words in the grid\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"find-a-word\",\"title\":\"Find all of the products that make up our range\",\"words\":[\"Product X\",\"Product Y\",\"Product Z\"]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (Array, continueBtnText, dirs, doneText, game, grid, hasNarration, hasPrompt, i18n, prompt, size, submitUp, title, undefined, words) {\nif ( game && game.timer && game.timer.limit > 0 && !game.timer.isDisabled)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content content-fit clearfix\\\"><div class=\\\"text-center block-v-lg\\\"><h1 class=\\\"fade-in\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"grid-container block-md block-dk\\\"><div class=\\\"grid\\\">\");\nsize = 1 / grid.length * 100;\ndirs = [\"up\", \"down\", \"left\", \"right\"]\n// iterate grid\n;(function(){\n  var $$obj = grid;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var row = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"height: \" + (size) + \"%;\", true, false)) + \" class=\\\"grid-row clearfix\\\">\");\n// iterate row\n;(function(){\n  var $$obj = row;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var col = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"data-letter\", col, true, false)) + (jade.attr(\"style\", \"width: \" + (size) + \"%;\", true, false)) + (jade.cls(['grid-col','text-uppercase',\"delay-\" + (_.random(3)) + \" slide-\" + (_.sample(dirs)) + \"\"], [null,null,true])) + \">\" + (jade.escape(null == (jade_interp = col) ? \"\" : jade_interp)) + \"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var col = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"data-letter\", col, true, false)) + (jade.attr(\"style\", \"width: \" + (size) + \"%;\", true, false)) + (jade.cls(['grid-col','text-uppercase',\"delay-\" + (_.random(3)) + \" slide-\" + (_.sample(dirs)) + \"\"], [null,null,true])) + \">\" + (jade.escape(null == (jade_interp = col) ? \"\" : jade_interp)) + \"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var row = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"height: \" + (size) + \"%;\", true, false)) + \" class=\\\"grid-row clearfix\\\">\");\n// iterate row\n;(function(){\n  var $$obj = row;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var col = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"data-letter\", col, true, false)) + (jade.attr(\"style\", \"width: \" + (size) + \"%;\", true, false)) + (jade.cls(['grid-col','text-uppercase',\"delay-\" + (_.random(3)) + \" slide-\" + (_.sample(dirs)) + \"\"], [null,null,true])) + \">\" + (jade.escape(null == (jade_interp = col) ? \"\" : jade_interp)) + \"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var col = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"data-letter\", col, true, false)) + (jade.attr(\"style\", \"width: \" + (size) + \"%;\", true, false)) + (jade.cls(['grid-col','text-uppercase',\"delay-\" + (_.random(3)) + \" slide-\" + (_.sample(dirs)) + \"\"], [null,null,true])) + \">\" + (jade.escape(null == (jade_interp = col) ? \"\" : jade_interp)) + \"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"<div class=\\\"grid-highlights\\\">\");\n// iterate (new Array(words.length + 1))\n;(function(){\n  var $$obj = (new Array(words.length + 1));\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var word = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"width: \" + (size) + \"%; height: \" + (size) + \"%;\", true, false)) + (jade.cls(['grid-highlight',\"grid-highlight-\" + (i) + \"\"], [null,true])) + \"></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var word = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"width: \" + (size) + \"%; height: \" + (size) + \"%;\", true, false)) + (jade.cls(['grid-highlight',\"grid-highlight-\" + (i) + \"\"], [null,true])) + \"></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"Array\" in locals_for_with?locals_for_with.Array:typeof Array!==\"undefined\"?Array:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"dirs\" in locals_for_with?locals_for_with.dirs:typeof dirs!==\"undefined\"?dirs:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"grid\" in locals_for_with?locals_for_with.grid:typeof grid!==\"undefined\"?grid:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"size\" in locals_for_with?locals_for_with.size:typeof size!==\"undefined\"?size:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined,\"words\" in locals_for_with?locals_for_with.words:typeof words!==\"undefined\"?words:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView   = require \"views/base/game\"\n{ DraggyView } = require(\"views/components/draggy\")\nPrefix     = require(\"lib/prefix\")\n\nHALFTURN = Math.PI / 2\nQUARTURN = Math.PI / 4\n\nclass FindAWordView extends GameView\n  template: require(\"./template\")\n  fitTextOnResize: false\n  fitTextOnRender: false\n\n  orientations: [\n    \"verticalUp\"\n    \"diagonalUp\"\n    \"horizontal\"\n    \"diagonal\"\n    \"vertical\"\n    \"diagonalBack\"\n    \"horizontalBack\"\n    \"diagonalUpBack\"\n  ]\n\n  events: ->\n    \"iostap .btn-done\": \"endGame\"\n\n  serialize: ->\n    data = super\n    words   = _.uniq (w.replace(/\\s/g, \"\").toUpperCase() for w in data.words)\n    letters = _.uniq words.join(\"\")\n\n    @grid    ?= window.wordfind.newPuzzle words, { letters }\n    @solution = window.wordfind.solve(@grid, words).found\n    data.grid = @grid\n    data\n\n  beforeShow: ->\n    @setEl @findAll(\".grid-highlight\"), \"highlight\"\n\n    el = @findOne(\".grid\")\n    el.style.width  = \"\"\n\n    fontSize = parseFloat(window.getComputedStyle(@el).fontSize)\n\n    # Ensure small screens and resizes don't impact Find-A-Word\n    gridSizeEm = Math.min(el.offsetWidth / fontSize, 22)\n    colSizeEm = gridSizeEm / @grid.length\n    colSizePx = colSizeEm * fontSize\n\n    @size = colSizePx\n\n    el.style.width      = \"#{gridSizeEm}em\"\n    el.style.height     = \"#{gridSizeEm}em\"\n    el.style.lineHeight = \"#{colSizeEm * 1.1}em\"\n\n    for el in @getEl(\"highlight\")\n      el.style[Prefix \"transformOrigin\"] = \"#{colSizeEm / 2}em\"\n      { x, y, t } = el.dataset\n      if x? and y? and t?\n        @transform el,\n          x: \"#{x * colSizeEm}em\"\n          y: \"#{y * colSizeEm}em\"\n          rotate: \"#{t * QUARTURN - HALFTURN}rad\"\n\n  show: ->\n    super\n\n    @draggy = new DraggyView\n      el: @findOne(\".grid\")\n      isParent: true\n\n    @listenTo @draggy, \"drag\", @onDrag\n    @listenTo @draggy, \"drop\", @onDrop\n    @listenTo this, \"resize\", @onResize\n\n    @onResize()\n\n    @enterGame()\n\n  refresh: ->\n    delete @grid\n    super\n    @serialize()\n    @beforeShow()\n\n  hide: ->\n    delete @grid\n\n  onResize: (e) ->\n    unless e?.width or @currentState?.refresh\n      @el.classList.remove(\"active\")\n\n    @beforeShow()\n\n    @fitText =>\n      colSizePx = Math.round(@findOne(\".grid\").offsetWidth / @grid.length)\n      @size = colSizePx\n\n      window.setTimeout (=>\n        @el.classList.add(\"active\")\n      ), 300\n\n  onDrag: (draggy, isInitial) ->\n    el = @getEl(\"highlight\").item(@solution.length)\n    el.classList.add(\"active\")\n\n    if isInitial\n      { x, y } = draggy\n      @line =\n        theta: 0\n        start:\n          x: Math.floor(x / @size)\n          y: Math.floor(y / @size)\n\n      @transform el,\n        x: @line.start.x * @size\n        y: @line.start.y * @size\n\n      el.offsetWidth\n      @setState true, \"dragging\"\n\n    else\n      { x, y } = draggy\n      gs = @grid.length - 1\n      gx = @line.start.x\n      gy = @line.start.y\n      x -= (gx + 0.5) * @size\n      y -= (gy + 0.5) * @size\n      t  = Math.ceil((draggy.toAngle(x, y) - HALFTURN) / QUARTURN + HALFTURN)\n      gw = if t % 2 is 0 then 1 else Math.SQRT2\n\n      baseRotation = @line.theta - (@line.theta % 8)\n      rotationDiff = (@line.theta % 8) - t\n\n      if rotationDiff < -5\n        baseRotation -= 8\n      else if rotationDiff is 8\n        baseRotation += 8\n\n      max = @getMaxLength(gx, gy, t)\n\n      len = Math.round (\n        if t % 2 is 0\n          Math.max(Math.abs(x), Math.abs(y))\n        else\n          Math.sqrt(x * x + y * y)\n       ) / (gw * @size)\n\n      @line.length = Math.max(Math.min(len, max) + 1, 1)\n      @line.theta  = (baseRotation or 0) + t\n      @line.orientation = @orientations[t % 8]\n\n      @transform el,\n        x: @line.start.x * @size\n        y: @line.start.y * @size\n        rotate: \"#{@line.theta * QUARTURN - HALFTURN}rad\"\n\n      el.dataset.x = @line.start.x\n      el.dataset.y = @line.start.y\n      el.dataset.t = @line.theta\n      el.style.width = \"#{(1 + (@line.length - 1) * gw) / (gs + 1) * 100}%\"\n\n  onDrop: (draggy, isReset) ->\n    el = @getEl(\"highlight\").item(@solution.length)\n    el.classList.remove \"active\"\n\n    letters = @getSelection(@line)\n    word    = letters.reduce ((m, e) -> m + e.dataset.letter), \"\"\n    answer  = _.find @solution, { word }\n\n    if answer\n      @solution = _.without @solution, answer\n      el.classList.add \"complete\"\n      letter.classList.add(\"complete\") for letter in letters\n\n    else\n      @transform el,\n        x: @line.start.x * @size\n        y: @line.start.y * @size\n        rotate: \"#{@line.theta * QUARTURN - HALFTURN}rad\"\n        scale: 1.2\n\n      window.setTimeout =>\n        el.style.width = \"\"\n        @setState false, \"dragging\"\n      , 300\n\n    @setState \"touched\"\n\n  getSelection: (line) ->\n    { start: {x, y}, orientation, length } = line\n\n    for i in [0...length]\n      p = window.wordfind.orientations[orientation](x, y, i)\n      r = Math.floor(p.y * @grid.length) / @grid.length\n      c = p.x % @grid.length\n      @draggy.el.children[r]?.children[c]\n\n  getOrientation: (theta) ->\n    @orientations[theta % 8]\n\n  getMaxLength: (x, y, theta) ->\n    size = @grid.length - 1\n    switch theta % 8\n      when 1 then Math.min(size - x, y)\n      when 2 then size - x\n      when 3 then Math.min(size - x, size - y)\n      when 4 then size - y\n      when 5 then Math.min(x, size - y)\n      when 6 then x\n      when 7 then Math.min(x, y)\n      else y\n\n  isCorrect: ->\n    @solution.length is 0\n\n  showAnswer: ->\n    for {x, y, overlap, orientation}, i in @solution\n      letters = @getSelection({ start: { x, y }, length: overlap, orientation })\n      el = @getEl(\"highlight\").item(i)\n\n      t  = @orientations.indexOf(orientation)\n      gw = if t % 2 is 0 then 1 else Math.SQRT2\n\n      @transform el,\n        x: x * @size\n        y: y * @size\n        rotate: \"#{t * QUARTURN - HALFTURN}rad\"\n      el.offsetWidth\n      el.classList.add(\"incorrect\")\n      el.style.width = \"#{gw * overlap / @grid.length * 100}%\"\n\n  endGame: ->\n    super\n    @submit()\n\nmodule.exports = FindAWordView\n","module.exports = {\"title\":\"free-text-contribution\",\"display\":\"Free Text\",\"category\":\"Peer Learning\",\"description\":\"Free text input\",\"model\":{\"question\":{\"id\":{\"type\":\"uuid\",\"hidden\":true},\"content\":{\"type\":\"html\"},\"min\":{\"type\":\"int\",\"display\":\"Minimum Response Length\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Type your response\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"free-text\",\"question\":{\"id\":\"#GENUUID#\",\"content\":\"Write your contribution\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n\n;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","FreeTextView = require(\"../free-text-survey/view\")\n\nclass FreeTextContributioView extends FreeTextView\n  userInput: ->\n    contribution:\n      text: @value\n      question:\n        content: @options.data.question.content\n        id: @options.data.question.id\n\nmodule.exports = FreeTextContributioView\n","module.exports = {\"title\":\"free-text-survey\",\"display\":\"Free text\",\"category\":\"Survey\",\"description\":\"Free text input for user feedback\",\"model\":{\"question\":{\"id\":{\"type\":\"uuid\",\"hidden\":true},\"content\":{\"type\":\"html\"},\"min\":{\"type\":\"int\",\"display\":\"Minimum Response Length\",\"help\":\"If you want a response from every learner, set a minimum response length. This is the number of characters they will need to type before they are able to continue.\\n\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Type your response\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"free-text\",\"question\":{\"id\":\"#GENUUID#\",\"content\":\"How would you improve this lesson?\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, doneText, hasNarration, hasPrompt, i18n, prompt, submitUp, title, value) {\nbuf.push(\"<div class=\\\"content-fill\\\"><div class=\\\"content-scroll content-ver\\\"><div class=\\\"content-scroll-inner\\\"><div class=\\\"row block-v-lg clearfix\\\"><div class=\\\"col-sm-12 col-lg-10 col-lg-offset-1\\\"><div class=\\\"block-v-md slide-title\\\"><h1 class=\\\"text-center\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1></div><div class=\\\"block-v-md\\\"><div class=\\\"user-input-container\\\"><div class=\\\"user-input text-md block-lg text-prewrap\\\">\" + (jade.escape(null == (jade_interp = value) ? \"\" : jade_interp)) + \"</div><div class=\\\"btn btn-prompt btn-muted\\\"><div class=\\\"icon icon-pencil\\\"></div></div></div></div></div></div></div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"value\" in locals_for_with?locals_for_with.value:typeof value!==\"undefined\"?value:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","InputView = require(\"views/input\")\n\nclass FreeTextView extends InputView\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap .content-fill\": \"focus\"\n    \"iostap .btn-done\": \"nextSlide\"\n\n  show: ->\n    @listenTo this, \"resize\", @onResize\n\n  beforeShow: ->\n    @setEl @findOne(\".user-input\"),  \"input\"\n    @trigger(\"ui\", flexibleHeight: true)\n\n    if @serialize().min is 0 or\n       @value?.length >= @serialize().min\n      @setState(\"touched\")\n\n  beforeHide: ->\n    @trigger(\"ui\", flexibleHeight: false)\n\n  onResize: ->\n    @beforeShow()\n\n  serialize: ->\n    data = super\n    data.title = @options.data.question.content\n    data.min   = @options.data.question.min\n    data.min   = 0 unless data.min > 0\n    data.value = @value\n    data.hasPrompt = true\n    data\n\n  focus: ->\n    inputEl = @getEl(\"input\")\n    { title, min, prompt } = @serialize()\n    @changeState(true) if min is 0\n    $(\"#text-input-view\")\n      .off(\"update\")\n      .trigger(\"open\", { title, min, prompt, @value })\n      .on(\"update\", (e, v) => @onUpdate(v, inputEl))\n\n  userInput: ->\n    text: @value\n    question:\n      content: @options.data.question.content\n      id: @options.data.question.id\n\n  onUpdate: (@value, el) ->\n    isComplete     = @value.length >= @serialize().min\n    el.textContent = @value\n    @changeState(isComplete)\n\n  changeState: (isComplete) ->\n    @setState(@value?.length > 0, \"has-input\")\n    @setState(if isComplete then \"touched\" else \"prompt\")\n\nmodule.exports = FreeTextView\n","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (all, correct, image, title, undefined) {\njade_mixins[\"image\"] = jade_interp = function(imageUrl, klass){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nbuf.push(\"<img\" + (jade.attr(\"src\", imageUrl, true, false)) + (jade.cls([klass], [true])) + \"/>\");\n};\nbuf.push(\"<div class=\\\"game-image-title text-center text-bold text-lg\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</div><div class=\\\"game-box-inner content-fill block-v-lg\\\"><div class=\\\"row content-fill\\\"><div class=\\\"col-md-4 col-sm-4 content-fill\\\"><div class=\\\"block-dk content-fill\\\"><div class=\\\"block-md game-image-container text-center\\\">\");\njade_mixins[\"image\"](image,'game-image');\nbuf.push(\"</div></div></div><div class=\\\"col-md-8 col-sm-8 content-fill\\\"><div class=\\\"block-flex-ver text-md direction-column\\\">\");\n// iterate all\n;(function(){\n  var $$obj = all;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var attribute = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-is-correct\", correct.indexOf(attribute) > -1, true, false)) + (jade.attr(\"data-index\", i, true, false)) + \" class=\\\"btn-attribute block-flex-child block-flex-ver\\\"><h2 class=\\\"block-h-md btn-text\\\">\" + (null == (jade_interp = attribute) ? \"\" : jade_interp) + \"</h2></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var attribute = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-is-correct\", correct.indexOf(attribute) > -1, true, false)) + (jade.attr(\"data-index\", i, true, false)) + \" class=\\\"btn-attribute block-flex-child block-flex-ver\\\"><h2 class=\\\"block-h-md btn-text\\\">\" + (null == (jade_interp = attribute) ? \"\" : jade_interp) + \"</h2></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div></div>\");}.call(this,\"all\" in locals_for_with?locals_for_with.all:typeof all!==\"undefined\"?all:undefined,\"correct\" in locals_for_with?locals_for_with.correct:typeof correct!==\"undefined\"?correct:undefined,\"image\" in locals_for_with?locals_for_with.image:typeof image!==\"undefined\"?image:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (i18n, image, paragraphs, undefined) {\njade_mixins[\"image\"] = jade_interp = function(imageUrl, klass){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nbuf.push(\"<img\" + (jade.attr(\"src\", imageUrl, true, false)) + (jade.cls([klass], [true])) + \"/>\");\n};\nbuf.push(\"<div class=\\\"content-fill content-fit block-lg text-center\\\"><div class=\\\"game-description\\\"><div class=\\\"block-md\\\">\");\njade_mixins[\"image\"](image,'game-image');\nbuf.push(\"</div><div class=\\\"text-md\\\">\");\n// iterate paragraphs\n;(function(){\n  var $$obj = paragraphs;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var p = $$obj[$index];\n\nbuf.push(\"<p>\" + (null == (jade_interp = p) ? \"\" : jade_interp) + \"</p>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var p = $$obj[$index];\n\nbuf.push(\"<p>\" + (null == (jade_interp = p) ? \"\" : jade_interp) + \"</p>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div><div class=\\\"block-v-md\\\"><div class=\\\"btn btn-muted btn-continue\\\">\" + (jade.escape((jade_interp = i18n(\"buttons.continue\")) == null ? '' : jade_interp)) + \"</div></div></div></div>\");}.call(this,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"image\" in locals_for_with?locals_for_with.image:typeof image!==\"undefined\"?image:undefined,\"paragraphs\" in locals_for_with?locals_for_with.paragraphs:typeof paragraphs!==\"undefined\"?paragraphs:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","module.exports = {\"title\":\"game-elevator\",\"display\":\"The Elevator Game\",\"category\":\"Game\",\"features\":{\"stars\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"How would you describe..?\"},\"description\":{\"type\":\"html\",\"default\":\"Which of these facts matches the product? Tap on the correct statement when the product is directly aligned to get points.\\n\"},\"images\":{\"min\":3,\"max\":12,\"type\":[{\"title\":{\"type\":\"html\"},\"image\":{\"type\":\"image\"},\"correct\":{\"min\":1,\"max\":4,\"type\":[{\"type\":\"html\"}]},\"incorrect\":{\"min\":0,\"max\":4,\"default\":0,\"type\":[{\"type\":\"html\"}]},\"description\":{\"type\":\"html\"}}],\"help\":\"Add some correct and/or incorrect attributes to for the image. The total number of attributes should be 3 or 4.\\n\"},\"combine\":{\"type\":\"boolean\",\"display\":\"Mix all attributes together\",\"default\":true,\"help\":\"Use attributes of other images as incorrect options.\"},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":20000,\"min\":1,\"display\":\"Time Limit (seconds)\"},\"isDisabled\":{\"type\":\"boolean\",\"default\":false,\"display\":\"Disable\",\"help\":\"If the timer is disabled, the game ends after one round has been played for each item.\\n\"}},\"stars\":{\"min\":{\"type\":\"int\",\"default\":1000,\"display\":\"1 Star\"},\"max\":{\"type\":\"int\",\"default\":1000,\"display\":\"All Stars\"},\"help\":\"Number of points required to earn stars.\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Select the matching attributes\"},\"doneText\":{\"display\":\"Done text\",\"type\":\"html\",\"default\":\"Move on\"}},\"examples\":[{\"subtype\":\"elevator\",\"title\":\"How would you describe..?\",\"description\":\"Which of these facts matches the product? Tap on the correct statement when the product is directly aligned to get points.\\n\",\"images\":[{\"title\":\"Product X\",\"image\":\"img/examples/product-phone.png\",\"correct\":[\"This is the very first, premier product in the range\",\"Industry-leading colour accuracy\",\"Wireless charging\"],\"incorrect\":[],\"description\":\"This is your chance to talk about the product or image. You can list all of its qualities, so everyone is excited and familiar with it.\\n\"},{\"title\":\"Product Y\",\"image\":\"img/examples/product-laptop.png\",\"correct\":[\"Its the second product\",\"Touch ID\",\"Retina display\"],\"incorrect\":[],\"description\":\"This is your chance to talk about the product or image. You can list all of its qualities, so everyone is excited and familiar with it.\\n\"},{\"title\":\"Product Z\",\"image\":\"img/examples/product-tablet.png\",\"correct\":[\"Its ultra-slim\",\"12megapixel camera\",\"Fast WiFi\"],\"incorrect\":[],\"description\":\"This is your chance to talk about the product or image. You can list all of its qualities, so everyone is excited and familiar with it.\\n\"}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (description, doneText, hasStars, hasTimeLimit, i18n, prompt, title) {\nbuf.push(\"<div class=\\\"content-intro content-fill content-fit\\\"><div class=\\\"block-v-lg text-center content\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><h1 class=\\\"tight\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"text-lg block-v-lg\\\">\" + (null == (jade_interp = description) ? \"\" : jade_interp) + \"</div><div class=\\\"btn btn-solid play-game\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.play-game\")) ? \"\" : jade_interp)) + \"</div></div></div></div></div><div class=\\\"content-outro\\\"><div class=\\\"content-fill\\\"><div class=\\\"block-v-lg text-center content\\\"><h1>\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><div class=\\\"row\\\"><div\" + (jade.cls(['col-sm-6','col-md-4','block-v-md',hasStars ? \"\" : \"col-md-offset-2\"], [null,null,null,true])) + \"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"white-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-score\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-total tight\\\">?</h1></div></div><div class=\\\"col-sm-6 col-md-4 block-v-md\\\"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"grey-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-best\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-record tight\\\">?</h1></div></div>\");\nif ( hasStars)\n{\nbuf.push(\"<div class=\\\"col-sm-12 col-md-4 block-v-md\\\"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"grey-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-stars\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-stars tight\\\">?<sup class=\\\"stars-total\\\"></sup></h1></div></div>\");\n}\nbuf.push(\"</div><div class=\\\"row block-v-md\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2 block-md\\\"><div class=\\\"btn btn-solid btn-block play-game\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.play-again\")) ? \"\" : jade_interp)) + \"</div></div></div></div></div></div></div><div class=\\\"slide-footer block-v-lg\\\"><div class=\\\"btn btn-muted goto-next fade-in\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div></div><div class=\\\"content-playing\\\"><div class=\\\"content-fill full-screen\\\"><div class=\\\"game-state block-h-lg\\\"><div class=\\\"game-state-inner row block-v-lg\\\"><div class=\\\"game-state-text col-md-6 col-sm-6\\\">\");\nif ( hasTimeLimit)\n{\nbuf.push(\"\" + (jade.escape((jade_interp = i18n(\"game.labels.timer\")) == null ? '' : jade_interp)) + \"\\n&ensp;<strong class=\\\"game-timer text-lg text-bold\\\"></strong>\");\n}\nbuf.push(\"</div><div class=\\\"game-state-text col-md-6 col-sm-6 text-right\\\">\" + (jade.escape((jade_interp = i18n(\"game.labels.score\")) == null ? '' : jade_interp)) + \"\\n&ensp;<strong class=\\\"game-score text-lg text-bold\\\"></strong><strong class=\\\"game-tally\\\"></strong></div></div></div>\");\nif ( hasTimeLimit)\n{\nbuf.push(\"<div class=\\\"game-stepper\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div>\");\n}\nif ( hasTimeLimit)\n{\nbuf.push(\"<div class=\\\"game-bonus-time\\\"></div>\");\n}\nbuf.push(\"</div><div class=\\\"content-fill\\\"><div class=\\\"game-box content-fill\\\"></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\"><div class=\\\"text-uppercase text-bold text-ellipsis\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div></div>\");}.call(this,\"description\" in locals_for_with?locals_for_with.description:typeof description!==\"undefined\"?description:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasStars\" in locals_for_with?locals_for_with.hasStars:typeof hasStars!==\"undefined\"?hasStars:undefined,\"hasTimeLimit\" in locals_for_with?locals_for_with.hasTimeLimit:typeof hasTimeLimit!==\"undefined\"?hasTimeLimit:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView   = require(\"views/base/game\")\nPreloader  = require(\"lib/preload\")\nEasie      = require(\"lib/easie\")\nDevice     = require(\"lib/device\")\n\nclass GameElevatorView extends GameView\n  template: require(\"./template\")\n\n  templates:\n    container: require(\"./components/container\")\n    description: require(\"./components/description\")\n\n  events: ->\n    \"iostap .play-game\": \"enterGame\"\n    \"iostap .goto-next\": \"next\"\n    \"iostap .btn-attribute\": \"checkAnswer\"\n    \"iostap .btn-continue\": \"hideDescription\"\n\n  initializeData: ->\n    super\n\n    @game.extra.set(\"fullscreen\", true)\n    @game.extra.set(\"sounds\", true)\n\n    { images } = @options.data\n    \n    images = (images or []).filter (i) ->\n      i.image and _.compact(i.correct).length > 0\n\n    images = images.map (i) ->\n      i[p] = _.compact(i[p]) for p in [\"correct\", \"incorrect\"]\n      i\n\n    @setArray(\"variant\", images)\n\n    Preloader.load (image for { image } in images), (errors = []) =>\n      @setArray \"variant\", _.reject images, (variant, i) ->\n        _.include(errors, variant.image)\n\n  initializeElements: ->\n    super\n\n    @setEl @findOne(\".game-box\"), \"container\"\n\n  startGame: ->\n    @answeredCount = 0\n    super\n\n  showNext: (isInitial) ->\n    @unpauseGame() unless isInitial\n\n    @game.timer.timestamp = Date.now()\n\n    variant = @getRandom \"variant\"\n\n    correct   = variant.correct\n    incorrect =\n      if @options.data.combine\n        _.chain(@getArray(\"variant\"))\n          .without(variant)\n          .pluck(\"correct\")\n          .flatten()\n          .value()\n      else\n        variant.incorrect\n\n    correct   = _.sample(correct, 4)\n    incorrect = _.sample(incorrect, 4 - correct.length)\n\n    @getEl(\"container\").innerHTML = @templates.container\n      title: variant.title\n      image: variant.image\n      correct: variant.correct\n      all: _.chain().union(correct, incorrect).shuffle().value()\n\n    @setEl(@getEl(\"container\").querySelector(\".game-image-container\"), \"image\")\n    @setEl(@getEl(\"container\").querySelectorAll(\".btn-attribute\"), \"answers\")\n\n    @transform @getEl(\"image\"),\n      opacity: 0\n      x: \"-100%\"\n\n    for el, i in @getEl(\"answers\")\n      @transform el,\n        opacity: 0\n        x: \"100%\"\n\n    if @getEl(\"image\").firstChild.complete\n      @onImageLoad()\n    else\n      @getEl(\"image\").firstChild.onload = => @onImageLoad()\n\n  # It takes a small amount of time for the image to load, and until it does\n  # we can't access it's height. The height dictates it's maximum scrolling\n  # position. Once we have it, we can transition in all of the content.\n  onImageLoad: ->\n    conHeight = @getEl(\"image\").parentNode.offsetHeight\n    imgHeight = @getEl(\"image\").offsetHeight\n\n    @getEl(\"container\").classList.remove(\"hide-description\")\n\n    @transform @getEl(\"image\"),\n      opacity: 1\n      transition: \"all 300ms\"\n\n    for el, i in @getEl(\"answers\")\n      @transform el,\n        opacity: 1\n        transition: \"all 300ms #{i * 100}ms\"\n\n    @game.extra.set(animateImage: false)\n\n    window.setTimeout (=>\n      @game.extra.set\n        animateImage: true\n\n      @transition(@getEl(\"image\"), \"\")\n      @transition(el, \"\") for el, i in @getEl(\"answers\")\n    ), 600\n\n  # The image is moved up and down every time the remaining time is updated,\n  # and the background of each answer becomes more opaque the closer it is to\n  # the vertical level of the image.\n  onTimerChange: (m) ->\n    super\n\n    if @game.extra.get(\"animateImage\") and\n       m.changed.passed? and\n       @getEl(\"image\")?\n\n      image = @getEl(\"image\")\n      percent = @getPercent()\n      \n      # always recalculate using the most up to date value\n      # utilising a store value in Backbone.Model will not give an accurate result\n      # when the screen resized\n      position = (image.parentNode.offsetHeight - image.offsetHeight) * percent\n\n      @transform @getEl(\"image\"),\n        y: position\n\n      for el, i in @getEl(\"answers\") when not el.classList.contains(\"selected\")\n        alpha = (1 - Math.abs(@getDist(i, percent))) * 0.4\n        el.style.backgroundColor = \"rgba(255, 255, 255, #{alpha})\"\n\n  checkAnswer: (e) ->\n    return if @game.timer.get(\"paused\") or\n              @getEl(\"container\").classList.contains(\"hide-attributes\")\n\n    el = e.currentTarget\n\n    { isCorrect, index } = el.dataset\n    distance = Math.abs(@getDist(index, @getPercent())) # range = {0..1}  0 = closer, 1 = further\n    threshold = 0.2\n    return if distance > threshold # select element only if the image is aligned with the description\n\n    el.classList.add(\"selected\")\n\n    isComplete =\n      _.chain(@getEl(\"answers\"))\n        .filter((el) ->\n          el.dataset.isCorrect and not el.classList.contains(\"selected\")\n        ).isEmpty()\n        .value()\n\n    if isCorrect\n      @onCorrectAnswer\n        score: 1000\n        time:  if isComplete then 1000 else 0\n        tally: true\n\n    else\n      @onIncorrectAnswer\n        time: 1000\n        tally: true\n\n    if isComplete or not isCorrect\n      @showDescription()\n\n  showDescription: ->\n    @getEl(\"container\").classList.add(\"hide-attributes\")\n    @getEl(\"container\").scrollTop = 0\n    @pauseGame()\n\n    description = @templates.description\n      image: @data.variant.lastValue.image\n      paragraphs: @data.variant.lastValue.description.split(/\\n+/)\n\n    @getEl(\"container\").innerHTML = description\n\n  hideDescription: ->\n    @answeredCount += 1\n    @getEl(\"container\").classList.add(\"hide-description\")\n\n    window.setTimeout (=>\n      @getEl(\"container\").classList.remove(\"hide-attributes\")\n\n      if @game.timer.get(\"isDisabled\") and @answeredCount is @getArray(\"variant\").length\n        @endGame()\n        return\n      \n      @showNext()\n\n      if not @game.timer.get(\"isDisabled\")\n        @game.timer.trigger \"count\", {\n          callback: =>\n            @game.timer.trigger \"start\", {\n              callback: => @endGame()\n            }\n        }\n    ), 600\n\n  # How long it takes to loop back and forth\n  getDuration: ->\n    3000\n\n  # The value from 0 to 1 in the loop based on the sine position of a curve\n  # with a period specified by @getDuration.\n  getPercent: ->\n    timeDiff = Date.now() - @game.timer.timestamp\n    duration = @getDuration()\n    circle   = 2 * Math.PI\n\n    (1 - Math.sin(timeDiff * circle / duration)) / 2\n\n  # How far away from the nth answer at the current percent between 0 and 1\n  getDist: (i, percent) ->\n    Math.abs (i / (@getEl(\"answers\").length - 1) - percent)\n\nmodule.exports = GameElevatorView\n","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (config, image, playinline, prompt, undefined, words) {\njade_mixins[\"video-stream\"] = jade_interp = function(videoUrl, playsinline, controls, klass, poster){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nplayinline = playinline || true\ncontrols = controls || true\nklass = klass || 'video vjs-fluid'\nvar cloudinaryVideoFolderUrl = config.CLOUDINARY_CDN_URL+config.CLOUDINARY_VIDEO_FOLDER\nvar streamUrl = ''\nif ( videoUrl && videoUrl.indexOf(cloudinaryVideoFolderUrl) > -1)\n{\nstreamUrl = videoUrl.replace(cloudinaryVideoFolderUrl, cloudinaryVideoFolderUrl+'sp_full_hd/')\nstreamUrl = streamUrl.replace('.mp4', '.m3u8')\n}\nbuf.push(\"<video\" + (jade.attr(\"webkit-playsinline\", playsinline, true, false)) + (jade.attr(\"controls\", controls, true, false)) + \" preload=\\\"auto\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + (jade.attr(\"poster\", poster, true, false)) + (jade.cls(['video-js',klass], [null,true])) + \"><source\" + (jade.attr(\"src\", videoUrl, true, false)) + \"/>\");\nif ( streamUrl)\n{\nbuf.push(\"<source\" + (jade.attr(\"src\", streamUrl, true, false)) + \"/>\");\n}\nbuf.push(\"</video>\");\n};\njade_mixins[\"image\"] = jade_interp = function(imageUrl, klass){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nbuf.push(\"<img\" + (jade.attr(\"src\", imageUrl, true, false)) + (jade.cls([klass], [true])) + \"/>\");\n};\njade_mixins[\"multi-content\"] = jade_interp = function(prop, obj){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nobj = obj || locals;\nswitch (obj[prop + \"Type\"]){\ncase \"image\":\nbuf.push(\"<div\" + (jade.attr(\"data-content\", obj.image, true, false)) + \" class=\\\"multi-content-wrapper multi-content-wrapper-image block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\">\");\njade_mixins[\"image\"](obj[prop], 'multi-content multi-content-image');\nbuf.push(\"</div></div>\");\n  break;\ncase \"video\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-video block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\">\");\njade_mixins[\"video-stream\"](obj[prop], true, true,\"multi-content multi-content-video block-dk\");\nbuf.push(\"</div></div>\");\n  break;\ncase \"audio\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-audio block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><audio\" + (jade.attr(\"src\", obj[prop], true, false)) + \" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"multi-content multi-content-audio block-dk\\\"></audio></div></div>\");\n  break;\ncase \"iframe\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-iframe block-md block-lt\\\"><div class=\\\"block-sm multi-content-iframe\\\">\");\nvar iframe = obj[prop].match(/<iframe[^<]*<\\/iframe>/)\nif ( iframe)\n{\nbuf.push(null == (jade_interp = iframe[0].replace(/ (width|height)=[\"'\\d\\w]+/g, \"\")) ? \"\" : jade_interp);\n}\nbuf.push(\"</div></div>\");\n  break;\ndefault:\nbuf.push(\"<span class=\\\"multi-content multi-content-text\\\">\" + (null == (jade_interp = obj[prop]) ? \"\" : jade_interp) + \"</span>\");\n  break;\n}\n};\nbuf.push(\"<div class=\\\"match-top block-v-md block-h-xl\\\"><div class=\\\"text-center match-top-content\\\"><h4 class=\\\"block-v-md match-prompt text-md\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</h4><div class=\\\"match-image-container block-v-md text-center block-lt\\\"><h1 class=\\\"match-image\\\">\");\njade_mixins[\"multi-content\"](\"image\", image);\nbuf.push(\"</h1></div></div></div><div class=\\\"match-words clearfix text-lg\\\">\");\n// iterate words\n;(function(){\n  var $$obj = words;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var word = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-answer\", word, true, false)) + (jade.attr(\"data-is-correct\", word === image.title, true, false)) + (jade.cls(['btn-word','text-center',\"delay-\" + (i) + \"\"], [null,null,true])) + \">\" + (null == (jade_interp = word) ? \"\" : jade_interp) + \"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var word = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-answer\", word, true, false)) + (jade.attr(\"data-is-correct\", word === image.title, true, false)) + (jade.cls(['btn-word','text-center',\"delay-\" + (i) + \"\"], [null,null,true])) + \">\" + (null == (jade_interp = word) ? \"\" : jade_interp) + \"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");}.call(this,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"image\" in locals_for_with?locals_for_with.image:typeof image!==\"undefined\"?image:undefined,\"playinline\" in locals_for_with?locals_for_with.playinline:typeof playinline!==\"undefined\"?playinline:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined,\"words\" in locals_for_with?locals_for_with.words:typeof words!==\"undefined\"?words:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","module.exports = {\"title\":\"game-image-word-match\",\"display\":\"Image/Word Match\",\"category\":\"Game\",\"features\":{\"stars\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"Match the image to the word\"},\"description\":{\"type\":\"html\",\"default\":\"Select the correct word related to the image. Speed and accuracy will score you the most points.\\n\"},\"images\":{\"min\":3,\"max\":20,\"type\":[{\"image\":{\"types\":[\"image\",\"text\"],\"display\":\"Content\"},\"title\":{\"type\":\"html\"}}]},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":20000,\"min\":1,\"display\":\"Time Limit (seconds)\"},\"isDisabled\":{\"type\":\"boolean\",\"default\":false,\"display\":\"Disable\",\"help\":\"If the timer is disabled, the game ends after one round has been played for each image.\\n\"}},\"stars\":{\"min\":{\"type\":\"int\",\"default\":1000,\"display\":\"1 Star\"},\"max\":{\"type\":\"int\",\"default\":1000,\"display\":\"All Stars\"},\"help\":\"Number of points required to earn stars. 500 points are earned per question. Dont forget to have enough time and questions to earn all the stars!\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Select the word that matches the image\"},\"doneText\":{\"display\":\"Done text\",\"type\":\"html\",\"default\":\"Move on\"}},\"examples\":[{\"subtype\":\"image-word-match\",\"images\":[{\"image\":\"Sample Text\",\"imageType\":\"text\",\"title\":\"Product description\"},{\"image\":\"img/examples/product-laptop.png\",\"imageType\":\"image\",\"title\":\"Retina display\"},{\"image\":\"img/examples/product-tablet.png\",\"imageType\":\"image\",\"title\":\"Touch screen\"}],\"challenge_configuration\":{\"nb_stars\":5},\"title\":\"Match the image to the word\",\"description\":\"Select the correct word related to the image. Speed and accuracy will score you the most points.\\n\",\"prompt\":\"Select the word that matches the image\"}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (description, doneText, hasStars, hasTimeLimit, i18n, title) {\nbuf.push(\"<div class=\\\"content-intro content-fill content-fit\\\"><div class=\\\"block-v-lg text-center content\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><h1 class=\\\"tight\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"text-lg block-v-lg\\\">\" + (null == (jade_interp = description) ? \"\" : jade_interp) + \"</div><div class=\\\"btn btn-solid play-game\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.play-game\")) ? \"\" : jade_interp)) + \"</div></div></div></div></div><div class=\\\"content-outro\\\"><div class=\\\"content-fill\\\"><div class=\\\"block-v-lg text-center content\\\"><h1>\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><div class=\\\"row\\\"><div\" + (jade.cls(['col-sm-6','col-md-4','block-v-md',hasStars ? \"\" : \"col-md-offset-2\"], [null,null,null,true])) + \"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"white-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-score\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-total tight\\\">?</h1></div></div><div class=\\\"col-sm-6 col-md-4 block-v-md\\\"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"grey-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-best\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-record tight\\\">?</h1></div></div>\");\nif ( hasStars)\n{\nbuf.push(\"<div class=\\\"col-sm-12 col-md-4 block-v-md\\\"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"grey-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-stars\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-stars tight\\\">?<sup class=\\\"stars-total\\\"></sup></h1></div></div>\");\n}\nbuf.push(\"</div><div class=\\\"row block-v-md\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2 block-md\\\"><div class=\\\"btn btn-solid btn-block play-game\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.play-again\")) ? \"\" : jade_interp)) + \"</div></div></div></div></div></div></div><div class=\\\"slide-footer block-v-lg\\\"><div class=\\\"btn btn-muted goto-next fade-in\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div></div><div class=\\\"content-playing\\\"><div class=\\\"full-screen\\\"><div class=\\\"game-state block-h-lg\\\"><div class=\\\"game-state-inner row block-v-lg\\\"><div class=\\\"game-state-text col-md-6 col-sm-6\\\">\");\nif ( hasTimeLimit)\n{\nbuf.push(\"\" + (jade.escape((jade_interp = i18n(\"game.labels.timer\")) == null ? '' : jade_interp)) + \"\\n&ensp;<strong class=\\\"game-timer text-lg text-bold\\\"></strong>\");\n}\nbuf.push(\"</div><div class=\\\"game-state-text col-md-6 col-sm-6 text-right\\\">\" + (jade.escape((jade_interp = i18n(\"game.labels.score\")) == null ? '' : jade_interp)) + \"\\n&ensp;<strong class=\\\"game-score text-lg text-bold\\\"></strong><strong class=\\\"game-tally\\\"></strong></div></div></div>\");\nif ( hasTimeLimit)\n{\nbuf.push(\"<div class=\\\"game-stepper\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div>\");\n}\nif ( hasTimeLimit)\n{\nbuf.push(\"<div class=\\\"game-bonus-time\\\"></div>\");\n}\nbuf.push(\"<div class=\\\"game-box content-fill\\\"></div></div></div>\");}.call(this,\"description\" in locals_for_with?locals_for_with.description:typeof description!==\"undefined\"?description:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasStars\" in locals_for_with?locals_for_with.hasStars:typeof hasStars!==\"undefined\"?hasStars:undefined,\"hasTimeLimit\" in locals_for_with?locals_for_with.hasTimeLimit:typeof hasTimeLimit!==\"undefined\"?hasTimeLimit:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView    = require(\"views/base/game\")\ncontainer   = require(\"./components/container\")\nPreloader   = require(\"lib/preload\")\n\nclass GameImageWordMatchView extends GameView\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap .play-game\": \"enterGame\"\n    \"iostap .goto-next\": \"next\"\n    \"iostap  .btn-word\": \"checkAnswer\"\n\n  initializeData: ->\n    super\n\n    @game.extra.set(\"fullscreen\", true)\n    @game.extra.set(\"sounds\", true)\n\n    images = _.chain(@options.data.images)\n      .map((m) ->\n        m.imageType = \"image\" if not m.imageType or m.imageType is \"\"\n        m\n      )\n      .filter((m) -> m.title and m.title isnt \"\")\n      .value()\n    @setArray images, \"images\"\n    toLoad = _.chain(images).where({imageType: \"image\"}).pluck(\"image\").value()\n\n    return unless toLoad.length\n\n    Preloader.load toLoad, (errors) =>\n      @setArray _.reject(images, (m) -> errors.indexOf(m.image) > -1), \"images\"\n\n  initializeElements: ->\n    super\n    @setEl @findOne(\".game-box\"), \"container\"\n\n  startGame: ->\n    @game.timer.timestamp = Date.now()\n    @answeredCount = 0\n\n    super\n\n  showNext: (isFirstRun) ->\n    image = @getRandom(\"images\")\n\n    @game.timer.timestamp = Date.now()\n\n    @getEl(\"container\").innerHTML = container _.extend {}, @options.data,\n      image: image\n      words: _.chain(@getArray(\"images\"))\n        .pluck(\"title\")\n        .without(image.title)\n        .uniq()\n        .sample(2)\n        .concat(image.title)\n        .shuffle()\n        .value()\n\n    @getEl(\"container\").offsetTop\n    @getEl(\"container\").classList.remove(\"hidden\")\n\n  checkAnswer: (e) ->\n    return if @game.timer.get(\"paused\")\n\n    {word, isCorrect} = e.currentTarget.dataset\n\n    if isCorrect?\n      @onCorrectAnswer(score: 500, time: 1000, tally: true)\n    else\n      @onIncorrectAnswer(time: 300, tally: true)\n\n    @getEl(\"container\").classList.add(\"hidden\")\n\n    @answeredCount += 1\n\n    window.setTimeout (=>\n      if @game.timer.get(\"isDisabled\") and @answeredCount is @getArray(\"images\").length\n        @endGame()\n        return\n\n      @showNext()\n    ), 1200\n\nmodule.exports = GameImageWordMatchView\n","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (categories, undefined) {\nvar col = 12 / categories.length;\nvar klass = \"col-sm-\" + col + \" col-md-\" + col;\nbuf.push(\"<div class=\\\"content-ver block-v-md\\\"><div class=\\\"row text-center\\\">\");\n// iterate categories\n;(function(){\n  var $$obj = categories;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var category = $$obj[i];\n\nbuf.push(\"<h2\" + (jade.cls(['tight','game-category-title',klass], [null,null,true])) + \"><div class=\\\"content-ver\\\">\" + (null == (jade_interp = category.title) ? \"\" : jade_interp) + \"</div></h2>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var category = $$obj[i];\n\nbuf.push(\"<h2\" + (jade.cls(['tight','game-category-title',klass], [null,null,true])) + \"><div class=\\\"content-ver\\\">\" + (null == (jade_interp = category.title) ? \"\" : jade_interp) + \"</div></h2>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div><div class=\\\"row text-center\\\">\");\n// iterate categories\n;(function(){\n  var $$obj = categories;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var category = $$obj[i];\n\nbuf.push(\"<div\" + (jade.cls(['game-category',klass], [null,true])) + \"><div class=\\\"block-v-sm\\\">\");\n// iterate category.questions\n;(function(){\n  var $$obj = category.questions;\n  if ('number' == typeof $$obj.length) {\n\n    for (var j = 0, $$l = $$obj.length; j < $$l; j++) {\n      var question = $$obj[j];\n\nbuf.push(\"<div\" + (jade.attr(\"data-category\", i, true, false)) + (jade.attr(\"data-question\", j, true, false)) + \" class=\\\"btn-question block-v-sm\\\"><div\" + (jade.attr(\"data-category\", i, true, false)) + (jade.attr(\"data-question\", j, true, false)) + (jade.cls(['block-md','block-dk',\"stars-\" + (j + 1) + \"\"], [null,null,true])) + \"><div\" + (jade.attr(\"data-category\", i, true, false)) + (jade.attr(\"data-question\", j, true, false)) + \" class=\\\"text-lg\\\">\" + (jade.escape(null == (jade_interp = (j + 1) * 200) ? \"\" : jade_interp)) + \"</div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var j in $$obj) {\n      $$l++;      var question = $$obj[j];\n\nbuf.push(\"<div\" + (jade.attr(\"data-category\", i, true, false)) + (jade.attr(\"data-question\", j, true, false)) + \" class=\\\"btn-question block-v-sm\\\"><div\" + (jade.attr(\"data-category\", i, true, false)) + (jade.attr(\"data-question\", j, true, false)) + (jade.cls(['block-md','block-dk',\"stars-\" + (j + 1) + \"\"], [null,null,true])) + \"><div\" + (jade.attr(\"data-category\", i, true, false)) + (jade.attr(\"data-question\", j, true, false)) + \" class=\\\"text-lg\\\">\" + (jade.escape(null == (jade_interp = (j + 1) * 200) ? \"\" : jade_interp)) + \"</div></div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var category = $$obj[i];\n\nbuf.push(\"<div\" + (jade.cls(['game-category',klass], [null,true])) + \"><div class=\\\"block-v-sm\\\">\");\n// iterate category.questions\n;(function(){\n  var $$obj = category.questions;\n  if ('number' == typeof $$obj.length) {\n\n    for (var j = 0, $$l = $$obj.length; j < $$l; j++) {\n      var question = $$obj[j];\n\nbuf.push(\"<div\" + (jade.attr(\"data-category\", i, true, false)) + (jade.attr(\"data-question\", j, true, false)) + \" class=\\\"btn-question block-v-sm\\\"><div\" + (jade.attr(\"data-category\", i, true, false)) + (jade.attr(\"data-question\", j, true, false)) + (jade.cls(['block-md','block-dk',\"stars-\" + (j + 1) + \"\"], [null,null,true])) + \"><div\" + (jade.attr(\"data-category\", i, true, false)) + (jade.attr(\"data-question\", j, true, false)) + \" class=\\\"text-lg\\\">\" + (jade.escape(null == (jade_interp = (j + 1) * 200) ? \"\" : jade_interp)) + \"</div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var j in $$obj) {\n      $$l++;      var question = $$obj[j];\n\nbuf.push(\"<div\" + (jade.attr(\"data-category\", i, true, false)) + (jade.attr(\"data-question\", j, true, false)) + \" class=\\\"btn-question block-v-sm\\\"><div\" + (jade.attr(\"data-category\", i, true, false)) + (jade.attr(\"data-question\", j, true, false)) + (jade.cls(['block-md','block-dk',\"stars-\" + (j + 1) + \"\"], [null,null,true])) + \"><div\" + (jade.attr(\"data-category\", i, true, false)) + (jade.attr(\"data-question\", j, true, false)) + \" class=\\\"text-lg\\\">\" + (jade.escape(null == (jade_interp = (j + 1) * 200) ? \"\" : jade_interp)) + \"</div></div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div>\");}.call(this,\"categories\" in locals_for_with?locals_for_with.categories:typeof categories!==\"undefined\"?categories:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (answers, i18n, question, stars) {\nbuf.push(\"<div class=\\\"content-ver text-center\\\"><div class=\\\"text-md block-v-lg\\\"><h2>\" + (null == (jade_interp = question.content) ? \"\" : jade_interp) + \"</h2></div><div class=\\\"block-v-md row\\\"><div class=\\\"col-md-3 col-md-offset-3 col-sm-6\\\"><div\" + (jade.attr(\"data-question-id\", question.id, true, false)) + (jade.attr(\"data-answer-id\", answers.false.id, true, false)) + (jade.attr(\"data-is-correct\", (answers.false.correct), true, false)) + (jade.attr(\"data-stars\", stars, true, false)) + \" class=\\\"btn btn-solid btn-block btn-check\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game-jeopardy.is-false\")) ? \"\" : jade_interp)) + \"</div></div><div class=\\\"col-md-3 col-sm-6\\\"><div\" + (jade.attr(\"data-question-id\", question.id, true, false)) + (jade.attr(\"data-answer-id\", answers.true.id, true, false)) + (jade.attr(\"data-is-correct\", (answers.true.correct), true, false)) + (jade.attr(\"data-stars\", stars, true, false)) + \" class=\\\"btn btn-solid btn-block btn-check\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game-jeopardy.is-true\")) ? \"\" : jade_interp)) + \"</div></div></div></div>\");}.call(this,\"answers\" in locals_for_with?locals_for_with.answers:typeof answers!==\"undefined\"?answers:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"question\" in locals_for_with?locals_for_with.question:typeof question!==\"undefined\"?question:undefined,\"stars\" in locals_for_with?locals_for_with.stars:typeof stars!==\"undefined\"?stars:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","module.exports = {\"title\":\"game-jeopardy\",\"display\":\"Jeopardy\",\"category\":\"Game\",\"features\":{\"stars\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"Jeopardy\"},\"description\":{\"type\":\"html\",\"default\":\"How many stars can you earn? Choose questions from one of three topics. Harder questions will earn you more stars, but answer any question incorrectly and its game over!\\n\"},\"categories\":{\"min\":3,\"max\":3,\"type\":[{\"title\":{\"type\":\"html\",\"display\":\"Category\"},\"questions\":{\"min\":5,\"max\":5,\"type\":[{\"mix\":{\"min\":1,\"max\":3,\"type\":[{\"text\":{\"type\":\"html\"},\"true\":{\"type\":\"boolean\",\"display\":\"Correct\"}}]}}]},\"help\":\"Add at least five questions to each category, starting with the easiest worth 200 points.\\n\"}]},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":20000,\"min\":1,\"display\":\"Time Limit (seconds)\"},\"isDisabled\":{\"type\":\"boolean\",\"default\":false,\"display\":\"Disable\",\"help\":\"If the timer is disabled, the game ends at the first wrong answer or until all questions are answered.\\n\"}},\"stars\":{\"min\":{\"type\":\"int\",\"default\":1000,\"display\":\"1 Star\"},\"max\":{\"type\":\"int\",\"default\":1000,\"display\":\"All Stars\"},\"help\":\"Number of points required to earn stars.\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Select a question from any category\"},\"doneText\":{\"display\":\"Done text\",\"type\":\"html\",\"default\":\"Move on\"}},\"examples\":[{\"subtype\":\"jeopardy\",\"title\":\"Jeopardy\",\"description\":\"How many stars can you earn? Choose questions from one of three topics. Harder questions will earn you more stars, but answer any question incorrectly and its game over!\\n\",\"prompt\":\"Select a question from any category\",\"categories\":[{\"title\":\"Category 1\",\"questions\":[{\"mix\":[{\"text\":\"Question 1\",\"true\":true},{\"text\":\"Question 2\",\"true\":false},{\"text\":\"Question 3\",\"true\":true}]},{\"mix\":[{\"text\":\"Question 1\",\"true\":true},{\"text\":\"Question 2\",\"true\":false},{\"text\":\"Question 3\",\"true\":true}]},{\"mix\":[{\"text\":\"Question 1\",\"true\":true},{\"text\":\"Question 2\",\"true\":false},{\"text\":\"Question 3\",\"true\":true}]},{\"mix\":[{\"text\":\"Question 1\",\"true\":true},{\"text\":\"Question 2\",\"true\":false},{\"text\":\"Question 3\",\"true\":true}]},{\"mix\":[{\"text\":\"Question 1\",\"true\":true},{\"text\":\"Question 2\",\"true\":false},{\"text\":\"Question 3\",\"true\":true}]}]},{\"title\":\"Category 2\",\"questions\":[{\"mix\":[{\"text\":\"Question 1\",\"true\":true},{\"text\":\"Question 2\",\"true\":false},{\"text\":\"Question 3\",\"true\":true}]},{\"mix\":[{\"text\":\"Question 1\",\"true\":true},{\"text\":\"Question 2\",\"true\":false},{\"text\":\"Question 3\",\"true\":true}]},{\"mix\":[{\"text\":\"Question 1\",\"true\":true},{\"text\":\"Question 2\",\"true\":false},{\"text\":\"Question 3\",\"true\":true}]},{\"mix\":[{\"text\":\"Question 1\",\"true\":true},{\"text\":\"Question 2\",\"true\":false},{\"text\":\"Question 3\",\"true\":true}]},{\"mix\":[{\"text\":\"Question 1\",\"true\":true},{\"text\":\"Question 2\",\"true\":false},{\"text\":\"Question 3\",\"true\":true}]}]},{\"title\":\"Category 3\",\"questions\":[{\"mix\":[{\"text\":\"Question 1\",\"true\":true},{\"text\":\"Question 2\",\"true\":false},{\"text\":\"Question 3\",\"true\":true}]},{\"mix\":[{\"text\":\"Question 1\",\"true\":true},{\"text\":\"Question 2\",\"true\":false},{\"text\":\"Question 3\",\"true\":true}]},{\"mix\":[{\"text\":\"Question 1\",\"true\":true},{\"text\":\"Question 2\",\"true\":false},{\"text\":\"Question 3\",\"true\":true}]},{\"mix\":[{\"text\":\"Question 1\",\"true\":true},{\"text\":\"Question 2\",\"true\":false},{\"text\":\"Question 3\",\"true\":true}]},{\"mix\":[{\"text\":\"Question 1\",\"true\":true},{\"text\":\"Question 2\",\"true\":false},{\"text\":\"Question 3\",\"true\":true}]}]}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (description, doneText, hasStars, hasTimeLimit, i18n, prompt, title) {\nbuf.push(\"<div class=\\\"content-intro content-fill content-fit\\\"><div class=\\\"block-v-lg text-center content\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><h1 class=\\\"tight\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"text-lg block-v-lg\\\">\" + (null == (jade_interp = description) ? \"\" : jade_interp) + \"</div><div class=\\\"btn btn-solid play-game\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.play-game\")) ? \"\" : jade_interp)) + \"</div></div></div></div></div><div class=\\\"content-outro\\\"><div class=\\\"content-fill\\\"><div class=\\\"block-v-lg text-center content\\\"><h1>\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><div class=\\\"row\\\"><div\" + (jade.cls(['col-sm-6','col-md-4','block-v-md',hasStars ? \"\" : \"col-md-offset-2\"], [null,null,null,true])) + \"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"white-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-score\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-total tight\\\">?</h1></div></div><div class=\\\"col-sm-6 col-md-4 block-v-md\\\"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"grey-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-best\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-record tight\\\">?</h1></div></div>\");\nif ( hasStars)\n{\nbuf.push(\"<div class=\\\"col-sm-12 col-md-4 block-v-md\\\"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"grey-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-stars\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-stars tight\\\">?<sup class=\\\"stars-total\\\"></sup></h1></div></div>\");\n}\nbuf.push(\"</div><div class=\\\"row block-v-md\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2 block-md\\\"><div class=\\\"btn btn-solid btn-block play-game\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.play-again\")) ? \"\" : jade_interp)) + \"</div></div></div></div></div></div></div><div class=\\\"slide-footer block-v-lg\\\"><div class=\\\"btn btn-muted goto-next fade-in\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div></div><div class=\\\"content-playing\\\"><div class=\\\"full-screen content-fill\\\"><div class=\\\"game-state block-h-lg\\\"><div class=\\\"game-state-inner row block-v-lg\\\"><div class=\\\"game-state-text col-md-6 col-sm-6\\\">\");\nif ( hasTimeLimit)\n{\nbuf.push(\"\" + (jade.escape((jade_interp = i18n(\"game.labels.timer\")) == null ? '' : jade_interp)) + \"\\n&ensp;<strong class=\\\"game-timer text-lg text-bold\\\"></strong>\");\n}\nbuf.push(\"</div><div class=\\\"game-state-text col-md-6 col-sm-6 text-right\\\">\" + (jade.escape((jade_interp = i18n(\"game.labels.score\")) == null ? '' : jade_interp)) + \"\\n&ensp;<strong class=\\\"game-score text-lg text-bold\\\"></strong><strong class=\\\"game-tally\\\"></strong></div></div></div>\");\nif ( hasTimeLimit)\n{\nbuf.push(\"<div class=\\\"game-stepper\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div>\");\n}\nif ( hasTimeLimit)\n{\nbuf.push(\"<div class=\\\"game-bonus-time\\\"></div>\");\n}\nbuf.push(\"</div><div class=\\\"content-fill\\\"><div class=\\\"game-box content-fill\\\"><div class=\\\"game-menu content-fill\\\"></div><div class=\\\"game-question content-fill\\\"></div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\"><div class=\\\"slide-footer-prompt text-bold text-uppercase\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div></div>\");}.call(this,\"description\" in locals_for_with?locals_for_with.description:typeof description!==\"undefined\"?description:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasStars\" in locals_for_with?locals_for_with.hasStars:typeof hasStars!==\"undefined\"?hasStars:undefined,\"hasTimeLimit\" in locals_for_with?locals_for_with.hasTimeLimit:typeof hasTimeLimit!==\"undefined\"?hasTimeLimit:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView   = require(\"views/base/game\")\nPreloader  = require(\"lib/preload\")\nEasie      = require(\"lib/easie\")\n\nclass GameJeopardyView extends GameView\n  templates:\n    default: require(\"./template\")\n    menu: require(\"./components/menu\")\n    question: require(\"./components/question\")\n\n  events: ->\n    \"iostap .play-game\": \"enterGame\"\n    \"iostap .goto-next\": \"next\"\n    \"iostap .btn-question\": \"showQuestion\"\n    \"iostap .btn-check\": \"checkAnswer\"\n\n  initializeData: ->\n    super\n\n    @guesses = []\n\n    @game.extra.set(\"fullscreen\", true)\n    @game.extra.set(\"sounds\", true)\n\n    { metadata, data } = @options\n\n    categories = _.chain(metadata.questions)\n      .groupBy(({ question }) -> question.category)\n      .map((unOrderedQuestions, title) -> { title, unOrderedQuestions })\n      .value()\n\n    # Determine format of category questions from data, id/text from metadata\n    for category, i in categories\n      categories[i].questions = []\n\n      for { mix }, j in data.categories[i]?.questions\n        categories[i].questions[j] ?= mix: []\n        for q in mix\n          categories[i].questions[j].mix.push(categories[i].unOrderedQuestions.shift())\n\n    @questionsDict = _.chain(metadata.questions)\n      .pluck('question')\n      .indexBy('id')\n      .value()\n    @answersDict = _.chain(metadata.questions)\n      .pluck('answers')\n      .flatten()\n      .indexBy('id')\n      .value()\n\n    @setArray(\"categories\", categories)\n\n  initializeElements: ->\n    super\n\n    @setEl @findOne(\".game-menu\"), \"menu\"\n    @setEl @findOne(\".game-question\"), \"question\"\n\n  showNext: (isInitial) ->\n    @getEl(\"menu\").innerHTML = @templates.menu\n      categories: @getArray(\"categories\")\n\n    @setEl(@getEl(\"menu\").\n      querySelectorAll(\".btn-question\"), \"questions\")\n\n  showQuestion: (e) ->\n    return if @game.timer.get(\"paused\")\n\n    { category, question } = e.currentTarget.dataset\n\n    questions =\n      @getArray(\"categories\")[parseInt(category)]\n        .questions[parseInt(question)].mix\n    randomQuestion = _.sample(questions)\n    [trueAnswer, falseAnswer] = _.partition randomQuestion.answers, (a) -> a.content == \"true\" || a.content == \"True\"\n    [trueAnswer, falseAnswer].map (a) -> a[0].content = a[0].content.toString()\n\n    e.currentTarget.classList.add \"question-answered\"\n\n    @getEl(\"question\").innerHTML = @templates.question\n      question: randomQuestion.question\n      answers:\n        true: trueAnswer[0]\n        false: falseAnswer[0]\n      stars: +question + 1\n\n    @getEl(\"question\").offsetLeft\n\n    @el.classList.add(\"show-question\")\n\n  checkAnswer: (e) ->\n    el = e.currentTarget\n    { questionId, answerId, stars } = el.dataset\n    question = @questionsDict[questionId]\n    answer = @answersDict[answerId]\n\n    @guesses.push(question, answer)\n\n    return if @game.timer.get(\"paused\") or\n              not @el.classList.contains(\"show-question\")\n\n    @el.classList.remove(\"show-question\")\n\n    isCorrect = answer?.correct\n\n    isComplete =\n      _.chain(@getEl(\"questions\"))\n        .filter((el) ->\n          not el.classList.contains(\"question-answered\")\n        ).isEmpty()\n        .value()\n\n    if isCorrect\n      @onCorrectAnswer\n        score: 200 * stars\n        time:  4000\n        tally: true\n\n    if isComplete or not isCorrect\n      @endGame()\n\n  answerDetails: ->\n    if @options?.metadata?.questions?.length > 0\n      @guesses\n    else\n      []\n\nmodule.exports = GameJeopardyView\n","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (Array, complete, i18n, ids, image, letters, undefined, word) {\njade_mixins[\"image\"] = jade_interp = function(imageUrl, klass){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nbuf.push(\"<img\" + (jade.attr(\"src\", imageUrl, true, false)) + (jade.cls([klass], [true])) + \"/>\");\n};\njade_mixins[\"image\"] = jade_interp = function(imageUrl, klass){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nbuf.push(\"<img\" + (jade.attr(\"src\", imageUrl, true, false)) + (jade.cls([klass], [true])) + \"/>\");\n};\nvar klass = \"jumble-answer-\" + word.toLowerCase();\nvar multiline = /[\\s-]/.test(word) && word.length > 7;\nif (multiline) klass += \" multiline\";\nbuf.push(\"<div class=\\\"jumble-top\\\"><div class=\\\"jumble-top-content block-h-xl\\\"><div class=\\\"block-v-md\\\"><div class=\\\"jumble-image-container block-lt block-v-sm\\\">\");\njade_mixins[\"image\"](image,'jumble-image content-ver');\nbuf.push(\"<div class=\\\"jumble-masks\\\">\");\n// iterate (new Array(60))\n;(function(){\n  var $$obj = (new Array(60));\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var m = $$obj[$index];\n\nbuf.push(\"<div class=\\\"jumble-mask\\\"></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var m = $$obj[$index];\n\nbuf.push(\"<div class=\\\"jumble-mask\\\"></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div><div\" + (jade.cls(['jumble-answer','block-v-sm',klass], [null,null,true])) + \">\");\n// iterate word\n;(function(){\n  var $$obj = word;\n  if ('number' == typeof $$obj.length) {\n\n    for (var j = 0, $$l = $$obj.length; j < $$l; j++) {\n      var letter = $$obj[j];\n\nvar i = complete.indexOf(letter);\nif ( /[\\s-]/.test(letter))\n{\nif ( multiline)\n{\nif ( letter != \" \")\n{\nbuf.push(\"<div class=\\\"droppy-complete\\\">\" + (jade.escape(null == (jade_interp = letter) ? \"\" : jade_interp)) + \"</div><div class=\\\"line-br-sm\\\"></div>\");\n}\nelse\n{\nbuf.push(\"<br/>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"droppy-complete\\\">&nbsp;</div>\");\n}\n}\nelse if ( i > -1)\n{\ncomplete[i] = null;\nbuf.push(\"<div class=\\\"droppy-complete\\\"><div class=\\\"letter\\\">\" + (jade.escape(null == (jade_interp = letter) ? \"\" : jade_interp)) + \"</div></div>\");\n}\nelse\n{\nbuf.push(\"<div\" + (jade.attr(\"data-letter\", letter, true, false)) + \" class=\\\"droppy\\\"><div class=\\\"letter\\\">&nbsp;</div></div>\");\n}\n    }\n\n  } else {\n    var $$l = 0;\n    for (var j in $$obj) {\n      $$l++;      var letter = $$obj[j];\n\nvar i = complete.indexOf(letter);\nif ( /[\\s-]/.test(letter))\n{\nif ( multiline)\n{\nif ( letter != \" \")\n{\nbuf.push(\"<div class=\\\"droppy-complete\\\">\" + (jade.escape(null == (jade_interp = letter) ? \"\" : jade_interp)) + \"</div><div class=\\\"line-br-sm\\\"></div>\");\n}\nelse\n{\nbuf.push(\"<br/>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"droppy-complete\\\">&nbsp;</div>\");\n}\n}\nelse if ( i > -1)\n{\ncomplete[i] = null;\nbuf.push(\"<div class=\\\"droppy-complete\\\"><div class=\\\"letter\\\">\" + (jade.escape(null == (jade_interp = letter) ? \"\" : jade_interp)) + \"</div></div>\");\n}\nelse\n{\nbuf.push(\"<div\" + (jade.attr(\"data-letter\", letter, true, false)) + \" class=\\\"droppy\\\"><div class=\\\"letter\\\">&nbsp;</div></div>\");\n}\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div><div class=\\\"jumble-letters block-md clearfix\\\"><h4 class=\\\"jumble-prompt text-md-left block-sm\\\">\" + (jade.escape((jade_interp = i18n(\"game-jumble.drag-letters\")) == null ? '' : jade_interp)) + \"</h4>\");\n// iterate letters\n;(function(){\n  var $$obj = letters;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var letter = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-id\", ids[i], true, false)) + (jade.attr(\"data-letter\", letter, true, false)) + (jade.cls(['draggy','bold',\"draggy-\" + (i) + \"\"], [null,null,true])) + \"><div class=\\\"letter\\\">\" + (jade.escape(null == (jade_interp = letter) ? \"\" : jade_interp)) + \"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var letter = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-id\", ids[i], true, false)) + (jade.attr(\"data-letter\", letter, true, false)) + (jade.cls(['draggy','bold',\"draggy-\" + (i) + \"\"], [null,null,true])) + \"><div class=\\\"letter\\\">\" + (jade.escape(null == (jade_interp = letter) ? \"\" : jade_interp)) + \"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");}.call(this,\"Array\" in locals_for_with?locals_for_with.Array:typeof Array!==\"undefined\"?Array:undefined,\"complete\" in locals_for_with?locals_for_with.complete:typeof complete!==\"undefined\"?complete:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"ids\" in locals_for_with?locals_for_with.ids:typeof ids!==\"undefined\"?ids:undefined,\"image\" in locals_for_with?locals_for_with.image:typeof image!==\"undefined\"?image:undefined,\"letters\" in locals_for_with?locals_for_with.letters:typeof letters!==\"undefined\"?letters:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined,\"word\" in locals_for_with?locals_for_with.word:typeof word!==\"undefined\"?word:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","module.exports = {\"title\":\"game-jumble\",\"display\":\"Letter Jumble\",\"category\":\"Game\",\"features\":{\"stars\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"Letter Jumble\"},\"description\":{\"type\":\"html\",\"default\":\"Drag the letters to spell words related to each image. Each correct answer will reward extra time to complete more words and earn more points.\\n\"},\"words\":{\"min\":3,\"max\":20,\"type\":[{\"image\":{\"type\":\"image\"},\"word\":{\"type\":\"html\"}}]},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":20000,\"min\":1,\"display\":\"Time Limit (seconds)\"},\"isDisabled\":{\"type\":\"boolean\",\"default\":false,\"display\":\"Disable\",\"help\":\"If the timer is disabled, the game ends after one round has been played for each word.\\n\"}},\"stars\":{\"min\":{\"type\":\"int\",\"default\":1000,\"display\":\"1 Star\"},\"max\":{\"type\":\"int\",\"default\":1000,\"display\":\"All Stars\"},\"help\":\"Number of points required to earn stars.\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Drag the letters to the word above\"},\"doneText\":{\"display\":\"Done text\",\"type\":\"html\",\"default\":\"Move on\"}},\"examples\":[{\"subtype\":\"jumble\",\"title\":\"Letter Jumble\",\"description\":\"Drag the letters to spell words related to each image. Each correct answer will reward extra time to complete more words and earn more points.\\n\",\"prompt\":\"Snag the letters to the word above\",\"words\":[{\"image\":\"img/examples/product-phone.png\",\"word\":\"Wireless charging\"},{\"image\":\"img/examples/product-laptop.png\",\"word\":\"Retina display\"},{\"image\":\"img/examples/product-tablet.png\",\"word\":\"Touch screen\"}],\"challenge_configuration\":{\"nb_stars\":5}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (description, doneText, hasStars, hasTimeLimit, i18n, title) {\nbuf.push(\"<div class=\\\"content-intro content-fill content-fit\\\"><div class=\\\"block-v-lg text-center content\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><h1 class=\\\"tight\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"text-lg block-v-lg\\\">\" + (null == (jade_interp = description) ? \"\" : jade_interp) + \"</div><div class=\\\"btn btn-solid play-game\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.play-game\")) ? \"\" : jade_interp)) + \"</div></div></div></div></div><div class=\\\"content-outro\\\"><div class=\\\"content-fill\\\"><div class=\\\"block-v-lg text-center content\\\"><h1>\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><div class=\\\"row\\\"><div\" + (jade.cls(['col-sm-6','col-md-4','block-v-md',hasStars ? \"\" : \"col-md-offset-2\"], [null,null,null,true])) + \"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"white-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-score\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-total tight\\\">?</h1></div></div><div class=\\\"col-sm-6 col-md-4 block-v-md\\\"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"grey-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-best\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-record tight\\\">?</h1></div></div>\");\nif ( hasStars)\n{\nbuf.push(\"<div class=\\\"col-sm-12 col-md-4 block-v-md\\\"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"grey-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-stars\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-stars tight\\\">?<sup class=\\\"stars-total\\\"></sup></h1></div></div>\");\n}\nbuf.push(\"</div><div class=\\\"row block-v-md\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2 block-md\\\"><div class=\\\"btn btn-solid btn-block play-game\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.play-again\")) ? \"\" : jade_interp)) + \"</div></div></div></div></div></div></div><div class=\\\"slide-footer block-v-lg\\\"><div class=\\\"btn btn-muted goto-next fade-in\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div></div><div class=\\\"content-playing\\\"><div class=\\\"full-screen\\\"><div class=\\\"game-state block-h-lg\\\"><div class=\\\"game-state-inner row block-v-lg\\\"><div class=\\\"game-state-text col-md-6 col-sm-6\\\">\");\nif ( hasTimeLimit)\n{\nbuf.push(\"\" + (jade.escape((jade_interp = i18n(\"game.labels.timer\")) == null ? '' : jade_interp)) + \"\\n&ensp;<strong class=\\\"game-timer text-lg text-bold\\\"></strong>\");\n}\nbuf.push(\"</div><div class=\\\"game-state-text col-md-6 col-sm-6 text-right\\\">\" + (jade.escape((jade_interp = i18n(\"game.labels.score\")) == null ? '' : jade_interp)) + \"\\n&ensp;<strong class=\\\"game-score text-lg text-bold\\\"></strong><strong class=\\\"game-tally\\\"></strong></div></div></div>\");\nif ( hasTimeLimit)\n{\nbuf.push(\"<div class=\\\"game-stepper\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div>\");\n}\nif ( hasTimeLimit)\n{\nbuf.push(\"<div class=\\\"game-bonus-time\\\"></div>\");\n}\nbuf.push(\"<div class=\\\"game-box content-fill text-center\\\"></div></div></div>\");}.call(this,\"description\" in locals_for_with?locals_for_with.description:typeof description!==\"undefined\"?description:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasStars\" in locals_for_with?locals_for_with.hasStars:typeof hasStars!==\"undefined\"?hasStars:undefined,\"hasTimeLimit\" in locals_for_with?locals_for_with.hasTimeLimit:typeof hasTimeLimit!==\"undefined\"?hasTimeLimit:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView    = require(\"views/base/game\")\n{ DraggyView } = require(\"views/components/draggy\")\ncontainer   = require(\"./components/container\")\ntheAlphabet = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\".split(\"\")\n\nclass GameJumbleView extends GameView\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap .play-game\": \"enterGame\"\n    \"iostap .goto-next\": \"next\"\n\n  initializeData: ->\n    super\n\n    @game.extra.set(\"fullscreen\", true)\n    @game.extra.set(\"sounds\", true)\n\n    words = _.compact _.map @options.data.words, (m) ->\n      if _.isString(m.word) and m.word isnt \"\"\n        # Remove html tags from the words\n        m.word = m.word.replace(/<\\/?[^>]+(>|$)/g, \"\")\n        m.word = _.unescape m.word\n        m\n      else\n        null\n\n    @setArray words, \"words\"\n\n  initializeElements: ->\n    super\n    @setEl @findOne(\".game-box\"), \"container\"\n\n  startGame: ->\n    @displayMaskedImage()\n    @game.timer.timestamp = Date.now()\n    draggy.unlock() for draggy in @draggies\n\n    @answeredCount = 0\n\n    super\n\n  showNext: (isFirstRun) ->\n    {word, image} = @getRandom(\"words\")\n    word          = word.toUpperCase()\n    letters       = @getRandomLetters(_.without(word.split(\"\"), \" \"))\n    difficulty    = @getDifficulty()\n    remaining     = word.length - 1\n\n    @game.timer.timestamp = Date.now()\n    complete =\n      while letters.length > difficulty and remaining > 0\n        letter = _.sample(letters)\n        lettersWithoutFirstLetter =\n          _.filter(letters, (l, i, a) -> a.indexOf(letter) isnt i)\n        if _.intersection(letters, lettersWithoutFirstLetter).length is 0\n          continue\n        letters = lettersWithoutFirstLetter\n        remaining -= 1\n        letter\n    while letters.length < Math.min(difficulty + _.random(1, 2), 6)\n      letters.push(_.sample(theAlphabet))\n\n    ids =\n      for letter in letters\n        Math.random().toString(16).slice(2)\n\n    @getEl(\"container\").innerHTML = container\n      ids: ids\n      word: word\n      image: image\n      letters: _.shuffle(letters)\n      complete: complete\n\n    @setEl(@findAll(\".jumble-mask\"), \"masks\")\n\n    @droppies = @getElements(\".droppy\")\n\n    @draggies =\n      for el in @findAll(\".draggy\")\n        draggy = new DraggyView({el})\n        @listenTo draggy, \"drag\", @onDrag\n        @listenTo draggy, \"drop\", @onDrop\n        draggy.lock() if isFirstRun\n        draggy\n\n    @displayMaskedImage() unless isFirstRun\n    @displayLetters()\n    @displayDraggies()\n\n    @getEl(\"container\").offsetTop\n\n    @transform @getEl(\"container\"),\n      opacity: 1\n      transition: \"opacity 300ms\"\n\n  displayMaskedImage:  ->\n    for el, i in _.shuffle(@getEl(\"masks\"))\n      @transform el,\n        opacity: 0\n        transition: \"opacity 300ms #{i * (5000 / @getEl(\"masks\").length)}ms\"\n\n  displayLetters: ->\n    for el in @findAll(\".jumble-answer, .jumble-letters\")\n      for child, i in el.querySelectorAll(\".letter\")\n        @transition child, \"all 300ms #{i * 50}ms\", true\n        child.classList.add \"visible\"\n\n  displayDraggies: ->\n    for draggy in @draggies\n      @resetDraggy draggy\n\n  getElements: (selector) ->\n    for el in @findAll(selector)\n      el: el\n      bounds: el.getBoundingClientRect()\n\n  onDrag: (draggy, isInitialDrag) ->\n    @droppies    = @getElements(\".droppy\", @droppies) if isInitialDrag\n    activeIndex  = draggy.closest(_.pluck(@droppies, \"bounds\"))\n    activeDroppy = @droppies[activeIndex]\n\n    for droppy, i in @droppies\n      droppy.el.classList.toggle(\"active\", i is activeIndex)\n      droppy.isActive = i is activeIndex\n\n    draggy.el.classList.toggle(\"active-pos\", activeDroppy?)\n\n    for { el } in @draggies when el isnt draggy.el\n      shouldHide = el.dataset.id is activeDroppy?.el.dataset.contains\n      el.classList.toggle \"hidden\", shouldHide\n\n    {x, y} =\n      if activeDroppy\n        @positionFromBounds(draggy, activeDroppy.bounds)\n      else\n        draggy\n\n    @transform draggy.el,\n      x: x\n      y: y\n      scale: if activeDroppy then 1 else 1.4\n      transition: if isInitialDrag or activeDroppy then \"all 300ms\" else \"none\"\n\n    draggy.el.offsetLeft unless isInitialDrag\n\n  onDrop: (draggy) ->\n    droppy = _.findWhere @droppies, isActive: true\n\n    if droppy\n      {x, y} = @positionFromBounds(draggy, droppy.bounds)\n\n    else\n      x = y = 0\n\n    if draggy.x isnt x or draggy.y isnt y\n      draggy.reset({x, y})\n    else\n      @transform draggy.el,\n        x: draggy.x\n        y: draggy.y\n        transition: \"all 300ms\"\n\n      @updateDroppies(draggy)\n      @checkAnswer()\n\n  updateDroppies: (draggy) ->\n    for droppy in @droppies\n      droppy.el.classList.remove(\"active\")\n      containsActive = droppy.el.dataset.contains is draggy.el.dataset.id\n\n      if droppy.isActive\n        draggy.el.classList.add(\"is-positioned\")\n\n        if droppy.el.dataset.contains and not containsActive\n          droppy.isActive = false\n          @resetDraggy @getDraggy(droppy.el.dataset.contains)\n\n        droppy.el.dataset.contains = draggy.el.dataset.id\n\n      else if containsActive\n        delete droppy.el.dataset.contains\n\n  positionFromBounds: (draggy, bounds) ->\n    {left, top, width, height} = draggy.offset\n\n    x: Math.round bounds.left + bounds.width / 2 - left - width / 2\n    y: Math.round bounds.top + bounds.height / 2 - top - height / 2\n\n  resetDraggy: (draggy) ->\n    draggy.reset()\n    draggy.el.classList.remove(\"is-positioned\", \"hidden\", \"active-pos\")\n    @transform draggy.el,\n      rotate: _.random(-8, 8)\n      transition: \"all 300ms\"\n\n  checkAnswer: ->\n    active  = @droppies.filter (droppy) -> droppy.el.dataset.letter\n    correct = active.filter (droppy) =>\n      draggy = @getDraggy(droppy.el.dataset.contains)\n      droppy.el.dataset.letter is draggy?.el.dataset.letter\n\n    if active.length is correct.length\n      draggy.undelegateEvents() for draggy in @draggies\n\n      diff = @game.timer.timestamp - Date.now()\n      over = 5000 + @getDifficulty() * 500\n\n      @onCorrectAnswer\n        score: 1000\n        time: 3000\n        tally: true\n\n      @el.classList.add(\"correct\")\n\n      @transform @getEl(\"container\"),\n        opacity: 0\n        transition: \"opacity 300ms 900ms\"\n\n      window.setTimeout (=>\n        for el in @findAll(\".letter\")\n          el.classList.remove \"visible\"\n      ), 300\n\n      window.setTimeout (=>\n        @el.classList.remove(\"correct\")\n\n        @answeredCount += 1\n\n        if @game.timer.get(\"isDisabled\") and @answeredCount is @getArray(\"words\").length\n          @endGame()\n          return\n        \n        @showNext()\n      ), 1200\n\n  getDraggy: (id) ->\n    (draggy for draggy in @draggies when draggy.el.dataset.id is id)[0]\n\n  getDifficulty: ->\n    Math.floor _.limit(@game.score.get(\"consecutive\") / 1.6, 6, 1)\n\n  getRandomLetters: (word) ->\n    _\n      .chain(theAlphabet)\n      .difference(word)\n      .sample(6 - word.length)\n      .value()\n      .concat(word)\n\nmodule.exports = GameJumbleView\n","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (config, playinline, tiles, undefined) {\njade_mixins[\"video-stream\"] = jade_interp = function(videoUrl, playsinline, controls, klass, poster){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nplayinline = playinline || true\ncontrols = controls || true\nklass = klass || 'video vjs-fluid'\nvar cloudinaryVideoFolderUrl = config.CLOUDINARY_CDN_URL+config.CLOUDINARY_VIDEO_FOLDER\nvar streamUrl = ''\nif ( videoUrl && videoUrl.indexOf(cloudinaryVideoFolderUrl) > -1)\n{\nstreamUrl = videoUrl.replace(cloudinaryVideoFolderUrl, cloudinaryVideoFolderUrl+'sp_full_hd/')\nstreamUrl = streamUrl.replace('.mp4', '.m3u8')\n}\nbuf.push(\"<video\" + (jade.attr(\"webkit-playsinline\", playsinline, true, false)) + (jade.attr(\"controls\", controls, true, false)) + \" preload=\\\"auto\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + (jade.attr(\"poster\", poster, true, false)) + (jade.cls(['video-js',klass], [null,true])) + \"><source\" + (jade.attr(\"src\", videoUrl, true, false)) + \"/>\");\nif ( streamUrl)\n{\nbuf.push(\"<source\" + (jade.attr(\"src\", streamUrl, true, false)) + \"/>\");\n}\nbuf.push(\"</video>\");\n};\njade_mixins[\"image\"] = jade_interp = function(imageUrl, klass){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nbuf.push(\"<img\" + (jade.attr(\"src\", imageUrl, true, false)) + (jade.cls([klass], [true])) + \"/>\");\n};\njade_mixins[\"multi-content\"] = jade_interp = function(prop, obj){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nobj = obj || locals;\nswitch (obj[prop + \"Type\"]){\ncase \"image\":\nbuf.push(\"<div\" + (jade.attr(\"data-content\", obj.image, true, false)) + \" class=\\\"multi-content-wrapper multi-content-wrapper-image block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\">\");\njade_mixins[\"image\"](obj[prop], 'multi-content multi-content-image');\nbuf.push(\"</div></div>\");\n  break;\ncase \"video\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-video block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\">\");\njade_mixins[\"video-stream\"](obj[prop], true, true,\"multi-content multi-content-video block-dk\");\nbuf.push(\"</div></div>\");\n  break;\ncase \"audio\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-audio block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><audio\" + (jade.attr(\"src\", obj[prop], true, false)) + \" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"multi-content multi-content-audio block-dk\\\"></audio></div></div>\");\n  break;\ncase \"iframe\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-iframe block-md block-lt\\\"><div class=\\\"block-sm multi-content-iframe\\\">\");\nvar iframe = obj[prop].match(/<iframe[^<]*<\\/iframe>/)\nif ( iframe)\n{\nbuf.push(null == (jade_interp = iframe[0].replace(/ (width|height)=[\"'\\d\\w]+/g, \"\")) ? \"\" : jade_interp);\n}\nbuf.push(\"</div></div>\");\n  break;\ndefault:\nbuf.push(\"<span class=\\\"multi-content multi-content-text\\\">\" + (null == (jade_interp = obj[prop]) ? \"\" : jade_interp) + \"</span>\");\n  break;\n}\n};\n// iterate tiles\n;(function(){\n  var $$obj = tiles;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var tile = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"data-index\", tile.index, true, false)) + (jade.cls(['tile',\"tile-\" + ((tiles.length / 2)) + \"\"], [null,true])) + \"><div class=\\\"tile-content\\\"><div class=\\\"btn btn-solid tile-front\\\"><div class=\\\"content text-xl\\\">?</div></div><div\" + (jade.cls(['btn','btn-solid','tile-back',tile.klass], [null,null,null,true])) + \">\");\njade_mixins[\"multi-content\"](\"content\", tile);\nbuf.push(\"</div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var tile = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"data-index\", tile.index, true, false)) + (jade.cls(['tile',\"tile-\" + ((tiles.length / 2)) + \"\"], [null,true])) + \"><div class=\\\"tile-content\\\"><div class=\\\"btn btn-solid tile-front\\\"><div class=\\\"content text-xl\\\">?</div></div><div\" + (jade.cls(['btn','btn-solid','tile-back',tile.klass], [null,null,null,true])) + \">\");\njade_mixins[\"multi-content\"](\"content\", tile);\nbuf.push(\"</div></div></div>\");\n    }\n\n  }\n}).call(this);\n}.call(this,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"playinline\" in locals_for_with?locals_for_with.playinline:typeof playinline!==\"undefined\"?playinline:undefined,\"tiles\" in locals_for_with?locals_for_with.tiles:typeof tiles!==\"undefined\"?tiles:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","module.exports = {\"title\":\"game-memory\",\"display\":\"Memory\",\"category\":\"Game\",\"description\":\"Find the matching tiles\",\"features\":{\"stars\":true},\"model\":{\"title\":{\"type\":\"text\",\"default\":\"Find the matching tiles\"},\"description\":{\"type\":\"html\",\"default\":\"Use your memory to find the matching tiles. Tap on a tile to select it and then tap its matching pair.\\n\"},\"tiles\":{\"min\":2,\"max\":4,\"type\":[{\"left\":{\"types\":[\"text\",\"image\"]},\"right\":{\"types\":[\"text\",\"image\"]}}]},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":20000,\"min\":1,\"display\":\"Time Limit (seconds)\"},\"isDisabled\":{\"type\":\"boolean\",\"default\":false,\"display\":\"Disable\",\"help\":\"If the timer is disabled, the game ends after all pairs have been matched.\\n\"}},\"stars\":{\"min\":{\"type\":\"int\",\"default\":1000,\"display\":\"1 Star\"},\"max\":{\"type\":\"int\",\"default\":1000,\"display\":\"All Stars\"},\"help\":\"Number of points required to earn stars.\"}},\"prompt\":{\"type\":\"text\",\"default\":\"Find a pair of matching tiles\"},\"doneText\":{\"display\":\"Done text\",\"type\":\"html\",\"default\":\"Move on\"}},\"examples\":[{\"subtype\":\"memory\",\"tiles\":[{\"left\":\"Pig\",\"right\":\"Pink\"},{\"left\":\"Cow\",\"right\":\"Brown\"},{\"left\":\"Cat\",\"right\":\"Black, white, cream, ginger, brown & different assortments of the aforementioned (tortoiseshell)\\n\"},{\"left\":\"Polar Bear\",\"right\":\"White\"}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (description, doneText, hasStars, hasTimeLimit, i18n, prompt, title) {\nbuf.push(\"<div class=\\\"content-intro content-fill content-fit\\\"><div class=\\\"block-v-lg text-center content\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><h1 class=\\\"tight\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"text-lg block-v-lg\\\">\" + (null == (jade_interp = description) ? \"\" : jade_interp) + \"</div><div class=\\\"btn btn-solid play-game\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.play-game\")) ? \"\" : jade_interp)) + \"</div></div></div></div></div><div class=\\\"content-outro\\\"><div class=\\\"content-fill\\\"><div class=\\\"block-v-lg text-center content\\\"><h1>\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><div class=\\\"row\\\"><div\" + (jade.cls(['col-sm-6','col-md-4','block-v-md',hasStars ? \"\" : \"col-md-offset-2\"], [null,null,null,true])) + \"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"white-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-score\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-total tight\\\">?</h1></div></div><div class=\\\"col-sm-6 col-md-4 block-v-md\\\"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"grey-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-best\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-record tight\\\">?</h1></div></div>\");\nif ( hasStars)\n{\nbuf.push(\"<div class=\\\"col-sm-12 col-md-4 block-v-md\\\"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"grey-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-stars\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-stars tight\\\">?<sup class=\\\"stars-total\\\"></sup></h1></div></div>\");\n}\nbuf.push(\"</div><div class=\\\"row block-v-md\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2 block-md\\\"><div class=\\\"btn btn-solid btn-block play-game\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.play-again\")) ? \"\" : jade_interp)) + \"</div></div></div></div></div></div></div><div class=\\\"slide-footer block-v-lg\\\"><div class=\\\"btn btn-muted goto-next fade-in\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div></div><div class=\\\"content-playing\\\"><div class=\\\"content-fill full-screen\\\"><div class=\\\"game-state block-h-lg\\\"><div class=\\\"game-state-inner row block-v-lg\\\"><div class=\\\"game-state-text col-md-6 col-sm-6\\\">\");\nif ( hasTimeLimit)\n{\nbuf.push(\"\" + (jade.escape((jade_interp = i18n(\"game.labels.timer\")) == null ? '' : jade_interp)) + \"\\n&ensp;<strong class=\\\"game-timer text-lg text-bold\\\"></strong>\");\n}\nbuf.push(\"</div><div class=\\\"game-state-text col-md-6 col-sm-6 text-right\\\">\" + (jade.escape((jade_interp = i18n(\"game.labels.score\")) == null ? '' : jade_interp)) + \"\\n&ensp;<strong class=\\\"game-score text-lg text-bold\\\"></strong><strong class=\\\"game-tally\\\"></strong></div></div></div>\");\nif ( hasTimeLimit)\n{\nbuf.push(\"<div class=\\\"game-stepper\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div>\");\n}\nif ( hasTimeLimit)\n{\nbuf.push(\"<div class=\\\"game-bonus-time\\\"></div>\");\n}\nbuf.push(\"</div><div class=\\\"game-tiles content-fill text-center\\\"></div><div class=\\\"slide-footer slide-up block-v-lg\\\"><div class=\\\"slide-footer-prompt text-uppercase text-bold\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div></div>\");}.call(this,\"description\" in locals_for_with?locals_for_with.description:typeof description!==\"undefined\"?description:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasStars\" in locals_for_with?locals_for_with.hasStars:typeof hasStars!==\"undefined\"?hasStars:undefined,\"hasTimeLimit\" in locals_for_with?locals_for_with.hasTimeLimit:typeof hasTimeLimit!==\"undefined\"?hasTimeLimit:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView = require(\"views/base/game\")\n\nclass GameMemoryView extends GameView\n  templates:\n    default: require(\"./template\")\n    tiles:   require(\"./components/tiles\")\n\n  events: ->\n    \"iostap .play-game\": \"enterGame\"\n    \"iostap .tile\": \"selectTile\"\n    \"iostap .goto-next\": \"next\"\n\n  serialize: ->\n    data = super\n\n    data.tiles = _.chain(data.tiles)\n      .map(({ left, leftType, right, rightType }, i) ->\n        if left? and right?\n          [\n            { content: left,  contentType: leftType,  index: i }\n            { content: right, contentType: rightType, index: i }\n          ]\n        else\n          []\n      )\n      .flatten()\n      .shuffle()\n      .each((t) ->\n        if t.content.length > 20\n          t.klass = \"text-sm\"\n        else if t.content.length < 8\n          t.klass = \"text-lg\"\n      ).value()\n\n    data\n\n  initializeData: ->\n    super\n\n    @game.extra.set(\"fullscreen\", true)\n    @game.extra.set(\"sounds\", true)\n\n  initializeElements: ->\n    super\n\n    @setEl @findOne(\".game-tiles\"), \"container\"\n\n  enterGame: ->\n    @getEl(\"container\").innerHTML = @templates.tiles(@serialize())\n    @setEl @findAll(\".tile\"), \"tiles\"\n    @elements.current = null\n\n    super\n\n  startGame: ->\n    @game.timer.timestamp = Date.now()\n    super\n\n  selectTile: (e) ->\n    prev = @getEl(\"current\")\n    next = e.currentTarget\n    return if @game.timer.get(\"paused\") or next.classList.contains(\"correct\")\n\n    next.classList.toggle(\"active\")\n\n    if prev\n      @compareTiles(prev, next) if next.classList.contains \"active\"\n      @elements.current = null\n    else\n      @setEl(next, \"current\")\n\n  compareTiles: (prev, next) ->\n    if prev isnt next and prev.dataset.index is next.dataset.index\n      prev.classList.add \"correct\"\n      next.classList.add \"correct\"\n      prev.classList.add \"active\"\n      next.classList.add \"active\"\n\n      allTiles   = @getEl(\"tiles\")\n      doneTiles  = (t for t in allTiles when t.classList.contains(\"correct\"))\n      isComplete = doneTiles.length is allTiles.length\n      isCorrect  = true\n\n    else\n      window.setTimeout (->\n        prev.classList.remove \"active\"\n        next.classList.remove \"active\"\n      ), 1000\n\n    if isCorrect\n      @onCorrectAnswer\n        score: 1000\n        tally: true\n\n      @game.timer.timestamp = Date.now()\n\n    if isComplete\n      window.setTimeout (_.bind @endGame, this), 1000\n\n\nmodule.exports = GameMemoryView\n","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (missing, options, sequence, undefined) {\n// iterate options\n;(function(){\n  var $$obj = options;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var image = $$obj[i];\n\nbuf.push(\"<div class=\\\"btn-image-container block-md\\\"><img\" + (jade.attr(\"src\", image, true, false)) + (jade.attr(\"data-is-correct\", image === sequence[missing[0]], true, false)) + (jade.cls(['btn-image',\"delay-\" + (i) + \"\"], [null,true])) + \"/></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var image = $$obj[i];\n\nbuf.push(\"<div class=\\\"btn-image-container block-md\\\"><img\" + (jade.attr(\"src\", image, true, false)) + (jade.attr(\"data-is-correct\", image === sequence[missing[0]], true, false)) + (jade.cls(['btn-image',\"delay-\" + (i) + \"\"], [null,true])) + \"/></div>\");\n    }\n\n  }\n}).call(this);\n}.call(this,\"missing\" in locals_for_with?locals_for_with.missing:typeof missing!==\"undefined\"?missing:undefined,\"options\" in locals_for_with?locals_for_with.options:typeof options!==\"undefined\"?options:undefined,\"sequence\" in locals_for_with?locals_for_with.sequence:typeof sequence!==\"undefined\"?sequence:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (missing, sequence, undefined) {\n// iterate sequence\n;(function(){\n  var $$obj = sequence;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var image = $$obj[i];\n\nvar klass = missing.indexOf(i) > -1 ? \"hidden\" : \"\";\nbuf.push(\"<div class=\\\"next-img-container block-sm\\\"><div\" + (jade.cls(['block-lt','block-sm',klass + \" delay-\" + (i) + \"\"], [null,null,true])) + \"><img\" + (jade.attr(\"src\", image, true, false)) + \" class=\\\"next-img\\\"/></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var image = $$obj[i];\n\nvar klass = missing.indexOf(i) > -1 ? \"hidden\" : \"\";\nbuf.push(\"<div class=\\\"next-img-container block-sm\\\"><div\" + (jade.cls(['block-lt','block-sm',klass + \" delay-\" + (i) + \"\"], [null,null,true])) + \"><img\" + (jade.attr(\"src\", image, true, false)) + \" class=\\\"next-img\\\"/></div></div>\");\n    }\n\n  }\n}).call(this);\n}.call(this,\"missing\" in locals_for_with?locals_for_with.missing:typeof missing!==\"undefined\"?missing:undefined,\"sequence\" in locals_for_with?locals_for_with.sequence:typeof sequence!==\"undefined\"?sequence:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","module.exports = {\"title\":\"game-next-in-order\",\"display\":\"Next in Order\",\"category\":\"Game\",\"features\":{\"stars\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"What comes next?\"},\"description\":{\"type\":\"html\",\"default\":\"Can you remember the correct order? Select the image that completes the following sequence.\\n\"},\"sequence\":{\"min\":3,\"max\":9,\"type\":[{\"type\":\"image\"}]},\"imposters\":{\"min\":0,\"max\":9,\"type\":[{\"type\":\"image\"}],\"help\":\"Imposters are images that don't belong in the sequence.\"},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":20000,\"min\":1,\"display\":\"Time Limit (seconds)\"},\"isDisabled\":{\"type\":\"boolean\",\"default\":false,\"display\":\"Disable\",\"help\":\"If the timer is disabled, the game ends after one sequence is attempted.\\n\"}},\"stars\":{\"min\":{\"type\":\"int\",\"default\":1000,\"display\":\"1 Star\"},\"max\":{\"type\":\"int\",\"default\":1000,\"display\":\"All Stars\"},\"help\":\"Number of points required to earn stars.\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Select the image that is next in order\"},\"doneText\":{\"display\":\"Done text\",\"type\":\"html\",\"default\":\"Move on\"}},\"examples\":[{\"subtype\":\"next-in-order\",\"title\":\"What comes next?\",\"description\":\"Can you remember the correct order? Select the image that completes the following sequence.\\n\",\"prompt\":\"Select the image that is next in order\",\"sequence\":[\"img/examples/product-phone.png\",\"img/examples/product-laptop.png\",\"img/examples/product-tablet.png\"]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (description, doneText, hasStars, hasTimeLimit, i18n, prompt, title) {\nbuf.push(\"<div class=\\\"content-intro content-fill content-fit\\\"><div class=\\\"block-v-lg text-center content\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><h1 class=\\\"tight\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"text-lg block-v-lg\\\">\" + (null == (jade_interp = description) ? \"\" : jade_interp) + \"</div><div class=\\\"btn btn-solid play-game\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.play-game\")) ? \"\" : jade_interp)) + \"</div></div></div></div></div><div class=\\\"content-outro\\\"><div class=\\\"content-fill\\\"><div class=\\\"block-v-lg text-center content\\\"><h1>\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><div class=\\\"row\\\"><div\" + (jade.cls(['col-sm-6','col-md-4','block-v-md',hasStars ? \"\" : \"col-md-offset-2\"], [null,null,null,true])) + \"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"white-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-score\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-total tight\\\">?</h1></div></div><div class=\\\"col-sm-6 col-md-4 block-v-md\\\"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"grey-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-best\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-record tight\\\">?</h1></div></div>\");\nif ( hasStars)\n{\nbuf.push(\"<div class=\\\"col-sm-12 col-md-4 block-v-md\\\"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"grey-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-stars\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-stars tight\\\">?<sup class=\\\"stars-total\\\"></sup></h1></div></div>\");\n}\nbuf.push(\"</div><div class=\\\"row block-v-md\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2 block-md\\\"><div class=\\\"btn btn-solid btn-block play-game\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.play-again\")) ? \"\" : jade_interp)) + \"</div></div></div></div></div></div></div><div class=\\\"slide-footer block-v-lg\\\"><div class=\\\"btn btn-muted goto-next fade-in\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div></div><div class=\\\"content-playing\\\"><div class=\\\"full-screen\\\"><div class=\\\"game-state block-h-lg\\\"><div class=\\\"game-state-inner row block-v-lg\\\"><div class=\\\"game-state-text col-md-6 col-sm-6\\\">\");\nif ( hasTimeLimit)\n{\nbuf.push(\"\" + (jade.escape((jade_interp = i18n(\"game.labels.timer\")) == null ? '' : jade_interp)) + \"\\n&ensp;<strong class=\\\"game-timer text-lg text-bold\\\"></strong>\");\n}\nbuf.push(\"</div><div class=\\\"game-state-text col-md-6 col-sm-6 text-right\\\">\" + (jade.escape((jade_interp = i18n(\"game.labels.score\")) == null ? '' : jade_interp)) + \"\\n&ensp;<strong class=\\\"game-score text-lg text-bold\\\"></strong><strong class=\\\"game-tally\\\"></strong></div></div></div>\");\nif ( hasTimeLimit)\n{\nbuf.push(\"<div class=\\\"game-stepper\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div>\");\n}\nif ( hasTimeLimit)\n{\nbuf.push(\"<div class=\\\"game-bonus-time\\\"></div>\");\n}\nbuf.push(\"<div class=\\\"block-lg content-fill\\\"><div class=\\\"text-center content-fill game-box\\\"><div class=\\\"next-top\\\"><div class=\\\"content-ver\\\"><h4 class=\\\"next-prompt block-lg text-md\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</h4><div class=\\\"next-sequence block-dk block-sm\\\"></div></div></div><div class=\\\"next-options\\\"></div></div></div></div></div>\");}.call(this,\"description\" in locals_for_with?locals_for_with.description:typeof description!==\"undefined\"?description:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasStars\" in locals_for_with?locals_for_with.hasStars:typeof hasStars!==\"undefined\"?hasStars:undefined,\"hasTimeLimit\" in locals_for_with?locals_for_with.hasTimeLimit:typeof hasTimeLimit!==\"undefined\"?hasTimeLimit:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView   = require(\"views/base/game\")\nseqTempl   = require(\"./components/sequence\")\noptTempl   = require(\"./components/options\")\nPreloader  = require(\"lib/preload\")\n\nclass GameNextInOrderView extends GameView\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap .play-game\": \"enterGame\"\n    \"iostap .goto-next\": \"next\"\n    \"iostap .btn-image\": \"checkAnswer\"\n\n  initializeData: ->\n    super\n\n    @game.extra.set(\"fullscreen\", true)\n    @game.extra.set(\"sounds\", true)\n\n    { imposters, sequence } = @options.data\n\n    for key, arr of { imposters, sequence }\n      arr = _.compact(arr)\n      arr = _.filter(arr, _.isString)\n      @setArray key, arr\n\n      Preloader.load arr, (errors = []) =>\n        @setArray key, _.without(arr, errors...)\n\n  initializeElements: ->\n    super\n\n    @setEl @findOne(\".game-box\"), \"container\"\n    @setEl @findOne(\".next-sequence\"), \"sequence\"\n    @setEl @findOne(\".next-options\"), \"options\"\n\n  startGame: ->\n    @game.timer.timestamp = Date.now()\n    super\n\n  showNext: ->\n    @setArray \"missing\",\n      _.chain([0...@getArray(\"sequence\").length])\n        .sample(@getDifficulty())\n        .sortBy(_.identity)\n        .value()\n\n    @continueSequence(true)\n\n  continueSequence: (isFirstRun) ->\n    @game.timer.timestamp = Date.now()\n\n    data = _.extend {}, @options.data,\n      missing: @getArray(\"missing\")\n      options: _\n        .chain(@getArray(\"missing\").slice(1))\n        .map((i) => @getArray(\"sequence\")[i])\n        .concat(@getArray(\"imposters\"))\n        .sample(3)\n        .concat(@getArray(\"sequence\")[@getArray(\"missing\")[0]])\n        .shuffle()\n        .value()\n\n    @getEl(\"options\").innerHTML = optTempl data\n\n    seqEl = @getEl(\"sequence\")\n    if isFirstRun\n      @getEl(\"container\").classList.remove(\"hidden\")\n      seqEl.innerHTML = seqTempl data\n      seqEl.style.width =\n          @getArray(\"sequence\").length * seqEl.firstChild.offsetWidth + \"px\"\n\n    if seqEl.querySelectorAll(\".hidden\").item(0)\n      el = seqEl.querySelectorAll(\".hidden\").item(0)\n      x  = (-el.parentNode.offsetLeft - seqEl.offsetLeft) -\n          (el.parentNode.offsetWidth - seqEl.parentNode.offsetWidth) / 2\n    else\n      return\n\n    el.classList.add(\"hidden-next\")\n\n    @transform @getEl(\"sequence\"),\n      x: x\n      transition: \"all 300ms\"\n\n    @setArray \"missing\", @getArray(\"missing\").slice(1)\n\n    @getEl(\"container\").offsetTop\n    @getEl(\"container\").classList.remove(\"hidden\", \"between\")\n\n  checkAnswer: (e) ->\n    el = @findOne(\".hidden-next\")\n\n    return if @game.timer.get(\"paused\") or not el?\n\n    { isCorrect } = e.currentTarget.dataset\n    isComplete    = @getArray(\"missing\").length is 0\n\n    if isCorrect\n      @onCorrectAnswer\n        score: if isComplete then 1000 else 200\n        time:  if isComplete then 3000 else 500\n        tally: true\n\n    else\n      @onIncorrectAnswer\n        time: 1000\n        tally: true\n\n    el.classList.remove(\"hidden\", \"hidden-next\")\n\n    if isComplete or not isCorrect\n      window.setTimeout (=>\n        if @game.timer.get(\"isDisabled\")\n          @endGame()\n          return\n\n        @getEl(\"container\").classList.add(\"hidden\")\n        window.setTimeout (=> @showNext()), 800\n      ), 500\n    else\n      @getEl(\"container\").classList.add(\"between\")\n      window.setTimeout (=> @continueSequence()), 800\n\n  getDifficulty: ->\n    if @game.timer.get(\"isDisabled\")\n      @getArray(\"sequence\").length\n    else\n      consecutive = @game.score.get(\"consecutive\")\n      Math.floor _.limit((consecutive + 1) / 2, @getArray(\"sequence\").length, 2)\n\n\nmodule.exports = GameNextInOrderView\n","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (missing, sequence, undefined) {\n// iterate sequence\n;(function(){\n  var $$obj = sequence;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var image = $$obj[i];\n\nvar klass = missing.indexOf(i) > -1 ? \"hidden\" : \"\";\nbuf.push(\"<div\" + (jade.cls(['pull-left',\"delay-\" + (i) + \"\"], [null,true])) + \"><div class=\\\"block-sm\\\"><div\" + (jade.cls(['next-img-container','block-sm','block-lt',klass], [null,null,null,true])) + \"><img\" + (jade.attr(\"src\", image, true, false)) + \" class=\\\"next-img\\\"/></div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var image = $$obj[i];\n\nvar klass = missing.indexOf(i) > -1 ? \"hidden\" : \"\";\nbuf.push(\"<div\" + (jade.cls(['pull-left',\"delay-\" + (i) + \"\"], [null,true])) + \"><div class=\\\"block-sm\\\"><div\" + (jade.cls(['next-img-container','block-sm','block-lt',klass], [null,null,null,true])) + \"><img\" + (jade.attr(\"src\", image, true, false)) + \" class=\\\"next-img\\\"/></div></div></div>\");\n    }\n\n  }\n}).call(this);\n}.call(this,\"missing\" in locals_for_with?locals_for_with.missing:typeof missing!==\"undefined\"?missing:undefined,\"sequence\" in locals_for_with?locals_for_with.sequence:typeof sequence!==\"undefined\"?sequence:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","module.exports = {\"title\":\"game-true-or-false\",\"display\":\"True or False\",\"category\":\"Game\",\"features\":{\"stars\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"True or false?\"},\"description\":{\"type\":\"html\",\"default\":\"Which of these statements is true? Swipe the incorrect statements to the left and the true statements to the right.\\n\"},\"statements\":{\"min\":3,\"max\":30,\"type\":[{\"text\":{\"type\":\"html\"},\"true\":{\"type\":\"boolean\",\"display\":\"Right Side\"}}]},\"falseText\":{\"display\":\"Left Side\",\"type\":\"html\",\"default\":\"False\"},\"trueText\":{\"display\":\"Right Side\",\"type\":\"html\",\"default\":\"True\"},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":20000,\"min\":1,\"display\":\"Time Limit (seconds)\"},\"isDisabled\":{\"type\":\"boolean\",\"default\":false,\"display\":\"Disable\",\"help\":\"If the timer is disabled, the game ends after all questions have been answered.\\n\"}},\"stars\":{\"min\":{\"type\":\"int\",\"default\":1000,\"display\":\"1 Star\"},\"max\":{\"type\":\"int\",\"default\":1000,\"display\":\"All Stars\"},\"help\":\"Number of points required to earn stars. 1000 points are earned per question. Dont forget to have enough time and questions to earn all the stars!\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Swipe to answer\"},\"doneText\":{\"display\":\"Done text\",\"type\":\"html\",\"default\":\"Move on\"}},\"examples\":[{\"subtype\":\"true-or-false\",\"title\":\"True or false?\",\"prompt\":\"Swipe to answer\",\"description\":\"Which of these statements is true? Swipe the incorrect statements to the left and the true statements to the right.\",\"falseText\":\"False\",\"trueText\":\"True\",\"statements\":[{\"text\":\"Africa is the continent with the most countries\",\"true\":true},{\"text\":\"Halleys comet passes the Earth every 67 years\",\"true\":false},{\"text\":\"The Amazon rainforest produces half the worlds oxygen supply\",\"true\":true}]},{\"subtype\":\"classify\",\"title\":\"Classify?\",\"prompt\":\"Swipe to answer\",\"description\":\"Which of items are a fruit? Swipe the vegetable to the left and the fruits to the right.\",\"falseText\":\"Vegetable\",\"trueText\":\"Fruit\",\"statements\":[{\"text\":\"Banana\",\"true\":true},{\"text\":\"Apple\",\"true\":true},{\"text\":\"Carrot\",\"true\":false},{\"text\":\"Potato\",\"true\":false},{\"text\":\"Dragon Fruit\",\"true\":true}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (description, displayOrder, doneText, hasStars, hasTimeLimit, i18n, prompt, title) {\nbuf.push(\"<div class=\\\"content-intro content-fill content-fit\\\"><div class=\\\"block-v-lg text-center content\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><h1 class=\\\"tight\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"text-lg block-v-lg\\\">\" + (null == (jade_interp = description) ? \"\" : jade_interp) + \"</div><div class=\\\"btn btn-solid play-game\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.play-game\")) ? \"\" : jade_interp)) + \"</div></div></div></div></div><div class=\\\"content-outro\\\"><div class=\\\"content-fill\\\"><div class=\\\"block-v-lg text-center content\\\"><h1>\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><div class=\\\"row\\\"><div\" + (jade.cls(['col-sm-6','col-md-4','block-v-md',hasStars ? \"\" : \"col-md-offset-2\"], [null,null,null,true])) + \"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"white-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-score\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-total tight\\\">?</h1></div></div><div class=\\\"col-sm-6 col-md-4 block-v-md\\\"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"grey-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-best\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-record tight\\\">?</h1></div></div>\");\nif ( hasStars)\n{\nbuf.push(\"<div class=\\\"col-sm-12 col-md-4 block-v-md\\\"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"grey-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-stars\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-stars tight\\\">?<sup class=\\\"stars-total\\\"></sup></h1></div></div>\");\n}\nbuf.push(\"</div><div class=\\\"row block-v-md\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2 block-md\\\"><div class=\\\"btn btn-solid btn-block play-game\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.play-again\")) ? \"\" : jade_interp)) + \"</div></div></div></div></div></div></div><div class=\\\"slide-footer block-v-lg\\\"><div class=\\\"btn btn-muted goto-next fade-in\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div></div><div class=\\\"content-playing\\\"><div class=\\\"content-fill full-screen\\\"><div class=\\\"game-state block-h-lg\\\"><div class=\\\"game-state-inner row block-v-lg\\\"><div class=\\\"game-state-text col-md-6 col-sm-6\\\">\");\nif ( hasTimeLimit)\n{\nbuf.push(\"\" + (jade.escape((jade_interp = i18n(\"game.labels.timer\")) == null ? '' : jade_interp)) + \"\\n&ensp;<strong class=\\\"game-timer text-lg text-bold\\\"></strong>\");\n}\nbuf.push(\"</div><div class=\\\"game-state-text col-md-6 col-sm-6 text-right\\\">\" + (jade.escape((jade_interp = i18n(\"game.labels.score\")) == null ? '' : jade_interp)) + \"\\n&ensp;<strong class=\\\"game-score text-lg text-bold\\\"></strong><strong class=\\\"game-tally\\\"></strong></div></div></div>\");\nif ( hasTimeLimit)\n{\nbuf.push(\"<div class=\\\"game-stepper\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div>\");\n}\nif ( hasTimeLimit)\n{\nbuf.push(\"<div class=\\\"game-bonus-time\\\"></div>\");\n}\nbuf.push(\"<div class=\\\"row content-fill\\\"><div\" + (jade.cls(['col-sm-2','content-fill','block-dk','text-lg','text-center',displayOrder[0].klass], [null,null,null,null,null,true])) + \"><h4 class=\\\"game-label content-ver block-h-lg\\\">\" + (null == (jade_interp = displayOrder[0].text) ? \"\" : jade_interp) + \"</h4></div><div class=\\\"game-statement-container col-sm-8 content-fill\\\"><div class=\\\"content-ver text-sm text-center\\\"><h1 class=\\\"game-statement block-lg\\\"></h1></div></div><div\" + (jade.cls(['col-sm-2','content-fill','block-dk','text-lg','text-center',displayOrder[1].klass], [null,null,null,null,null,true])) + \"><h4 class=\\\"game-label content-ver block-h-lg\\\">\" + (null == (jade_interp = displayOrder[1].text) ? \"\" : jade_interp) + \"</h4></div></div></div><div class=\\\"slide-footer slide-up block-v-lg\\\"><div class=\\\"slide-footer-prompt text-uppercase text-bold\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div></div>\");}.call(this,\"description\" in locals_for_with?locals_for_with.description:typeof description!==\"undefined\"?description:undefined,\"displayOrder\" in locals_for_with?locals_for_with.displayOrder:typeof displayOrder!==\"undefined\"?displayOrder:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasStars\" in locals_for_with?locals_for_with.hasStars:typeof hasStars!==\"undefined\"?hasStars:undefined,\"hasTimeLimit\" in locals_for_with?locals_for_with.hasTimeLimit:typeof hasTimeLimit!==\"undefined\"?hasTimeLimit:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView   = require(\"views/base/game\")\n{ AutoCursorRemoveDraggy }  = require(\"views/components/draggy\")\n\nclass GameNextInOrderView extends GameView\n  templates:\n    default: require(\"./template\")\n    statement: require(\"./components/statement\")\n\n  events: ->\n    \"iostap .play-game\": \"enterGame\"\n    \"iostap .goto-next\": \"next\"\n\n  serialize: ->\n    d = super\n    d.falseText = _.hyphenate(d.falseText)\n    d.trueText  = _.hyphenate(d.trueText)\n\n    d.displayOrder = [\n      { klass: \"game-false\", text: d.falseText }\n      { klass: \"game-true\",  text: d.trueText }\n    ]\n\n    d.displayOrder.reverse() if @options.config().direction is \"rtl\"\n\n    d\n\n  initializeData: ->\n    super\n\n    @game.extra.set(\"fullscreen\", true)\n    @game.extra.set(\"sounds\", true)\n\n    @setArray \"statements\",\n      _.filter @options.data.statements, (s) -> s.text\n\n  initializeElements: ->\n    super\n\n    @setEl @findOne(\".game-true\"),  \"true\"\n    @setEl @findOne(\".game-false\"), \"false\"\n\n    @draggy = new AutoCursorRemoveDraggy\n      el: @findOne(\".game-statement\")\n\n    @listenTo @draggy, \"drag\", @onDrag\n    @listenTo @draggy, \"drop\", @onDrop\n\n  enterGame: ->\n    super\n\n    @draggy.lock()\n\n  startGame: ->\n    @game.timer.timestamp = Date.now()\n    @answeredCount = 0\n    @draggy.unlock()\n    @guesses = []\n\n    super\n\n  onDrag: (draggy, isInitial) ->\n    return if draggy.el.classList.contains(\"hidden\")\n\n    isRight = @isRight(draggy)\n    isLeft  = @isLeft(draggy)\n\n    if @options.config().direction is \"rtl\"\n      @getEl(\"true\").classList.toggle(\"active\", isLeft)\n      @getEl(\"false\").classList.toggle(\"active\", isRight)\n    else\n      @getEl(\"true\").classList.toggle(\"active\", isRight)\n      @getEl(\"false\").classList.toggle(\"active\", isLeft)\n\n    @transform draggy.el,\n      x: draggy.x\n      y: draggy.y / 1.2\n      rotate: draggy.x * -draggy.y / 5000\n      transition: if isInitial then \"all 300ms\" else \"\"\n\n  onDrop: (draggy, isReset) ->\n    if isReset\n      @transform draggy.el,\n        x: draggy.x\n        y: draggy.y\n\n    else\n      return if draggy.el.classList.contains(\"hidden\")\n\n      isComplete = @didMove(draggy)\n\n      if isComplete\n        x = @el.offsetWidth * Math.abs(draggy.x) / draggy.x\n        draggy.reset { x, y: draggy.y }\n\n        @transition draggy.el, \"all 300ms\", true\n        draggy.el.classList.add(\"hidden\")\n\n        isCorrect =\n          if @options.config().direction is \"rtl\"\n            @isLeft(draggy) is draggy.isTrue\n          else\n            @isRight(draggy) is draggy.isTrue\n\n        window.setTimeout (=>\n          if isCorrect\n            @onCorrectAnswer\n              score: 1000\n              time:  1000\n              tally: true\n\n          else\n            @onIncorrectAnswer\n              time: 1000\n              tally: true\n\n          guessQ = draggy.$el.text()\n          guessA = if draggy.velocity.dir is \"left\" then \"false\" else \"true\"\n          guess = q: guessQ, a: guessA\n          @guesses.push guess\n\n          @transition draggy.el, \"\", true\n          draggy.reset()\n\n          @answeredCount += 1\n\n          if @game.timer.get(\"isDisabled\") and @answeredCount is @getArray(\"statements\").length\n            @endGame()\n            return\n          \n          @showNext()\n        ), 400\n\n      else\n        @transition draggy.el, \"all 300ms\"\n        draggy.reset()\n\n  didMove: (draggy) ->\n    @isRight(draggy) or @isLeft(draggy)\n\n  isRight: (draggy) ->\n    (Math.abs(draggy.velocity.x) > 0.5 and\n     draggy.velocity.dir is \"right\") or\n    draggy.x > @el.offsetWidth * 0.33\n\n  isLeft: (draggy) ->\n    (Math.abs(draggy.velocity.x) > 0.5 and\n     draggy.velocity.dir is \"left\") or\n    draggy.x < -@el.offsetWidth * 0.33\n\n  showNext: ->\n    @game.timer.timestamp = Date.now()\n    statement = @getRandom \"statements\"\n\n    @getEl(\"true\").classList.remove(\"active\")\n    @getEl(\"false\").classList.remove(\"active\")\n\n    @draggy.el.innerHTML = statement.text\n    @draggy.isTrue = statement.true\n\n    @draggy.el.offsetLeft\n    @draggy.el.classList.remove(\"hidden\")\n\n  answerDetails: ->\n    questions = @options.metadata.questions or []\n    return [] unless questions.length > 0\n\n    questionMetadataByContentDict =\n      _.indexBy questions, (q) -> q.question.content\n    _.chain(@guesses)\n      .map ({ q, a }) ->\n        if questionMetadataByContentDict[q]\n          question: questionMetadataByContentDict[q].question\n          answer: _.find questionMetadataByContentDict[q].answers, (a) ->\n            a.content.toString() is a\n        else\n          false\n      .filter((g) -> g)\n      .value()\n\nmodule.exports = GameNextInOrderView\n","module.exports = {\"title\":\"image-collection\",\"display\":\"Image Collection\",\"category\":\"Content\",\"description\":\"Select an image to see more detail\",\"features\":{\"narration\":true,\"social\":true},\"model\":{\"title\":{\"type\":\"html\"},\"images\":{\"display\":\"List items\",\"type\":[{\"image\":{\"type\":\"image\"},\"content\":{\"type\":\"html\"},\"narration\":{\"type\":\"audio\"}}],\"min\":2,\"max\":8},\"lightbox\":{\"type\":\"boolean\",\"default\":false,\"help\":\"Focus on the image by hiding other parts of the interface. If a background color is set, that color will be used.\\n\"},\"background\":{\"type\":\"string\",\"default\":\"\",\"display\":\"Background color\",\"help\":\"This color (eg. orange, #f90, rgb(255,160,0)) will be used for the background in lightbox mode.\\n\"},\"prompt\":{\"type\":\"html\",\"default\":\"Select each image for more details\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"image-collection\",\"title\":\"Example Image Collection\",\"images\":[{\"image\":\"img/examples/product-phone.png\",\"content\":\"Our brilliant new sleek design allows the user to have unparalleled comfort when using the device.\\n\"},{\"image\":\"img/examples/product-laptop.png\",\"content\":\"Crystal clear display performs better than any of our competitors.\\n\"},{\"image\":\"img/examples/product-tablet.png\",\"content\":\"The newest feature offers a new level of feedback for the user.\\n\"}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, doneText, hasNarration, hasPrompt, i18n, prompt, submitUp, tappies, title, undefined) {\njade_mixins[\"image\"] = jade_interp = function(imageUrl, klass){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nbuf.push(\"<img\" + (jade.attr(\"src\", imageUrl, true, false)) + (jade.cls([klass], [true])) + \"/>\");\n};\nbuf.push(\"<div class=\\\"block-v-lg content-fill text-center\\\"><div class=\\\"tappies-parent content-fill\\\"><div class=\\\"thumbnail-collection content-sm-ver content-md-ver content-lg-ver\\\"><div class=\\\"title-wrapper\\\"><h1 class=\\\"title slide-down delay-3 tight\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1></div><div class=\\\"row tappies text-center\\\">\");\nvar full = \"col-sm-12 col-lg-8 col-lg-offset-2\"\nvar half = \"col-sm-6 col-lg-6\"\n// iterate tappies\n;(function(){\n  var $$obj = tappies;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var tappy = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-index\", i, true, false)) + (jade.cls(['tappy','content-fill','slide-up',\"delay-\" + (i + 1) + \" \" + (tappies.length >= 4 ? half : full) + \"\"], [null,null,null,true])) + \"><div class=\\\"tappy-child content-fill block-dk block-sm\\\">\");\njade_mixins[\"image\"](tappy.image, 'content-ver thumbnail');\nbuf.push(\"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var tappy = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-index\", i, true, false)) + (jade.cls(['tappy','content-fill','slide-up',\"delay-\" + (i + 1) + \" \" + (tappies.length >= 4 ? half : full) + \"\"], [null,null,null,true])) + \"><div class=\\\"tappy-child content-fill block-dk block-sm\\\">\");\njade_mixins[\"image\"](tappy.image, 'content-ver thumbnail');\nbuf.push(\"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div><div class=\\\"details-parent content-fill\\\">\");\n// iterate tappies\n;(function(){\n  var $$obj = tappies;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var tappy = $$obj[i];\n\nbuf.push(\"<div class=\\\"image-details content-fill\\\"><div class=\\\"row content-lg-fill content-sm-ver content-md-ver\\\"><div class=\\\"col-lg-6 content-lg-ver image-container\\\">\");\njade_mixins[\"image\"](tappy.image, 'image-full-size block-v-md');\nbuf.push(\"</div><div class=\\\"col-lg-6 content-lg-ver\\\"><div class=\\\"caption block-v-md block-h-md text-md\\\">\" + (null == (jade_interp = tappy.content) ? \"\" : jade_interp) + \"</div></div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var tappy = $$obj[i];\n\nbuf.push(\"<div class=\\\"image-details content-fill\\\"><div class=\\\"row content-lg-fill content-sm-ver content-md-ver\\\"><div class=\\\"col-lg-6 content-lg-ver image-container\\\">\");\njade_mixins[\"image\"](tappy.image, 'image-full-size block-v-md');\nbuf.push(\"</div><div class=\\\"col-lg-6 content-lg-ver\\\"><div class=\\\"caption block-v-md block-h-md text-md\\\">\" + (null == (jade_interp = tappy.content) ? \"\" : jade_interp) + \"</div></div></div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"tappies\" in locals_for_with?locals_for_with.tappies:typeof tappies!==\"undefined\"?tappies:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","Preloader = require \"lib/preload\"\nSlideView = require \"views/slide\"\n{ Sound } = Application.actions()\n\nclass ImageCollectionView extends SlideView\n  template: require(\"./template\")\n  fitTextOnResize: false\n  fitTextOnRender: false\n\n  events: ->\n    \"iostap .btn-done\":        \"submit\"\n    \"iostap .image-details\":   \"hideDetails\"\n    \"iostap .tappy\":           \"toggleThumbnail\"\n\n  serialize: ->\n    data = super\n    data.tappies = _.filter(data.images or [], (d) -> d.image)\n    data.hasPrompt = true\n    data\n\n  onResize: ->\n    @el.classList.remove(\"active\")\n\n    images = _.pluck(@options.data.images, \"image\")\n\n    Preloader.load _.compact(images), =>\n      @setTappyHeight()\n      @fitText =>\n        window.setTimeout (=> @el.classList.add(\"active\")), 300\n\n  onDetailResize: -> \n    image = @getEl(\"active-details\")\n    @limitImageSize(image)\n\n  show: ->\n    @setEl @findOne(\".tappies-parent\"), \"parent\"\n    @setEl @findOne(\".tappies\"), \"tappies\"\n    @setEl @findOne(\".title-wrapper\"), \"title\"\n    @setEl @findAll(\".image-details\"), \"imageDetails\"\n\n    @listenTo this, \"resize\", @onResize\n    @onResize()\n    @toVisit = [0...@serialize().tappies.length]\n    @hideDetails()\n\n  beforeHide: ->\n    Sound.fadeOut(@currentSrc, 500, 0.02) if @currentSrc\n\n  setTappyHeight: ->\n    length = @getEl(\"tappies\").children.length\n    length = Math.ceil(length / 2) if length >= 4\n\n    outerHeight = @getEl(\"parent\").offsetHeight - @getEl(\"title\").offsetHeight\n    tappyHeight = outerHeight / length\n    tappyHeight = Math.min(tappyHeight, 220)\n\n    for el, i in @getEl(\"tappies\").children\n      el.style.height = \"#{tappyHeight}px\"\n\n  limitImageSize: (imgDetails) ->\n    img = imgDetails.querySelector(\".image-full-size\")\n    txt = imgDetails.querySelector(\".caption\")\n    ch  = imgDetails.offsetHeight - txt.offsetHeight\n    cw  = imgDetails.offsetWidth\n\n    scale = _.max [ img.height / ch, img.width / cw ]\n\n    img.style.height = \"#{img.height / scale}px\"\n\n  toggleThumbnail: (e) ->\n    @showDetails e.currentTarget, true\n\n  showDetails: (tappy, animate) ->\n    index      = +tappy.dataset.index\n    imgDetails = @getEl(\"imageDetails\").item(index)\n    narration  = @serialize().tappies[index].narration\n    loaded     = false\n\n    Sound.stop(@currentSrc) if @currentSrc\n    if (@currentSrc = narration) and not @withoutNarration\n      @showLoadingNarration()\n      Sound.play narration,\n        cb: ->\n        onProgress: =>\n          unless loaded\n            loaded = true\n            @hideLoadingNarration()\n\n    @toVisit   = _.without @toVisit, index\n\n    @setEl imgDetails, \"active-details\"\n\n    @setState(\"touched\") if _.isEmpty(@toVisit)\n    @setState(\"active\", \"details\")\n    @showLightbox()\n\n    @listenTo this, \"resize\", @onDetailResize\n    @onDetailResize()\n\n    tappy.classList.add(\"visited\")\n\n    @transform imgDetails,\n      opacity: 1\n      transition: if animate then \"all 300ms\" else \"\"\n    \n    imgDetails.classList.add(\"image-details-visible\")\n\n  hideDetails: ->\n    Sound.fadeOut(@currentSrc, 500, 0.02) if @currentSrc\n\n    return unless imgDetails = @getEl(\"active-details\")\n\n    @transform imgDetails,\n      opacity: 0\n      scale: 0.9\n      transition: \"all 300ms\"\n    \n    imgDetails.classList.remove(\"image-details-visible\")\n\n    @trigger(\"ui\", lightbox: false)\n    @setState(\"inactive\", \"details\")\n\n  showLightbox: ->\n    if @options.data.lightbox\n      @trigger(\"ui\", lightbox: @options.data.background or true)\n\n  refresh: (params) ->\n    if params.data.images.length is @options.data.images.length\n      for { content }, i in params.data.images\n        if content and @options.data.images[i]?.content isnt content\n          changed = i\n\n    super\n\n    if changed? and tappy = @getEl(\"tappies\").children[changed]\n      @showDetails(tappy, false)\n\n\nmodule.exports = ImageCollectionView\n","module.exports = {\"title\":\"image-gallery\",\"display\":\"Image Gallery\",\"category\":\"Content\",\"description\":\"Swipe through a gallery of images\",\"links\":{\"academy\":\"https://academy.edapp.com/tag/image-gallery/\"},\"features\":{\"narration\":true,\"social\":true},\"model\":{\"images\":{\"min\":1,\"max\":10,\"type\":[{\"image\":{\"type\":\"image\",\"display\":\"Image\"},\"caption\":{\"type\":\"html\"}}]},\"lightbox\":{\"type\":\"boolean\",\"default\":false,\"help\":\"Focus on the image by hiding other parts of the interface. If a background color is set, that color will be used.\\n\"},\"background\":{\"type\":\"string\",\"default\":\"\",\"display\":\"Background color\",\"help\":\"This color (eg. orange, #f90, rgb(255,160,0)) will be used for the background in lightbox mode.\\n\"},\"prompt\":{\"type\":\"html\",\"default\":\"Swipe to continue\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"image-gallery\",\"images\":[{\"image\":\"img/examples/product-phone.png\",\"caption\":\"Our brilliant new sleek design allows the user to have unparalleled comfort when using the device.\\n\"},{\"image\":\"img/examples/product-laptop.png\",\"caption\":\"Crystal clear display performs better than any of our competitors.\\n\"},{\"image\":\"img/examples/product-tablet.png\",\"caption\":\"The newest feature offers a new level of feedback for the user.\\n\"}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, doneText, hasNarration, hasPrompt, i18n, images, prompt, submitUp, undefined) {\njade_mixins[\"image\"] = jade_interp = function(imageUrl, klass){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nbuf.push(\"<img\" + (jade.attr(\"src\", imageUrl, true, false)) + (jade.cls([klass], [true])) + \"/>\");\n};\nbuf.push(\"<div class=\\\"content-wrapper content-fill slide-up\\\"><div class=\\\"carousel content-fill delay-6 draggy block-v-xl\\\"><div\" + (jade.attr(\"style\", \"width:\" + (images.length * 100) + \"%;\", true, false)) + \" class=\\\"carousel-slider content-fill clearfix\\\">\");\n// iterate images\n;(function(){\n  var $$obj = images;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var item = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"width: \" + (100 / images.length) + \"%;\", true, false)) + \" class=\\\"carousel-item content-fill\\\"><div class=\\\"row content-lg-fill content-sm-ver content-md-ver\\\">\");\nvar size = _.compact([item.image, item.caption]).length\nvar cols = size == 2 ? \"col-lg-6\" : \"\"\nif ( item.image)\n{\nbuf.push(\"<div\" + (jade.cls(['col-sm-12','content-lg-ver',cols], [null,null,true])) + \">\");\njade_mixins[\"image\"](item.image, 'img');\nbuf.push(\"</div>\");\n}\nif ( item.caption)\n{\nbuf.push(\"<div\" + (jade.cls(['caption','content-fit','col-sm-12','content-lg-ver',cols], [null,null,null,null,true])) + \"><div class=\\\"text-center text-md block-v-lg\\\">\" + (null == (jade_interp = item.caption) ? \"\" : jade_interp) + \"</div></div>\");\n}\nbuf.push(\"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var item = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"width: \" + (100 / images.length) + \"%;\", true, false)) + \" class=\\\"carousel-item content-fill\\\"><div class=\\\"row content-lg-fill content-sm-ver content-md-ver\\\">\");\nvar size = _.compact([item.image, item.caption]).length\nvar cols = size == 2 ? \"col-lg-6\" : \"\"\nif ( item.image)\n{\nbuf.push(\"<div\" + (jade.cls(['col-sm-12','content-lg-ver',cols], [null,null,true])) + \">\");\njade_mixins[\"image\"](item.image, 'img');\nbuf.push(\"</div>\");\n}\nif ( item.caption)\n{\nbuf.push(\"<div\" + (jade.cls(['caption','content-fit','col-sm-12','content-lg-ver',cols], [null,null,null,null,true])) + \"><div class=\\\"text-center text-md block-v-lg\\\">\" + (null == (jade_interp = item.caption) ? \"\" : jade_interp) + \"</div></div>\");\n}\nbuf.push(\"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div>\");\nif ( images.length > 1)\n{\nbuf.push(\"<div class=\\\"pagination\\\">\");\n// iterate images\n;(function(){\n  var $$obj = images;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var item = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-page\", i, true, false)) + \" class=\\\"dot\\\"></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var item = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-page\", i, true, false)) + \" class=\\\"dot\\\"></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\n}\nbuf.push(\"<div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"images\" in locals_for_with?locals_for_with.images:typeof images!==\"undefined\"?images:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView  = require(\"views/slide\")\n{ DraggyView } = require(\"views/components/draggy\")\nPreload    = require(\"lib/preload\")\nDevice     = require(\"lib/device\")\nfitText    = require(\"lib/fit-text\")\n\nclass ImageGalleryView extends SlideView\n  template: require(\"./template\")\n\n  currentIndex: 0\n\n  events:\n    \"iostap .btn-done\": \"submit\"\n    \"iostap .dot\": \"goToPage\"\n\n  serialize: ->\n    data = super\n\n    @options.data.images = data.images =\n      (data.images or []).filter (m) ->\n        m.image or m.caption.length > 0\n    \n    if @options.config().direction == \"rtl\" and !@options.data.isReversed\n      data.images = data.images.reverse()\n      @options.data.isReversed = true\n    \n    # Empty images array breaks the structure of ImageGallery template, hence initializing it\n    if data.images.length == 0\n      data.images.push({image: undefined, caption: \"\"})\n    \n    if data.images.length <= 1\n      window.setTimeout (=> @setState \"touched\"), 0\n\n    data.hasPrompt = true\n\n    data\n\n  beforeShow: ->\n    lightboxColor =\n      if @options.data.lightbox then  else \"default\"\n\n    if @options.data.lightbox\n      @trigger(\"ui\", lightbox: @options.data.background or true)\n    else\n      @trigger(\"ui\", lightbox: false)\n\n  onRefresh: ->\n    super\n    @beforeShow()\n\n  show: (index = 0) ->\n    @draggy?.undelegateEvents()\n    @draggy = null\n\n    unless @draggy\n      el = @findOne(\".carousel\")\n      @setEl el.firstChild, \"scroller\"\n\n      if @options.data.images.length > 1\n        @setEl @findOne(\".pagination\"), \"pagination\"\n\n        len = (@options.data.images.length - 1)\n        min = -el.offsetWidth * len\n\n        @draggy  = new DraggyView\n          el: el\n          minX: min\n          maxX: 0\n          lock: \"y\"\n\n        @listenTo @draggy, \"drag\", @onDrag\n        @listenTo @draggy, \"drop\", @onDrop\n\n        if @options.config().direction is \"rtl\"\n          x = -@draggy.el.offsetWidth * (len - Math.min(index, len))\n        else\n          x = -@draggy.el.offsetWidth * Math.min(index, len)\n\n        @draggy.reset { x }\n\n      else\n        @getEl(\"scroller\").firstChild.style.opacity = 1\n\n      @listenTo this, \"resize\", @onResize\n      @onResize()\n      @limitImageSize()\n\n  limitImageSize: ->\n    images = _.chain(@options.data.images).pluck(\"image\").compact().value()\n    height = @getEl(\"scroller\").offsetHeight\n\n    Preload.load images, =>\n      for child, i in @getEl(\"scroller\").children\n        child.style.fontSize = \"\"\n        img = child.querySelector(\".img\")\n\n        if img\n          maxH = height\n          if Device.breakpoint([\"xs\", \"sm\", \"md\"])\n            text  = child.querySelector(\".caption\")\n            maxH -= text?.offsetHeight or 0\n          else\n            shouldFitText = true\n\n          img.style.maxHeight = \"#{maxH}px\"\n\n        fitText(child) if shouldFitText\n\n  onDrag: (draggy, isInitial) ->\n    transition = if isInitial then \"all 300ms\" else \"none\"\n\n    @transform @getEl(\"scroller\"),\n      x: @getScrollDist(draggy)\n      transition: transition\n\n    @updateChildren(draggy, transition)\n\n  onDrop: (draggy, isReset) ->\n    if isReset\n      transition    = if @currentIndex? then \"all 300ms\" else \"\"\n      @currentIndex = Math.floor(-draggy.x / draggy.offset.width)\n\n      @transform @getEl(\"scroller\"),\n        x: @getScrollDist(draggy)\n        transition: transition\n\n      @updateChildren(draggy, transition)\n\n    else\n      x = draggy.velocity.x\n      m = 0.9\n      func =\n        if x < -m then \"ceil\"\n        else if x > m then \"floor\"\n        else \"round\"\n\n      step = Math[func](Math.min(draggy.x / draggy.offset.width, 1))\n\n      draggy.reset x: step * draggy.offset.width\n\n    for dot, i in @getEl(\"pagination\").children\n      dot.classList.toggle \"active\", i is @currentIndex\n\n    if @options.config().direction is \"rtl\"\n      if @currentIndex is 0\n        @setState(\"touched\")\n    else\n      if @currentIndex is @options.data.images.length - 1\n        @setState(\"touched\")\n\n  goToPage: (e) ->\n    index = e.currentTarget.dataset.page\n    total = @options.data.images.length - 1\n    @draggy.reset x: (index / total) * @draggy.options.minX\n\n  updateChildren: (draggy, transition) ->\n    { width } = draggy.offset\n\n    for child, i in @getEl(\"scroller\").children\n      if transition\n        child.classList.toggle(\"active\", i is @currentIndex)\n        @transition(child, transition, true)\n\n      @transform child,\n        scale:   1 - Math.abs(draggy.x + (i * width)) / width / 5\n        opacity: 1 - Math.abs(draggy.x + (i * width)) / width\n\n  getScrollDist: (draggy) ->\n    \"#{\n      draggy.x / draggy.offset.width / @options.data.images.length * 100\n    }%\"\n\n  onResize: ->\n    @limitImageSize()\n\n    if scroller = @getEl(\"scroller\") and @draggy\n      @draggy.options.minX =\n        -@draggy.el.offsetWidth * (@options.data.images.length - 1)\n      @draggy.getOffset()\n\n  refresh: (params) ->\n    images = params.data.images\n\n    # Handle pagination when empty sections are added, clearing empty sections from array\n    if params.data.images.length != @options.data.images.length\n      images = (params.data.images or []).filter (m) -> m.image or m.caption.length > 0\n      changed = @currentIndex\n\n    for image, i in images\n      # Filter section which was changed\n      if not _.isEqual(image, @options.data.images[i])\n        changed = i\n        break\n\n    super\n\n    if @draggy\n      @draggy.undelegateEvents()\n      @draggy = @currentIndex = null\n\n    @show(changed)\n\n  screenshot: ->\n    total = @options.data.images.length - 1\n\n    new Promise (resolve, reject) =>\n      getPages = (images = []) =>\n        if images.length <= total\n          index = images.length\n\n          @draggy?.reset x: (index / total) * @draggy.options.minX\n          @collateScreenshots(images)\n            .then(getPages)\n            .catch(reject)\n        else\n          resolve(images)\n\n      getPages()\n\nmodule.exports = ImageGalleryView\n","module.exports = {\"title\":\"image-map\",\"display\":\"Image Map\",\"category\":\"Content\",\"description\":\"Map out details through a series of images\",\"features\":{\"social\":true},\"model\":{\"url\":{\"type\":\"image\",\"default\":\"\",\"display\":\"Image Map\"},\"waypoints\":{\"min\":1,\"max\":20,\"type\":[{\"region\":{\"type\":\"image-region\",\"for\":\"url\"},\"image\":{\"type\":\"image\"},\"caption\":{\"type\":\"html\",\"default\":\"\"},\"narration\":{\"type\":\"audio\"}}]},\"zoom\":{\"type\":\"boolean\",\"default\":true,\"help\":\"Recenter the map image on the region after it has been selected.\\n\"},\"stickyCaptions\":{\"type\":\"boolean\",\"display\":\"Sticky Captions\",\"default\":false,\"help\":\"Place waypoint captions directly underneath the image.\\n\"},\"appearance\":{\"waypointColor\":{\"display\":\"Waypoint Style\",\"type\":\"select\",\"default\":\"White\",\"enum\":[\"Black\",\"White\",\"None\"]}},\"lightbox\":{\"background\":{\"type\":\"string\",\"default\":\"\",\"display\":\"Background Color\",\"help\":\"This color (eg. \\\"orange\\\", \\\"#f90\\\", \\\"rgb(255,160,0)\\\") will be used for the background of the entire screen in lightbox mode.\\n\"},\"textColor\":{\"display\":\"Text Color\",\"type\":\"select\",\"default\":\"White\",\"enum\":[\"Black\",\"White\"]}},\"prompt\":{\"type\":\"html\",\"default\":\"Explore each region of the image\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"multiple-regions\",\"url\":\"img/examples/product-phone.png\",\"stickyCaptions\":true,\"waypoints\":[{\"region\":{\"xMin\":0.55,\"xMax\":0.76,\"yMin\":0,\"yMax\":0.15},\"image\":\"img/examples/product-phone.png\",\"caption\":\"\\n# Product X\\nOur brilliant new sleek design allows the user to have unparalleled comfort when using the device.\\n\"},{\"region\":{\"xMin\":0.4,\"xMax\":0.76,\"yMin\":0.2,\"yMax\":0.5},\"image\":\"img/examples/product-laptop.png\",\"caption\":\"\\n# Product Y\\nConsistent with product Y, the liquid retina display with true tone technology extends from edge to edge.\\n\"},{\"region\":{\"xMin\":0.27,\"xMax\":0.43,\"yMin\":0.78,\"yMax\":1},\"image\":\"img/examples/product-tablet.png\",\"caption\":\"\\n# Product Z\\nWireless charging, a feature also avaliable as part of Product Z.\\n\"}]},{\"subtype\":\"highlight-single-region\",\"url\":\"img/examples/flow-1.png\",\"zoom\":false,\"waypoints\":[{\"region\":{\"xMin\":0.66,\"xMax\":1,\"yMin\":0.25,\"yMax\":0.5},\"image\":\"img/examples/flow-2.png\",\"caption\":\"\\n# Process Flow\\nAt this point in the process, those who answer no move directly\\nto the end.\\n\"}],\"lightbox\":{\"background\":\"transparent\"},\"appearance\":{\"waypointColor\":\"None\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, doneText, hasNarration, hasPrompt, i18n, prompt, submitUp, undefined, url, waypoints) {\njade_mixins[\"image\"] = jade_interp = function(imageUrl, klass){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nbuf.push(\"<img\" + (jade.attr(\"src\", imageUrl, true, false)) + (jade.cls([klass], [true])) + \"/>\");\n};\nbuf.push(\"<div class=\\\"content-fill text-center block-v-md\\\"><div class=\\\"image-container block-inline content-fill\\\">\");\njade_mixins[\"image\"](url, 'img-map content-ver');\nbuf.push(\"<div class=\\\"waypoints content\\\">\");\n// iterate waypoints\n;(function(){\n  var $$obj = waypoints;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var w = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", ([\n            \"left: \" + (w.region.xMin * 100) + \"%\",\n            \"top: \" + (w.region.yMin * 100) + \"%\",\n            \"width: \" + ((w.region.xMax - w.region.xMin) * 100) + \"%\",\n            \"height: \" + ((w.region.yMax - w.region.yMin) * 100) + \"%\"\n          ].join(\";\")), true, false)) + (jade.attr(\"data-index\", i, true, false)) + \" class=\\\"waypoint\\\"></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var w = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", ([\n            \"left: \" + (w.region.xMin * 100) + \"%\",\n            \"top: \" + (w.region.yMin * 100) + \"%\",\n            \"width: \" + ((w.region.xMax - w.region.xMin) * 100) + \"%\",\n            \"height: \" + ((w.region.yMax - w.region.yMin) * 100) + \"%\"\n          ].join(\";\")), true, false)) + (jade.attr(\"data-index\", i, true, false)) + \" class=\\\"waypoint\\\"></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div>\");\n// iterate waypoints\n;(function(){\n  var $$obj = waypoints;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var w = $$obj[i];\n\nbuf.push(\"<div class=\\\"waypoint-img content-fill text-center\\\">\");\njade_mixins[\"image\"](w.image, 'content-ver');\nbuf.push(\"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var w = $$obj[i];\n\nbuf.push(\"<div class=\\\"waypoint-img content-fill text-center\\\">\");\njade_mixins[\"image\"](w.image, 'content-ver');\nbuf.push(\"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"navigation text-center\\\"><div class=\\\"caption text-md block-lg\\\"></div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined,\"url\" in locals_for_with?locals_for_with.url:typeof url!==\"undefined\"?url:undefined,\"waypoints\" in locals_for_with?locals_for_with.waypoints:typeof waypoints!==\"undefined\"?waypoints:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView = require(\"views/slide\")\n{ Sound } = Application.actions()\n\nclass ImageMapView extends SlideView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-done\": \"submit\"\n    \"iostap .waypoint\": \"tapWaypoint\"\n    \"iostap\": \"exitWaypoint\"\n\n  serialize: ->\n    data = super\n    data.hasPrompt = true\n\n    for waypoint in data.waypoints\n      waypoint.center = @getCenter(waypoint.region)\n\n    data\n\n  submit: (e) ->\n    e?.stopImmediatePropagation()\n    super\n\n  beforeHide: ->\n    @trigger(\"ui\", lightbox: false)\n    Sound.fadeOut(@currentSrc, 500, 0.02) if @currentSrc\n\n  hide: ->\n    @exitWaypoint()\n    @el.classList.remove(\"is-loaded\")\n\n  refresh: (params) ->\n    for { caption }, i in params.data.waypoints\n      changed = i unless caption is @options.data.waypoints[i]?.caption\n\n    super\n\n    @beforeShow()\n    @show(false)\n\n    if changed?\n      @el.classList.add \"no-transition\"\n      @goToWaypoint(changed)\n      _.delay (=> @el.classList.remove \"no-transition\"), 1\n\n  onRefresh: ->\n\n  onResize: ->\n    @getEl(\"waypoints\").removeAttribute(\"style\")\n    @setContainerDimensions()\n\n  beforeShow: ->\n    @setState(false, \"zoom\")\n    @setState(@options.data.stickyCaptions, \"sticky\")\n    @setState(@options.data.zoom.toString(), \"recenter\")\n\n  setTextColor: (lightbox) ->\n    if color = lightbox?.textColor?.toLowerCase()\n      @el.style.color = lightbox?.textColor?.toLowerCase()\n\n  setWaypointColor: (appearance) ->\n    if color = appearance?.waypointColor?.toLowerCase()\n      # Remove all existing style-option classes\n      @el.classList.remove(\"waypoint-none\", \"waypoint-black\", \"waypoint-white\")\n      @el.classList.add(\"waypoint-#{color}\")\n\n  showLightbox: ->\n    @setState(true, \"zoom\")\n    @trigger(\"ui\", lightbox: @options.data.lightbox?.background or true)\n\n  show: (fadeImage = true) ->\n    @setEl img = @findOne(\".img-map\"), \"image\"\n    return unless img?\n    @setEl @findOne(\".caption\"), \"caption\"\n    @setEl @findOne(\".waypoints\"), \"waypoints\"\n    @setEl @findOne(\".navigation\"), \"navigation\"\n    @setEl @findOne(\".image-container\"), \"container\"\n    @setEl @findAll(\".waypoint-img\"), \"images\"\n\n    @setState(\"prompt\")\n    @setState(false, \"zoom\")\n\n    @setTextColor(@options.data.lightbox)\n    @setWaypointColor(@options.data.appearance)\n    @listenTo this, \"resize\", @onResize\n\n    if not fadeImage\n      @el.classList.add \"no-transition\"\n\n    if img?.complete\n      @setDimensions()\n    else if img?\n      img.onload = => @setDimensions()\n\n  setDimensions: ->\n    @setContainerDimensions()\n    @el.classList.add(\"is-loaded\")\n\n    @el.offsetLeft\n    @el.classList.remove \"no-transition\"\n    @scaleDown(i) for waypoint, i in @options.data.waypoints\n\n  getCenter: (wp) ->\n    x: (wp.xMin + wp.xMax) / 2\n    y: (wp.yMin + wp.yMax) / 2\n\n  allWaypointsTapped: ->\n    _.reduce @getEl(\"waypoints\").children, (allTapped, el) ->\n      allTapped and el.dataset.tapped\n    , true\n\n  tapWaypoint: (e) ->\n    el = e.target\n    e.stopImmediatePropagation()\n\n    @goToWaypoint +el.dataset.index\n\n    el.dataset.tapped = \"true\"\n    el.classList.add \"tapped\"\n\n    if @allWaypointsTapped()\n      @setState(\"touched\")\n\n  limits: ->\n    min: 0\n    max: @options.data.waypoints.length - 1\n\n  goToWaypoint: (@currentIndex) ->\n    { region, caption, narration } = @options.data.waypoints[@currentIndex]\n    loaded = false\n\n    Sound.stop(@currentSrc) if @currentSrc\n    if (@currentSrc = narration) and not @withoutNarration\n      @showLoadingNarration()\n      Sound.play narration,\n        cb: =>\n        onProgress: =>\n          unless loaded\n            loaded = true\n            @hideLoadingNarration()\n\n    @getEl(\"images\").item(@currentIndex).classList.add(\"active\")\n\n    @showLightbox()\n    @toggleCaption(caption)\n    @scaleUp(@currentIndex)\n\n  exitWaypoint: ->\n    return unless @currentIndex?\n\n    Sound.fadeOut(@currentSrc, 500, 0.02) if @currentSrc\n\n    @getEl(\"images\").item(@currentIndex).classList.remove(\"active\")\n    @toggleCaption()\n    @setState(false, \"zoom\")\n    @trigger(\"ui\", lightbox: false)\n    @scaleDown(@currentIndex)\n    @transform @getEl(\"image\"), scale: 1, y: \"-50%\"\n    @transform @getEl(\"navigation\"), y: 0\n\n    delete @currentIndex\n\n  scaleDown: (index) ->\n    wimage   = @getEl(\"images\").item(index)\n    scale    = 1 / @scaleForWaypoint(@options.data.waypoints[index])\n    waypoint = @getEl(\"waypoints\").children[index]\n\n    if @options.data.zoom\n      top  = (wimage.offsetHeight - @getEl(\"waypoints\").offsetHeight) / 2\n      left = @getEl(\"waypoints\").parentNode.offsetLeft\n\n      x = (waypoint.offsetLeft + waypoint.offsetWidth / 2) -\n          (wimage.offsetWidth / 2 - left)\n\n      y = (waypoint.offsetTop + waypoint.offsetHeight / 2) -\n          (wimage.offsetHeight / 2 - top) -\n          (wimage.offsetTop)\n\n    else\n      x     = 0\n      y     = \"-50%\"\n      scale = 1\n\n    @transform wimage, { x, y, scale }\n\n  scaleUp: (index) ->\n    waypoint  = @options.data.waypoints[index]\n    nav       = @getEl(\"navigation\")\n    image     = @getEl(\"image\")\n    wimage    = @getEl(\"images\").item(index)\n    wHeight   = wimage.offsetHeight\n    wTop      = (window.innerHeight - wHeight) / 2\n\n    yOffset   = -nav.offsetHeight / 2 / image.height\n    yOffset  *= 0.75\n    iOffset   = yOffset * image.offsetHeight\n\n    if @options.data.zoom\n      { x, y }  = @getCenter(waypoint.region)\n      scaleToUse = @scaleForWaypoint(waypoint)\n    else\n      x = 0.5\n      y = 0.5\n      scaleToUse = 1\n\n    @transform image,\n      x: scaleToUse * 100 * (0.5 - x) + \"%\"\n      y: -50 + yOffset * 100 + scaleToUse * 100 * (0.5 - y) + \"%\"\n      scale: scaleToUse\n\n    @transform wimage,\n      y: -50 + (100 * iOffset / wHeight) + \"%\"\n      scale: 1\n\n    if @options.data.stickyCaptions\n      img  = wimage.firstChild\n      navY = nav.offsetTop - wTop\n      imgY = img.offsetTop + img.offsetHeight / 2 + iOffset\n      offY = -Math.max navY - imgY, 0\n      @transform nav, y: offY\n\n  scaleForWaypoint: (waypoint) ->\n    if @options.data.zoom\n      index     = @options.data.waypoints.indexOf(waypoint)\n      {region}  = waypoint\n      image     = @getEl(\"image\")\n      wp        = @getEl(\"waypoints\").children[index]\n      wimage    = @getEl(\"images\").item(index)\n      navBounds = @getEl(\"navigation\").getBoundingClientRect()\n\n      viewportWidth  = wimage.firstChild.offsetWidth\n      viewportHeight = wimage.firstChild.offsetHeight\n      regionWidth    = (region.xMax - region.xMin) * image.offsetWidth\n      regionHeight   = (region.yMax - region.yMin) * image.offsetHeight\n      widthScale     = viewportWidth / regionWidth\n      heightScale    = viewportHeight / regionHeight\n      scaleToUse     = Math.min widthScale, heightScale\n    else\n      scaleToUse = 1\n\n  toggleCaption: (caption = false) ->\n    @setState(Boolean(caption), \"caption\")\n    @getEl(\"caption\").innerHTML = caption if caption\n\n    if not caption?\n      @getEl(\"caption\").style.background = \"\"\n    else if @options.data.lightbox?.background\n      @getEl(\"caption\").style.background = @options.data.lightbox.background\n\n  setContainerDimensions: ->\n    @getEl(\"waypoints\").style.height = \"#{@getEl(\"image\").offsetHeight}px\"\n    @getEl(\"waypoints\").style.width  = \"#{@getEl(\"image\").offsetWidth}px\"\n\n\nmodule.exports = ImageMapView\n","module.exports = {\"title\":\"image-multiple-choice\",\"display\":\"Multiple Choice: Image\",\"category\":\"Multiple Choice\",\"features\":{\"stars\":true,\"social\":true},\"description\":\"Select the correct image(s)\",\"model\":{\"title\":{\"types\":[\"text\",\"image\",\"audio\",\"video\"],\"default\":\"\"},\"selectable\":{\"display\":\"Number of selectable answers\",\"default\":1,\"type\":\"number\"},\"answers\":{\"display\":\"List items\",\"type\":[{\"image\":{\"type\":\"image\"},\"correct\":{\"type\":\"boolean\"}}],\"min\":2,\"max\":9},\"reject\":{\"type\":\"boolean\",\"default\":false,\"display\":\"Reject Answers\",\"help\":\"Users will not be able to select incorrect answers.\\n\"},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (seconds)\"},\"out-of-time-prompt\":{\"type\":\"html\",\"display\":\"Out of time prompt\"}}},\"prompt\":{\"type\":\"html\",\"default\":\"Select the correct answer\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"multiple-choice\",\"title\":\"Which is the correct product?\",\"selectable\":1,\"reject\":false,\"horizontal\":true,\"answers\":[{\"image\":\"img/examples/product-phone.png\",\"correct\":true},{\"image\":\"img/examples/product-laptop.png\"},{\"image\":\"img/examples/product-tablet.png\"}],\"answer\":{\"incorrect\":\"Not quite...\",\"correct\":\"That's correct!\",\"text\":\"Product X is correct.\\n\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (config, continueBtnText, doneText, game, hasNarration, hasPrompt, i18n, playinline, prompt, submitUp, tappies, undefined) {\njade_mixins[\"video-stream\"] = jade_interp = function(videoUrl, playsinline, controls, klass, poster){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nplayinline = playinline || true\ncontrols = controls || true\nklass = klass || 'video vjs-fluid'\nvar cloudinaryVideoFolderUrl = config.CLOUDINARY_CDN_URL+config.CLOUDINARY_VIDEO_FOLDER\nvar streamUrl = ''\nif ( videoUrl && videoUrl.indexOf(cloudinaryVideoFolderUrl) > -1)\n{\nstreamUrl = videoUrl.replace(cloudinaryVideoFolderUrl, cloudinaryVideoFolderUrl+'sp_full_hd/')\nstreamUrl = streamUrl.replace('.mp4', '.m3u8')\n}\nbuf.push(\"<video\" + (jade.attr(\"webkit-playsinline\", playsinline, true, false)) + (jade.attr(\"controls\", controls, true, false)) + \" preload=\\\"auto\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + (jade.attr(\"poster\", poster, true, false)) + (jade.cls(['video-js',klass], [null,true])) + \"><source\" + (jade.attr(\"src\", videoUrl, true, false)) + \"/>\");\nif ( streamUrl)\n{\nbuf.push(\"<source\" + (jade.attr(\"src\", streamUrl, true, false)) + \"/>\");\n}\nbuf.push(\"</video>\");\n};\njade_mixins[\"image\"] = jade_interp = function(imageUrl, klass){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nbuf.push(\"<img\" + (jade.attr(\"src\", imageUrl, true, false)) + (jade.cls([klass], [true])) + \"/>\");\n};\njade_mixins[\"multi-content\"] = jade_interp = function(prop, obj){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nobj = obj || locals;\nswitch (obj[prop + \"Type\"]){\ncase \"image\":\nbuf.push(\"<div\" + (jade.attr(\"data-content\", obj.image, true, false)) + \" class=\\\"multi-content-wrapper multi-content-wrapper-image block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\">\");\njade_mixins[\"image\"](obj[prop], 'multi-content multi-content-image');\nbuf.push(\"</div></div>\");\n  break;\ncase \"video\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-video block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\">\");\njade_mixins[\"video-stream\"](obj[prop], true, true,\"multi-content multi-content-video block-dk\");\nbuf.push(\"</div></div>\");\n  break;\ncase \"audio\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-audio block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><audio\" + (jade.attr(\"src\", obj[prop], true, false)) + \" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"multi-content multi-content-audio block-dk\\\"></audio></div></div>\");\n  break;\ncase \"iframe\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-iframe block-md block-lt\\\"><div class=\\\"block-sm multi-content-iframe\\\">\");\nvar iframe = obj[prop].match(/<iframe[^<]*<\\/iframe>/)\nif ( iframe)\n{\nbuf.push(null == (jade_interp = iframe[0].replace(/ (width|height)=[\"'\\d\\w]+/g, \"\")) ? \"\" : jade_interp);\n}\nbuf.push(\"</div></div>\");\n  break;\ndefault:\nbuf.push(\"<span class=\\\"multi-content multi-content-text\\\">\" + (null == (jade_interp = obj[prop]) ? \"\" : jade_interp) + \"</span>\");\n  break;\n}\n};\nif ( game && game.timer && game.timer.limit > 0 && !game.timer.isDisabled)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\njade_mixins[\"image\"] = jade_interp = function(imageUrl, klass){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nbuf.push(\"<img\" + (jade.attr(\"src\", imageUrl, true, false)) + (jade.cls([klass], [true])) + \"/>\");\n};\nbuf.push(\"<div class=\\\"content-fill text-center block-v-lg\\\"><div class=\\\"tappies-parent content-fill content-fit\\\"><h1 class=\\\"title block-v-md slide-up delay-3 tight\\\">\");\njade_mixins[\"multi-content\"](\"title\");\nbuf.push(\"</h1><div class=\\\"tappies\\\">\");\n// iterate tappies\n;(function(){\n  var $$obj = tappies;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var tappy = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-answer-id\", tappy.id, true, false)) + (jade.cls(['tappy','block-md','delay-4','selectable',(i % 2 == 0 ? \"slide-up\" : \"slide-down\") + \" delay-\" + (i + 1) + \"\",tappy.correct ? \"correct\" : \"incorrect\"], [null,null,null,null,true,true])) + \"><div class=\\\"tappy-content block-dk block-sm content-fill block-frame\\\">\");\njade_mixins[\"image\"](tappy.image, 'tappy-img content-ver');\nbuf.push(\"<div class=\\\"tappy-selection block-dk text-bold text-lg\\\"></div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var tappy = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-answer-id\", tappy.id, true, false)) + (jade.cls(['tappy','block-md','delay-4','selectable',(i % 2 == 0 ? \"slide-up\" : \"slide-down\") + \" delay-\" + (i + 1) + \"\",tappy.correct ? \"correct\" : \"incorrect\"], [null,null,null,null,true,true])) + \"><div class=\\\"tappy-content block-dk block-sm content-fill block-frame\\\">\");\njade_mixins[\"image\"](tappy.image, 'tappy-img content-ver');\nbuf.push(\"<div class=\\\"tappy-selection block-dk text-bold text-lg\\\"></div></div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"playinline\" in locals_for_with?locals_for_with.playinline:typeof playinline!==\"undefined\"?playinline:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"tappies\" in locals_for_with?locals_for_with.tappies:typeof tappies!==\"undefined\"?tappies:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","MultipleChoiceView = require \"../multiple-choice-game/view\"\nPreloader          = require \"lib/preload\"\nPrefix             = require \"lib/prefix\"\n\nclass ImageMultipleChoiceView extends MultipleChoiceView\n  template: require(\"./template\")\n  fitTextOnResize: false\n  fitTextOnRender: false\n\n  serialize: ->\n    data = super\n\n    answers = (@options.metadata.questions?[0]?.answers or [])\n      .filter((el) -> el and el.content)\n      .map (el) ->\n        image: el.content\n        correct: el.correct\n        id: el.id\n\n    data.tappies = _.shuffle(answers)\n\n    return data\n\n  answerDetails: ->\n    questions = @options.metadata.questions or []\n    return [] unless questions.length > 0\n\n    question = questions[0]\n    ids      = @getEl(\"selected\").map (e) -> @$(e).data('answer-id')\n    answers  = question.answers.filter (a) -> a.id in ids\n    details  = answers.map (a) -> question: question.question, answer: a\n    return details\n\n  onResize: ->\n    @setTappyHeight(true)\n\n  show: ->\n    super\n\n    @listenTo this, \"resize\", @onResize\n\n    @setTappyHeight()\n\n  setTappyHeight: (isResize) ->\n    unless @currentState?.refresh or isResize\n      @el.classList.remove(\"active\")\n\n    @setEl @findOne(\".tappies-parent\"), \"tappy-parent\"\n    @setEl @findAll(\".tappy\"), \"tappies\"\n    @setEl @findOne(\".title\"), \"title\"\n    @setEl @findOne(\".tappies\"), \"tappy-container\"\n\n    Preloader.load _.pluck(@findAll(\"img\"), \"src\"), (errors, imgs) =>\n\n      parent    = @getEl(\"tappy-parent\")\n      container = @getEl(\"tappy-container\")\n      title     = @getEl(\"title\")\n      { tappies } = @serialize()\n\n      for el in @getEl(\"tappies\")\n        el.style.opacity = 0\n\n      container.style.height = parent.offsetHeight - title.offsetHeight + \"px\"\n\n      iratio = _.chain(imgs)\n        .map((el) -> el.naturalWidth / el.naturalHeight)\n        .average()\n        .value()\n\n      cratio = parent.offsetWidth / (parent.offsetHeight - title.offsetHeight)\n      factor = cratio / iratio\n\n      rows = Math.round Math.sqrt(tappies.length * (iratio / cratio), 2)\n      rows = Math.max(Math.min(rows, tappies.length), 1)\n      cols = Math.round (tappies.length + tappies.length % rows) / rows\n\n      for el in @getEl(\"tappies\")\n        el.style.height = \"#{100 / rows}%\"\n        el.style.width  = \"#{100 / cols}%\"\n        el.offsetWidth\n        el.style.opacity = \"\"\n\n      @fitText =>\n        window.setTimeout (=> @el.classList.add(\"active\")), 300\n\nmodule.exports = ImageMultipleChoiceView\n","module.exports = {\"title\":\"image-pair\",\"display\":\"Image Pairs\",\"category\":\"Relationships\",\"features\":{\"stars\":true,\"social\":true},\"model\":{\"title\":{\"type\":\"text\",\"default\":\"Select the correct image in each group\"},\"multi\":{\"type\":\"boolean\",\"default\":false,\"display\":\"Select more than one correct answer\"},\"reject\":{\"type\":\"boolean\",\"default\":false,\"display\":\"Reject incorrect answers\"},\"groups\":{\"display\":\"Pairs\",\"min\":1,\"max\":4,\"type\":[{\"images\":{\"min\":2,\"max\":2,\"type\":[{\"image\":{\"type\":\"image\"},\"correct\":{\"type\":\"boolean\"}}]}}]},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"text\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"text\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"text\",\"default\":\"\",\"display\":\"Core Message\"}},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (seconds)\"},\"out-of-time-prompt\":{\"type\":\"html\",\"display\":\"Out of time prompt\"}}},\"prompt\":{\"type\":\"text\",\"default\":\"Select each correct image\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"image-pair\",\"title\":\"Which is our first product?\\n\",\"multi\":true,\"groups\":[{\"images\":[{\"image\":\"img/examples/product-phone.png\",\"correct\":true},{\"image\":\"img/examples/product-laptop.png\",\"correct\":false}]},{\"images\":[{\"image\":\"img/examples/product-laptop.png\",\"correct\":false},{\"image\":\"img/examples/product-phone.png\",\"correct\":true}]},{\"images\":[{\"image\":\"img/examples/product-phone.png\",\"correct\":true},{\"image\":\"img/examples/product-phone.png\",\"correct\":true}]},{\"images\":[{\"image\":\"img/examples/product-laptop.png\",\"correct\":false},{\"image\":\"img/examples/product-tablet.png\",\"correct\":false}]}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, doneText, game, hasNarration, hasPrompt, i18n, klass, metadata, prompt, submitUp, title, undefined) {\nif ( game && game.timer && game.timer.limit > 0 && !game.timer.isDisabled)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\njade_mixins[\"image\"] = jade_interp = function(imageUrl, klass){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nbuf.push(\"<img\" + (jade.attr(\"src\", imageUrl, true, false)) + (jade.cls([klass], [true])) + \"/>\");\n};\nbuf.push(\"<div class=\\\"content-fill\\\"><div class=\\\"block-v-md content-fill content-sm-ver content-md-ver\\\"><div class=\\\"row content-fill content-area text-center\\\"><div class=\\\"col-sm-12 col-lg-6 content-lg-ver\\\"><h1 class=\\\"title tight block-v-md\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1></div><div class=\\\"col-sm-12 col-lg-6\\\">\");\n// iterate metadata.questions\n;(function(){\n  var $$obj = metadata.questions;\n  if ('number' == typeof $$obj.length) {\n\n    for (var j = 0, $$l = $$obj.length; j < $$l; j++) {\n      var pair = $$obj[j];\n\nvar question = pair.question;\nvar answers = pair.answers;\nbuf.push(\"<div class=\\\"row\\\">\");\n// iterate _.shuffle(pair.answers)\n;(function(){\n  var $$obj = _.shuffle(pair.answers);\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var answer = $$obj[i];\n\nklass  = answer.correct ? \"correct\" : \"incorrect\"\nklass += i === 0 ? \" left\" : \" right\"\nbuf.push(\"<div class=\\\"col-sm-6 block-v-sm slide-up hide-overflow block-box-sizing\\\"><div\" + (jade.attr(\"data-correct\", answer.correct, true, false)) + (jade.attr(\"data-content\", answer.content, true, false)) + (jade.attr(\"data-answer-id\", answer.id, true, false)) + (jade.attr(\"data-question-id\", question.id, true, false)) + (jade.attr(\"data-group\", j, true, false)) + (jade.attr(\"data-image\", i, true, false)) + (jade.cls(['image-container','block-dk','block-sm','content-fill',klass], [null,null,null,null,true])) + \">\");\njade_mixins[\"image\"](answer.content, 'img content-ver block');\nbuf.push(\"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var answer = $$obj[i];\n\nklass  = answer.correct ? \"correct\" : \"incorrect\"\nklass += i === 0 ? \" left\" : \" right\"\nbuf.push(\"<div class=\\\"col-sm-6 block-v-sm slide-up hide-overflow block-box-sizing\\\"><div\" + (jade.attr(\"data-correct\", answer.correct, true, false)) + (jade.attr(\"data-content\", answer.content, true, false)) + (jade.attr(\"data-answer-id\", answer.id, true, false)) + (jade.attr(\"data-question-id\", question.id, true, false)) + (jade.attr(\"data-group\", j, true, false)) + (jade.attr(\"data-image\", i, true, false)) + (jade.cls(['image-container','block-dk','block-sm','content-fill',klass], [null,null,null,null,true])) + \">\");\njade_mixins[\"image\"](answer.content, 'img content-ver block');\nbuf.push(\"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var j in $$obj) {\n      $$l++;      var pair = $$obj[j];\n\nvar question = pair.question;\nvar answers = pair.answers;\nbuf.push(\"<div class=\\\"row\\\">\");\n// iterate _.shuffle(pair.answers)\n;(function(){\n  var $$obj = _.shuffle(pair.answers);\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var answer = $$obj[i];\n\nklass  = answer.correct ? \"correct\" : \"incorrect\"\nklass += i === 0 ? \" left\" : \" right\"\nbuf.push(\"<div class=\\\"col-sm-6 block-v-sm slide-up hide-overflow block-box-sizing\\\"><div\" + (jade.attr(\"data-correct\", answer.correct, true, false)) + (jade.attr(\"data-content\", answer.content, true, false)) + (jade.attr(\"data-answer-id\", answer.id, true, false)) + (jade.attr(\"data-question-id\", question.id, true, false)) + (jade.attr(\"data-group\", j, true, false)) + (jade.attr(\"data-image\", i, true, false)) + (jade.cls(['image-container','block-dk','block-sm','content-fill',klass], [null,null,null,null,true])) + \">\");\njade_mixins[\"image\"](answer.content, 'img content-ver block');\nbuf.push(\"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var answer = $$obj[i];\n\nklass  = answer.correct ? \"correct\" : \"incorrect\"\nklass += i === 0 ? \" left\" : \" right\"\nbuf.push(\"<div class=\\\"col-sm-6 block-v-sm slide-up hide-overflow block-box-sizing\\\"><div\" + (jade.attr(\"data-correct\", answer.correct, true, false)) + (jade.attr(\"data-content\", answer.content, true, false)) + (jade.attr(\"data-answer-id\", answer.id, true, false)) + (jade.attr(\"data-question-id\", question.id, true, false)) + (jade.attr(\"data-group\", j, true, false)) + (jade.attr(\"data-image\", i, true, false)) + (jade.cls(['image-container','block-dk','block-sm','content-fill',klass], [null,null,null,null,true])) + \">\");\njade_mixins[\"image\"](answer.content, 'img content-ver block');\nbuf.push(\"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"klass\" in locals_for_with?locals_for_with.klass:typeof klass!==\"undefined\"?klass:undefined,\"metadata\" in locals_for_with?locals_for_with.metadata:typeof metadata!==\"undefined\"?metadata:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView = require \"views/base/game\"\nPreloader = require(\"lib/preload\")\n\nclass ImagePairView extends GameView\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap .image-container\": \"selectImage\"\n    \"iostap .btn-done\": \"endGame\"\n\n  show: ->\n    super\n    @setEl @findAll(\".image-container\"), \"images\"\n    @setEl @findOne(\".title\"), \"title\"\n    @setEl @findOne(\".content-area\"), \"parent\"\n    @setState @options.data.reject, \"reject\"\n    @listenTo this, \"resize\", @onResize\n\n    images = _.chain(@options.metadata.questions)\n      .pluck(\"answers\")\n      .flatten()\n      .pluck(\"content\")\n      .union()\n      .value()\n\n    Preloader.load images, => @onResize()\n\n    @enterGame()\n\n  onResize: ->\n    for image in @getEl(\"images\")\n      image.parentNode.style.height = \"\"\n\n    outerHeight = @getEl(\"parent\").offsetHeight\n    outerHeight -= @getEl(\"title\").offsetHeight if @el.offsetWidth < 1024\n    groupLength = @options.data.groups.length\n    maxHeight   = (outerHeight / groupLength)\n\n    height = _.reduce @getEl(\"images\"), (\n      (m, e) -> Math.min(m, e.offsetHeight)\n    ), maxHeight\n\n    @getEl(\"parent\").classList.toggle(\"content-fill\", height is maxHeight)\n    @getEl(\"parent\").classList.toggle(\"content-ver\", height < maxHeight)\n\n    for image in @getEl(\"images\")\n      image.parentNode.style.height = height + \"px\"\n\n  selectImage: (e) ->\n    image = e.currentTarget\n\n    if @options.data.reject and not image.dataset.correct?\n      wasIncorrect = true\n      image.classList.add \"show-incorrect\"\n      window.setTimeout (-> image.classList.remove \"show-incorrect\"), 500\n    else\n      image.classList.toggle \"active\"\n\n    unless @options.data.multi or wasIncorrect\n      for other in @getEl(\"images\")\n        if other isnt image and other.dataset.group is image.dataset.group\n          other.classList.remove(\"active\")\n\n    @setState(if @isTouched() then \"touched\" else \"prompt\")\n\n  isTouched: ->\n    if @options.data.multi\n      true\n    else\n      _.chain(@getEl(\"images\"))\n        .groupBy((e, i) -> ~~(i / 2))\n        .map((group) -> group.filter((e) -> e.classList.contains \"active\"))\n        .reduce(((isTouched, group) -> isTouched and group.length > 0), true)\n        .value()\n\n  imageIsCorrect: (image) ->\n    image.classList.contains(\"active\") is image.dataset.correct?\n\n  isCorrect: ->\n    _.chain(@getEl(\"images\"))\n      .map(@imageIsCorrect)\n      .reduce(((allCorrect, isCorrect) -> allCorrect and isCorrect), true)\n      .value()\n\n  answerDetails: ->\n    questions = @options.metadata?.questions or []\n    return [] unless questions.length > 0\n\n    questionsById = _.chain(questions)\n      .pluck('question')\n      .indexBy('id')\n      .value()\n    answersById = _.chain(questions)\n      .pluck('answers')\n      .flatten()\n      .indexBy('id')\n      .value()\n\n    # TODO: fix the question/answer format for this template\n    # Each image is it's own question instead of each pair\n    return _.chain(@getEl('images'))\n      .compact()\n      .groupBy((e) -> e.dataset.questionId)\n      .map((images, questionId) ->\n        # For now we return the selected images as answers\n        _.chain(images)\n          .filter((i) -> i.classList.contains \"active\")\n          .map((answer) ->\n              question: questionsById[questionId]\n              answer: answersById[answer.dataset.answerId]\n          )\n          .value()\n      )\n      .compact()\n      .flatten()\n      .value()\n\n  endGame: ->\n    super\n\n    @submit()\n\nmodule.exports = ImagePairView\n","module.exports = {\"title\":\"image-slider\",\"display\":\"Image Slider\",\"category\":\"Content\",\"description\":\"Swipe through a group of images\",\"features\":{\"narration\":true,\"social\":true},\"model\":{\"items\":{\"min\":1,\"max\":10,\"type\":[{\"content\":{\"types\":[\"image\",\"text\"]},\"imagePosition\":{\"type\":\"select\",\"enum\":[\"Top\",\"Middle\",\"Bottom\",\"Cover\"],\"default\":\"Middle\",\"display\":\"Image Position\"},\"caption\":{\"type\":\"html\"},\"captionStyle\":{\"type\":\"select\",\"enum\":[\"Default\",\"Light\",\"Dark\",\"Transparent Light Text\",\"Transparent Dark Text\"],\"default\":\"Default\",\"display\":\"Caption Style\"},\"position\":{\"type\":\"select\",\"enum\":[\"Top\",\"Middle\",\"Bottom\"],\"default\":\"Bottom\",\"display\":\"Caption Position\"},\"color\":{\"type\":\"string\",\"default\":\"\",\"display\":\"Background Color\"}}]},\"arrows\":{\"type\":\"boolean\",\"default\":true,\"help\":\"Use arrows to indicate how the template works. Hiding the arrows can help to focus on the slide content.\\n\"},\"prompt\":{\"type\":\"html\",\"default\":\"Swipe up to see more\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\",\"help\":\"Appears after multiple images are viewed.\"}},\"examples\":[{\"subtype\":\"multiple\",\"items\":[{\"contentType\":\"text\",\"content\":\"Swipe up to learn more about our range of products.\"},{\"content\":\"img/examples/product-phone.png\",\"contentType\":\"image\",\"caption\":\"Our brilliant new sleek design allows the user to have unparalleled comfort when using the device.\\n\",\"position\":\"Middle\",\"color\":\"#91A6BA\"},{\"content\":\"img/examples/product-laptop.png\",\"contentType\":\"image\",\"caption\":\"Crystal clear display performs better than any of our competitors.\\n\",\"position\":\"Bottom\",\"captionStyle\":\"Transparent Light Text\",\"color\":\"#9fb9bf\"},{\"content\":\"img/examples/product-tablet.png\",\"contentType\":\"image\",\"caption\":\"The newest feature offers a new level of feedback for the user.\\n\",\"position\":\"Top\",\"captionStyle\":\"Dark\",\"color\":\"rgba(29, 46, 67, 0.84)\"}]},{\"subtype\":\"single\",\"items\":[{\"content\":\"img/examples/product-phone.png\",\"contentType\":\"image\",\"caption\":\"\\n### Product X\\nBrilliant. In every way.\\n\"}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (arrows, continueBtnText, doneText, hasNarration, hasPrompt, i18n, items, prompt, submitUp, undefined, written) {\njade_mixins[\"image\"] = jade_interp = function(imageUrl, klass){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nbuf.push(\"<img\" + (jade.attr(\"src\", imageUrl, true, false)) + (jade.cls([klass], [true])) + \"/>\");\n};\nbuf.push(\"<div class=\\\"content-fill slide-up\\\"><div class=\\\"carousel content-fill delay-6\\\"><div\" + (jade.attr(\"style\", \"height: \" + (items.length * 100) + \"%;\", true, false)) + \" class=\\\"carousel-slider content-fill clearfix\\\">\");\n// iterate items\n;(function(){\n  var $$obj = items;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var item = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"height: \" + (100 / items.length) + \"%;\", true, false)) + (jade.cls(['carousel-item','content-fill',[\n            \"style-\" + written.hyphenCase(item.captionStyle),\n            \"img-pos-\" + written.hyphenCase(item.imagePosition)\n          ].join(\" \")], [null,null,true])) + \"><div\" + (jade.cls(['content-fill','carousel-content',(\n              item.imagePosition === \"Cover\" ? \"full-screen\" : \"\"\n            )], [null,null,true])) + \">\");\nswitch (item.contentType){\ncase \"text\":\nbuf.push(\"<div class=\\\"content-ver text-center text-md\\\">\" + (null == (jade_interp = item.content) ? \"\" : jade_interp) + \"</div>\");\n  break;\ncase \"image\":\nif ( item.imagePosition === \"Cover\")\n{\nbuf.push(\"<div\" + (jade.attr(\"style\", \"background-image: url(\" + (item.content) + \")\", true, false)) + \" class=\\\"img-pos-cover\\\"></div>\");\n}\nelse\n{\njade_mixins[\"image\"](item.content, 'img content');\n}\n  break;\n}\nbuf.push(\"</div>\");\nif ( item.caption)\n{\nbuf.push(\"<div\" + (jade.cls(['caption','text-center','block-box-sizing',\"position-\" + ((item.position || 'bottom').toLowerCase()) + \"\"], [null,null,null,true])) + \"><div class=\\\"caption-content text-md block-lg\\\">\" + (null == (jade_interp = item.caption) ? \"\" : jade_interp) + \"</div></div>\");\n}\nbuf.push(\"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var item = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"height: \" + (100 / items.length) + \"%;\", true, false)) + (jade.cls(['carousel-item','content-fill',[\n            \"style-\" + written.hyphenCase(item.captionStyle),\n            \"img-pos-\" + written.hyphenCase(item.imagePosition)\n          ].join(\" \")], [null,null,true])) + \"><div\" + (jade.cls(['content-fill','carousel-content',(\n              item.imagePosition === \"Cover\" ? \"full-screen\" : \"\"\n            )], [null,null,true])) + \">\");\nswitch (item.contentType){\ncase \"text\":\nbuf.push(\"<div class=\\\"content-ver text-center text-md\\\">\" + (null == (jade_interp = item.content) ? \"\" : jade_interp) + \"</div>\");\n  break;\ncase \"image\":\nif ( item.imagePosition === \"Cover\")\n{\nbuf.push(\"<div\" + (jade.attr(\"style\", \"background-image: url(\" + (item.content) + \")\", true, false)) + \" class=\\\"img-pos-cover\\\"></div>\");\n}\nelse\n{\njade_mixins[\"image\"](item.content, 'img content');\n}\n  break;\n}\nbuf.push(\"</div>\");\nif ( item.caption)\n{\nbuf.push(\"<div\" + (jade.cls(['caption','text-center','block-box-sizing',\"position-\" + ((item.position || 'bottom').toLowerCase()) + \"\"], [null,null,null,true])) + \"><div class=\\\"caption-content text-md block-lg\\\">\" + (null == (jade_interp = item.caption) ? \"\" : jade_interp) + \"</div></div>\");\n}\nbuf.push(\"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div>\");\nif ( arrows)\n{\nbuf.push(\"<div class=\\\"btn btn-muted btn-circular btn-up\\\"><span class=\\\"icon icon-chevron-up text-lg\\\"></span></div><div class=\\\"btn btn-muted btn-circular btn-down\\\"><span class=\\\"icon icon-chevron-down text-lg\\\"></span></div>\");\n}\nbuf.push(\"</div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"arrows\" in locals_for_with?locals_for_with.arrows:typeof arrows!==\"undefined\"?arrows:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"items\" in locals_for_with?locals_for_with.items:typeof items!==\"undefined\"?items:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined,\"written\" in locals_for_with?locals_for_with.written:typeof written!==\"undefined\"?written:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView  = require(\"views/slide\")\n{ DraggyView } = require(\"views/components/draggy\")\nPreload    = require(\"lib/preload\")\n\nclass ImageSliderView extends SlideView\n  template: require(\"./template\")\n\n  currentIndex: 0\n\n  events: {\n    \"iostap .btn-done\": \"submit\"\n    \"iostap\": \"onTap\"\n  }\n\n  submit: (e) ->\n    e.stopImmediatePropagation()\n    super arguments...\n\n  onTap: (e) ->\n    return if e.target instanceof HTMLAnchorElement\n\n    index = @currentIndex\n\n    if (e.detail?.clientY) > @el.offsetHeight / 2\n      index++\n    else\n      index--\n\n    index = Math.max(Math.min(index, @options.data.items.length - 1), 0)\n\n    @draggy?.reset { y: -index * @draggy.offset.height }\n\n  serialize: ->\n    data = super arguments...\n\n    @options.data.items = data.items =\n      (data.items or []).filter (m) ->\n        m.content or (m.caption and m.caption.length > 0)\n\n    for item in data.items\n      item.contentType ?= \"image\"\n      item.captionStyle ?= \"Default\"\n      item.imagePosition ?= \"Middle\"\n\n    if data.items.length <= 1\n      window.setTimeout (=> @setState \"touched\"), 0\n\n    data.hasPrompt = true\n    data.arrows ?= true\n\n    data\n\n  beforeShow: ->\n    if @options.data.arrows\n      @trigger(\"hide\", { arrows: false })\n\n  show: (index = 0) ->\n    @draggy?.undelegateEvents()\n    @draggy = null\n\n    unless @draggy\n      el = @findOne(\".carousel\")\n      @setEl el.firstChild, \"scroller\"\n      @setEl @findOne(\".btn-up\"), \"btn-up\"\n      @setEl @findOne(\".btn-down\"), \"btn-down\"\n\n      if @options.data.items.length > 1\n        len = (@options.data.items.length - 1)\n        min = -el.offsetHeight * len\n\n        @draggy  = new DraggyView {\n          el: el\n          minY: min\n          maxY: 0\n          lock: \"x\"\n          allowPropagation: true\n        }\n\n        @listenTo @draggy, \"drag\", @onDrag\n        @listenTo @draggy, \"drop\", @onDrop\n\n        @draggy.reset { y: -@draggy.offset.height * Math.min(index, len) }\n\n      else if item = @getEl(\"scroller\").firstChild\n        item.classList.add(\"active\")\n        for el in item.children\n          @transform el, {\n            opacity: 1\n            transition: \"all 300ms\"\n          }\n\n      @trigger \"ui\", { lightbox: @options.data.items[0]?.color or false }\n\n      @listenTo this, \"resize\", @onResize\n      @onResize()\n\n  onDrag: (draggy, isInitial) ->\n    window.Backbone.trigger(\"canceltap\")\n\n    transition = if isInitial then \"all 300ms\" else \"none\"\n\n    @transform @getEl(\"scroller\"), {\n      y: @getScrollDist(draggy)\n      transition: transition\n    }\n\n    @updateChildren(draggy, transition)\n\n  onDrop: (draggy, isReset) ->\n    if isReset\n      transition    = if @currentIndex? then \"all 300ms\" else \"\"\n      @currentIndex = Math.floor(-draggy.y / draggy.offset.height)\n\n      @transform @getEl(\"scroller\"), {\n        y: @getScrollDist(draggy)\n        transition: transition\n      }\n\n      @updateChildren(draggy, transition)\n\n    else\n      y = draggy.velocity.y\n      m = 0.9\n      func =\n        if y < -m then \"ceil\"\n        else if y > m then \"floor\"\n        else \"round\"\n\n      step = Math[func](Math.min(draggy.y / draggy.offset.height, 1))\n      draggy.reset { y: step * draggy.offset.height }\n\n    total = @options.data.items.length - 1\n\n    currentItem = @options.data.items[@currentIndex or 0]\n\n    @trigger \"ui\", { lightbox: currentItem?.color or false }\n\n    @setState currentItem.position?.toLowerCase() or \"none\", \"caption-position\"\n\n    @getEl(\"btn-up\").classList.toggle \"active\", @currentIndex > 0\n    @getEl(\"btn-down\").classList.toggle \"active\", @currentIndex < total\n\n    if @currentIndex is total\n      @setState(\"touched\")\n\n  updateChildren: (draggy, transition) ->\n    { height } = draggy.offset\n\n    for child, i in @getEl(\"scroller\").children\n      child.classList.toggle(\"active\", i is @currentIndex)\n      child.classList.toggle(\"transition\", transition isnt \"\")\n\n      if transition\n        @transition(child, transition, true)\n\n      o = Math.abs(draggy.y + (i * height)) / height\n\n      for item, i in child.children when not item.classList.contains \"caption\"\n        @transform item, {\n          y: -o * height / (i + 1) / 3\n          opacity: 1 - o\n          transition: transition\n        }\n\n  getScrollDist: (draggy) ->\n    \"#{\n      draggy.y / draggy.offset.height / @options.data.items.length * 100\n    }%\"\n\n  onResize: ->\n    if scroller = @getEl(\"scroller\") and @draggy\n      @draggy.y = -@currentIndex * @draggy.offset.height\n      @draggy.options.minY =\n        -@draggy.el.offsetHeight * (@options.data.items.length - 1)\n      @draggy.getOffset()\n\n  refresh: (params) ->\n    for next, i in params.data.items\n      prev = @options.data.items[i]\n\n      # if new section prev does not exist\n      if prev\n        for key, val of next\n          if prev[key] is undefined or prev[key] isnt val\n            changed = i\n          break if changed?\n      else\n        changed = i\n      break if changed?\n\n    super arguments...\n\n    if @draggy\n      @draggy.undelegateEvents()\n      @draggy = @currentIndex = null\n\n    @show(changed)\n\n  screenshot: ->\n    @currentIndex = -1\n\n    new Promise (resolve, reject) =>\n      getPages = (images = []) =>\n        if @currentIndex < @options.data.items.length - 1\n          @currentIndex++\n\n          if @options.data.items.length > 1\n            @draggy?.reset { y: -@currentIndex * @draggy.offset.height }\n\n          @collateScreenshots(images)\n            .then(getPages)\n            .catch(reject)\n        else\n          resolve(images)\n\n      getPages()\n\nmodule.exports = ImageSliderView\n","module.exports = {\"title\":\"image-waypoints\",\"display\":\"Image Waypoints\",\"category\":\"Content\",\"description\":\"Highlight important details in an image\",\"features\":{\"narration\":true,\"social\":true},\"model\":{\"url\":{\"type\":\"image\",\"default\":\"\",\"display\":\"Image\"},\"waypoints\":{\"min\":1,\"max\":20,\"type\":[{\"region\":{\"type\":\"image-region\",\"for\":\"url\"},\"caption\":{\"type\":\"html\",\"default\":\"\"},\"narration\":{\"type\":\"audio\"}}]},\"guided\":{\"type\":\"boolean\",\"default\":false,\"help\":\"Start on the first waypoint and only continue with Previous and Next buttons.\\n\"},\"appearance\":{\"waypointColor\":{\"display\":\"Waypoints Color\",\"type\":\"select\",\"default\":\"White\",\"enum\":[\"Black\",\"White\"]}},\"lightbox\":{\"background\":{\"type\":\"string\",\"default\":\"\",\"display\":\"Background Color\",\"help\":\"This color (eg. \\\"orange\\\", \\\"#f90\\\", \\\"rgb(255,160,0)\\\") will be used for the background of the entire screen in lightbox mode.\\n\"},\"textColor\":{\"display\":\"Text Color\",\"type\":\"select\",\"default\":\"White\",\"enum\":[\"Black\",\"White\"]}},\"prompt\":{\"type\":\"html\",\"default\":\"Explore the image\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"guided\",\"url\":\"img/examples/product-phone.png\",\"guided\":true,\"waypoints\":[{\"region\":{\"xMin\":0,\"xMax\":1,\"yMin\":0,\"yMax\":1}},{\"region\":{\"xMin\":0.62,\"xMax\":0.78,\"yMin\":0,\"yMax\":0.15},\"caption\":\"12 MP Front-Facing Camera\"},{\"region\":{\"xMin\":0.14,\"xMax\":0.75,\"yMin\":0.19,\"yMax\":0.75},\"caption\":\"Super Retina HD Display\"},{\"region\":{\"xMin\":0.24,\"xMax\":0.43,\"yMin\":0.78,\"yMax\":1},\"caption\":\"Power and Battery\"}]},{\"subtype\":\"unguided\",\"url\":\"img/examples/product-phone.png\",\"guided\":false,\"waypoints\":[{\"region\":{\"xMin\":0.64,\"xMax\":0.76,\"yMin\":0,\"yMax\":0.15},\"caption\":\"\\n**12 MP Front-Facing Camera**\\n\\nA new sensor creates better image fidelity, greater colour accuracy and reduced noise in low-light shots.\\n\"},{\"region\":{\"xMin\":0.14,\"xMax\":0.75,\"yMin\":0.19,\"yMax\":0.75},\"caption\":\"\\n**Super Retina HD Display**\\n\\nThe custom-engineered OLED displays deliver the most accurate colour in the industry, as well as HDR and true blacks.\\n\"},{\"region\":{\"xMin\":0.24,\"xMax\":0.43,\"yMin\":0.78,\"yMax\":1},\"caption\":\"\\n**Power and Battery**\\n\\nBuilt-in rechargeable lithium-ion battery with wireless charging.\\n\"}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, doneText, guided, hasNarration, hasPrompt, i18n, prompt, submitUp, undefined, url, waypoints) {\njade_mixins[\"image\"] = jade_interp = function(imageUrl, klass){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nbuf.push(\"<img\" + (jade.attr(\"src\", imageUrl, true, false)) + (jade.cls([klass], [true])) + \"/>\");\n};\njade_mixins[\"image\"] = jade_interp = function(imageUrl, klass){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nbuf.push(\"<img\" + (jade.attr(\"src\", imageUrl, true, false)) + (jade.cls([klass], [true])) + \"/>\");\n};\nbuf.push(\"<div class=\\\"full-screen content-fill hide-overflow text-center\\\"><div class=\\\"image-container content-ver block-inline\\\">\");\njade_mixins[\"image\"](url, 'img');\nif ( !guided)\n{\nbuf.push(\"<div class=\\\"waypoints\\\">\");\n// iterate waypoints\n;(function(){\n  var $$obj = waypoints;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var w = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"left: \" + (w.center.x * 100) + \"%; top: \" + (w.center.y * 100) + \"%\", true, false)) + (jade.attr(\"data-index\", i, true, false)) + \" class=\\\"waypoint\\\"></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var w = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"left: \" + (w.center.x * 100) + \"%; top: \" + (w.center.y * 100) + \"%\", true, false)) + (jade.attr(\"data-index\", i, true, false)) + \" class=\\\"waypoint\\\"></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\n}\nbuf.push(\"</div><div class=\\\"navigation text-center\\\"><div class=\\\"caption text-md block-lg\\\"></div>\");\nif ( guided)\n{\nbuf.push(\"<div class=\\\"btn-container\\\"><div class=\\\"col-sm-4 col-sm-offset-2 col-lg-3 col-lg-offset-3 block-v-sm\\\"><div class=\\\"prev-wp btn btn-block\\\"><span class=\\\"icon icon-chevron-left text-xl\\\"></span></div></div><div class=\\\"col-sm-4 col-lg-3 block-v-sm\\\"><div class=\\\"next-wp btn btn-block\\\"><span class=\\\"icon icon-chevron-right text-xl\\\"></span></div></div></div>\");\n}\nbuf.push(\"</div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"guided\" in locals_for_with?locals_for_with.guided:typeof guided!==\"undefined\"?guided:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined,\"url\" in locals_for_with?locals_for_with.url:typeof url!==\"undefined\"?url:undefined,\"waypoints\" in locals_for_with?locals_for_with.waypoints:typeof waypoints!==\"undefined\"?waypoints:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView = require(\"views/slide\")\n{ Sound } = Application.actions()\n\nclass ImageWaypointsView extends SlideView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-done\": \"submit\"\n    \"iostap .prev-wp\": \"goToPrevWaypoint\"\n    \"iostap .next-wp\": \"goToNextWaypoint\"\n    \"iostap .waypoint\": \"tapWaypoint\"\n    \"iostap\": \"exitWaypoint\"\n\n  serialize: ->\n    data = super\n    data.hasPrompt = true\n\n    for waypoint in data.waypoints\n      waypoint.center = @getCenter(waypoint.region)\n\n    data\n\n  submit: (e) ->\n    e?.stopImmediatePropagation()\n    super\n\n  beforeHide: ->\n    @trigger(\"ui\", lightbox: false)\n    Sound.fadeOut(@currentSrc, 500, 0.02) if @currentSrc\n    @exitWaypoint()\n\n  hide: ->\n    @el.classList.remove(\"is-loaded\")\n\n  refresh: (params) ->\n    for { caption }, i in params.data.waypoints\n      changed = i unless caption is @options.data.waypoints[i]?.caption\n\n    super\n\n    @beforeShow()\n    @show(false)\n\n    if changed?\n      @el.classList.add \"no-transition\"\n      @goToWaypoint(changed)\n      _.delay (=> @el.classList.remove \"no-transition\"), 1\n\n  onRefresh: ->\n\n  onResize: ->\n    if @getEl(\"container\")\n      @getEl(\"container\").style.height = \"\"\n      @getEl(\"container\").style.width = \"\"\n      @getEl(\"container\").parentNode?.style.height = \"\"\n    @setDimensions()\n\n  beforeShow: ->\n    @setState(false, \"zoom\")\n    @setState @options.data.guided.toString(), \"guided\"\n\n    if @options.data.guided\n      @showLightbox()\n    else\n      @trigger(\"ui\", lightbox: false)\n\n  setTextColor: (lightbox) ->\n    if color = lightbox?.textColor?.toLowerCase()\n      @el.style.color = lightbox?.textColor?.toLowerCase()\n\n  setWaypointColor: (appearance) ->\n    if color = appearance?.waypointColor?.toLowerCase()\n      # Remove all existing style-option classes\n      @el.classList.remove(\"waypoint-black\", \"waypoint-white\")\n      @el.classList.add(\"waypoint-#{color}\")\n\n  showLightbox: ->\n    @setState(true, \"zoom\")\n    @trigger(\"ui\", lightbox: @options.data.lightbox?.background or true)\n\n  show: (fadeImage = true) ->\n    @setEl img = @findOne(\".img\"), \"image\"\n    @setEl @findOne(\".caption\"), \"caption\"\n    @setEl @findOne(\".waypoints\"), \"waypoints\"\n    @setEl @findOne(\".navigation\"), \"navigation\"\n    @setEl @findOne(\".image-container\"), \"container\"\n\n    @setState(\"prompt\")\n    @setState(false, \"zoom\")\n    @setState @options.data.guided.toString(), \"guided\"\n\n    @setTextColor(@options.data.lightbox)\n    @setWaypointColor(@options.data.appearance)\n    @listenTo this, \"resize\", @onResize\n\n    if not fadeImage\n      @el.classList.add \"no-transition\"\n\n    if img?.complete\n      @resetImageScale()\n      @setDimensions()\n    else if img?\n      img.onload = => \n        @resetImageScale()\n        @setDimensions()\n\n  resetImageScale: ->\n    @transform @getEl(\"image\"), \"none\"\n\n  setDimensions: ->\n    @setContainerDimensions()\n    @el.classList.add(\"is-loaded\")\n\n    if @options.data.guided\n      @goToWaypoint 0\n\n    @el.offsetLeft\n    @el.classList.remove \"no-transition\"\n\n  getCenter: (wp) ->\n    x: (wp.xMin + wp.xMax) / 2\n    y: (wp.yMin + wp.yMax) / 2\n\n  allWaypointsTapped: ->\n    _.reduce @getEl(\"waypoints\").children, (allTapped, el) ->\n      allTapped and el.dataset.tapped\n    , true\n\n  tapWaypoint: (e) ->\n    el = e.target\n    e.stopImmediatePropagation()\n\n    @goToWaypoint +el.dataset.index\n\n    el.dataset.tapped = \"true\"\n    el.classList.add \"tapped\"\n\n    if @allWaypointsTapped()\n      @setState(\"touched\")\n\n  goToPrevWaypoint: (e) ->\n    e.stopImmediatePropagation()\n    @goToWaypoint Math.max @currentIndex - 1, @limits().min\n\n  goToNextWaypoint: (e) ->\n    e.stopImmediatePropagation()\n    @goToWaypoint Math.min @currentIndex + 1, @limits().max\n\n  updateNextPrevButtons: ->\n    if @options.data.guided\n      { min, max } = @limits()\n      @el.classList.toggle(\"prev-disabled\", @currentIndex is min)\n      @el.classList.toggle(\"next-disabled\", @currentIndex is max)\n      @setState(\"touched\") if @currentIndex is max\n\n  limits: ->\n    min: 0\n    max: @options.data.waypoints.length - 1\n\n  goToWaypoint: (@currentIndex) ->\n    { region, caption, narration } = @options.data.waypoints[@currentIndex]\n    loaded = false\n\n    Sound.stop(@currentSrc) if @currentSrc\n    if (@currentSrc = narration) and not @withoutNarration\n      @showLoadingNarration()\n      Sound.play narration,\n        cb: => @hideLoadingNarration()\n        onProgress: =>\n          unless loaded\n            loaded = true\n            @hideLoadingNarration()\n\n    @showLightbox()\n    @updateNextPrevButtons()\n    @toggleCaption(caption)\n    @scaleImage(region)\n\n  exitWaypoint: ->\n    Sound.fadeOut(@currentSrc, 500, 0.02) if @currentSrc\n\n    if not @options.data.guided\n      @toggleCaption()\n      @setState(false, \"zoom\")\n      @trigger(\"ui\", lightbox: false)\n      @resetImageScale()\n\n  scaleImage: (region, zoomed = true) ->\n    image     = @getEl(\"image\")\n    navBounds = @getEl(\"navigation\").getBoundingClientRect()\n    { x, y } = @getCenter(region)\n\n    viewportWidth  = @el.offsetWidth\n    # 150 height of navigation\n    viewportHeight = if zoomed || @options.data.guided then window.innerHeight - 150 else @el.offsetHeight\n    # get the highlighted region's dimension\n    regionWidth    = (region.xMax - region.xMin) * image.width #size in px\n    regionHeight   = (region.yMax - region.yMin) * image.height #size in px\n    # zoom image relative to the highlighted region\n    widthScale     = viewportWidth / regionWidth\n    heightScale    = viewportHeight / regionHeight\n    @scaleToUse    = parseFloat(Math.min(widthScale, heightScale))\n    # move highlighted region to the center of the screen\n    # 50% is to center the region, similar to this trick {position: relative; top: 50%; left: 50%}\n    translateX     = -x * 100 * @scaleToUse + 50 + \"%\"\n    translateY     = -y * 100 * @scaleToUse + 50 + \"%\"\n    @transform image, \"translateX(#{translateX}) translateY(#{translateY}) scale(#{@scaleToUse})\"\n\n  toggleCaption: (caption = false) ->\n    @setState(Boolean(caption), \"caption\")\n    @getEl(\"caption\").innerHTML = caption or \"\"\n\n    if not caption?\n      @getEl(\"caption\").style.background = \"\"\n    else if @options.data.lightbox?.background\n      @getEl(\"caption\").style.background = @options.data.lightbox.background\n\n  setContainerDimensions: ->\n    img = @getEl(\"image\")\n    parentContainer = @getEl(\"container\").parentNode.parentNode\n    return unless img? and parentContainer?\n\n    if img.width == 0 || img.height == 0 \n      # if image width/height is not detected, follow parent container's dimension\n      # this case is possible in firefox for svg without explicit width/height\n      if parentContainer.offsetWidth < parentContainer.offsetHeight\n        @getEl(\"container\").style.width = \"#{parentContainer.offsetWidth}px\"\n      else\n        @getEl(\"container\").style.height = \"#{parentContainer.offsetHeight}px\" \n      return\n\n    widthScale = parentContainer.offsetWidth / img.width\n    heightScale = parentContainer.offsetHeight / img.height\n    scale = Math.min(widthScale, heightScale)\n    scaledContainer  = {\n      width: img.width * scale\n      height: img.height * scale\n    }\n    @getEl(\"container\").style.width = \"#{scaledContainer.width}px\"\n    @getEl(\"container\").style.height = \"#{scaledContainer.height}px\"\n\n\nmodule.exports = ImageWaypointsView\n","module.exports = {\"title\":\"image\",\"display\":\"Simple Image\",\"category\":\"Content\",\"features\":{\"narration\":true,\"social\":true},\"description\":\"Display an image and optional caption\",\"model\":{\"url\":{\"type\":\"image\",\"default\":\"\",\"display\":\"Image\"},\"compose\":{\"type\":\"boolean\",\"default\":false,\"help\":\"Add a border and shadow to the image.\\n\"},\"autofocus\":{\"type\":\"boolean\",\"default\":false,\"help\":\"Automatically focus on the image to show its caption.\\n\"},\"caption\":{\"title\":{\"type\":\"html\",\"default\":\"\"},\"content\":{\"type\":\"html\",\"default\":\"\"}},\"tapAnywhere\":{\"type\":\"boolean\",\"display\":\"Tap anywhere to continue\",\"default\":false,\"help\":\"Let the user tap anywhere on the screen to continue to the next slide. This only applies if there is no caption.\\n\"},\"prompt\":{\"type\":\"html\",\"default\":\"Select the image for more details\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"image\",\"url\":\"img/examples/product-phone.png\",\"autofocus\":false,\"compose\":true,\"caption\":{\"title\":\"Product X\",\"content\":\"Our brilliant new sleek design allows the user to have unparalleled comfort when using the device.\\n\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (backgroundColor, caption, compose, continueBtnText, doneText, hasCaption, hasNarration, hasPrompt, i18n, prompt, submitUp, url) {\njade_mixins[\"image\"] = jade_interp = function(imageUrl, klass){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nbuf.push(\"<img\" + (jade.attr(\"src\", imageUrl, true, false)) + (jade.cls([klass], [true])) + \"/>\");\n};\nbuf.push(\"<div class=\\\"block-v-lg content-fill text-center\\\">\");\njade_mixins[\"image\"](url, 'img content-ver'+ (compose ? ' img-compose' : ''));\nbuf.push(\"<div class=\\\"slide-loader content\\\"></div></div>\");\nif ( hasCaption)\n{\nbuf.push(\"<div class=\\\"text-center\\\"><div\" + (jade.attr(\"style\", \"background-color: \" + (backgroundColor) + \";\", true, false)) + \" class=\\\"caption block-lg text-md\\\">\");\nif ( caption.title)\n{\nbuf.push(\"<p><strong>\" + (null == (jade_interp = caption.title) ? \"\" : jade_interp) + \"</strong></p>\");\n}\nif ( caption.content)\n{\nbuf.push(null == (jade_interp = caption.content) ? \"\" : jade_interp);\n}\nbuf.push(\"</div></div>\");\n}\nbuf.push(\"<div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"backgroundColor\" in locals_for_with?locals_for_with.backgroundColor:typeof backgroundColor!==\"undefined\"?backgroundColor:undefined,\"caption\" in locals_for_with?locals_for_with.caption:typeof caption!==\"undefined\"?caption:undefined,\"compose\" in locals_for_with?locals_for_with.compose:typeof compose!==\"undefined\"?compose:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasCaption\" in locals_for_with?locals_for_with.hasCaption:typeof hasCaption!==\"undefined\"?hasCaption:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"url\" in locals_for_with?locals_for_with.url:typeof url!==\"undefined\"?url:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView = require(\"views/slide\")\n{ dpi }   = require(\"lib/device\")\n\nclass ImageSlideView extends SlideView\n  template: require(\"./template\")\n\n  events: ->\n    events   = {}\n\n    tapEvent = if @options.data.size is \"zoom\" then \"touch:tap\" else \"iostap\"\n    if @options.data.tapAnywhere and not @hasCaption()\n      events[tapEvent] = \"submit\"\n    else\n      events[\"iostap .btn-done\"]     = \"submit\"\n      events[\"iostap\"]               = \"showZoom\"\n\n    events\n\n  serialize: ->\n    data = super\n\n    data.hasCaption = @hasCaption()\n\n    if data.tapAnywhere and not data.hasCaption\n      data.hasPrompt = true\n      data.prompt = i18n(\"image.tap-to-continue\")\n    else if data.hasCaption\n      data.hasPrompt = true\n\n    data\n\n  hasCaption: ->\n    @options.data.caption?.title or @options.data.caption?.content\n\n  beforeShow: ->\n    @trigger(\"ui\", flexibleHeight: true)\n\n  beforeHide: ->\n    @photoswipe?.currItem.container?.classList.add(\"pswp--smooth-exit\")\n    $(@photoswipe?.container)\n      .closest(\"#photoswipe\")\n      .attr(\"class\", \"pswp\")\n\n    @photoswipe?.close()\n    @trigger(\"ui\", flexibleHeight: false)\n\n  show: ->\n    @setState(false, \"focus\")\n    @setState(\"prompt\")\n    img = @findOne(\"img\")\n\n    onLoad = =>\n      img.removeEventListener(\"load\", onLoad)\n      @setState(true, \"loaded\")\n      @showZoom() if @options.data.autofocus\n\n    if img.complete\n      onLoad()\n    else\n      img.addEventListener \"load\", onLoad\n\n  showZoom: (e, showAnimationDuration = 300) ->\n    @setState(\"touched\")\n    @setState(true, \"focus\")\n\n    img = @findOne(\"img\")\n    pad = if @options.data.compose then 12 else 0\n    { top, left, width } = img.getBoundingClientRect()\n    thumbBounds = { x: left + pad, y: top + pad, w: width - pad * 2 }\n\n    @photoswipe = new PhotoSwipe(\n      document.querySelector(\"#photoswipe\")\n      PhotoSwipeUI_Default\n      [\n        msrc: img.src\n        src:  img.src\n        title:\n          written.wrapInTag(@options.data.caption.title, \"h1\") +\n          written.wrapInTag(@options.data.caption.content, \"div\")\n        w: (img.naturalWidth  or img.width)  / Math.min(dpi, 1.66)\n        h: (img.naturalHeight or img.height) / Math.min(dpi, 1.66)\n      ]\n      {\n        showAnimationDuration\n        focus: false\n        history: false\n        barsSize: {top: 0, bottom: 0 }\n        getThumbBoundsFn: -> thumbBounds\n      }\n    )\n\n    @photoswipe.listen(\"close\", => @setState(false, \"focus\"))\n    @photoswipe.init()\n\n  submit: (e) ->\n    e?.stopImmediatePropagation()\n    super\n\n  refresh: (params) ->\n    if _.isEqual params.data.caption, @options.data.caption\n      @photoswipe?.close()\n    else\n      showCaption = true\n\n    super\n\n    if showCaption\n      @showZoom(null, 0)\n\n\nmodule.exports = ImageSlideView\n","module.exports = {\"title\":\"list\",\"display\":\"List Slide\",\"category\":\"Content\",\"features\":{\"narration\":true,\"social\":true},\"description\":\"Display a list of bullet points\",\"model\":{\"title\":{\"type\":\"html\",\"default\":\"\"},\"list\":{\"type\":[{\"type\":\"html\"}],\"min\":1,\"max\":32}},\"examples\":[{\"subtype\":\"list\",\"title\":\"A List Slide\",\"list\":[\"Has a several points\",\"Displays each point with a bullet\",\"Is similar to a PowerPoint slide\"]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (Math, continueBtnText, doneText, hasNarration, hasPrompt, i18n, list, prompt, submitUp, title, undefined) {\nbuf.push(\"<div class=\\\"list-container content content-scroll\\\"><div class=\\\"block-v-xl\\\"><h1 class=\\\"slide-up\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><ul class=\\\"list\\\">\");\n// iterate list\n;(function(){\n  var $$obj = list;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var item = $$obj[i];\n\nbuf.push(\"<li\" + (jade.cls(['list-item','slide-up',\"delay-\" + (Math.min(i, 10)) + \"\"], [null,null,true])) + \"><h2>\" + (null == (jade_interp = item) ? \"\" : jade_interp) + \"</h2></li>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var item = $$obj[i];\n\nbuf.push(\"<li\" + (jade.cls(['list-item','slide-up',\"delay-\" + (Math.min(i, 10)) + \"\"], [null,null,true])) + \"><h2>\" + (null == (jade_interp = item) ? \"\" : jade_interp) + \"</h2></li>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</ul></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"Math\" in locals_for_with?locals_for_with.Math:typeof Math!==\"undefined\"?Math:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"list\" in locals_for_with?locals_for_with.list:typeof list!==\"undefined\"?list:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView = require(\"views/slide\")\n\nclass ListView extends SlideView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-done\": \"submit\"\n\nmodule.exports = ListView\n","module.exports = {\"title\":\"matrix\",\"display\":\"Matrix\",\"category\":\"Multiple Choice\",\"features\":{\"stars\":true,\"social\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"\"},\"columns\":{\"min\":2,\"max\":3,\"type\":[{\"title\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Column Title\"},\"correct\":{\"display\":\"Correct Answer\",\"type\":\"html\",\"default\":\"\"},\"incorrect\":{\"display\":\"Incorrect Answers\",\"min\":1,\"max\":2,\"type\":[{\"type\":\"html\"}]}}]},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (seconds)\"},\"out-of-time-prompt\":{\"type\":\"html\",\"display\":\"Out of time prompt\"}}},\"prompt\":{\"type\":\"html\",\"default\":\"Select each correct answer\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"matrix\",\"title\":\"Name the actor who played...\",\"columns\":[{\"title\":\"Neo\",\"correct\":\"Keanu Reeves\",\"incorrect\":[\"Laurence Fishburne\",\"Carrie-Anne Moss\"]},{\"title\":\"Trinity\",\"correct\":\"Carrie-Anne Moss\",\"incorrect\":[\"Keanu Reeves\",\"Laurence Fishburne\"]},{\"title\":\"Morpheus\",\"correct\":\"Laurence Fishburne\",\"incorrect\":[\"Keanu Reeves\",\"Carrie-Anne Moss\"]}],\"answer\":{\"takeaway\":\"The matrix template tests connected information\",\"text\":\"The matrix template is powerful addition to standard multiple choice questions. You can even use it to talk about the Matrix movie!\\n\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (columns, continueBtnText, doneText, game, hasNarration, hasPrompt, i18n, isLong, metadata, prompt, submitUp, title, undefined) {\nif ( game && game.timer && game.timer.limit > 0 && !game.timer.isDisabled)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"block-v-xl content-ver text-center content-scroll\\\"><div class=\\\"content-scroll-inner\\\"><h1 class=\\\"block-v-sm fade-in\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"row\\\">\");\n// iterate metadata.questions\n;(function(){\n  var $$obj = metadata.questions;\n  if ('number' == typeof $$obj.length) {\n\n    for (var j = 0, $$l = $$obj.length; j < $$l; j++) {\n      var column = $$obj[j];\n\nbuf.push(\"<div\" + (jade.cls(['col-sm-12','block-v-sm',columns.length > 2 ? \"col-md-4\" : \"col-md-6\"], [null,null,true])) + \"><div\" + (jade.cls(['block-dk','block-sm','fade-in',\"delay-\" + (j) + \"\"], [null,null,null,true])) + \">\");\nvar questionDetails = column.question || column.questionDetails || {};\nbuf.push(\"<div class=\\\"block-sm text-bold text-md\\\">\" + (null == (jade_interp = questionDetails.content) ? \"\" : jade_interp) + \"</div>\");\n// iterate column.answers\n;(function(){\n  var $$obj = column.answers;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var answer = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-column\", j, true, false)) + (jade.attr(\"data-correct\", answer.correct, true, false)) + (jade.attr(\"data-question-id\", questionDetails.id, true, false)) + (jade.attr(\"data-answer-id\", answer.id, true, false)) + \" class=\\\"selectable block-sm fade-in\\\"><div\" + (jade.cls(['btn','btn-solid','btn-block','slide-up',(isLong ? \"btn-long\" : \"\") + \" delay-\" + (i) + \"\"], [null,null,null,null,true])) + \">\" + (null == (jade_interp = answer.content != null && answer.content != undefined ? answer.content : \"&nbsp;\") ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var answer = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-column\", j, true, false)) + (jade.attr(\"data-correct\", answer.correct, true, false)) + (jade.attr(\"data-question-id\", questionDetails.id, true, false)) + (jade.attr(\"data-answer-id\", answer.id, true, false)) + \" class=\\\"selectable block-sm fade-in\\\"><div\" + (jade.cls(['btn','btn-solid','btn-block','slide-up',(isLong ? \"btn-long\" : \"\") + \" delay-\" + (i) + \"\"], [null,null,null,null,true])) + \">\" + (null == (jade_interp = answer.content != null && answer.content != undefined ? answer.content : \"&nbsp;\") ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var j in $$obj) {\n      $$l++;      var column = $$obj[j];\n\nbuf.push(\"<div\" + (jade.cls(['col-sm-12','block-v-sm',columns.length > 2 ? \"col-md-4\" : \"col-md-6\"], [null,null,true])) + \"><div\" + (jade.cls(['block-dk','block-sm','fade-in',\"delay-\" + (j) + \"\"], [null,null,null,true])) + \">\");\nvar questionDetails = column.question || column.questionDetails || {};\nbuf.push(\"<div class=\\\"block-sm text-bold text-md\\\">\" + (null == (jade_interp = questionDetails.content) ? \"\" : jade_interp) + \"</div>\");\n// iterate column.answers\n;(function(){\n  var $$obj = column.answers;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var answer = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-column\", j, true, false)) + (jade.attr(\"data-correct\", answer.correct, true, false)) + (jade.attr(\"data-question-id\", questionDetails.id, true, false)) + (jade.attr(\"data-answer-id\", answer.id, true, false)) + \" class=\\\"selectable block-sm fade-in\\\"><div\" + (jade.cls(['btn','btn-solid','btn-block','slide-up',(isLong ? \"btn-long\" : \"\") + \" delay-\" + (i) + \"\"], [null,null,null,null,true])) + \">\" + (null == (jade_interp = answer.content != null && answer.content != undefined ? answer.content : \"&nbsp;\") ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var answer = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-column\", j, true, false)) + (jade.attr(\"data-correct\", answer.correct, true, false)) + (jade.attr(\"data-question-id\", questionDetails.id, true, false)) + (jade.attr(\"data-answer-id\", answer.id, true, false)) + \" class=\\\"selectable block-sm fade-in\\\"><div\" + (jade.cls(['btn','btn-solid','btn-block','slide-up',(isLong ? \"btn-long\" : \"\") + \" delay-\" + (i) + \"\"], [null,null,null,null,true])) + \">\" + (null == (jade_interp = answer.content != null && answer.content != undefined ? answer.content : \"&nbsp;\") ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"columns\" in locals_for_with?locals_for_with.columns:typeof columns!==\"undefined\"?columns:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"isLong\" in locals_for_with?locals_for_with.isLong:typeof isLong!==\"undefined\"?isLong:undefined,\"metadata\" in locals_for_with?locals_for_with.metadata:typeof metadata!==\"undefined\"?metadata:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView = require \"views/base/game\"\n\nclass MatrixView extends GameView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .selectable\": \"selectAnswer\"\n    \"iostap .btn-done\": \"endGame\"\n\n  serialize: ->\n    d = super\n    d.isLong = _.chain(d.metadata.questions)\n      .pluck('answers')\n      .flatten()\n      .pluck('content')\n      .sortBy((el) -> el.length)\n      .last()\n      .value().length > 10\n\n    # Ensure 'all the above' is the last row\n    allTheAboveRx = /the above/i\n    d.metadata.questions = _.map d.metadata.questions, (q) ->\n      q.answers = _.shuffle(q.answers)\n      allTheAboveAnswer = _.find q.answers, (a) -> allTheAboveRx.test(a.content)\n      if allTheAboveAnswer\n        q.answers =\n          _.without(q.answers, allTheAboveAnswer).concat(allTheAboveAnswer)\n      q\n\n    d\n\n  render: ->\n    super\n\n    @setEl @findAll(\".selectable\"), \"answers\"\n    @setEl @findAll(\".column\"), \"columns\"\n\n    @onTimerChange(@game.timer)\n\n  show: ->\n    super\n\n    @setState(\"prompt\")\n    el.classList.remove(\"active\") for el in @getEl \"answers\"\n\n    @enterGame()\n\n  endGame: ->\n    super\n\n    @submit()\n\n  selectAnswer: (e) ->\n    return if @currentState.state is \"complete\"\n\n    target = e.currentTarget\n    column = target.dataset.column\n\n    target.classList.add(\"active\")\n\n    for el in @getEl(\"answers\") when el.dataset.column is column\n      el.classList.remove(\"active\") if el isnt target\n\n    nbActive =\n      el for el in @getEl(\"answers\") when el.classList.contains(\"active\")\n\n    if nbActive.length is @options.metadata.questions.length\n      @setState(\"touched\")\n\n  isCorrect: ->\n    correctSelected =\n      el for el in @getEl(\"answers\") when (\n        el.classList.contains(\"active\") and\n        el.dataset.correct\n      )\n\n    correctSelected.length is @options.metadata.questions.length\n\n  answerDetails: ->\n    questions = @options.metadata.questions or []\n    return [] unless questions.length > 0\n    details = []\n\n    dictAnswersByColNum = _.groupBy @$(\".selectable\"), (el) ->\n      @$(el).data(\"column\")\n\n    for q in questions\n      colIdx = questions.indexOf(q)\n      selectedAnswerEl = _.find dictAnswersByColNum[colIdx], (el) ->\n        @$(el).hasClass(\"active\")\n      selectedAnswer = _.filter q.answers, (a) ->\n        a.content is @$(selectedAnswerEl).text()\n      questionDetails = question: q.question, answer: selectedAnswer[0]\n      details.push questionDetails\n\n    details\n\nmodule.exports = MatrixView\n","module.exports = {\"title\":\"media-collection\",\"display\":\"Media Collection\",\"category\":\"Content\",\"description\":\"Select a media element to see more detail\",\"features\":{\"social\":true},\"model\":{\"title\":{\"type\":\"html\"},\"content\":{\"display\":\"List items\",\"type\":[{\"content\":{\"types\":[\"video\",\"image\",\"audio\"]},\"caption\":{\"type\":\"html\"}}],\"min\":1,\"max\":3},\"prompt\":{\"type\":\"html\",\"default\":\"Select each item for more details\"}},\"examples\":[{\"subtype\":\"media-collection\",\"title\":\"Example Media Collection\",\"content\":[{\"contentType\":\"video\",\"content\":\"video/example.mp4\",\"caption\":\"This is the original product in our line and is a great source of pride for the company.\\n\"},{\"contentType\":\"image\",\"content\":\"img/examples/product-laptop.png\",\"caption\":\"Product Y was introduced to appeal to a broader customers base and was a great success.\\n\"},{\"contentType\":\"audio\",\"content\":\"audio/achievement.mp3\",\"caption\":\"Completing our range is Product Z. It appeals to old and new customers alike, making us a company for everyone.\\n\"}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (config, continueBtnText, doneText, hasNarration, hasPrompt, i18n, playinline, prompt, submitUp, tappies, title, undefined) {\njade_mixins[\"video-stream\"] = jade_interp = function(videoUrl, playsinline, controls, klass, poster){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nplayinline = playinline || true\ncontrols = controls || true\nklass = klass || 'video vjs-fluid'\nvar cloudinaryVideoFolderUrl = config.CLOUDINARY_CDN_URL+config.CLOUDINARY_VIDEO_FOLDER\nvar streamUrl = ''\nif ( videoUrl && videoUrl.indexOf(cloudinaryVideoFolderUrl) > -1)\n{\nstreamUrl = videoUrl.replace(cloudinaryVideoFolderUrl, cloudinaryVideoFolderUrl+'sp_full_hd/')\nstreamUrl = streamUrl.replace('.mp4', '.m3u8')\n}\nbuf.push(\"<video\" + (jade.attr(\"webkit-playsinline\", playsinline, true, false)) + (jade.attr(\"controls\", controls, true, false)) + \" preload=\\\"auto\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + (jade.attr(\"poster\", poster, true, false)) + (jade.cls(['video-js',klass], [null,true])) + \"><source\" + (jade.attr(\"src\", videoUrl, true, false)) + \"/>\");\nif ( streamUrl)\n{\nbuf.push(\"<source\" + (jade.attr(\"src\", streamUrl, true, false)) + \"/>\");\n}\nbuf.push(\"</video>\");\n};\njade_mixins[\"media-collection-content\"] = jade_interp = function(prop, obj, isDetails){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nobj = obj || locals;\nswitch (obj[prop + \"Type\"]){\ncase \"image\":\nbuf.push(\"<img\" + (jade.attr(\"src\", obj[prop], true, false)) + (jade.cls(['block-v-md',isDetails ? \"full-size\" : \"thumbnail\"], [null,true])) + \"/>\");\n  break;\ncase \"audio\":\nif ( isDetails)\n{\nbuf.push(\"<audio\" + (jade.attr(\"src\", obj[prop], true, false)) + \" webkit-playsinline=\\\"webkit-playsinline\\\" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\" class=\\\"multi-content multi-content-audio full-size\\\"></audio>\");\n}\nelse\n{\nbuf.push(\"<audio\" + (jade.attr(\"src\", obj[prop], true, false)) + \" webkit-playsinline=\\\"webkit-playsinline\\\" playsinline=\\\"playsinline\\\" preload=\\\"none\\\" controls=\\\"controls\\\" class=\\\"multi-content multi-content-audio thumbnail\\\"></audio>\");\n}\n  break;\ncase \"video\":\ndefault:\nif ( isDetails)\n{\njade_mixins[\"video-stream\"](obj[prop], true, true, \"multi-content vjs-fluid full-size\");\n}\nelse\n{\njade_mixins[\"video-stream\"](obj[prop], false, false, \"video vjs-fluid multi-content thumbnail\");\n}\n  break;\n}\n};\nbuf.push(\"<div class=\\\"block-v-lg content-fill text-center\\\"><div class=\\\"content-container content-fill\\\"><div class=\\\"content-sm-ver content-md-ver content-lg-ver\\\"><h1 class=\\\"title slide-down delay-3 tight\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"parent-container content-fill\\\"><div class=\\\"tappies-parent content-fill\\\"><div class=\\\"row tappies text-center\\\">\");\nif ( !!tappies)\n{\n// iterate tappies\n;(function(){\n  var $$obj = tappies;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var tappy = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-index\", i, true, false)) + (jade.cls(['tappy','content-fill','col-sm-12','col-lg-8','col-lg-offset-2','slide-up',\"delay-\" + (i) + \"\"], [null,null,null,null,null,null,true])) + \"><div class=\\\"tappy-child content-fill block-dk block-sm\\\">\");\njade_mixins[\"media-collection-content\"](\"content\", tappy, false);\nbuf.push(\"<!-- put a transparent overlay on top of each item that--><!-- intercepts the click/tap events--><div class=\\\"tappy-overlay\\\"></div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var tappy = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-index\", i, true, false)) + (jade.cls(['tappy','content-fill','col-sm-12','col-lg-8','col-lg-offset-2','slide-up',\"delay-\" + (i) + \"\"], [null,null,null,null,null,null,true])) + \"><div class=\\\"tappy-child content-fill block-dk block-sm\\\">\");\njade_mixins[\"media-collection-content\"](\"content\", tappy, false);\nbuf.push(\"<!-- put a transparent overlay on top of each item that--><!-- intercepts the click/tap events--><div class=\\\"tappy-overlay\\\"></div></div></div>\");\n    }\n\n  }\n}).call(this);\n\n}\nbuf.push(\"</div></div><div class=\\\"details-parent content-fill\\\">\");\nif ( !!tappies)\n{\n// iterate tappies\n;(function(){\n  var $$obj = tappies;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var tappy = $$obj[i];\n\nbuf.push(\"<div class=\\\"details content-sm-ver content-md-ver content-lg-ver\\\">\");\njade_mixins[\"media-collection-content\"](\"content\", tappy, true);\nbuf.push(\"<div class=\\\"caption block-v-md block-h-md text-md\\\">\" + (null == (jade_interp = tappy.caption) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var tappy = $$obj[i];\n\nbuf.push(\"<div class=\\\"details content-sm-ver content-md-ver content-lg-ver\\\">\");\njade_mixins[\"media-collection-content\"](\"content\", tappy, true);\nbuf.push(\"<div class=\\\"caption block-v-md block-h-md text-md\\\">\" + (null == (jade_interp = tappy.caption) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  }\n}).call(this);\n\n}\nbuf.push(\"</div></div></div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"playinline\" in locals_for_with?locals_for_with.playinline:typeof playinline!==\"undefined\"?playinline:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"tappies\" in locals_for_with?locals_for_with.tappies:typeof tappies!==\"undefined\"?tappies:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView = require \"views/slide\"\n\nclass MediaCollectionView extends SlideView\n  template: require(\"./template\")\n  fitTextOnResize: false\n  fitTextOnRender: false\n\n  events: ->\n    {\n      \"iostap .btn-done\": \"submit\"\n      \"iostap\": \"hideDetails\"\n      \"iostap .tappy\": \"toggleContent\"\n    }\n  \n  serialize: ->\n    data = super()\n    data.tappies = data.content || []\n    data.hasPrompt = true\n    data\n\n  show: ->\n    @setEl @findOne(\".tappies\"), \"tappies\"\n    @setEl @findAll(\".details\"), \"details\"\n\n    @onResize()\n\n    @listenTo this, \"resize\", @onResize\n    @toVisit = [0...@serialize().tappies.length]\n    @hideDetails()\n    for video in @el.querySelectorAll(\".video-js.thumbnail\")\n      id = video.getAttribute(\"id\")\n      thumbnailPlayer = _.findWhere(@players, { id_: id })\n      thumbnailPlayer.play().pause() if thumbnailPlayer\n      @resetPlayer thumbnailPlayer\n\n  resetPlayer: (player) ->\n     window.setTimeout (-> player.hasStarted(false)), 1\n\n  onResize: ->\n    title = @$(\".title\")\n    contentContainer = @$(\".content-container\")\n    detailsParent = @$(\".details-parent\")\n    tappiesParent = @$(\".tappies-parent\")\n\n    length = @getEl(\"tappies\").children.length\n    length = Math.ceil(length / 2) if length >= 4\n\n    outerHeight = contentContainer.height() - title.height()\n    tappyHeight = outerHeight / length\n    tappyHeight = Math.min(tappyHeight, 220)\n\n    for el, i in @getEl(\"tappies\").children\n      $(el).height(tappyHeight)\n\n    @$(\".tappy-overlay\").height(@$(\".tappy-child\").height())\n\n  onDetailResize: -> \n    details = @getEl(\"active-details\")\n    @limitDetailImageSize(details)\n\n  showDetails: (tappy, animate) =>\n    index = +tappy.dataset.index\n    contentType = @getContentType(index)\n    details = @getEl(\"details\").item(index)\n\n    @toVisit = _.without @toVisit, index\n\n    @setEl details, \"active-details\"\n\n    @setState(\"touched\") if _.isEmpty(@toVisit)\n    @setState(\"active\", \"details\")\n\n    @listenTo this, \"resize\", @onDetailResize\n    @onDetailResize()\n\n    $(details).css({\n      opacity: 1\n      \"z-index\": 1000\n      transform: if animate then \"translate(-50%, -50%) scale(1)\" else \"\"\n    })\n\n    @playDetailsMedia(contentType, details)\n\n    tappy.classList.add(\"visited\")\n\n  limitDetailImageSize: (details) ->\n    detailsParent = @$(\".details-parent\")\n    fullSizeImage = details.querySelector(\".full-size\")\n    caption = details.querySelector(\".caption\")\n\n    availableHeightForImage = detailsParent.height() - caption.offsetHeight\n\n    video = fullSizeImage.querySelector(\"video\")\n\n    fullSizeImage.style.maxHeight=\"#{availableHeightForImage}px\"\n    \n    if video and video.offsetHeight > availableHeightForImage\n      $(fullSizeImage).css(\"padding-top\", availableHeightForImage)\n    else if fullSizeImage.offsetHeight > availableHeightForImage\n      $(fullSizeImage).height(availableHeightForImage)\n\n  toggleContent: (e) ->\n    @showDetails e.currentTarget, true\n  \n  playDetailsMedia: (contentType, details) =>\n    # Slide.coffee already instantiates all videoJS players on the slide\n    # so we find the instance that was created for the clicked video\n    if contentType is \"video\"\n      window.setTimeout (=>\n        videoJsPlayer = details.querySelector(\"div.video-js\")\n        if videoJsPlayer\n          id = videoJsPlayer.getAttribute(\"id\")\n          @activePlayer = _.findWhere(@players, { id_: id })\n          @activePlayer.play()\n        ), 400\n    else if contentType is \"audio\"\n      window.setTimeout (->\n        audioPlayer = details.querySelector(\"audio\")\n        audioPlayer.play() if audioPlayer\n      ), 400\n\n  hideDetails: (e) ->\n    # may be called with or without a user gesture event\n    if e?\n      # prevent hiding of details if interacting with videoJS element\n      return if /vjs/.test(e.target.className) or e.target.nodeName is \"VIDEO\"\n      # prevent hiding of details if interacting with audio element\n      return if e.target.nodeName is \"AUDIO\"\n\n    return unless details = @getEl(\"active-details\")\n\n    @stopDetailsMedia(details)\n\n    $(details).css({\n      opacity: 0\n      \"z-index\": 0\n      transform: \"translate(-50%, -50%) scale(0.9)\"\n    })\n\n    @setState(\"inactive\", \"details\")\n  \n  stopDetailsMedia: (details) ->\n    # stop audio if any exists on this details element\n    audioEl = details.querySelector(\"audio\")\n    audioEl.pause() if audioEl?\n    # stops videoJS playback from SlideView\n    @stopMedia()\n\n  getContentType: (index) ->\n    @options.data.content[index].contentType or \"video\"\n\n  refresh: (params) ->\n    if params.data.content and @options.data.content and params.data.content.length is @options.data.content.length\n      for { content, caption }, i in params.data.content\n        if content and \\\n        @options.data.content[i]?.content isnt content or \\\n        @options.data.content[i]?.caption isnt caption\n          itemChangedIdx = i\n\n    super(params)\n\n    if itemChangedIdx? and tappy = @getEl(\"tappies\").children[itemChangedIdx]\n      @showDetails(tappy, false)\n\nmodule.exports = MediaCollectionView\n","module.exports = {\"title\":\"missing-word\",\"display\":\"Missing Word\",\"category\":\"Concepts\",\"links\":{\"academy\":\"https://academy.edapp.com/how-to-missing-word/\"},\"features\":{\"stars\":true,\"social\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"Select the missing words in this sentence\"},\"words\":{\"min\":1,\"max\":6,\"type\":[{\"type\":\"html\"}]},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (seconds)\"},\"out-of-time-prompt\":{\"type\":\"html\",\"display\":\"Out of time prompt\"}}},\"prompt\":{\"type\":\"html\",\"default\":\"Drag in the missing words\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"missing-word\",\"title\":\"Fill in the important information about Product X\",\"words\":[\"important\",\"old\",\"Product X\",\"Product Y\"],\"answer\":{\"text\":\"Use missing word to reinforce important messaging about Product X.\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (Math, components, continueBtnText, doneText, game, hasNarration, hasPrompt, i18n, prompt, submitUp, undefined, words) {\nif ( game && game.timer && game.timer.limit > 0 && !game.timer.isDisabled)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-fill\\\"><div class=\\\"content-md content-fill text-center\\\"><div class=\\\"row content-md-ver content-sm-ver content-fit\\\"><div class=\\\"col-md-10 col-md-offset-1 col-sm-12 block-v-md\\\"><h1 class=\\\"fade-in\\\">\");\n// iterate components\n;(function(){\n  var $$obj = components;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var word = $$obj[i];\n\nvar n = 9;\nbuf.push(\"<div\" + (jade.cls(['word','slide-up',\"delay-\" + (n - Math.abs(-n + i % (n * 2))) + \"\"], [null,null,true])) + \">\");\nif ( word.incorrect)\n{\nbuf.push(\"<div\" + (jade.attr(\"data-name\", word.incorrect, true, false)) + \" class=\\\"droppy\\\"></div><span class=\\\"word-text\\\">\" + (null == (jade_interp = word.replaces) ? \"\" : jade_interp) + \"</span>\");\n}\nelse\n{\nbuf.push(null == (jade_interp = word.replaces) ? \"\" : jade_interp);\n}\nbuf.push(\"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var word = $$obj[i];\n\nvar n = 9;\nbuf.push(\"<div\" + (jade.cls(['word','slide-up',\"delay-\" + (n - Math.abs(-n + i % (n * 2))) + \"\"], [null,null,true])) + \">\");\nif ( word.incorrect)\n{\nbuf.push(\"<div\" + (jade.attr(\"data-name\", word.incorrect, true, false)) + \" class=\\\"droppy\\\"></div><span class=\\\"word-text\\\">\" + (null == (jade_interp = word.replaces) ? \"\" : jade_interp) + \"</span>\");\n}\nelse\n{\nbuf.push(null == (jade_interp = word.replaces) ? \"\" : jade_interp);\n}\nbuf.push(\"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</h1></div><div class=\\\"col-sm-12 block-v-md\\\"><div class=\\\"block-v-lg block-h-md block-dk\\\">\");\n// iterate words \n;(function(){\n  var $$obj = words ;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var word = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-name\", word, true, false)) + (jade.cls(['draggy','btn','btn-sm','btn-solid','slide-up',\"delay-\" + (i) + \"\"], [null,null,null,null,null,true])) + \">\" + (null == (jade_interp = word) ? \"\" : jade_interp) + \"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var word = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-name\", word, true, false)) + (jade.cls(['draggy','btn','btn-sm','btn-solid','slide-up',\"delay-\" + (i) + \"\"], [null,null,null,null,null,true])) + \">\" + (null == (jade_interp = word) ? \"\" : jade_interp) + \"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"Math\" in locals_for_with?locals_for_with.Math:typeof Math!==\"undefined\"?Math:undefined,\"components\" in locals_for_with?locals_for_with.components:typeof components!==\"undefined\"?components:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined,\"words\" in locals_for_with?locals_for_with.words:typeof words!==\"undefined\"?words:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView  = require \"views/base/game\"\n{ DraggyView } = require(\"views/components/draggy\")\nconvert   = require(\"lib/convert\")\n\nclass MissingWordView extends GameView\n  template: require(\"./template\")\n\n  events: {\n    \"iostap .btn-done\": \"endGame\"\n  }\n\n  serialize: ->\n    data = super(arguments...)\n\n    { title, words } = data\n\n    title = convert.toText title\n    words = words.map (w) -> convert.toText w\n\n    filteredWords = _.filter(words, (item) -> item != \"\")\n\n    words =\n      for word, i in filteredWords\n        unescapedWord = word\n        escapedWord = word.replace(/\\W/g, ((w) -> \"\\\\#{w}\"))\n        leftGroup = \"([^A-Z]|^)\" # any non words or the beginning of string\n        rightGroup = \"([^A-Z]|$)\" # any non words or the end of string\n        substringRegex = new RegExp(\"#{leftGroup}#{escapedWord}#{rightGroup}\", \"i\")\n        if title.match(substringRegex)?\n          incorrect = unescapedWord\n          # replace matching words with placeholders\n          # \"hello my name\" -> \"hello my {{1}}\"\n          title = title.replace substringRegex, (matched, leftCharacter, rightCharacter) =>\n            # surround placeholder with spaces\n            # however, left/right character can also be non-ASCII characters such as Chinese characters\n            # if it's non-ASCII then we need to keep it by appending it before/after whitespace\n            leftSide = if leftCharacter == ' ' then leftCharacter else \"#{leftCharacter} \"\n            rightSide = if rightCharacter == ' ' then rightCharacter else \" #{rightCharacter}\"\n            leftSide + \"{{#{i}}}\" + rightSide\n        { replaces: word, incorrect }\n\n    # Split title into components: \"hello my name\" -> [\"hello\", \"my\", \"name\"]\n    data.components =\n      for component in title.trim().split(\" \")\n        index = +component.match(/\\{\\{(\\d+)\\}\\}/)?[1]\n        incorrect: words[index]?.incorrect\n        replaces: words[index]?.replaces or component\n\n    data.words = _.shuffle(filteredWords)\n    data\n\n  show: ->\n    super(arguments...)\n    if @draggies\n      draggy.undelegateEvents() for draggy in @draggies\n\n    @draggies =\n      for el, i in @findAll(\".draggy\")\n        draggy = new DraggyView {\n          el: el\n        }\n\n        @listenTo draggy, \"drag\", @onDrag\n        @listenTo draggy, \"drop\", @onDrop\n        draggy\n\n    @droppies = @getElements(\".droppy\", null)\n\n    @el.classList.add \"ready\"\n\n    @listenTo this, \"resize\", @onResize\n    @enterGame()\n\n  onResize: ->\n    #  find all droppy that contains a draggy (draggy has been dragged to a droppy)\n    for droppy in @droppies or []\n      for id in droppy.contains or []\n        draggy = _.find @draggies, { cid: id }\n        # remove transition while recalc to avoid janky experience\n        @transition draggy.el, \"none\"\n        draggy.getOffset()\n\n        # re-calculate x-axis and y-axis\n        bounds = droppy.el.getBoundingClientRect()\n        { left, top, width, height } = draggy.offset\n        x = Math.round bounds.left + bounds.width / 2 - left - width / 2\n        y = Math.round bounds.top + bounds.height / 2 - top - height / 2\n        \n        #  set draggy position and transform\n        draggy.setPosition({ x, y })\n        @transform draggy.el, {\n          x: x\n          y: y\n        }\n    \n  getElements: (selector, original) ->\n    if original\n      for { el, contains } in original\n        { el, contains, bounds: el.getBoundingClientRect() }\n    else\n      for el, i in @findAll(selector)\n        {\n          el: el\n          bounds: el.getBoundingClientRect()\n          contains: []\n        }\n\n  onDrag: (draggy, isInitialDrag) ->\n    @droppies   = @getElements(\".droppy\", @droppies) if isInitialDrag\n    activeIndex = draggy.closest(_.pluck(@droppies, \"bounds\"))\n\n    for droppy, i in @droppies\n      droppy.el.classList.toggle(\"active\", i is activeIndex)\n      droppy.isActive = i is activeIndex\n\n    if isInitialDrag\n      draggy.el.className = draggy.el.className.replace(/delay-\\d/, \"\")\n\n    @transform draggy.el, {\n      x: draggy.x\n      y: draggy.y\n      transition: if isInitialDrag then \"all 300ms\" else \"none\"\n    }\n\n  onDrop: (draggy) ->\n    { left, top, width, height } = draggy.offset\n\n    droppy = (droppy for droppy in @droppies when droppy.isActive)[0]\n    x = y = 0\n\n    if droppy\n      { bounds } = droppy\n      x = Math.round bounds.left + bounds.width / 2 - left - width / 2\n      y = Math.round bounds.top + bounds.height / 2 - top - height / 2\n    else\n      draggy.isPositioned = false\n\n    if @options.data.reject and\n       droppy?.el.dataset.name isnt draggy.el.dataset.name\n      droppy?.isActive = false\n      x = y = 0\n\n    if draggy.x isnt x or draggy.y isnt y\n      draggy.reset({ x, y })\n    else\n      @transform draggy.el, {\n        x: draggy.x\n        y: draggy.y\n        transition: \"all 300ms\"\n      }\n\n      @checkAnswer(draggy)\n\n    @setState(if @isTouched() then \"touched\" else \"prompt\")\n\n  checkAnswer: (draggy) ->\n    for droppy in @droppies\n      droppy.el.classList.remove(\"active\")\n      containsActive = _.include(droppy.contains, draggy.cid)\n      if droppy.isActive\n        draggy.el.classList.add(\"is-positioned\")\n        draggy.isPositioned = true\n        toReset = @getDraggyFromID(droppy.contains[0], draggy)\n\n        if droppy.contains.length > 0 and toReset\n          droppy.isActive = false\n          @resetDraggy toReset\n\n        droppy.contains =\n          _.uniq(droppy.contains.concat(draggy.cid))\n\n      else if containsActive\n        droppy.contains = _.without(droppy.contains, draggy.cid)\n\n  showAnswer: ->\n    draggy.lock() for draggy in @draggies\n\n  isTouched: ->\n    touchedDroppies =\n      (droppy for droppy in @droppies when droppy.contains.length > 0)\n\n    touchedDroppies.length is @droppies.length\n\n  getDraggyFromID: (cid, draggy) ->\n    _.find @draggies, (d) ->\n      d isnt draggy and d.cid is cid\n\n  resetDraggy: (draggy) ->\n    draggy.reset()\n    draggy.el.classList.remove(\"is-positioned\")\n    draggy.isPositioned = false\n\n  isCorrect: ->\n    @droppies.reduce (isCorrect, d, i) =>\n      isCorrect and\n      @getDraggyFromID(d.contains[0])?.el.dataset.name?.toLowerCase() is d.el.dataset.name?.toLowerCase()\n    , true\n\n  answerDetails: ->\n    questions = @options.strippedMetadata.questions or []\n    return [] unless questions.length > 0\n\n    details = @droppies.map (d, i) =>\n      draggyId = d.contains[0]\n      text     = @getDraggyFromID(draggyId)?.el.dataset.name\n      isWordCorrect = d.el.dataset.name.toLowerCase() is text.toLowerCase()\n      questionDetails = _.find questions, (q) -> q.question.content.toLowerCase() is text.toLowerCase()\n      answer   = _.find questionDetails.answers, (a) -> a.correct is isWordCorrect\n      answer.content = text\n      # remove question that has already been answered, ensuring a question is only answered once\n      questions = _.reject questions, (q) -> q.question.id is questionDetails.question.id\n      { question: questionDetails.question, answer }\n\n    return details\n\n  endGame: ->\n    super(arguments...)\n\n    @submit()\n\nmodule.exports = MissingWordView\n","module.exports = {\"title\":\"multiple-choice-game\",\"display\":\"Multiple Choice\",\"category\":\"Multiple Choice\",\"features\":{\"stars\":true,\"social\":true},\"description\":\"Select the correct answer(s)\",\"model\":{\"title\":{\"default\":\"\",\"types\":[\"text\",\"image\",\"video\",\"audio\",\"iframe\"]},\"subtitle\":{\"type\":\"text\",\"default\":\"\"},\"selectable\":{\"display\":\"Number of selectable answers\",\"default\":1,\"type\":\"number\"},\"randomize\":{\"default\":true,\"type\":\"boolean\",\"help\":\"Shuffle the answers, with those containing \\\"the above\\\" at the bottom.\\n\"},\"answers\":{\"min\":2,\"max\":8,\"type\":[{\"content\":{\"type\":\"html\"},\"correct\":{\"type\":\"boolean\"}}]},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (seconds)\"},\"out-of-time-prompt\":{\"type\":\"html\",\"display\":\"Out of time prompt\"}}},\"additionalContent\":{\"display\":\"Additional Content\",\"default\":\"\",\"types\":[\"text\",\"image\",\"video\",\"audio\",\"iframe\"],\"help\":\"This content displays beneath the multiple choice answers\"},\"prompt\":{\"type\":\"html\",\"default\":\"Select the correct answer\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"true-or-false\",\"title\":\"Can I do a simple true or false question?\",\"titleType\":\"text\",\"answers\":[{\"content\":\"True\",\"correct\":true},{\"content\":\"False\"}],\"randomize\":false,\"answer\":{\"text\":\"Definitely. True and false works exactly as you would expect.\\n\"},\"additionalContent\":\"\",\"additionalContentType\":\"text\"},{\"subtype\":\"one-of-three\",\"title\":\"Does the template support verbose answers?\",\"titleType\":\"text\",\"answers\":[{\"correct\":true,\"content\":\"Yes, the answers can be long and will still display nicely.\"},{\"content\":\"No, verbosity is not allowed as it complicates things.\"},{\"content\":\"No, it's boring to have long answers. No one will read them.\"}],\"answer\":{\"text\":\"We do of course support long answers. They are not always necessary, but sometimes it's important to be specific and we always want to support your needs.\\n\"},\"additionalContent\":\"\",\"additionalContentType\":\"text\"},{\"subtype\":\"subset-of-five\",\"title\":\"Which countries start with \\\"A\\\"?\",\"titleType\":\"text\",\"selectable\":5,\"prompt\":\"Select the correct answers\",\"answers\":[{\"content\":\"Australia\",\"correct\":true},{\"content\":\"Afghanistan\",\"correct\":true},{\"content\":\"Armenia\",\"correct\":true},{\"content\":\"Africa\"},{\"content\":\"France\"}],\"answer\":{\"text\":\"Australia, Afghanistan and Armenia all start with an \\\"A\\\". Can you name the other eight countries?\\n\"},\"game\":{\"timer\":{\"limit\":10000}},\"additionalContent\":\"\",\"additionalContentType\":\"text\"},{\"subtype\":\"subset-of-four\",\"title\":\"Which of these are true?\",\"titleType\":\"text\",\"answers\":[{\"content\":\"All of the above\",\"correct\":true},{\"content\":\"This\"},{\"content\":\"That\"},{\"content\":\"The other\"}],\"answer\":{\"takeaway\":\"All of the above are true\",\"text\":\"It's possible to show incorrect answers in the specific order followed by a correct answer. Any answer that contains \\\"the above\\\" will be placed at the bottom of the list, random or not.\\n\"},\"additionalContent\":\"\",\"additionalContentType\":\"text\"}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (additionalContent, answers, config, continueBtnText, doneText, game, hasNarration, hasPrompt, i18n, obj, playinline, prompt, submitUp, subtitle, undefined) {\njade_mixins[\"video-stream\"] = jade_interp = function(videoUrl, playsinline, controls, klass, poster){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nplayinline = playinline || true\ncontrols = controls || true\nklass = klass || 'video vjs-fluid'\nvar cloudinaryVideoFolderUrl = config.CLOUDINARY_CDN_URL+config.CLOUDINARY_VIDEO_FOLDER\nvar streamUrl = ''\nif ( videoUrl && videoUrl.indexOf(cloudinaryVideoFolderUrl) > -1)\n{\nstreamUrl = videoUrl.replace(cloudinaryVideoFolderUrl, cloudinaryVideoFolderUrl+'sp_full_hd/')\nstreamUrl = streamUrl.replace('.mp4', '.m3u8')\n}\nbuf.push(\"<video\" + (jade.attr(\"webkit-playsinline\", playsinline, true, false)) + (jade.attr(\"controls\", controls, true, false)) + \" preload=\\\"auto\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + (jade.attr(\"poster\", poster, true, false)) + (jade.cls(['video-js',klass], [null,true])) + \"><source\" + (jade.attr(\"src\", videoUrl, true, false)) + \"/>\");\nif ( streamUrl)\n{\nbuf.push(\"<source\" + (jade.attr(\"src\", streamUrl, true, false)) + \"/>\");\n}\nbuf.push(\"</video>\");\n};\njade_mixins[\"image\"] = jade_interp = function(imageUrl, klass){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nbuf.push(\"<img\" + (jade.attr(\"src\", imageUrl, true, false)) + (jade.cls([klass], [true])) + \"/>\");\n};\njade_mixins[\"multi-content\"] = jade_interp = function(prop, obj){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nobj = obj || locals;\nswitch (obj[prop + \"Type\"]){\ncase \"image\":\nbuf.push(\"<div\" + (jade.attr(\"data-content\", obj.image, true, false)) + \" class=\\\"multi-content-wrapper multi-content-wrapper-image block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\">\");\njade_mixins[\"image\"](obj[prop], 'multi-content multi-content-image');\nbuf.push(\"</div></div>\");\n  break;\ncase \"video\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-video block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\">\");\njade_mixins[\"video-stream\"](obj[prop], true, true,\"multi-content multi-content-video block-dk\");\nbuf.push(\"</div></div>\");\n  break;\ncase \"audio\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-audio block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><audio\" + (jade.attr(\"src\", obj[prop], true, false)) + \" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"multi-content multi-content-audio block-dk\\\"></audio></div></div>\");\n  break;\ncase \"iframe\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-iframe block-md block-lt\\\"><div class=\\\"block-sm multi-content-iframe\\\">\");\nvar iframe = obj[prop].match(/<iframe[^<]*<\\/iframe>/)\nif ( iframe)\n{\nbuf.push(null == (jade_interp = iframe[0].replace(/ (width|height)=[\"'\\d\\w]+/g, \"\")) ? \"\" : jade_interp);\n}\nbuf.push(\"</div></div>\");\n  break;\ndefault:\nbuf.push(\"<span class=\\\"multi-content multi-content-text\\\">\" + (null == (jade_interp = obj[prop]) ? \"\" : jade_interp) + \"</span>\");\n  break;\n}\n};\nif ( game && game.timer && game.timer.limit > 0 && !game.timer.isDisabled)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-sm-scroll content-sm-ver content-md-ver content-fit block-v-md content-lg-fill\\\"><div class=\\\"inner-content content-lg-fill fade-in text-center\\\"><div class=\\\"row content-lg-fill\\\"><div class=\\\"col col-lg-6 col-sm-12 block-v-md\\\"><div class=\\\"slide-title text-xxl text-lg-right text-md-center text-sm-center fade-in\\\">\");\njade_mixins[\"multi-content\"](\"title\");\nbuf.push(\"</div>\");\nif ( subtitle)\n{\nobj = obj || locals;\nbuf.push(\"<div\" + (jade.cls(['slide-subtitle','text-lg','text-md-center','text-sm-center','fade-in','delay-2',(!!obj && obj.titleType === \"audio\" ? \"text-lg-center\" : \"text-lg-right\")], [null,null,null,null,null,null,true])) + \">\" + (null == (jade_interp = subtitle) ? \"\" : jade_interp) + \"</div>\");\n}\nbuf.push(\"</div><div class=\\\"col col-lg-6 col-sm-12 block-v-md\\\"><div class=\\\"answers block-md block-dk fade-in\\\"><div class=\\\"block-h-sm\\\">\");\n// iterate answers\n;(function(){\n  var $$obj = answers;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var answer = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-answer-id\", answer.id, true, false)) + (jade.cls(['selectable','block-v-sm','fade-in',answer.correct ? \"correct\" : \"incorrect\"], [null,null,null,true])) + \"><div\" + (jade.cls(['btn','btn-solid','btn-block','slide-up',(answer.isLong ? \"btn-long\" : \"\") + \" delay-\" + (i) + \"\"], [null,null,null,null,true])) + \">\" + (null == (jade_interp = answer.content) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var answer = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-answer-id\", answer.id, true, false)) + (jade.cls(['selectable','block-v-sm','fade-in',answer.correct ? \"correct\" : \"incorrect\"], [null,null,null,true])) + \"><div\" + (jade.cls(['btn','btn-solid','btn-block','slide-up',(answer.isLong ? \"btn-long\" : \"\") + \" delay-\" + (i) + \"\"], [null,null,null,null,true])) + \">\" + (null == (jade_interp = answer.content) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div>\");\nif ( !!additionalContent)\n{\nbuf.push(\"<div class=\\\"block-v-md slide-title text-xxl text-md-center text-sm-center fade-in\\\">\");\njade_mixins[\"multi-content\"](\"additionalContent\");\nbuf.push(\"</div>\");\n}\nbuf.push(\"</div></div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"additionalContent\" in locals_for_with?locals_for_with.additionalContent:typeof additionalContent!==\"undefined\"?additionalContent:undefined,\"answers\" in locals_for_with?locals_for_with.answers:typeof answers!==\"undefined\"?answers:undefined,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"obj\" in locals_for_with?locals_for_with.obj:typeof obj!==\"undefined\"?obj:undefined,\"playinline\" in locals_for_with?locals_for_with.playinline:typeof playinline!==\"undefined\"?playinline:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"subtitle\" in locals_for_with?locals_for_with.subtitle:typeof subtitle!==\"undefined\"?subtitle:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView  = require \"views/base/game\"\n{ dpi }   = require(\"lib/device\")\n\nclass MultipleChoiceGameView extends GameView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .selectable\": \"selectAnswer\"\n    \"iostap .btn-done\": \"endGame\"\n    \"iostap .multi-content-wrapper-image\": \"showZoom\"\n\n  serialize: ->\n    data = super\n\n    answers = data.metadata.questions?[0]?.answers or []\n    answers = answers.filter (m) -> m.content?\n\n    longest = _.max(answers, (answer) -> answer.content?.length or 0)\n    isLong  = longest.content?.length > Math.min(data.width / 16, 30)\n\n    answers =\n      for answer in answers\n        _.extend {}, answer,\n          isLong: isLong\n          bottom: /the above/i.test(answer.content)\n\n    answers       = _.shuffle(answers) if data.randomize\n    bottomAnswers = _.where(answers, bottom: true)\n    otherAnswers  = _.without(answers, bottomAnswers...)\n    data.answers  = otherAnswers.concat(bottomAnswers)\n\n    data\n\n  render: ->\n    super\n\n    @setEl @findOne(\".inner-content\"), \"innerContent\"\n    @setEl @findAll(\".selectable\"), \"answers\"\n    @setEl [], \"selected\"\n\n    @onTimerChange(@game.timer)\n\n    window.setTimeout (=>\n      @getEl(\"innerContent\").style.overflowY = \"auto\"\n    ), 1500\n\n  refresh: ->\n    super\n\n    @showFocusImage()\n\n  show: ->\n    super\n\n    @setState(\"prompt\")\n\n    for el in @getEl(\"answers\") or []\n      el.classList.remove(\"active\")\n\n    @enterGame()\n    @showFocusImage()\n\n  showFocusImage: ->\n    canFocusImage = false\n\n    if @options.data.titleType is \"image\" or @options.data.additionalContentType is \"image\"\n      window.setTimeout =>\n        for img in @findAll(\".multi-content-image\")\n          imgRect = img.getBoundingClientRect()\n          canFocusImage = imgRect.height < (img.naturalHeight or img.height) or imgRect.width < (img.naturalWidth or img.width)\n        \n        @setState canFocusImage, \"image-focus\"\n      , 100\n\n  showZoom: (e) ->\n    img  = e.currentTarget.querySelector(\".multi-content-image\")\n    rect = img.getBoundingClientRect()\n\n    if rect.height < (img.naturalHeight or img.height) or\n       rect.width  < (img.naturalWidth or img.width)\n      @photoswipe = new PhotoSwipe(\n        document.querySelector(\"#photoswipe\")\n        PhotoSwipeUI_Default\n        [\n          msrc: img.src\n          src:  img.src\n          title: written.wrapInTag(@options.data.subtitle or \"\", \"h2\")\n          w: (img.naturalWidth  or img.width)  / Math.min(dpi, 1.66)\n          h: (img.naturalHeight or img.height) / Math.min(dpi, 1.66)\n        ]\n        {\n          focus: false\n          history: false\n          barsSize: {top: 0, bottom: 0 }\n          getThumbBoundsFn: -> { x: rect.left, y: rect.top, w: rect.width }\n        }\n      )\n\n      @photoswipe.listen(\"close\", => @setState(false, \"focus\"))\n      @photoswipe.init()\n\n  endGame: ->\n    super\n\n    @submit()\n\n  selectAnswer: (e) ->\n    return if @currentState.state is \"complete\"\n\n    selected = @getEl(\"selected\")\n\n    el = e.currentTarget\n\n    if @options.data.selectable is 1 and\n       el.classList.contains(\"active\")\n      return\n\n    el.classList.toggle(\"active\")\n\n    if el.classList.contains(\"active\")\n      if selected.length >= @options.data.selectable\n        selected.shift()?.classList.remove(\"active\")\n\n      selected.push(el)\n    else\n      selected = _.without(selected, el)\n\n    @setEl(selected, \"selected\")\n    @setState(\"touched\")\n\n  noDifference: (arr1, arr2) ->\n    _.chain(arr1)\n      .difference(arr2)\n      .isEmpty()\n      .value()\n\n  answerDetails: ->\n    questions = @options.strippedMetadata.questions or []\n    return [] unless questions.length > 0\n    \n    question = questions[0]\n    selectedAnswerIds = @getEl(\"selected\").map  (e) -> @$(e).data(\"answer-id\")\n    answers  = question.answers.filter ({ id }) -> id in selectedAnswerIds\n    details  = answers.map (a) -> question: question.question, answer: a\n    return details\n\n  isCorrect: ->\n    selected = @getEl(\"selected\")\n    correct  = _.chain(@getEl(\"answers\"))\n      .filter((el) -> el.classList.contains(\"correct\"))\n      .value()\n\n    @noDifference(correct, selected) and @noDifference(selected, correct)\n\nmodule.exports = MultipleChoiceGameView\n","module.exports = {\"title\":\"multiple-choice-survey\",\"display\":\"Multiple Choice\",\"category\":\"Survey\",\"description\":\"Ask a multiple choice question\",\"features\":{\"social\":true},\"model\":{\"question\":{\"id\":{\"type\":\"uuid\",\"hidden\":true},\"content\":{\"default\":\"\",\"types\":[\"text\",\"image\",\"video\",\"audio\",\"iframe\"]}},\"selectable\":{\"display\":\"Number of selectable answers\",\"default\":1,\"type\":\"number\"},\"randomize\":{\"default\":true,\"type\":\"boolean\",\"help\":\"Randomize the order of the answers to reduce response bias from your learners.\\n\"},\"answers\":{\"min\":2,\"max\":8,\"type\":[{\"id\":{\"type\":\"uuid\",\"hidden\":true},\"content\":{\"type\":\"html\"}}]},\"additionalContent\":{\"display\":\"Additional Content\",\"default\":\"\",\"types\":[\"text\",\"image\",\"video\",\"audio\",\"iframe\"],\"help\":\"This content displays beneath the multiple choice answers\"},\"prompt\":{\"type\":\"html\",\"default\":\"Select the best response\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"yes-no\",\"question\":{\"id\":\"#GENUUID#\",\"content\":\"Have you learned something new with this lesson?\",\"contentType\":\"text\"},\"selectable\":1,\"answers\":[{\"id\":\"#GENUUID#\",\"content\":\"Yes\"},{\"id\":\"#GENUUID#\",\"content\":\"No\"}],\"additionalContent\":\"\",\"additionalContentType\":\"text\"}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (additionalContent, answers, config, continueBtnText, doneText, hasNarration, hasPrompt, i18n, playinline, prompt, submitUp, undefined) {\njade_mixins[\"video-stream\"] = jade_interp = function(videoUrl, playsinline, controls, klass, poster){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nplayinline = playinline || true\ncontrols = controls || true\nklass = klass || 'video vjs-fluid'\nvar cloudinaryVideoFolderUrl = config.CLOUDINARY_CDN_URL+config.CLOUDINARY_VIDEO_FOLDER\nvar streamUrl = ''\nif ( videoUrl && videoUrl.indexOf(cloudinaryVideoFolderUrl) > -1)\n{\nstreamUrl = videoUrl.replace(cloudinaryVideoFolderUrl, cloudinaryVideoFolderUrl+'sp_full_hd/')\nstreamUrl = streamUrl.replace('.mp4', '.m3u8')\n}\nbuf.push(\"<video\" + (jade.attr(\"webkit-playsinline\", playsinline, true, false)) + (jade.attr(\"controls\", controls, true, false)) + \" preload=\\\"auto\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + (jade.attr(\"poster\", poster, true, false)) + (jade.cls(['video-js',klass], [null,true])) + \"><source\" + (jade.attr(\"src\", videoUrl, true, false)) + \"/>\");\nif ( streamUrl)\n{\nbuf.push(\"<source\" + (jade.attr(\"src\", streamUrl, true, false)) + \"/>\");\n}\nbuf.push(\"</video>\");\n};\njade_mixins[\"image\"] = jade_interp = function(imageUrl, klass){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nbuf.push(\"<img\" + (jade.attr(\"src\", imageUrl, true, false)) + (jade.cls([klass], [true])) + \"/>\");\n};\njade_mixins[\"multi-content\"] = jade_interp = function(prop, obj){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nobj = obj || locals;\nswitch (obj[prop + \"Type\"]){\ncase \"image\":\nbuf.push(\"<div\" + (jade.attr(\"data-content\", obj.image, true, false)) + \" class=\\\"multi-content-wrapper multi-content-wrapper-image block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\">\");\njade_mixins[\"image\"](obj[prop], 'multi-content multi-content-image');\nbuf.push(\"</div></div>\");\n  break;\ncase \"video\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-video block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\">\");\njade_mixins[\"video-stream\"](obj[prop], true, true,\"multi-content multi-content-video block-dk\");\nbuf.push(\"</div></div>\");\n  break;\ncase \"audio\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-audio block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><audio\" + (jade.attr(\"src\", obj[prop], true, false)) + \" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"multi-content multi-content-audio block-dk\\\"></audio></div></div>\");\n  break;\ncase \"iframe\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-iframe block-md block-lt\\\"><div class=\\\"block-sm multi-content-iframe\\\">\");\nvar iframe = obj[prop].match(/<iframe[^<]*<\\/iframe>/)\nif ( iframe)\n{\nbuf.push(null == (jade_interp = iframe[0].replace(/ (width|height)=[\"'\\d\\w]+/g, \"\")) ? \"\" : jade_interp);\n}\nbuf.push(\"</div></div>\");\n  break;\ndefault:\nbuf.push(\"<span class=\\\"multi-content multi-content-text\\\">\" + (null == (jade_interp = obj[prop]) ? \"\" : jade_interp) + \"</span>\");\n  break;\n}\n};\nbuf.push(\"<div class=\\\"block-v-lg content-fill content-fit\\\"><div class=\\\"row content-lg-fill content-sm-ver content-md-ver\\\"><div class=\\\"col-lg-6 col-sm-12 content-lg-ver block-v-md\\\"><h1 class=\\\"slide-title text-lg-right text-md-center text-sm-center fade-in\\\">\");\njade_mixins[\"multi-content\"](\"title\");\nbuf.push(\"</h1></div><div class=\\\"col col-lg-6 col-sm-12 block-v-md\\\"><div class=\\\"answers block-md block-dk fade-in\\\"><div class=\\\"block-h-sm\\\">\");\n// iterate answers\n;(function(){\n  var $$obj = answers;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var answer = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-answer-id\", answer.id, true, false)) + \" class=\\\"selectable block-v-sm fade-in\\\"><div\" + (jade.cls(['btn','btn-solid','btn-block','slide-up',(answer.isLong ? \"btn-long\" : \"\") + \" delay-\" + (i) + \"\"], [null,null,null,null,true])) + \">\" + (null == (jade_interp = answer.content) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var answer = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-answer-id\", answer.id, true, false)) + \" class=\\\"selectable block-v-sm fade-in\\\"><div\" + (jade.cls(['btn','btn-solid','btn-block','slide-up',(answer.isLong ? \"btn-long\" : \"\") + \" delay-\" + (i) + \"\"], [null,null,null,null,true])) + \">\" + (null == (jade_interp = answer.content) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div>\");\nif ( !!additionalContent)\n{\nbuf.push(\"<div class=\\\"block-v-md slide-title text-xxl text-md-center text-sm-center fade-in\\\">\");\njade_mixins[\"multi-content\"](\"additionalContent\");\nbuf.push(\"</div>\");\n}\nbuf.push(\"</div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"additionalContent\" in locals_for_with?locals_for_with.additionalContent:typeof additionalContent!==\"undefined\"?additionalContent:undefined,\"answers\" in locals_for_with?locals_for_with.answers:typeof answers!==\"undefined\"?answers:undefined,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"playinline\" in locals_for_with?locals_for_with.playinline:typeof playinline!==\"undefined\"?playinline:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","InputView = require \"views/input\"\n{ dpi }   = require(\"lib/device\")\n\nclass MultipleChoiceSurveyView extends InputView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .selectable\": \"selectAnswer\"\n    \"iostap .btn-done\":   \"nextSlide\"\n    \"iostap .multi-content-wrapper-image\": \"showZoom\"\n\n  serialize: ->\n    data = super\n\n    data.title = data.question.content\n    data.titleType = data.question.contentType\n    data.hasPrompt = true\n    answers = _.filter(data.answers, \"content\")\n    longest = _.max(answers, (answer) -> answer.content?.length or 0)\n    isLong  = longest.content?.length > Math.min(data.width / 16, 30)\n\n    answers =\n      for answer in answers\n        _.extend {}, answer,\n          isLong: isLong\n          bottom: /the above/i.test(answer.content)\n\n    answers       = _.shuffle(answers) if data.randomize\n    bottomAnswers = _.where(answers, bottom: true)\n    otherAnswers  = _.without(answers, bottomAnswers...)\n    data.answers  = otherAnswers.concat(bottomAnswers)\n\n    data\n\n  render: ->\n    super\n\n    @setEl @findAll(\".selectable\"), \"answers\"\n    @setEl [], \"selected\"\n\n  refresh: ->\n    super\n\n    @showFocusImage()\n\n  show: ->\n    for el in @getEl(\"answers\") or []\n      el.classList.remove(\"active\")\n    \n    @showFocusImage()\n\n  showFocusImage: ->\n    canFocusImage = false\n\n    window.setTimeout =>\n      for img in @findAll(\".multi-content-image\")\n        imgRect = img.getBoundingClientRect()\n        canFocusImage = canFocusImage or imgRect.height < (img.naturalHeight or img.height) or imgRect.width < (img.naturalWidth or img.width)\n\n      @setState canFocusImage, \"image-focus\"\n    , 100\n\n  showZoom: (e) ->\n    img  = e.currentTarget.querySelector(\".multi-content-image\")\n    rect = img.getBoundingClientRect()\n\n    if rect.height < (img.naturalHeight or img.height) or\n       rect.width  < (img.naturalWidth or img.width)\n      @photoswipe = new PhotoSwipe(\n        document.querySelector(\"#photoswipe\")\n        PhotoSwipeUI_Default\n        [\n          msrc: img.src\n          src:  img.src\n          title: written.wrapInTag(@options.data.subtitle or \"\", \"h2\")\n          w: (img.naturalWidth  or img.width)  / Math.min(dpi, 1.66)\n          h: (img.naturalHeight or img.height) / Math.min(dpi, 1.66)\n        ]\n        {\n          focus: false\n          history: false\n          barsSize: {top: 0, bottom: 0 }\n          getThumbBoundsFn: -> { x: rect.left, y: rect.top, w: rect.width }\n        }\n      )\n\n      @photoswipe.listen(\"close\", => @setState(false, \"focus\"))\n      @photoswipe.init()\n\n  userInput: (e) ->\n    selected = $(@getEl(\"selected\"))\n    question =\n      id: @options.data.question.id\n      text: @options.data.question.content\n    answer =\n      text: _.map(selected, (el) -> $(el).text()).join('|')\n    if @options.data.selectable is 1\n      answer.id = selected.data('answer-id')\n    return { question, answer }\n\n  selectAnswer: (e) ->\n    return if @currentState.state is \"complete\"\n\n    selected = @getEl(\"selected\")\n    el       = e.currentTarget\n\n    if @options.data.selectable is 1 and\n       el.classList.contains(\"active\")\n      return\n\n    el.classList.toggle(\"active\")\n\n    if el.classList.contains(\"active\")\n      if selected.length >= @options.data.selectable\n        selected.shift()?.classList.remove(\"active\")\n\n      selected.push(el)\n    else\n      selected = _.without(selected, el)\n\n    @setEl(selected, \"selected\")\n\n    if selected.length is 0\n      @setState(\"prompt\")\n    else\n      @setState(\"touched\")\n\nmodule.exports = MultipleChoiceSurveyView\n","module.exports = {\"title\":\"number-picker\",\"display\":\"Number Picker\",\"category\":\"Numbers\",\"features\":{\"stars\":true,\"social\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"Input number 5 in this sentence\",\"help\":\"Include the number or hashes (#) where the number will occur. The latter takes precendence.\\n\"},\"number\":{\"digits\":{\"type\":\"int\",\"default\":2,\"min\":1,\"max\":4},\"min\":{\"type\":\"int\",\"default\":0,\"display\":\"Min. Value\"},\"max\":{\"type\":\"int\",\"default\":99,\"display\":\"Max. Value\"},\"prefix\":{\"type\":\"html\",\"default\":\"\"},\"suffix\":{\"type\":\"html\",\"default\":\"\"},\"initial\":{\"display\":\"Starting Value\",\"type\":\"int\",\"default\":0}},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"value\":{\"type\":\"number\",\"default\":5,\"display\":\"Correct Value\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (seconds)\"},\"out-of-time-prompt\":{\"type\":\"html\",\"display\":\"Out of time prompt\"}}},\"prompt\":{\"type\":\"html\",\"default\":\"Select the correct number\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"integer\",\"title\":\"Of the 3 top-selling brands, our portfolio has ##.\",\"number\":{\"digits\":2,\"max\":10,\"min\":0,\"initial\":0},\"answer\":{\"value\":3,\"takeaway\":\"Our portfolio has 3 of the 3 top-selling brands\"}},{\"subtype\":\"money\",\"title\":\"At a cost of $99, our product is the cheapest\",\"number\":{\"digits\":3,\"max\":147,\"min\":12,\"initial\":99,\"prefix\":\"$\",\"suffix\":\",\"},\"answer\":{\"value\":99,\"takeaway\":\"The product costs $99.00\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (Array, after, before, continueBtnText, doneText, game, hasNarration, hasPrompt, i18n, isLong, number, prompt, submitUp, undefined) {\nif ( game && game.timer && game.timer.limit > 0 && !game.timer.isDisabled)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-fill invisible\\\"><div class=\\\"content-fit block-v-xl content text-center\\\">\");\nif ( before)\n{\nbuf.push(\"<div class=\\\"block-v-md\\\"><h1 class=\\\"number-picker-title slide-down\\\">\" + (null == (jade_interp = before) ? \"\" : jade_interp) + \"</h1></div>\");\n}\nbuf.push(\"<div\" + (jade.cls(['number-pickers','scale-up','block-v-md',isLong ? \"pickers-sm\" : \"\"], [null,null,null,true])) + \">\");\nif ( number.prefix)\n{\nbuf.push(\"<div class=\\\"number-picker-prefix text-right text-xxl\\\">\" + (null == (jade_interp = number.prefix) ? \"\" : jade_interp) + \"</div>\");\n}\n// iterate (new Array(number.digits))\n;(function(){\n  var $$obj = (new Array(number.digits));\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var el = $$obj[i];\n\nbuf.push(\"<div class=\\\"number-picker block-dk\\\"><div class=\\\"btn btn-solid btn-block text-sm number-picker-arr-up\\\"><span class=\\\"icon icon-chevron-up text-lg\\\"></span></div><div class=\\\"number-picker-nums\\\"><div class=\\\"number-picker-nums-scroller\\\">\");\n// iterate new Array(11)\n;(function(){\n  var $$obj = new Array(11);\n  if ('number' == typeof $$obj.length) {\n\n    for (var j = 0, $$l = $$obj.length; j < $$l; j++) {\n      var el = $$obj[j];\n\nbuf.push(\"<div class=\\\"number-picker-num block-h-md\\\"><div class=\\\"text-fixed\\\">\" + (jade.escape(null == (jade_interp = j % 10) ? \"\" : jade_interp)) + \"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var j in $$obj) {\n      $$l++;      var el = $$obj[j];\n\nbuf.push(\"<div class=\\\"number-picker-num block-h-md\\\"><div class=\\\"text-fixed\\\">\" + (jade.escape(null == (jade_interp = j % 10) ? \"\" : jade_interp)) + \"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div><div class=\\\"btn btn-solid btn-block text-sm number-picker-arr-down\\\"><span class=\\\"icon icon-chevron-down text-lg\\\"></span></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var el = $$obj[i];\n\nbuf.push(\"<div class=\\\"number-picker block-dk\\\"><div class=\\\"btn btn-solid btn-block text-sm number-picker-arr-up\\\"><span class=\\\"icon icon-chevron-up text-lg\\\"></span></div><div class=\\\"number-picker-nums\\\"><div class=\\\"number-picker-nums-scroller\\\">\");\n// iterate new Array(11)\n;(function(){\n  var $$obj = new Array(11);\n  if ('number' == typeof $$obj.length) {\n\n    for (var j = 0, $$l = $$obj.length; j < $$l; j++) {\n      var el = $$obj[j];\n\nbuf.push(\"<div class=\\\"number-picker-num block-h-md\\\"><div class=\\\"text-fixed\\\">\" + (jade.escape(null == (jade_interp = j % 10) ? \"\" : jade_interp)) + \"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var j in $$obj) {\n      $$l++;      var el = $$obj[j];\n\nbuf.push(\"<div class=\\\"number-picker-num block-h-md\\\"><div class=\\\"text-fixed\\\">\" + (jade.escape(null == (jade_interp = j % 10) ? \"\" : jade_interp)) + \"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div><div class=\\\"btn btn-solid btn-block text-sm number-picker-arr-down\\\"><span class=\\\"icon icon-chevron-down text-lg\\\"></span></div></div>\");\n    }\n\n  }\n}).call(this);\n\nif ( number.suffix)\n{\nbuf.push(\"<div class=\\\"number-picker-suffix text-left text-xxl\\\">\" + (null == (jade_interp = number.suffix) ? \"\" : jade_interp) + \"</div>\");\n}\nbuf.push(\"</div>\");\nif ( after)\n{\nbuf.push(\"<div class=\\\"block-v-md\\\"><h1 class=\\\"number-picker-title slide-up\\\">\" + (null == (jade_interp = after) ? \"\" : jade_interp) + \"</h1></div>\");\n}\nbuf.push(\"</div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"Array\" in locals_for_with?locals_for_with.Array:typeof Array!==\"undefined\"?Array:undefined,\"after\" in locals_for_with?locals_for_with.after:typeof after!==\"undefined\"?after:undefined,\"before\" in locals_for_with?locals_for_with.before:typeof before!==\"undefined\"?before:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"isLong\" in locals_for_with?locals_for_with.isLong:typeof isLong!==\"undefined\"?isLong:undefined,\"number\" in locals_for_with?locals_for_with.number:typeof number!==\"undefined\"?number:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView    = require \"views/base/game\"\nPicker = require(\"views/components/picker\")\n\nclass NumberPickerView extends GameView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-done\": \"endGame\"\n\n  serialize: ->\n    data = super\n\n    { title, number, answer } = data\n    { prefix, suffix } = number\n\n    if /\\W#+\\W/.test(title)\n      bits = title.split(/\\W+#+\\W+/)\n    else\n      num = \"#{prefix}#{answer.value}#{suffix}\"\n      num = num?.replace /[\\$\\!]/g, (w) -> \"\\\\\" + w\n      splitter = new RegExp \"\\\\s+#{num}\\\\s+\"\n      bits = (title or \"\").split(splitter)\n\n    data.isLong = prefix.length + suffix.length > 5\n    data.before = bits[0]\n    data.after  = bits.slice(1).join(\"\")\n\n    data\n\n  show: ->\n    super\n    @isPickerClicked = false\n    @timeout = 0\n    @$el.find(\".content-fill\").addClass(\"invisible\")\n\n    @setEl @findAll(\".number-picker\"), \"pickers\"\n\n    { initial, digits } = @options.data.number\n\n    initial = \" #{initial}\" while \"#{initial}\".length < digits\n\n    @pickers =\n      for el, i in @getEl(\"pickers\")\n        picker = new Picker\n          el: el\n          value: +\"#{initial}\".charAt(i)\n\n        @listenTo picker, \"change\", @onChange\n        picker\n\n    @onChange(picker, null, true) for picker in @pickers\n\n    @enterGame()\n\n    debouncedOnResize = _.debounce (=> @onResize()), 100\n    $(window).on \"resize.numberPickerView\", debouncedOnResize\n\n    @onResize()\n\n  onChange: (picker, diff, isFirstRun) ->  \n    isIncreasing = diff > 0\n    isDecreasing = diff < 0\n    @isPickerClicked = (isIncreasing || isDecreasing) unless @isPickerClicked\n    @getTotal()\n    @setState(\"touched\") if @isPickerClicked\n\n    if isFirstRun\n      @transform picker.scroller,\n        y: picker.offset.height * -picker.value\n        transition: \"all 300ms\"\n\n    else if (picker.value is 0) and isIncreasing\n      @transform picker.scroller,\n        y: picker.offset.height * -10\n        transition: \"all 300ms\"\n\n      cascade = 1\n\n    else\n      if (picker.value is 1) and isIncreasing\n        reset = 0\n\n      if (picker.value is 9) and isDecreasing\n        reset = picker.offset.height * -10\n        cascade = -1\n\n      if reset?\n        @transform picker.scroller,\n          y: reset\n          transition: \"none\"\n\n        picker.scroller.offsetWidth\n\n      @transform picker.scroller,\n        y: picker.offset.height * -picker.value\n        transition: \"all 300ms\"\n\n    if cascade?\n      @cascadeFrom(picker, cascade)\n  \n  onResize: =>\n    if @$el.hasClass(\"visible\") then @$el.removeClass(\"visible\")\n    if @resizeTimeout\n      window.clearTimeout @resizeTimeout\n\n    @resizeTimeout = window.setTimeout ( =>\n      @$el.find(\".content-fill\").removeClass(\"invisible\")\n      for picker in @pickers\n        picker.getOffset()\n        picker.setBy(0)\n      @$el.addClass(\"visible\")\n      @timeout = 300\n    ), @timeout\n\n  getTotal: ->\n    @currentValue = +(picker.value for picker in @pickers).join(\"\")\n    for picker, i in @pickers\n      diff = Math.pow(10, @pickers.length - i - 1)\n      picker.toggleUp(@currentValue + diff > @options.data.number.max)\n      picker.toggleDown(@currentValue - diff < @options.data.number.min)\n\n  cascadeFrom: (picker, diff) ->\n    index = @pickers.indexOf(picker)\n    @pickers[index - 1]?.setBy(diff)\n\n  isCorrect: ->\n    @currentValue is @options.data.answer.value\n\n  endGame: ->\n    super\n\n    @submit()\n\n  answerDetails: ->\n    questions    = @options.metadata?.questions or []\n\n    return [] unless questions.length > 0\n\n    question         = questions[0]\n    correct          = @isCorrect()\n    value            = parseInt(@currentValue)\n\n    cleanedContent =\n      question.question.content.replace(/##/, '__').replace(/<br>/, ' ')\n    question.question.content = cleanedContent\n\n    answer           = _.find question.answers, (a) -> a.correct is correct\n    details          = question: question.question, answer: answer\n\n    details.answer.content = value\n\n    [ details ]\n\n  hide: ->\n    super\n    $(window).off \"resize.numberPickerView\"\n\nmodule.exports = NumberPickerView\n","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (digits, undefined) {\n// iterate digits\n;(function(){\n  var $$obj = digits;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var digit = $$obj[$index];\n\nbuf.push(\"<span\" + (jade.attr(\"style\", ([\n      \"opacity: \" + (_.isNumber(digit.opacity) ? digit.opacity : 1) + \"\",\n      \"transform: translate3d(\" + (digit.x || 0) + \"px, \" + (digit.y || 0) + \"px, 0)\"\n    ]).join(\";\"), true, false)) + \" class=\\\"digit\\\">\" + (jade.escape(null == (jade_interp = digit.text) ? \"\" : jade_interp)) + \"</span>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var digit = $$obj[$index];\n\nbuf.push(\"<span\" + (jade.attr(\"style\", ([\n      \"opacity: \" + (_.isNumber(digit.opacity) ? digit.opacity : 1) + \"\",\n      \"transform: translate3d(\" + (digit.x || 0) + \"px, \" + (digit.y || 0) + \"px, 0)\"\n    ]).join(\";\"), true, false)) + \" class=\\\"digit\\\">\" + (jade.escape(null == (jade_interp = digit.text) ? \"\" : jade_interp)) + \"</span>\");\n    }\n\n  }\n}).call(this);\n}.call(this,\"digits\" in locals_for_with?locals_for_with.digits:typeof digits!==\"undefined\"?digits:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (zero) {\nbuf.push(\"<span class=\\\"number-wrap\\\"><span class=\\\"number\\\">\" + (jade.escape(null == (jade_interp = zero) ? \"\" : jade_interp)) + \"</span>&nbsp;</span>\");}.call(this,\"zero\" in locals_for_with?locals_for_with.zero:typeof zero!==\"undefined\"?zero:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","module.exports = {\"title\":\"number-sentence\",\"display\":\"Number Sentence\",\"category\":\"Numbers\",\"features\":{\"stars\":true,\"social\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"Input number 5 in this sentence\",\"help\":\"Include hashes (#) where the number will occur.\\n\"},\"numbers\":{\"min\":2,\"max\":8,\"type\":[{\"number\":{\"type\":\"number\",\"default\":0},\"correct\":{\"type\":\"boolean\",\"default\":false}}]},\"decimals\":{\"type\":\"int\",\"min\":0,\"max\":8,\"default\":0},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (seconds)\"},\"out-of-time-prompt\":{\"type\":\"html\",\"display\":\"Out of time prompt\"}}},\"prompt\":{\"type\":\"html\",\"default\":\"Select the correct number\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"integer\",\"title\":\"We have sold<br>over ## units<br>around theworld.\\n\",\"numbers\":[{\"number\":100},{\"number\":1000},{\"number\":10000},{\"number\":100000},{\"number\":1000000,\"correct\":true}]},{\"subtype\":\"fraction\",\"title\":\"Our product has ##% market share.\",\"decimals\":1,\"numbers\":[{\"number\":20.6},{\"number\":16.2},{\"number\":12.6},{\"number\":32.8},{\"number\":26.6,\"correct\":true}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, doneText, game, hasNarration, hasPrompt, i18n, prompt, sentence, submitUp) {\nif ( game && game.timer && game.timer.limit > 0 && !game.timer.isDisabled)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-fill\\\"><div class=\\\"content-ver text-center content-fit\\\"><div class=\\\"arrow btn-up block-md\\\"><div class=\\\"btn btn-muted btn-circular slide-down delay-2\\\"><span class=\\\"icon icon-chevron-up text-lg\\\"></span></div></div><div class=\\\"block-v-xl fade-in\\\"><div class=\\\"block-v-xl\\\"><div class=\\\"text-xxl slide-up\\\">\" + (null == (jade_interp = sentence) ? \"\" : jade_interp) + \"</div></div></div><div class=\\\"arrow btn-down block-md\\\"><div class=\\\"btn btn-muted btn-circular slide-up delay-2\\\"><span class=\\\"icon icon-chevron-down text-lg\\\"></span></div></div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"sentence\" in locals_for_with?locals_for_with.sentence:typeof sentence!==\"undefined\"?sentence:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView = require \"views/base/game\"\nanimate  = require(\"lib/animate\")\nEasie    = require(\"lib/easie\")\n\nclass NumberPickerView extends GameView\n  templates:\n    default: require(\"./template\")\n    wrapper: require(\"./components/wrapper\")\n    digits:  require(\"./components/digits\")\n\n  events:\n    \"iostap   .btn-up\": \"increase\"\n    \"iostap .btn-down\": \"decrease\"\n    \"iostap .btn-done\": \"endGame\"\n\n  serialize: ->\n    data = super\n    { question, answers } = data.metadata.questions[0]\n    { decimals, numbers } = data\n    data.correct = _.find numbers, 'correct'\n\n    for answer, i in answers\n      answers[i].content = 0 if answer.content == ''\n    \n    data.answers = _.sortBy(answers, ({ content }) -> parseFloat(content) or 0)\n\n    zero = (0).toFixed(decimals or 0)\n    data.sentence = question.content.replace /#+/, @templates.wrapper({ zero })\n\n    return data\n\n  onRefresh: ->\n    @beforeShow()\n    super\n\n  beforeShow: ->\n    @setEl @findOne(\".btn-up\"),   \"up\"\n    @setEl @findOne(\".btn-down\"), \"down\"\n    @setEl @findOne(\".number\"),   \"number\"\n\n    @currentIndex = _.random(@options.metadata.questions[0].answers.length - 1)\n    @animateChange 0\n\n    @trigger(\"ui\", flexibleHeight: true)\n\n  beforeHide: ->\n    @trigger(\"ui\", flexibleHeight: false)\n\n  show: ->\n    super\n\n    @enterGame()\n\n  increase: ->\n    values = @serialize().answers\n    prev   = values[@currentIndex].content\n    @currentIndex = Math.min (values.length - 1), @currentIndex + 1\n\n    @animateChange(prev)\n    @setState(\"touched\")\n\n  decrease: ->\n    values = @serialize().answers\n    prev   = values[@currentIndex].content\n    @currentIndex = Math.max 0, @currentIndex - 1\n\n    @animateChange(prev, null, -1)\n    @setState(\"touched\")\n\n  animateChange: (prev, next, dir = 1) ->\n    { answers, decimals } = @serialize()\n\n    el    = @getEl(\"number\")\n    limit = answers.length - 1\n    next ?= answers[@currentIndex].content\n\n    if decimals is 0\n      next = Math.round(next)\n      prev = Math.round(prev)\n\n    w1 = el.offsetWidth\n    nb = el.innerHTML\n    el.innerHTML = written.prettyNumber(next, \",\", decimals)\n    w2 = el.offsetWidth\n    el.innerHTML = nb\n\n    @getEl(\"down\").classList.toggle \"disabled\", @currentIndex is 0\n    @getEl(\"up\").classList.toggle \"disabled\", @currentIndex is limit\n\n    if not decimals?\n      shouldInterpolateDecimalPlaces = true\n      d1 = prev.toString().replace(/\\d+\\.{0,1}/, \"\").length\n      d2 = next.toString().replace(/\\d+\\.{0,1}/, \"\").length\n\n    pStr = written.prettyNumber(prev, \",\", decimals)\n    nStr = written.prettyNumber(next, \",\", decimals)\n\n    dur   = 0.66\n    yDist = -4\n    xDist = 0\n\n    # As we animate between the two numbers, the length of the string could\n    # change. For new digits, translate them in from the 20px left while\n    # increasing their opacity. Gradually change the width of the container at\n    # the same time.\n    draw = (d) =>\n      eez = Easie.quartInOut(d, 0, 1, 1)\n      num = new window.Big(next).minus(prev).times(eez).plus(prev)\n      num = num.round() if decimals is 0\n\n      if shouldInterpolateDecimalPlaces\n        decimals = Math.round(d1 + (d2 - d1) * d)\n        decimals = d2 if d is 1\n\n      str = written.prettyNumber(num, \",\", decimals)\n      str = str.slice(0, Math.max(nStr.length, pStr.length))\n\n      digits =\n        for k, i in str\n          ln = str.length\n          start = i / ln * (1 - dur)\n          clamp = _.limit(d - start, dur)\n          yDiff = Easie.quartIn Math.sin(clamp / dur * Math.PI), 0, 1, 1\n\n          { text: k, y: yDiff * yDist * dir }\n\n      if d < 1\n        # If the new string lacks characters, add them so they can animate in\n        if str.length < pStr.length\n          diff = pStr.length - str.length - 1\n          for i in [diff..0]\n            digits.unshift text: pStr[i]\n\n        else if str.length < nStr.length\n          diff = nStr.length - str.length - 1\n          for i in [diff..0]\n            digits.unshift text: nStr[i]\n\n        # For any changing characters, offset their opacity and x position\n        if nStr.length > pStr.length\n          diff = nStr.length - pStr.length\n          for i in [0...diff]\n            digits[i].opacity = d\n            digits[i].x = (1 - eez) * xDist * (1 - i / diff)\n\n        if pStr.length > nStr.length\n          diff = pStr.length - nStr.length\n          for i in [0...diff]\n            digits[i].opacity = 1 - d\n            digits[i].x = (eez) * xDist * (1 - i / diff)\n\n      el.innerHTML = @templates.digits({ digits })\n\n    @animation?.cancel()\n    @animation = animate(draw, if @currentState?.refresh then 0 else 900)\n\n  isCorrect: ->\n    answer = @serialize().answers[@currentIndex]\n    answer?.correct or answer.content is @serialize().correct?.number\n\n  endGame: ->\n    super\n    @submit()\n\n    if not @isCorrect()\n      { numbers } = @serialize()\n      prev = numbers[@currentIndex].number\n      next = _.find(numbers, { correct: true })?.number\n      @animateChange(prev, next)\n\n  answerDetails: ->\n    questions = @options.metadata?.questions or []\n    return [] unless questions.length > 0\n    [\n      question: questions[0].question\n      answer: @serialize().answers[@currentIndex]\n      correct: @isCorrect()\n    ]\n\nmodule.exports = NumberPickerView\n","module.exports = {\"title\":\"parallax\",\"display\":\"Parallax Motion\",\"category\":\"Content\",\"features\":{\"narration\":true,\"social\":true},\"description\":\"Create the illusion of 3-dimensions\",\"model\":{\"images\":{\"min\":1,\"max\":10,\"type\":[{\"type\":\"image\"}],\"help\":\"Separate each layer of your design onto its own image. Images overlay each other, with the first positioned at the back. Those nearer the back or front of the stack will move more than images in the middle.\\n\"},\"caption\":{\"type\":\"html\",\"default\":\"\"},\"background\":{\"type\":\"string\",\"default\":\"\",\"display\":\"Background Color\"}},\"examples\":[{\"subtype\":\"multiple\",\"caption\":\"## The EdApp experience is available on **mobile & desktop**\\n\",\"images\":[\"img/examples/parallax-1.png\",\"img/examples/parallax-2.png\",\"img/examples/parallax-3.png\"]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (background, caption, continueBtnText, doneText, hasNarration, hasPrompt, i18n, images, prompt, submitUp, undefined) {\njade_mixins[\"image\"] = jade_interp = function(imageUrl, klass){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nbuf.push(\"<img\" + (jade.attr(\"src\", imageUrl, true, false)) + (jade.cls([klass], [true])) + \"/>\");\n};\nbuf.push(\"<div class=\\\"parallax-container content-fill text-center\\\"><div class=\\\"parallax-images fade-in delay-4 content-fill\\\">\");\n// iterate images\n;(function(){\n  var $$obj = images;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var src = $$obj[i];\n\njade_mixins[\"image\"](src, \"parallax-img content parallax-img-#{i}\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var src = $$obj[i];\n\njade_mixins[\"image\"](src, \"parallax-img content parallax-img-#{i}\");\n    }\n\n  }\n}).call(this);\n\nif ( caption)\n{\nbuf.push(\"<div\" + (jade.attr(\"style\", \"background: \" + (background) + \"\", true, false)) + (jade.cls(['caption','block-v-lg','text-center','slide-up',background ? \"block-h-lg\" : \"\"], [null,null,null,null,true])) + \">\" + (null == (jade_interp = caption) ? \"\" : jade_interp) + \"</div>\");\n}\nbuf.push(\"</div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"background\" in locals_for_with?locals_for_with.background:typeof background!==\"undefined\"?background:undefined,\"caption\" in locals_for_with?locals_for_with.caption:typeof caption!==\"undefined\"?caption:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"images\" in locals_for_with?locals_for_with.images:typeof images!==\"undefined\"?images:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView = require(\"views/slide\")\nPreloader = require(\"lib/preload\")\n\nclass ParallaxView extends SlideView\n  template: require(\"./template\")\n  useMouseEvent: true\n\n  events: ->\n    \"iostap .btn-done\": \"next\"\n    \"mousemove\": \"onMouseMove\"\n\n  serialize: ->\n    data = super\n    data.images = _.compact data.images\n    data\n\n  beforeShow: ->\n    Preloader.load @options.data.images, =>\n      @onRotate(beta: 0, gamma: 0)\n\n  show: ->\n    @setEl @findAll(\".parallax-img\"), \"images\"\n    @setEl @findOne(\".caption\"), \"caption\"\n\n    if @options.data.background\n      @trigger \"ui\", { lightbox: @options.data.background, minimal: false } \n\n    return unless window.Promise?\n\n    @gn = new GyroNorm()\n    @gn.init(frequency: 150)\n      .catch(-> console?.log(\"DeviceOrientation not available in this context\"))\n      .then  =>\n        @gn.start (data) =>\n          # Annoyingly, iframes in the LMS don't reject the Promise,\n          # so we need to ensure that the event is really available.\n          if not @useMouseEvent or @gn.isAvailable().deviceOrientationAvailable\n            @useMouseEvent = false\n            @onRotate data.do, \"all 300ms\"\n\n  hide: ->\n    @gn?.end()\n\n  onRefresh: ->\n    @gn?.end()\n    @show()\n\n    unless @options.data.background\n      @trigger \"ui\", lightbox: false\n\n  undelegateEvents: ->\n    $(window).off(\".#{@cid}\")\n    super\n\n  onMouseMove: (e) ->\n    return unless @useMouseEvent\n    e.stopImmediatePropagation?()\n\n    { pageX, pageY } = e.touches?[0] or e\n\n    gamma = (pageX / @el.offsetWidth - 0.5 ) * 90\n    beta  = (pageY / @el.offsetHeight - 0.5) * 90\n\n    @onRotate { beta, gamma }\n\n  onRotate: ({ beta, gamma }, transition = \"\") ->\n    images = @getEl(\"images\")\n    return unless images\n\n    length  = images.length - (1 - images.length % 2)\n    dampenX = 0.3\n    dampenY = 0.25\n\n    g = dampenX * gamma\n    b = dampenY * beta\n\n    offsetY = -@getEl(\"caption\")?.offsetHeight / 2 or 0\n\n    for img, i in images\n      @transform img,\n        x: g * (-length / 2 + i + 1) - img.offsetWidth / 2\n        y: b * (-length / 2 + i + 1) - img.offsetHeight / 2 + offsetY\n        transition: transition\n\n\nmodule.exports = ParallaxView\n","Constants = require(\"./constants\")\n\nexports.Actions = class Actions\n  constructor: (@lessonId, @slideId) ->\n\n  # Dispatches an action to the learners app\n  dispatch: ({ type, payload }) ->\n    # The event must be prefixed with 'event:'\n    Application.publish(\"event:#{type}\") payload\n\n  uploadMediaFromSource: (source, mediaType) -> @dispatch {\n    type: Constants.UPLOAD_MEDIA_FROM_SOURCE\n    payload: {\n      @lessonId\n      @slideId\n      source\n      type: mediaType\n    }\n  }\n\n  getMediaForSlide: -> @dispatch {\n    type: Constants.GET_MEDIA_FOR_SLIDE\n    payload: {\n      @lessonId\n      @slideId\n    }\n  }\n\n  postMediaForSlide: ({ url, title }) -> @dispatch {\n    type: Constants.POST_MEDIA_FOR_SLIDE\n    payload: {\n      @lessonId\n      @slideId\n      url\n      title\n    }\n  }\n\n  unsetAutoOpenComment: -> @dispatch {\n      type: Constants.UNSET_AUTO_OPEN_COMMENT\n      payload: {}\n  }\n\n","\n# Constants\nexports.UPLOAD_MEDIA_FROM_SOURCE = 'UPLOAD_MEDIA_FROM_SOURCE'\nexports.UPLOAD_MEDIA_FROM_SOURCE_SUCCESS = 'UPLOAD_MEDIA_FROM_SOURCE_SUCCESS'\nexports.UPLOAD_MEDIA_FROM_SOURCE_FAILURE = 'UPLOAD_MEDIA_FROM_SOURCE_FAILURE'\nexports.UPLOAD_MEDIA_FROM_SOURCE_PROGRESS = 'UPLOAD_MEDIA_FROM_SOURCE_PROGRESS'\nexports.UPLOAD_MEDIA_FROM_SOURCE_PREVIEW = 'UPLOAD_MEDIA_FROM_SOURCE_PREVIEW'\n\nexports.POST_MEDIA_FOR_SLIDE = 'POST_MEDIA_FOR_SLIDE'\nexports.POST_MEDIA_FOR_SLIDE_SUCCESS = 'POST_MEDIA_FOR_SLIDE_SUCCESS'\nexports.POST_MEDIA_FOR_SLIDE_FAILURE = 'POST_MEDIA_FOR_SLIDE_FAILURE'\n\nexports.GET_MEDIA_FOR_SLIDE = 'GET_MEDIA_FOR_SLIDE'\nexports.GET_MEDIA_FOR_SLIDE_SUCCESS = 'GET_MEDIA_FOR_SLIDE_SUCCESS'\nexports.GET_MEDIA_FOR_SLIDE_FAILURE = 'GET_MEDIA_FOR_SLIDE_FAILURE'\n\nexports.COMMENT_ADDED = 'COMMENT_ADDED'\nexports.UNSET_AUTO_OPEN_COMMENT = 'UNSET_AUTO_OPEN_COMMENT'","exports.getMediaForSlideSuccessData = ->\n  {\n    totalCount: 2\n    items: [\n      {\n        lessonId: \"1\"\n        slideId: \"1\"\n        id: \"1\"\n        title: \"Techniques we've used\"\n        description: \"It's great\"\n        url: \"video/example.mp4\"\n      },\n      {\n        lessonId: \"2\"\n        slideId: \"2\"\n        id: \"2\"\n        title: \"Try this other technique\"\n        description: \"It's great\"\n        url: \"video/example.mp4\"\n      },\n      {\n        lessonId: \"2\"\n        slideId: \"2\"\n        id: \"2\"\n        title: \"How about this?\"\n        description: \"It's great\"\n        url: \"video/example.mp4\"\n      },\n      {\n        lessonId: \"2\"\n        slideId: \"2\"\n        id: \"2\"\n        title: \"This is the best one\"\n        description: \"It's great\"\n        url: \"video/example.mp4\"\n      }\n    ]\n  }\n\nexports.getNoMediaForSlideData = ->\n  {\n    totalCount: 0\n    items: []\n  }","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (config, item, obj, playinline) {\njade_mixins[\"video-stream\"] = jade_interp = function(videoUrl, playsinline, controls, klass, poster){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nplayinline = playinline || true\ncontrols = controls || true\nklass = klass || 'video vjs-fluid'\nvar cloudinaryVideoFolderUrl = config.CLOUDINARY_CDN_URL+config.CLOUDINARY_VIDEO_FOLDER\nvar streamUrl = ''\nif ( videoUrl && videoUrl.indexOf(cloudinaryVideoFolderUrl) > -1)\n{\nstreamUrl = videoUrl.replace(cloudinaryVideoFolderUrl, cloudinaryVideoFolderUrl+'sp_full_hd/')\nstreamUrl = streamUrl.replace('.mp4', '.m3u8')\n}\nbuf.push(\"<video\" + (jade.attr(\"webkit-playsinline\", playsinline, true, false)) + (jade.attr(\"controls\", controls, true, false)) + \" preload=\\\"auto\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + (jade.attr(\"poster\", poster, true, false)) + (jade.cls(['video-js',klass], [null,true])) + \"><source\" + (jade.attr(\"src\", videoUrl, true, false)) + \"/>\");\nif ( streamUrl)\n{\nbuf.push(\"<source\" + (jade.attr(\"src\", streamUrl, true, false)) + \"/>\");\n}\nbuf.push(\"</video>\");\n};\nswitch (item.type){\ncase \"image\":\nbuf.push(\"<li\" + (jade.attr(\"data-content\", obj.image, true, false)) + \" class=\\\"multi-content-wrapper multi-content-wrapper-image block-md\\\"><div class=\\\"block-sm multi-content-media\\\"><img\" + (jade.attr(\"src\", item.url, true, false)) + \" class=\\\"multi-content multi-content-image\\\"/></div></li>\");\n  break;\ncase \"video\":\nbuf.push(\"<li\" + (jade.attr(\"data-id\", item.id, true, false)) + \" class=\\\"multi-content-wrapper multi-content-wrapper-video block-md\\\"><div class=\\\"block-sm multi-content-media block-lt\\\">\");\njade_mixins[\"video-stream\"](item.url, true, true, \"multi-content multi-content-video\", item.thumbmail);\nbuf.push(\"</div><div class=\\\"video-info\\\"><div class=\\\"video-actions\\\"><span class=\\\"icon-group\\\"><span class=\\\"icon-group-entry js-like-button hidden\\\"><span class=\\\"icon icon-heart js-like-button\\\"></span><span class=\\\"video-like-count text-light\\\">\" + (jade.escape(null == (jade_interp = '10') ? \"\" : jade_interp)) + \"</span></span><span class=\\\"icon-group-entry js-comment-button\\\">\");\nif ( item.commentCount > 0 )\n{\nbuf.push(\"<span class=\\\"icon icon-chat-count\\\"></span>\");\n}\nelse\n{\nbuf.push(\"<span class=\\\"icon icon-chat\\\"></span>\");\n}\nbuf.push(\"<span class=\\\"video-comment-count text-light js-video-comment-count\\\">\" + (jade.escape(null == (jade_interp = item.commentCount || 0) ? \"\" : jade_interp)) + \"</span></span></span><span class=\\\"icon icon-flag js-flag-button hidden\\\"></span></div><span class=\\\"video-title\\\">\" + (null == (jade_interp = item.title) ? \"\" : jade_interp) + \"</span></div></li>\");\n  break;\n}}.call(this,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"item\" in locals_for_with?locals_for_with.item:typeof item!==\"undefined\"?item:undefined,\"obj\" in locals_for_with?locals_for_with.obj:typeof obj!==\"undefined\"?obj:undefined,\"playinline\" in locals_for_with?locals_for_with.playinline:typeof playinline!==\"undefined\"?playinline:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","module.exports = {\"title\":\"peer-authoring\",\"display\":\"Peer Authoring\",\"category\":\"Content\",\"description\":\"Accept video contributions and comment on peer submissions\",\"visible\":true,\"features\":{\"narration\":false,\"stars\":false},\"help\":\"This template enables learners to upload videos and leave comments. This preview is the initial screen that learners will view. Once a video(s) is uploaded, learners will be able to scroll through what their peers have contributed. </br></br>If you would like to view contributions, click <a href=\\\"/peer-authoring\\\" style=\\\"font-weight: bold\\\" >here</a>.\\n\",\"model\":{\"title\":{\"type\":\"html\",\"default\":\"Peer Authoring\",\"display\":\"Slide title\",\"required\":false},\"noMediaUploaded\":{\"type\":\"html\",\"default\":\"No videos have been uploaded yet.\",\"required\":false,\"display\":\"No media uploaded message\"},\"buttonText\":{\"type\":\"html\",\"default\":\"Upload\",\"display\":\"Upload button label\"},\"prompt\":{\"type\":\"html\",\"default\":\"Scroll to see more\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"title\":\"Peer Authoring\",\"subtype\":\"peer-authoring\",\"buttonText\":\"Upload now\"}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (buttonText, continueBtnText, doneText, hasNarration, hasPrompt, i18n, noMediaUploaded, prompt, submitUp, title) {\nbuf.push(\"<div class=\\\"row text-center upload-view js-upload-view hidden\\\"><h1 class=\\\"js-progress\\\">\" + (null == (jade_interp = i18n(\"peer-authoring.uploading\")) ? \"\" : jade_interp) + \"</h1><div class=\\\"loading-indicator js-loading-indicator\\\"><div></div><div></div><div></div><div></div></div><div class=\\\"upload-progress-indicator upload-progress-indicator--hidden js-progress-indicator\\\"><div class=\\\"upload-progress-text\\\">100%</div></div><div class=\\\"upload-form js-upload-form\\\"><label class=\\\"text-xxl text-xl-video\\\">\" + (null == (jade_interp = i18n(\"peer-authoring.video-title\")) ? \"\" : jade_interp) + \"</label><input type=\\\"text\\\"\" + (jade.attr(\"placeholder\", i18n(\"peer-authoring.title-placeholder\"), true, false)) + \" class=\\\"text-xxl js-title-input\\\"/><div class=\\\"btn btn-pale btn-next slide-up submit-button js-submit-button\\\">\" + (null == (jade_interp = i18n(\"peer-authoring.submit\")) ? \"\" : jade_interp) + \"</div></div></div><div class=\\\"content-scroll fade-in js-content-view\\\"><div class=\\\"content-scroll-inner hide-overflow block-v-lg block-box-sizing\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-lg-8 col-lg-offset-2\\\"><h1 class=\\\"text-center\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"block-v-md text-center text-lg js-loading-view hidden\\\">\" + (null == (jade_interp = \"Loading...\") ? \"\" : jade_interp) + \"</div><div class=\\\"block-v-md text-center text-lg js-no-media-view hidden\\\">\" + (null == (jade_interp = noMediaUploaded) ? \"\" : jade_interp) + \"</div><ul class=\\\"slide-content text-md js-item-list\\\"></ul></div></div></div><button class=\\\"btn btn-solid btn-upload js-upload hidden\\\">\" + (null == (jade_interp = buttonText) ? \"\" : jade_interp) + \"</button></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"buttonText\" in locals_for_with?locals_for_with.buttonText:typeof buttonText!==\"undefined\"?buttonText:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"noMediaUploaded\" in locals_for_with?locals_for_with.noMediaUploaded:typeof noMediaUploaded!==\"undefined\"?noMediaUploaded:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","ScrollableView = require(\"../scrollable/view\")\nPreloader      = require(\"lib/preload\")\n{ dpi, platform }        = require(\"lib/device\")\nConstants      = require(\"./constants\")\n{ Actions }    = require(\"./actions\")\nData           = require(\"./data\")\nModel          = require(\"./model\")\n\nclass PeerAuthoringView extends ScrollableView\n  template: require(\"./template\")\n  mediaItemTemplate: require(\"./media-item\")\n  ignoreStateOnRefresh: true\n\n  initialize: ->\n    super\n    # Create the action creator for this slide, this auto adds the slide Id to the payload\n    if window.ED_LMS_PREVIEW or window.ED_PUBLIC_PREVIEW or not __?.slidedeck?\n      @actions = new Actions(\"\", \"\")\n    else\n      @actions = new Actions(__.slidedeck.id, @id)\n    @media = []\n    @upload = {\n      progress: 0\n      uri: null\n      isUploading: false\n    }\n    # WARNING: Make sure to only use this when debugging\n    # window._pa = this\n\n  # serialize: -> super\n\n  events: ->\n    # Example of event handler\n    _.extend super,\n      \"iostap .btn-done\": \"next\"\n      \"iostap .js-upload\": \"onUpload\"\n      \"iostap .js-submit-button\": \"onSubmit\"\n      \"iostap .js-like-button\": \"onLike\"\n      \"click .js-comment-button\": \"onComment\"\n      \"focus .js-title-input\": \"onTitleInputFocus\"\n      \"focusout .js-title-input\": \"onTitleInputBlur\"\n\n  renderItem: (item) =>\n    # Build thumbnail url via cloudinary if not supplied from server\n    videoThumbnail = item.thumbnail\n    if not videoThumbnail and item.url and /cloudinary.*\\..{3,4}$/.test(item.url)\n      videoThumbnail = item.url.replace /\\..{3,4}$/, \".jpg\"\n\n    item = {\n      id: item.id\n      type: 'video'\n      url: item.url\n      title: item.title\n      commentCount: item.commentCount\n      thumbnail: videoThumbnail\n    }\n    @mediaItemTemplate({ item, config: @options.config() })\n\n  prependItem: (item) -> @getEl(\"item_list\").prepend @renderItem(item)\n\n  getMediaForSlide: ->\n    if window.ED_LMS_PREVIEW or window.ED_PUBLIC_PREVIEW\n      # Use a placeholder dataset for CMS or testing\n      @getMediaForSlideSuccess(Data.getNoMediaForSlideData())\n    else\n      @actions.getMediaForSlide()\n      @getEl(\"loading_view\").removeClass(\"hidden\")\n      @getEl(\"item_list\").addClass(\"hidden\")\n      @getEl(\"no_media_view\").addClass(\"hidden\")\n\n  getMediaForSlideSuccess: (payload) =>\n    # Thomas gives us media stuff\n    items = payload.items\n    totalCount = payload.totalCount\n    videoId = payload.videoId\n    @getEl(\"loading_view\").addClass(\"hidden\")\n    if totalCount is 0\n      @getEl(\"no_media_view\").removeClass(\"hidden\")\n      @getEl(\"item_list\").addClass(\"hidden\")\n    else\n      @media = items\n      @getEl(\"no_media_view\").addClass(\"hidden\")\n      @getEl(\"item_list\").removeClass(\"hidden\").html @media.map(@renderItem).join(\"\")\n      window.setTimeout((=> @preloadMedia()), 1000)\n      if payload.openComment\n        window.setTimeout((=> @autoOpenComment(videoId)), 2000)\n\n  autoOpenComment: (videoId) =>\n    # simulate the button click of comment icon\n    commentItem = $(\"ul.slide-content\").find(\"[data-id=\\'#{videoId}\\']\")\n    button = $(commentItem).find('.js-comment-button')\n    button.trigger('click')\n\n  uploadMediaFromSourcePreview: ({ uri }) =>\n    @upload.uri = uri\n    @getEl(\"loading_indicator\").removeClass(\"hidden\")\n\n  uploadMediaFromSourceProgress: ({ percent }) =>\n    @upload.percent = percent\n    if typeof percent is \"number\"\n      if percent is 1\n        @getEl(\"progress\").html \"Processing...\"\n      else\n        @getEl(\"progress\").html(\"Uploaded #{(percent * 100).toFixed()}%\")\n\n  uploadMediaFromSourceSuccess: ({ uri }) =>\n    @upload = { uri, progress: undefined, isUploading: false }\n    @getEl(\"progress\").html i18n(\"peer-authoring.upload-complete\")\n    @getEl(\"upload_form\").removeClass(\"hidden\")\n    @getEl(\"loading_indicator\").addClass(\"hidden\")\n    @getEl(\"upload_complete_indicator\").removeClass(\"upload-progress-indicator--hidden\")\n\n  uploadMediaFromSourceFailure: ({ message }) =>\n    @upload = { uri: undefined, progress: undefined, isUploading: false }\n    @showContentView()\n\n  postMediaForSlideSuccess: (payload) =>\n    @prependItem(payload)\n    # The initial video upload we need to make sure content is visible\n    @getEl(\"loading_view\").addClass(\"hidden\")\n    @getEl(\"content_view\").removeClass(\"hidden\")\n    @$(\".js-no-media-view\").addClass(\"hidden\")\n    @$(\".js-item-list\").removeClass(\"hidden\")\n    window.setTimeout((=> @preloadMedia()), 400)\n    contentScroll = @findOne(\".content-scroll\")\n    $li = @$(\"[data-id=#{payload.id}]\")\n    # contentScroll.scrollTo({ top: $li[0].offsetTop + 10, behavior: \"smooth\" })\n    window.setTimeout((=> contentScroll.scrollTo({ top: $li[0].offsetTop + 10, behavior: \"smooth\" })), 1000)\n\n  exitSocialLearning: (e) =>\n    @$(\".selected\").removeClass(\"selected\")\n\n  handleCommentAdded: (e) =>\n    contentId = e.payload.contentId\n    commentCount = $(\"[data-id='#{contentId}']\").find(\".js-video-comment-count\")\n    commentCountString = commentCount.text()\n    if commentCountString\n      commentCount.text((parseInt commentCountString, 10) + 1)\n\n  show: ->\n    super\n    # Get videos from Hippo\n    @setEl @$(\".js-item-list\"), \"item_list\" # The container for where videos get inserted\n    @setEl @$(\".js-upload-view\"), \"upload_view\" # The upload view where users submit video\n    @setEl @$(\".js-content-view\"), \"content_view\" # The main view showing videos\n    @setEl @$(\".js-loading-view\"), \"loading_view\" # The loading view\n    @setEl @$(\".js-no-media-view\"), \"no_media_view\" # When the slide has no uploaded content\n    @setEl @$(\".js-title-input\"), \"title_input\" # The input field for the title\n    @setEl @$(\".js-progress\"), \"progress\" # The progress indicator text for the percentage\n    @setEl @$(\".js-upload-form\"), \"upload_form\" # Contains the title and submit button\n    @setEl @$(\".js-upload\"), \"upload_button\" # Activates the media picker and shows upload view\n    @setEl @$(\".js-loading-indicator\"), \"loading_indicator\" # Loading indicator\n    @setEl $(\"#slides\"), \"slides\" # Container for slides.\n    @setEl $(\".slide-footer\"), \"slide_footer\"# Used to hide page footer in upload view\n    @setEl @$(\".js-progress-indicator\"), \"upload_complete_indicator\" # Big 100% circle\n\n    @getMediaForSlide()\n    # Un-hide the upload button on platforms other than the browser\n    if platform isnt \"browser\"\n      @getEl(\"upload_button\").removeClass(\"hidden\")\n    @delegateEventsOnShow()\n\n  delegateEventsOnShow: ->\n    # Bind events here, they get destroyed otherwise\n    @listenTo Backbone.Events, Constants.COMMENT_ADDED, @handleCommentAdded\n    @listenTo Backbone.Events, Constants.GET_MEDIA_FOR_SLIDE_SUCCESS, @getMediaForSlideSuccess\n    @listenTo Backbone.Events, Constants.UPLOAD_MEDIA_FROM_SOURCE_PREVIEW, @uploadMediaFromSourcePreview\n    @listenTo Backbone.Events, Constants.UPLOAD_MEDIA_FROM_SOURCE_PROGRESS, @uploadMediaFromSourceProgress\n    @listenTo Backbone.Events, Constants.UPLOAD_MEDIA_FROM_SOURCE_SUCCESS, @uploadMediaFromSourceSuccess\n    @listenTo Backbone.Events, Constants.UPLOAD_MEDIA_FROM_SOURCE_FAILURE, @uploadMediaFromSourceFailure\n    @listenTo Backbone.Events, Constants.POST_MEDIA_FOR_SLIDE_SUCCESS, @postMediaForSlideSuccess\n    @listenTo Backbone.Events, \"social-learning:exit\", @exitSocialLearning\n\n  # onRefresh: -> @show()\n\n  onScroll: (e) ->\n    super\n\n    if platform isnt \"browser\"\n      scrollTop = e.srcElement.scrollTop\n      uploadBtn = @getEl(\"upload_button\")\n\n      if scrollTop > 40 && !uploadBtn.hasClass(\"btn-upload--hidden\")\n        uploadBtn.addClass(\"btn-upload--hidden\")\n        _.delay (-> uploadBtn.addClass(\"hidden\")), 550\n      else if scrollTop <= 40 && uploadBtn.hasClass(\"btn-upload--hidden\")\n        uploadBtn.removeClass(\"hidden\")\n        _.delay (-> uploadBtn.removeClass(\"btn-upload--hidden\")), 5\n\n  onUpload: =>\n    if window.ED_LMS_PREVIEW or window.ED_PUBLIC_PREVIEW or platform is \"browser\"\n      return\n    @upload.isUploading = true\n    @showUploadView()\n    # Present the device image picker\n    @actions.uploadMediaFromSource(\"library\", \"video\")\n\n  onSubmit: (e) =>\n    e.preventDefault()\n    @showContentView()\n    @actions.postMediaForSlide({ url: @upload.uri, title: @getEl(\"title_input\").val() })\n    false\n\n  onComment: (e) =>\n    if window.ED_LMS_PREVIEW or window.ED_PUBLIC_PREVIEW\n      return\n    $li = $(e.currentTarget).parents(\"li\")\n    $li.addClass(\"selected\")\n    contentScroll = @findOne(\".content-scroll\")\n    # transitionEnd = ->\n    #   contentScroll.scrollTo({ top: $li[0].offsetTop + 10, behavior: \"smooth\" })\n    #   $li[0].removeEventListener \"transitionend\", transitionEnd\n    # $li[0].addEventListener \"transitionend\", transitionEnd\n\n    window.setTimeout ->\n      contentScroll.scrollTo({ top: $li[0].offsetTop + 10, behavior: \"smooth\" })\n    , 600\n    id = $li.data(\"id\").toString()\n    Backbone.Events.trigger(\"open-social-learning\", { slide: @, peerAuthoring: true, contentId: id })\n    @actions.unsetAutoOpenComment()\n\n  onTitleInputFocus: =>\n    @getEl(\"upload_complete_indicator\").addClass(\"upload-progress-indicator--hidden\")\n\n  onTitleInputBlur: =>\n    @getEl(\"upload_complete_indicator\").removeClass(\"upload-progress-indicator--hidden\")\n\n  onLike: =>\n    # TODO: Implement (also on server side)\n\n  showUploadView: =>\n    @getEl(\"progress\").html i18n(\"peer-authoring.uploading\")\n    @getEl(\"upload_form\").addClass(\"hidden\")\n    @getEl(\"loading_indicator\").removeClass(\"hidden\")\n    @getEl(\"upload_button\").addClass(\"hidden\")\n    @getEl(\"content_view\").addClass(\"hidden\")\n    @getEl(\"upload_view\").removeClass(\"hidden\")\n    @getEl(\"title_input\").val(\"\")\n    @getEl(\"upload_complete_indicator\").addClass(\"upload-progress-indicator--hidden\")\n    @hideSlideFooter()\n\n  showContentView: =>\n    @getEl(\"upload_view\").addClass(\"hidden\")\n    @getEl(\"upload_form\").addClass(\"hidden\")\n    @getEl(\"upload_button\").removeClass(\"hidden\")\n    @getEl(\"content_view\").removeClass(\"hidden\")\n    @showSlideFooter()\n\n  hideSlideFooter: =>\n    @getEl(\"slide_footer\").css(\"display\", \"none\")\n    @getEl(\"slides\").css(\"border-bottom\", \"none\")\n\n  showSlideFooter: =>\n    @getEl(\"slide_footer\").css(\"display\", \"block\")\n    @getEl(\"slides\").css(\"border-bottom\", \"solid 1px currentColor\")\n\n  # When the slide is going out of user's view\n  hide: ->\n    @showSlideFooter()\n\nmodule.exports = PeerAuthoringView\n","module.exports = {\"title\":\"pie-chart\",\"display\":\"Pie Chart\",\"category\":\"Numbers\",\"features\":{\"stars\":true,\"social\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"Ask a question\"},\"pie\":{\"min\":{\"type\":\"number\",\"default\":0,\"display\":\"Min. Value\"},\"max\":{\"type\":\"number\",\"default\":100,\"display\":\"Max. Value\"},\"prefix\":{\"type\":\"html\",\"default\":\"\"},\"suffix\":{\"type\":\"html\",\"default\":\"%\"},\"increment\":{\"type\":\"number\",\"default\":1}},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"value\":{\"type\":\"number\",\"default\":5,\"display\":\"Correct Value\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (seconds)\"},\"out-of-time-prompt\":{\"type\":\"html\",\"display\":\"Out of time prompt\"}}},\"prompt\":{\"type\":\"html\",\"default\":\"Drag to set the correct value\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"pie-chart\",\"title\":\"What percentage of the market belongs to the product?\",\"pie\":{\"min\":0,\"max\":100,\"labels\":4,\"prefix\":\"\",\"suffix\":\"%\",\"increment\":1},\"answer\":{\"value\":26,\"takeaway\":\"The product holds 26% market share\",\"text\":\"With so much market share held by this product, it's obviously the only choice for consumers in the know.\\n\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (config, continueBtnText, doneText, game, hasNarration, hasPrompt, i18n, prompt, submitUp, title) {\nif ( game && game.timer && game.timer.limit > 0 && !game.timer.isDisabled)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-fill\\\"><div class=\\\"content-fit block-v-xl content-lg-fill content-sm-ver content-md-ver\\\"><div class=\\\"row content-lg-fill\\\"><div class=\\\"col-lg-6 col-sm-12 content-lg-ver block-v-md\\\"><h1 class=\\\"text-lg-right text-md-center text-sm-center fade-in\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1></div><div class=\\\"col-lg-6 col-sm-12 content-lg-ver text-center block-v-md\\\">\");\nif ( config.direction === \"rtl\")\n{\nvar circle = \"M5,0 a-5,-5 0 0,0 0,10 a-5,-5 0 0,0 0,-10 z\";\n}\nelse\n{\nvar circle = \"M5,0 a5,5 0 0,1 0,10 a5,5 0 0,1 0,-10 z\";\n}\nbuf.push(\"<div class=\\\"pie scale-up\\\"><svg viewbox=\\\"0,0,10,10\\\" class=\\\"pie-ring-svg\\\"><path\" + (jade.attr(\"d\", circle, true, false)) + \" class=\\\"pie-ring\\\"></path><path\" + (jade.attr(\"d\", circle, true, false)) + \" class=\\\"pie-ring pie-ring-input\\\"></path><path\" + (jade.attr(\"d\", circle, true, false)) + \" class=\\\"pie-ring pie-ring-answer\\\"></path></svg><div class=\\\"pie-ring-value text-xxl text-bold content-ver\\\"><div class=\\\"text-sm\\\"><div class=\\\"text-sm\\\">\" + (jade.escape((jade_interp = i18n(\"pie-chart.touch-to-begin\")) == null ? '' : jade_interp)) + \"</div></div></div></div></div></div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView = require \"views/base/game\"\nPrefix = require(\"lib/prefix\")\n{ DraggyView }  = require(\"views/components/draggy\")\n\nclass PieChartView extends GameView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-done\": \"submit\"\n\n  show: ->\n    super\n    @setEl @findOne(\".pie\"), \"pie\"\n    @setEl @findOne(\".pie-ring-input\"), \"knob-input\"\n    @setEl @findOne(\".pie-ring-value\"), \"knob-value\"\n    @setEl @findOne(\".pie-ring-answer\"), \"knob-answer\"\n\n    @resetDashOffset(@getEl(\"knob-input\"))\n    @resetDashOffset(@getEl(\"knob-answer\"))\n\n    @createDraggy()\n\n    @enterGame()\n\n  createDraggy: ->\n    @draggy = new DraggyView\n      el: @getEl(\"pie\")\n      radius: @getEl(\"pie\").offsetWidth / 2\n      isParent: true\n\n    @listenTo @draggy, \"drag\", @onDrag\n    @listenTo @draggy, \"drop\", @onDrop\n\n  onDrag: (draggy, isInitialDrag) ->\n    @currentValue = @roundValue(draggy)\n    @labelEl @getEl(\"knob-value\"), @currentValue\n\n    @transition @getEl(\"knob-input\"),\n      if isInitialDrag then \"all 300ms\" else \"none\"\n\n    @offsetStrokeDash(@getEl(\"knob-input\"), draggy.t)\n\n  onDrop: (draggy, isReset) ->\n    if not isReset\n      draggy.reset({t: @roundPos(draggy)})\n    else\n      @transition(@getEl(\"knob-input\"), \"all 300ms\")\n      @offsetStrokeDash(@getEl(\"knob-input\"), draggy.t)\n\n      if @currentValue?\n        @setState(\"touched\")\n\n  resetDashOffset: (path) ->\n    c = 10 * Math.PI\n    path.style.strokeDashoffset = c\n    path.style.strokeDasharray  = [c, c].join(\" \")\n\n    @circumference = c\n\n  offsetStrokeDash: (path, t) ->\n    if @options.config().direction is \"rtl\"\n      t = Math.PI * 2 - t\n\n    percent = -(t - Math.PI * 2) / (Math.PI * 2)\n    offset  = @circumference * percent\n\n    path.style.strokeDashoffset = \"#{offset}px\"\n\n  roundValue: (draggy) ->\n    {min, max, increment} = @options.data.pie\n    value = Big(max - min)\n      .mul(@roundPercent(draggy))\n      .div(increment)\n      .round()\n      .mul(increment)\n      .plus(min)\n\n    if @options.config().direction is \"rtl\" then Big(max - value) else value\n\n  roundPos: (draggy) ->\n    (Math.PI * 2) * @roundPercent(draggy)\n\n  roundPercent: (draggy) ->\n    {increment, min, max} = @options.data.pie\n\n    max     = Big(max).sub(min).div(increment).round().mul(increment).plus(min)\n    percent = _.limit(draggy.t / (Math.PI * 2), 0, 1)\n    steps   = Big(max).sub(min).div(increment).valueOf()\n\n    Big(steps)\n      .mul(percent)\n      .round()\n      .div(steps)\n\n  labelEl: (el, value) ->\n    {prefix, suffix} = @options.data.pie\n    el.innerHTML = \"#{prefix}#{value}#{suffix}\"\n\n  showAnswer: ->\n    @offsetStrokeDash @getEl(\"knob-answer\"), @draggy.t\n    @animateAnswerKnob(@getEl(\"knob-answer\"))\n\n  isCorrect: ->\n    @currentValue? and\n    @currentValue?.eq @options.data.answer.value\n\n  animateAnswerKnob: (el) ->\n    {answer, pie} = @options.data\n    {increment, min, max} = pie\n    max     = Big(max).sub(min).div(increment).round().mul(increment).plus(min)\n    percent = (answer.value - min) / (max - min)\n    percent = 1 - percent if @options.config().direction is \"rtl\"\n\n    el.offsetWidth\n\n    @transition(el, \"all 600ms\")\n    @offsetStrokeDash(el, percent * Math.PI * 2)\n\n  endGame: ->\n    super\n\n    @submit()\n\n  answerDetails: ->\n    questions    = @options.metadata?.questions or []\n\n    return [] unless questions.length > 0\n\n    question         = questions[0]\n    correct          = @isCorrect()\n    value            = parseInt(@currentValue)\n\n    answer           = _.find question.answers, (a) -> a.correct is correct\n    details          = question: question.question, answer: answer\n\n    details.answer.content = value\n    [ details ]\n\nmodule.exports = PieChartView\n","module.exports = {\"title\":\"quadrant-survey\",\"display\":\"Quadrant\",\"category\":\"Survey\",\"description\":\"Quadrant input for user feedback\",\"model\":{\"question\":{\"id\":{\"type\":\"uuid\",\"hidden\":true},\"content\":{\"type\":\"html\"}},\"zones\":{\"min\":4,\"max\":4,\"type\":[{\"xAxis\":{\"type\":\"html\",\"display\":\"x axis\",\"default\":\"X Axis\"},\"yAxis\":{\"type\":\"html\",\"display\":\"y axis\",\"default\":\"Y Axis\"}}]},\"words\":{\"min\":1,\"max\":8,\"type\":[{\"name\":{\"type\":\"html\"},\"short\":{\"type\":\"html\"}}]},\"prompt\":{\"type\":\"html\",\"default\":\"Drag the words into the appropriate zone\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"quadrant\",\"question\":{\"id\":\"#GENUUID#\",\"content\":\"How do you feel about each topic that was presented to you in this lesson?\"},\"zones\":[{\"xAxis\":\"Confident\",\"yAxis\":\"Applicable\"},{\"xAxis\":\"Not Confident\",\"yAxis\":\"Applicable\"},{\"xAxis\":\"Not Confident\",\"yAxis\":\"Not Applicable\"},{\"xAxis\":\"Confident\",\"yAxis\":\"Not Applicable\"}],\"words\":[{\"name\":\"Topic X\",\"short\":\"X\"},{\"name\":\"Topic Y\",\"short\":\"Y\"},{\"name\":\"Topic Z\",\"short\":\"Z\"}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, doneText, hasNarration, hasPrompt, i18n, prompt, question, submitUp, undefined, words, zones) {\nbuf.push(\"<div class=\\\"slide-content content-fill text-center\\\"><div class=\\\"scroller content-fill js-scroller\\\"><div class=\\\"slide-page js-slide-page slide-page--active slide-page--title\\\"><h2>\" + (null == (jade_interp = question.content) ? \"\" : jade_interp) + \"</h2><div class=\\\"block-v-md\\\"><div class=\\\"btn btn-muted btn-circular btn-down\\\"><span class=\\\"icon icon-chevron-down text-lg\\\"></span></div></div></div><div class=\\\"slide-page js-slide-page\\\"><div class=\\\"btn btn-muted btn-circular btn-up\\\"><span class=\\\"icon icon-chevron-up text-lg\\\"></span></div><ul class=\\\"quadrant\\\"><li\" + (jade.attr(\"data-name\", \"\" + (zones[0].yAxis) + \"-\" + (zones[0].xAxis) + \"\", true, false)) + \" class=\\\"quadrant-zone droppy\\\"><span class=\\\"zone-title zone-title--left\\\">\" + (jade.escape(null == (jade_interp = zones[0].yAxis) ? \"\" : jade_interp)) + \"</span><span class=\\\"zone-title zone-title--top\\\">\" + (jade.escape(null == (jade_interp = zones[0].xAxis) ? \"\" : jade_interp)) + \"</span></li><li\" + (jade.attr(\"data-name\", \"\" + (zones[1].xAxis) + \"-\" + (zones[1].yAxis) + \"\", true, false)) + \" class=\\\"quadrant-zone droppy\\\"><span class=\\\"zone-title zone-title--top\\\">\" + (jade.escape(null == (jade_interp = zones[1].xAxis) ? \"\" : jade_interp)) + \"</span><span class=\\\"zone-title zone-title--right\\\">\" + (jade.escape(null == (jade_interp = zones[1].yAxis) ? \"\" : jade_interp)) + \"</span></li><li\" + (jade.attr(\"data-name\", \"\" + (zones[2].yAxis) + \"-\" + (zones[2].xAxis) + \"\", true, false)) + \" class=\\\"quadrant-zone droppy\\\"><span class=\\\"zone-title zone-title--left\\\">\" + (jade.escape(null == (jade_interp = zones[2].yAxis) ? \"\" : jade_interp)) + \"</span><span class=\\\"zone-title zone-title--bottom\\\">\" + (jade.escape(null == (jade_interp = zones[2].xAxis) ? \"\" : jade_interp)) + \"</span></li><li\" + (jade.attr(\"data-name\", \"\" + (zones[3].xAxis) + \"-\" + (zones[3].yAxis) + \"\", true, false)) + \" class=\\\"quadrant-zone droppy\\\"><span class=\\\"zone-title zone-title--bottom\\\">\" + (jade.escape(null == (jade_interp = zones[3].xAxis) ? \"\" : jade_interp)) + \"</span><span class=\\\"zone-title zone-title--right\\\">\" + (jade.escape(null == (jade_interp = zones[3].yAxis) ? \"\" : jade_interp)) + \"</span></li></ul><div class=\\\"details\\\"><h2>\" + (null == (jade_interp = question.content) ? \"\" : jade_interp) + \"</h2><div class=\\\"block-v-md\\\"><div class=\\\"js-words words\\\">\");\n// iterate words \n;(function(){\n  var $$obj = words ;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var word = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-name\", word.name, true, false)) + (jade.attr(\"data-short\", word.short, true, false)) + (jade.cls(['draggy','btn','btn-sm','btn-solid','slide-up',\"delay-\" + (i) + \"\"], [null,null,null,null,null,true])) + \">\" + (null == (jade_interp = word.name) ? \"\" : jade_interp) + \"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var word = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-name\", word.name, true, false)) + (jade.attr(\"data-short\", word.short, true, false)) + (jade.cls(['draggy','btn','btn-sm','btn-solid','slide-up',\"delay-\" + (i) + \"\"], [null,null,null,null,null,true])) + \">\" + (null == (jade_interp = word.name) ? \"\" : jade_interp) + \"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div></div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"question\" in locals_for_with?locals_for_with.question:typeof question!==\"undefined\"?question:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined,\"words\" in locals_for_with?locals_for_with.words:typeof words!==\"undefined\"?words:undefined,\"zones\" in locals_for_with?locals_for_with.zones:typeof zones!==\"undefined\"?zones:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","InputView = require(\"views/input\")\n{ DraggyView } = require(\"views/components/draggy\")\n\nclass QuadrantSurveyView extends InputView\n  template: require(\"./template\")\n  isScrolledDown: false\n\n  events: ->\n    \"iostap .btn-done\": \"nextSlide\"\n    \"iostap .btn-up\": \"scrollUp\"\n    \"iostap .btn-down\": \"scrollDown\"\n\n  refresh: (params) ->\n    currentData = @options.data\n    nextData = params.data\n\n    isQuestionChanged = !_.isMatch(currentData.question, nextData.question)\n\n    isZonesChanged = -> _.some(currentData.zones, (zone, i) ->\n      !_.isMatch(zone, nextData.zones[i])\n    )\n\n    isWordsChanged = -> (currentData.words.length != nextData.words.length) ||\n      _.some(currentData.words, (word, i) ->\n        !_.isMatch(word, nextData.words[i])\n      )\n\n    super(params)\n\n    # scroll from the initial render state\n    if isQuestionChanged && this.isScrolledDown\n        @scrollDown(false)\n        @scrollUp()\n    else if isZonesChanged() || isWordsChanged()\n      if this.isScrolledDown\n        @scrollDown(false)\n      else\n        @scrollDown(true)\n\n  show: ->\n    @listenTo this, \"resize\", @onResize\n    if @draggies\n      draggy.undelegateEvents() for draggy in @draggies\n\n    @draggies =\n      for el, i in @findAll(\".draggy\")\n        draggy = new DraggyView\n          el: el\n\n        @listenTo draggy, \"drag\", @onDrag\n        @listenTo draggy, \"drop\", @onDrop\n        draggy\n\n    @droppies = @getElements(\".droppy\", null)\n\n    @el.classList.add \"ready\"\n\n  getElements: (selector, original) ->\n    if original\n      for {el, contains} in original\n        { el, contains, bounds: el.getBoundingClientRect() }\n    else\n      for el, i in @findAll(selector)\n        el: el\n        bounds: el.getBoundingClientRect()\n        contains: []\n\n  onDrag: (draggy, isInitialDrag) ->\n    @droppies   = @getElements(\".droppy\", @droppies) if isInitialDrag\n    activeIndex = draggy.closest(_.pluck(@droppies, \"bounds\"))\n    for droppy, i in @droppies\n      droppy.el.classList.toggle(\"active\", i is activeIndex)\n      droppy.isActive = i is activeIndex\n\n    if isInitialDrag\n      draggy.el.className = draggy.el.className.replace(/delay-\\d/, \"\")\n    \n    #show fullname\n    $(draggy.el).html(draggy.el.dataset.name)\n\n    @transform draggy.el,\n      x: draggy.x\n      y: draggy.y\n      transition: if isInitialDrag then \"all 300ms\" else \"none\"\n\n  onDrop: (draggy) ->\n    droppy = (droppy for droppy in @droppies when droppy.isActive)[0]\n    if droppy and droppy.el # dropped in the zone\n      # remove form other droppies contains\n      for dropzone, i in @droppies\n        dropzone.contains = dropzone.contains.filter (drag) -> drag isnt draggy\n      # add to current dropzone\n      droppy.contains.push draggy\n    else # not drop in a zone, put it back to the position\n     draggy.resetPosition()\n     @transform draggy.el,\n      x: draggy.x\n      y: draggy.y\n      transition: \"all 300ms\"\n    \n    @renderZones()\n    # use @$ in backbone view to select elements only in the current view. Without it the result is going to be any element in the whole DOM tree\n    # if you have more than one quadrant template, only using $ only might give you elements on previous slide.\n    if @$('.js-words').is(':empty')\n      isComplete = \"touched\"\n      @formatValue()\n    else\n      isComplete = \"prompt\"\n    @setState(isComplete)\n    \n\n  renderZones: ->\n    for droppy, i in @droppies\n      for draggy, j in droppy.contains\n        el = draggy.el\n        draggy.resetPosition()\n        @transform el,\n          x: 0\n          y: 0\n          transition: \"none\"\n\n        #show shortname\n        $(el).html(el.dataset.short)\n        $(el).detach().appendTo(droppy.el)\n\n  scrollUp: (transition = true) ->\n    $('#lesson-header').show()\n    $(@el).find('.js-slide-page').removeClass('slide-page--active')\n    $scroller = $(@el).find('.js-scroller')\n    @transform $scroller[0],\n      x: 0\n      y: 0\n      transition: if transition then \"all 300ms\" else \"none\"\n    $(@el).find('.btn-up').hide()\n    this.isScrolledDown = false\n\n  scrollDown: (transition = true) ->\n    $firstPage = $(@el).find('.js-slide-page').first()\n    $firstPage.next().addClass('slide-page--active')\n    $('#lesson-header').hide()\n    @onResize(transition)\n    $(@el).find('.btn-up').show()\n    this.isScrolledDown = true\n\n  onResize: (transition = false) ->\n    $scroller = $(@el).find('.js-scroller')\n    $firstPage = $(@el).find('.js-slide-page').first()\n    if $firstPage.next().hasClass('slide-page--active')\n      pageHeight = $firstPage.height() + parseInt($firstPage.css('margin-bottom'))\n      @transform $scroller[0],\n        x: 0\n        y: \"-#{pageHeight}px\"\n        transition: if transition then \"all 300ms\" else \"none\"\n\n  formatValue: ->\n    @value = ''\n    for droppy, i in @droppies\n      names = droppy.contains.map (draggy) ->\n        draggy.el.dataset.name\n      zoneName = droppy.el.dataset.name\n      @value += if i is 0 then \"#{zoneName}:#{names.join(',')}\" else \"|#{zoneName}:#{names.join(',')}\"\n    console.log @value\n\n  userInput: ->\n    quadrantResponse: @value\n    question:\n      content: @options.data.question.content\n      id: @options.data.question.id\n\n  submit: (e) ->\n    $('#lesson-header').show()\n    super\n\n\n\nmodule.exports = QuadrantSurveyView\n","module.exports = {\"title\":\"question-pool\",\"display\":\"Question Pool\",\"category\":\"Advanced\",\"visible\":false,\"description\":\"Ask questions from a pool of questions\",\"model\":{\"content\":{\"type\":\"slides\",\"display\":\"Question Slides\",\"help\":\"Add the slides that will be shown in this question pool.\",\"allows\":[\"Multiple Choice\",\"Numbers\",\"Concepts\",\"Relationships\",\"import-slides\"]},\"showAllSlidesInOrder\":{\"type\":\"boolean\",\"default\":false,\"display\":\"Display all slides\"},\"nbQuestionsToAsk\":{\"type\":\"number\",\"default\":1,\"display\":\"Number of questions to present\"},\"scoringMethod\":{\"type\":\"select\",\"display\":\"Scoring Method\",\"default\":\"Slide\",\"enum\":[\"Slide\",\"Answer\",\"Slide Negative Marking\",\"Answer Negative Marking\",\"Answer Negative Marking II\"]}},\"examples\":[{\"subtype\":\"pool\",\"content\":[{\"type\":\"number-picker\",\"templateName\":\"Number Picker\",\"data\":{\"answer\":{\"takeaway\":\"The product costs $99.00\",\"value\":99,\"incorrect\":\"Not quite...\",\"correct\":\"That's correct!\",\"text\":\"\"},\"number\":{\"suffix\":\",\",\"prefix\":\"$\",\"initial\":99,\"min\":12,\"max\":147,\"digits\":3},\"title\":\"At a cost of $99, our product is the cheapest\",\"game\":{\"timer\":{\"limit\":-1}},\"prompt\":\"Select the correct number\"},\"name\":0,\"displayIndex\":1},{\"type\":\"slider\",\"templateName\":\"Slider\",\"data\":{\"answer\":{\"value\":98,\"text\":\"A huge amount of responses were contributed to the survey.\",\"takeaway\":\"\",\"incorrect\":\"Not quite...\",\"correct\":\"That's correct!\"},\"slider\":{\"labels\":4,\"suffix\":\"%\",\"max\":100,\"min\":85,\"decimals\":0,\"increment\":1,\"prefix\":\"\"},\"title\":\"What percent of customers responded in the survey?\",\"game\":{\"timer\":{\"limit\":-1}},\"prompt\":\"Slide to the correct value\"},\"name\":1,\"displayIndex\":2},{\"type\":\"dial\",\"templateName\":\"Dial\",\"data\":{\"answer\":{\"text\":\"We're a true market leader with 10 states.\",\"takeaway\":\"There are 10 states with over 10% market share\",\"value\":10,\"incorrect\":\"Not quite...\",\"correct\":\"That's correct!\"},\"dial\":{\"suffix\":\"\",\"prefix\":\"\",\"labels\":4,\"max\":20,\"min\":0,\"decimals\":0,\"increment\":1},\"title\":\"How many states have over 10% market share?\",\"game\":{\"timer\":{\"limit\":-1}},\"prompt\":\"Drag to set the correct value\"},\"name\":2,\"displayIndex\":3}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, doneText, hasNarration, hasPrompt, i18n, prompt, submitUp, title) {\nbuf.push(\"<div class=\\\"content content-scroll block-h-xl pull-left\\\"><div class=\\\"block-v-xl\\\"><h1 class=\\\"slide-up\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView = require(\"views/slide\")\n\nclass QuestionPoolView extends SlideView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-done\": \"submit\"\n\nmodule.exports = QuestionPoolView\n","module.exports = {\"title\":\"ratio\",\"display\":\"Ratio\",\"category\":\"Numbers\",\"features\":{\"stars\":true,\"social\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"Choose the correct ratios\"},\"ratio\":{\"bars\":{\"min\":1,\"max\":4,\"type\":[{\"title\":{\"type\":\"html\"},\"value\":{\"type\":\"number\",\"default\":0}}]},\"total\":{\"type\":\"number\",\"default\":100,\"display\":\"Total Value of All Bars\"},\"prefix\":{\"type\":\"html\",\"default\":\"\"},\"suffix\":{\"type\":\"html\",\"default\":\"%\"},\"increment\":{\"type\":\"number\",\"default\":1},\"independent\":{\"type\":\"boolean\",\"default\":false,\"display\":\"Allow bars to move freely and total any number\"}},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (seconds)\"},\"out-of-time-prompt\":{\"type\":\"html\",\"display\":\"Out of time prompt\"}}},\"prompt\":{\"type\":\"html\",\"default\":\"Drag to set the correct value\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"multiple-independent\",\"title\":\"What is the price of each product?\",\"ratio\":{\"increment\":1,\"prefix\":\"$5.\",\"suffix\":\"0\",\"total\":9,\"independent\":true,\"bars\":[{\"title\":\"Product X\",\"value\":7},{\"title\":\"Product Y\",\"value\":2},{\"title\":\"Product Z\",\"value\":5}]},\"answer\":{\"text\":\"Ratio can be used to ask the same number question for several different items at once.\\n\"}},{\"subtype\":\"single\",\"title\":\"What are the reported satisfaction levels for users of Product Z?\",\"ratio\":{\"independent\":true,\"increment\":20,\"bars\":[{\"title\":\"Satisfaction levels\",\"value\":80}]},\"answer\":{\"text\":\"Ratio can be used to ask a basic number question.\"}},{\"subtype\":\"multiple-dependant\",\"title\":\"When making Product Y, what ratio of milk to water should you use?\",\"ratio\":{\"suffix\":\"ml\",\"total\":30,\"increment\":10,\"bars\":[{\"title\":\"Milk\",\"value\":20},{\"title\":\"Water\",\"value\":10}]},\"answer\":{\"text\":\"You can use Ratio to ask questions about the ratio of one value in relation to another.\\n\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, doneText, game, hasNarration, hasPrompt, i18n, prompt, ratio, submitUp, title, undefined) {\nif ( game && game.timer && game.timer.limit > 0 && !game.timer.isDisabled)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-fill\\\"><div class=\\\"content-fit block-v-xl content-lg-fill content-md-ver content-sm-ver\\\"><div class=\\\"row content-md-fill\\\"><div class=\\\"col-lg-6 col-sm-12 content-lg-ver block-v-sm\\\"><h1 class=\\\"text-lg-right text-md-center text-sm-center fade-in\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1></div><div class=\\\"col-lg-6 col-sm-12 content-lg-ver\\\">\");\n// iterate ratio.bars\n;(function(){\n  var $$obj = ratio.bars;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var bar = $$obj[i];\n\nbuf.push(\"<div\" + (jade.cls(['text-lg','block-v-sm','slide-up',\"delay-\" + (i + 1) + \"\"], [null,null,null,true])) + \"><div class=\\\"ratio-title pull-left block-v-sm\\\">\" + (null == (jade_interp = bar.title) ? \"\" : jade_interp) + \"</div><div\" + (jade.attr(\"data-answer-id\", i, true, false)) + \" class=\\\"ratio\\\"><div class=\\\"ratio-bar-container block-dk\\\"><div class=\\\"ratio-bar\\\"></div></div><div class=\\\"ratio-value\\\"><div class=\\\"ratio-value-amount pull-right\\\">&hellip;</div></div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var bar = $$obj[i];\n\nbuf.push(\"<div\" + (jade.cls(['text-lg','block-v-sm','slide-up',\"delay-\" + (i + 1) + \"\"], [null,null,null,true])) + \"><div class=\\\"ratio-title pull-left block-v-sm\\\">\" + (null == (jade_interp = bar.title) ? \"\" : jade_interp) + \"</div><div\" + (jade.attr(\"data-answer-id\", i, true, false)) + \" class=\\\"ratio\\\"><div class=\\\"ratio-bar-container block-dk\\\"><div class=\\\"ratio-bar\\\"></div></div><div class=\\\"ratio-value\\\"><div class=\\\"ratio-value-amount pull-right\\\">&hellip;</div></div></div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"ratio\" in locals_for_with?locals_for_with.ratio:typeof ratio!==\"undefined\"?ratio:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView = require \"views/base/game\"\n{ DraggyView }  = require(\"views/components/draggy\")\n\nclass RatioView extends GameView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-done\": \"endGame\"\n\n  # If your view has post-rendering logic that requires elements to be visible\n  # in order to instantiate them properly, this is the place to do it.\n  show: ->\n    super\n\n    @listenTo this, \"resize\", @onResize\n    @setEl @findAll(\".ratio\"), \"bars\"\n    @createDraggies()\n\n    @enterGame()\n\n  onResize: ->\n    return unless @draggies?.length > 0\n\n    window.clearTimeout @timeout\n    @timeout = window.setTimeout (=>\n      if @currentState.state is \"prompt\"\n        totalWidth = @getEl(\"bars\").item(0).offsetWidth\n        initialX   =\n          if @options.data.ratio.independent\n            totalWidth / 2\n          else\n            totalWidth / @getEl(\"bars\").length\n\n      for draggy, i in @draggies\n        draggy.getOffset()\n        draggy.options.maxX = draggy.offset.totalWidth\n        draggy.reset(x: initialX) if initialX\n    ), 600\n\n  # Ensure \"total\" and \"increment\" are rational numbers.\n  serialize: ->\n    data = super\n\n    { total, increment } = data.ratio\n\n    data.ratio.total     = parseFloat(total, 10) or 100\n    data.ratio.increment = parseFloat(increment, 10) or 1\n    # (ED-4701) fix ratio template to not fail when removing a bar\n    data.ratio.bars = _.filter data.ratio.bars, (b) -> b?.title and b?.value\n    data.ratio.independent = true if data.ratio.bars.length is 1\n\n    answers = data.metadata.questions.map (q) ->\n      q.answers.map (a) -> content: a.content, correct: a.correct, id: a.id\n\n    data.answers = answers\n    data\n\n  # Create a \"draggies\" array of each \"draggy\" ratio bar. Save a reference to\n  # the bar and value element of each draggy in it's options, for quick access\n  # later on.\n  createDraggies: ->\n    totalWidth = @getEl(\"bars\").item(0).offsetWidth or @serialize().width\n    initialX   =\n      if @options.data.ratio.independent\n        totalWidth / 2\n      else\n        totalWidth / @getEl(\"bars\").length\n\n    @draggies =\n      for el in @getEl(\"bars\")\n        draggy = new DraggyView\n          el: el\n          minX: 0\n          maxX: totalWidth\n          isParent: true\n          barElement: el.querySelector(\".ratio-bar\")\n          valElement: el.querySelector(\".ratio-value-amount\")\n\n        @listenTo draggy, \"drag\", @onDrag\n        @listenTo draggy, \"drop\", @onDrop\n\n        draggy.reset x: initialX, y: 0\n        draggy\n\n    @snapBars()\n\n  onDrag: (draggy, isInitial) ->\n    @currentDraggy = draggy\n    @setState(\"touched\")\n    @renderDraggy(draggy, isInitial)\n\n    unless @options.data.ratio.independent\n      @updateDraggies(draggy, isInitial)\n\n  onDrop: (draggy, isReset) ->\n    if isReset\n      @renderDraggy(draggy, true)\n    else\n      @snapBars()\n\n  # To ensure that \"zeroed-out\" draggies can still contribute to the overall\n  # distribution, we ensure that it is above zero.\n  getPercent: (draggy = @draggies[0]) ->\n    percent =\n      Math.max(Math.min((draggy.x / draggy.offset.width) or 0, 1), 0.0001)\n    percent = 1 - percent if @options.config().direction is \"rtl\"\n    percent\n\n  getLabel: (draggy) ->\n    { prefix, suffix } = @options.data.ratio\n\n    \"#{prefix}#{@getValue(draggy)}#{suffix}\"\n\n  getValue: (draggy) ->\n    { total, increment } = @options.data.ratio\n\n    percent = @getPercent(draggy)\n    Math.round(total * percent / increment) * increment\n\n  # Transform the draggy bar and display the current value in the draggy label.\n  renderDraggy: (draggy, transition) ->\n    @transform draggy.options.barElement,\n      scale: \"#{@getPercent(draggy)}, 1\"\n      transition: if transition then \"all 300ms\" else \"\"\n\n    draggy.options.valElement.innerHTML = @getLabel(draggy)\n\n  # For each draggy except the current one, we need to redistribute the\n  # remaining percentage. To do this, we:\n  # 1. Calculate the remainder to distribute\n  # 2. Calculate the total value of other draggies\n  # 3. For each draggy, distribute the remainder based on it's previous\n  #    proportion of the current total.\n  # 4. Reset the draggy based on this new value.\n  updateDraggies: (draggy, transition) ->\n    remainder     = 1 - @getPercent(draggy)\n    otherDraggies = _.filter(@draggies, (d) -> d isnt draggy)\n    currentTotal  = _.reduce otherDraggies, ((m, d) => m + @getPercent(d)), 0\n\n    for otherDraggy, i in otherDraggies\n      current = @getPercent(otherDraggy)\n      percent = current / currentTotal * remainder\n      percent  = 1 - percent if @options.config().direction is \"rtl\"\n      x       = percent * otherDraggy.offset.width\n\n      otherDraggy.reset { x }, silent: true\n      @renderDraggy(otherDraggy, transition)\n\n  # When we finish dragging, we need to ensure the subtotal value from each\n  # bar matches the expected total. To acheive this, we simply snap each\n  # bar into place and add/remove any remaining excess from the last draggy.\n  snapBars: ->\n    subtotal  = 0\n    { total } = @options.data.ratio\n\n    for draggy, i in @draggies\n      value = @getValue(draggy)\n      subtotal += value\n\n      if i is @draggies.length - 1 and not @options.data.ratio.independent\n        value -= (subtotal - total)\n\n      percent = value / total\n      percent = 1 - percent if @options.config().direction is \"rtl\"\n      x = Math.floor(percent * draggy.offset.width)\n\n      draggy.reset { x }\n\n  # Check that the user is correct by asserting for every bar in the data\n  # that the input value matches.\n  isCorrect: ->\n    _.chain(@options.data.ratio.bars)\n      .filter((b, i) => b.value isnt @getValue(@draggies[i]))\n      .isEmpty()\n      .value()\n\n  showAnswer: ->\n    { bars, total } = @options.data.ratio\n\n    for { value }, i in bars\n      draggy    = @draggies[i]\n      isCorrect = @getValue(draggy) is value\n      percent   = value / total\n      percent = 1 - percent if @options.config().direction is \"rtl\"\n\n      draggy.el.parentNode.classList.toggle \"correct\", isCorrect\n      draggy.el.parentNode.classList.toggle \"incorrect\", not isCorrect\n      draggy.reset x: draggy.offset.width * percent\n\n  answerDetails: ->\n    questions    = @options.metadata?.questions or []\n    return [] unless questions.length > 0\n    details = []\n    for q in questions\n      selectedRatioElement = _.find @$(\".ratio\"), (r) ->\n        @$(r).data(\"answer-id\") is questions.indexOf(q)\n      selectedDraggy = _.find @draggies, (d) -> d.el is selectedRatioElement\n      value = @getValue selectedDraggy\n\n      correctAnswer = _.find q.answers, (a) -> a.correct\n      correct = (correctAnswer.content is value)\n      answer = _.find q.answers, (a) -> a.correct is correct\n\n      questionDetails = question: q.question, answer: answer\n      questionDetails.answer.content = value\n      details.push questionDetails\n\n    details\n\n  endGame: ->\n    super\n\n    @submit()\n\nmodule.exports = RatioView\n","module.exports = {\"title\":\"reorder\",\"display\":\"Reorder\",\"category\":\"Relationships\",\"features\":{\"stars\":true,\"social\":true},\"model\":{\"title\":{\"default\":\"Rank these items\",\"types\":[\"text\",\"image\",\"video\",\"audio\"]},\"list\":{\"display\":\"List items\",\"type\":[{\"type\":\"html\"}],\"min\":2,\"max\":6},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (seconds)\"},\"out-of-time-prompt\":{\"type\":\"html\",\"display\":\"Out of time prompt\"}}},\"prompt\":{\"type\":\"html\",\"default\":\"Put the items in the correct order\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"cities\",\"title\":\"Rank these cities by population\",\"titleType\":\"text\",\"list\":[\"Tokyo\",\"New York\",\"Sydney\",\"Paris\"],\"answer\":{\"text\":\"Tokyo has almost nine million inhabitants in the city alone, and 13 million in the Greater Tokyo region. In fact, the number of residents in the Japanese capital is greater then the combined population of the next three largest cities Yokohama, Osaka and Nagoya.\\n\"}},{\"subtype\":\"brands\",\"title\":\"Order these brands by market share\",\"titleType\":\"text\",\"list\":[\"Nike\",\"Adidas\",\"Reebok\"],\"answer\":{\"text\":\"According to several sources, Nike has more than 30% market share.\\n\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (config, continueBtnText, doneText, game, hasNarration, hasPrompt, i18n, isLong, list, playinline, prompt, shuffledList, submitUp, undefined) {\njade_mixins[\"video-stream\"] = jade_interp = function(videoUrl, playsinline, controls, klass, poster){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nplayinline = playinline || true\ncontrols = controls || true\nklass = klass || 'video vjs-fluid'\nvar cloudinaryVideoFolderUrl = config.CLOUDINARY_CDN_URL+config.CLOUDINARY_VIDEO_FOLDER\nvar streamUrl = ''\nif ( videoUrl && videoUrl.indexOf(cloudinaryVideoFolderUrl) > -1)\n{\nstreamUrl = videoUrl.replace(cloudinaryVideoFolderUrl, cloudinaryVideoFolderUrl+'sp_full_hd/')\nstreamUrl = streamUrl.replace('.mp4', '.m3u8')\n}\nbuf.push(\"<video\" + (jade.attr(\"webkit-playsinline\", playsinline, true, false)) + (jade.attr(\"controls\", controls, true, false)) + \" preload=\\\"auto\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + (jade.attr(\"poster\", poster, true, false)) + (jade.cls(['video-js',klass], [null,true])) + \"><source\" + (jade.attr(\"src\", videoUrl, true, false)) + \"/>\");\nif ( streamUrl)\n{\nbuf.push(\"<source\" + (jade.attr(\"src\", streamUrl, true, false)) + \"/>\");\n}\nbuf.push(\"</video>\");\n};\njade_mixins[\"image\"] = jade_interp = function(imageUrl, klass){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nbuf.push(\"<img\" + (jade.attr(\"src\", imageUrl, true, false)) + (jade.cls([klass], [true])) + \"/>\");\n};\njade_mixins[\"multi-content\"] = jade_interp = function(prop, obj){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nobj = obj || locals;\nswitch (obj[prop + \"Type\"]){\ncase \"image\":\nbuf.push(\"<div\" + (jade.attr(\"data-content\", obj.image, true, false)) + \" class=\\\"multi-content-wrapper multi-content-wrapper-image block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\">\");\njade_mixins[\"image\"](obj[prop], 'multi-content multi-content-image');\nbuf.push(\"</div></div>\");\n  break;\ncase \"video\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-video block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\">\");\njade_mixins[\"video-stream\"](obj[prop], true, true,\"multi-content multi-content-video block-dk\");\nbuf.push(\"</div></div>\");\n  break;\ncase \"audio\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-audio block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><audio\" + (jade.attr(\"src\", obj[prop], true, false)) + \" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"multi-content multi-content-audio block-dk\\\"></audio></div></div>\");\n  break;\ncase \"iframe\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-iframe block-md block-lt\\\"><div class=\\\"block-sm multi-content-iframe\\\">\");\nvar iframe = obj[prop].match(/<iframe[^<]*<\\/iframe>/)\nif ( iframe)\n{\nbuf.push(null == (jade_interp = iframe[0].replace(/ (width|height)=[\"'\\d\\w]+/g, \"\")) ? \"\" : jade_interp);\n}\nbuf.push(\"</div></div>\");\n  break;\ndefault:\nbuf.push(\"<span class=\\\"multi-content multi-content-text\\\">\" + (null == (jade_interp = obj[prop]) ? \"\" : jade_interp) + \"</span>\");\n  break;\n}\n};\nif ( game && game.timer && game.timer.limit > 0 && !game.timer.isDisabled)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-fill\\\"><div class=\\\"content-fit content-fill block-v-lg\\\"><div class=\\\"row content-lg-fill content-sm-ver content-md-ver\\\"><div class=\\\"col-lg-6 col-sm-12 content-lg-ver block-v-md\\\"><h1 class=\\\"text-lg-right text-md-center text-sm-center fade-in\\\">\");\njade_mixins[\"multi-content\"](\"title\");\nbuf.push(\"</h1></div><div class=\\\"col-lg-6 col-sm-12 text-center content-lg-ver block-v-md\\\"><div class=\\\"draggy-container fade-in block-md block-dk\\\"><div class=\\\"draggies\\\">\");\n// iterate shuffledList\n;(function(){\n  var $$obj = shuffledList;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var item = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"data-index\", list.indexOf(item), true, false)) + (jade.attr(\"data-content\", item, true, false)) + \" class=\\\"draggy block-sm\\\"><div\" + (jade.cls(['btn','btn-solid','btn-block',((isLong ? \"btn-long\" : \"\") +\n                         (list.length > 4 ? \" btn-sm\" : \"\"))], [null,null,null,true])) + \">\" + (null == (jade_interp = item) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var item = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attr(\"data-index\", list.indexOf(item), true, false)) + (jade.attr(\"data-content\", item, true, false)) + \" class=\\\"draggy block-sm\\\"><div\" + (jade.cls(['btn','btn-solid','btn-block',((isLong ? \"btn-long\" : \"\") +\n                         (list.length > 4 ? \" btn-sm\" : \"\"))], [null,null,null,true])) + \">\" + (null == (jade_interp = item) ? \"\" : jade_interp) + \"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div></div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"isLong\" in locals_for_with?locals_for_with.isLong:typeof isLong!==\"undefined\"?isLong:undefined,\"list\" in locals_for_with?locals_for_with.list:typeof list!==\"undefined\"?list:undefined,\"playinline\" in locals_for_with?locals_for_with.playinline:typeof playinline!==\"undefined\"?playinline:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"shuffledList\" in locals_for_with?locals_for_with.shuffledList:typeof shuffledList!==\"undefined\"?shuffledList:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView = require \"views/base/game\"\nPrefix = require(\"lib/prefix\")\n{ DraggyView }  = require(\"views/components/draggy\")\n\nclass ReorderView extends GameView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-done\": \"endGame\"\n\n  serialize: ->\n    data = super\n\n    longest = _.chain(data.list).sortBy(\"length\").last().value()\n\n    data.isLong = longest?.length > Math.min(data.width / 16, 30)\n    data.shuffledList = _.shuffle(data.list or [])\n\n    data\n\n  show: ->\n    super\n    @listenTo this, \"resize\", @onResize\n\n    if @draggies\n      for draggy in @draggies\n        draggy.undelegateEvents()\n\n      @draggies = null\n\n    draggies = @findAll(\".draggy\")\n    @setEl @findOne(\".draggy-container\"), \"container\"\n\n    @draggies =\n      for el, i in draggies\n        el.style.position = \"absolute\"\n        draggy = new DraggyView\n          el: el\n          lock: \"x\"\n          minY: 0\n\n        @listenTo draggy, \"drag\", @onDrag\n        @listenTo draggy, \"drop\", @onDrop\n\n        draggy\n\n    @onResize()\n    @resetDraggies(@draggies)\n\n    @enterGame()\n\n  hide: ->\n    @el.classList.remove \"ready\"\n    super\n\n  onDrag: (draggy, isInitialDrag) ->\n    isActive = false\n    rank = @getRanking(draggy)\n\n    @resetDraggies(@draggiesInOrder(@draggies), draggy)\n\n    @transform draggy.el,\n      y: draggy.y\n      scale: 1.05\n      transition: if isInitialDrag then \"all 300ms\" else \"none\"\n\n  onDrop: (draggy, isReset) ->\n    {left, top, width, height} = draggy.offset\n\n    rank = @getRanking(draggy)\n\n    if isReset\n      @transform draggy.el,\n        y: draggy.y\n        transition: \"all 300ms\"\n    else\n      @resetDraggies(@draggiesInOrder(@draggies))\n      @setState(\"touched\")\n\n  draggiesInOrder: (draggies) ->\n    if draggies and height = draggies[0]?.el.parentNode.offsetHeight\n\n      _.clone(draggies).sort (a, b) ->\n        (a.y + a.y / height * a.offset.height) -\n        (b.y + b.y / height * b.offset.height)\n\n  getRanking: (draggy) ->\n    len = @options.data.list.length\n    num = Math.floor(draggy.y / draggy.options.maxY * len)\n\n    _.limit(num, 0, len - 1)\n\n  getDraggyFromIndex: (index) ->\n    (draggy for draggy in @draggies when draggy.el.dataset.index is index)[0]\n\n  getElements: (selector) ->\n    for el in @findAll(selector)\n      el: el\n      bounds: el.getBoundingClientRect()\n\n  resetDraggy: (draggy) ->\n    draggy.reset()\n    draggy.el.classList.remove(\"is-positioned\")\n\n  resetDraggies: (draggies, draggy) ->\n    y = 0\n\n    for other, i in draggies or []\n      other.reset({ y }) unless other is draggy\n      y += other.offset.height\n\n  isCorrect: ->\n    _.chain(@draggiesInOrder(@draggies))\n      .filter((d, i) -> +d.el.dataset.index is i)\n      .each((d) -> d.el.classList.add(\"correct\"))\n      .size()\n      .value() is @options.data.list.length\n\n  showAnswer: ->\n    @resetDraggies(_.sortBy @draggies, (d) -> +d.el.dataset.index)\n\n  onResize: ->\n    return unless @draggies?.length > 0\n\n    reducer = (m, { el }) -> m + el.offsetHeight\n\n    height = _.reduce @draggies, reducer, 0\n    fontSize = parseInt window.getComputedStyle(@el).fontSize\n    @getEl(\"container\").firstChild.style.height = \"#{height / fontSize}em\"\n\n    @fitText =>\n      height = _.reduce @draggies, reducer, 0\n      @getEl(\"container\").firstChild.style.height = \"#{height}px\"\n\n      for draggy, i in @draggies\n        draggy.options.maxY = height - draggy.el.offsetHeight\n        draggy.getOffset()\n\n      @resetDraggies(@draggiesInOrder(@draggies))\n      @el.classList.add \"ready\"\n\n  answerDetails: ->\n    questions    = @options.metadata?.questions or []\n    return [] unless questions.length > 0\n\n    question = questions[0]\n    isCorrect = @isCorrect()\n    answer = _.find question.answers, (a) -> a.correct is isCorrect\n    answerContent =\n      _.map @draggiesInOrder(@draggies), (d) -> d.$el.data(\"content\")\n    answer.content = answerContent.join(\", \")\n    details = question: questions[0].question, answer: answer\n\n    [ details ]\n\n  endGame: ->\n    super\n\n    @submit()\n\n\nmodule.exports = ReorderView\n","module.exports = {\"title\":\"reveal\",\"display\":\"Reveal\",\"category\":\"Content\",\"description\":\"Flip cards to reveal more details\",\"features\":{\"narration\":true,\"social\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"Explore our range\"},\"content\":{\"min\":1,\"max\":4,\"type\":[{\"title\":{\"type\":\"html\"},\"description\":{\"type\":\"html\"}}]},\"focus\":{\"type\":\"boolean\",\"default\":false,\"help\":\"Only reveal one piece of content at a time.\\n\"},\"prompt\":{\"type\":\"html\",\"default\":\"Select each item to find out more\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"reveal\",\"title\":\"Learn more about our product range\",\"focus\":true,\"content\":[{\"title\":\"Product X\",\"description\":\"Our brilliant new sleek design allows the user to have unparalleled comfort when using the device.\\n\"},{\"title\":\"Product Y\",\"description\":\"Crystal clear display performs better than any of our competitors.\\n\"},{\"title\":\"Product Z\",\"description\":\"The newest feature offers a new level of feedback for the user.\\n\"}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (Math, content, continueBtnText, doneText, hasNarration, hasPrompt, i18n, isInternetExplorer, prompt, submitUp, title, undefined, written) {\nbuf.push(\"<div class=\\\"content-fit content-md-fill content-sm-ver\\\"><div class=\\\"content-md-ver text-center\\\"><h1 class=\\\"fade-in delay-3\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"content-pieces row text-center\\\">\");\n// iterate content\n;(function(){\n  var $$obj = content;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var piece = $$obj[i];\n\nvar col = Math.floor(12 / content.length);\nif ( content.length === 1)\n{\nvar klass = \"col-md-8\";\n}\nelse\n{\nvar klass = \"col-md-\" + col * 2 + \" col-lg-\" + col\n}\nklass += \" delay-\" + (i + 3);\nbuf.push(\"<div\" + (jade.cls(['content-piece','slide-up','col-sm-12','block-v-sm',klass], [null,null,null,null,true])) + \"><div\" + (jade.attr(\"data-index\", i, true, false)) + \" class=\\\"btn-reveal\\\"><div\" + (jade.cls(['btn-reveal-title','btn','btn-solid',isInternetExplorer ? \"ie\" : \"flippable\"], [null,null,null,true])) + \"><h2 class=\\\"tight content-ver break-word\\\">\" + (null == (jade_interp = written.hyphenate(piece.title)) ? \"\" : jade_interp) + \"</h2></div><div\" + (jade.cls(['btn-reveal-desc','block-v-md','block-h-lg','btn','btn-solid',isInternetExplorer ? \"ie\" : \"flippable\"], [null,null,null,null,null,true])) + \">\" + (null == (jade_interp = written.hyphenate(piece.description) || \"&nbsp;\") ? \"\" : jade_interp) + \"</div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var piece = $$obj[i];\n\nvar col = Math.floor(12 / content.length);\nif ( content.length === 1)\n{\nvar klass = \"col-md-8\";\n}\nelse\n{\nvar klass = \"col-md-\" + col * 2 + \" col-lg-\" + col\n}\nklass += \" delay-\" + (i + 3);\nbuf.push(\"<div\" + (jade.cls(['content-piece','slide-up','col-sm-12','block-v-sm',klass], [null,null,null,null,true])) + \"><div\" + (jade.attr(\"data-index\", i, true, false)) + \" class=\\\"btn-reveal\\\"><div\" + (jade.cls(['btn-reveal-title','btn','btn-solid',isInternetExplorer ? \"ie\" : \"flippable\"], [null,null,null,true])) + \"><h2 class=\\\"tight content-ver break-word\\\">\" + (null == (jade_interp = written.hyphenate(piece.title)) ? \"\" : jade_interp) + \"</h2></div><div\" + (jade.cls(['btn-reveal-desc','block-v-md','block-h-lg','btn','btn-solid',isInternetExplorer ? \"ie\" : \"flippable\"], [null,null,null,null,null,true])) + \">\" + (null == (jade_interp = written.hyphenate(piece.description) || \"&nbsp;\") ? \"\" : jade_interp) + \"</div></div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"Math\" in locals_for_with?locals_for_with.Math:typeof Math!==\"undefined\"?Math:undefined,\"content\" in locals_for_with?locals_for_with.content:typeof content!==\"undefined\"?content:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"isInternetExplorer\" in locals_for_with?locals_for_with.isInternetExplorer:typeof isInternetExplorer!==\"undefined\"?isInternetExplorer:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined,\"written\" in locals_for_with?locals_for_with.written:typeof written!==\"undefined\"?written:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView = require(\"views/slide\")\n\nclass RevealView extends SlideView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-reveal\": \"toggleContent\"\n    \"iostap .btn-done\": \"submit\"\n\n  serialize: ->\n    data = super\n    data.hasPrompt = true\n    data.isInternetExplorer = navigator.userAgent.indexOf('MSIE') isnt -1 or navigator.appVersion.indexOf('Trident/') > -1\n    return data\n\n  show: (ms = 300) ->\n    @listenTo this, \"resize\", () ->\n      @resetButtons\n    @setEl(@findAll(\".btn-reveal\"), \"buttons\")\n    @selectedIndexes = []\n\n  refresh: (params) ->\n    for { description }, i in params.data.content\n      changed = i if @options.data.content[i]?.description isnt description\n\n    super\n\n    @selectedIndexes = []\n    @resetButtons(changed)\n\n  resetButtons: (activeIndex) ->\n    @setEl(@findAll(\".btn-reveal\"), \"buttons\")\n\n    if activeIndex?\n      el = @getEl(\"buttons\").item(activeIndex)\n      @transition el, \"none\", true\n      el.classList.add \"active\"\n\n    for el, i in @getEl(\"buttons\")\n      el.style.height = \"\"\n      el.offsetHeight\n      @transition el, \"\"\n\n  resizeButtons: ->\n    height = _.reduce @getEl(\"buttons\"), (m, el) ->\n      Math.max(el.offsetHeight, el.firstChild.firstChild.offsetHeight, m)\n    , 0\n\n    el.style.height = \"#{height}px\" for el in @getEl(\"buttons\")\n\n  toggleContent: (e) ->\n    el = e.currentTarget\n    index = el.dataset.index\n\n    @selectedIndexes = _.uniq(@selectedIndexes.concat(index))\n\n    if @selectedIndexes.length is @serialize().content.length\n      @setState(\"touched\")\n\n    if @options.data.focus\n      for other in @getEl(\"buttons\") when other isnt el\n        other.classList.remove(\"active\")\n\n    el.classList.toggle(\"active\")\n\nmodule.exports = RevealView\n","module.exports = {\"title\":\"scorm\",\"display\":\"SCORM\",\"category\":\"Advanced\",\"description\":\"Play a SCORM Package\",\"hideFrom\":[\"freemium\",\"sponsor\"],\"features\":{\"stars\":true},\"model\":{\"package\":{\"type\":\"scorm\",\"default\":\"scorm/scorm.zip\",\"display\":\"SCORM File\",\"help\":\"Upload your SCORM package.\"},\"isRequiredForLessonCompletion\":{\"type\":\"boolean\",\"display\":\"Required Content\",\"default\":true,\"help\":\"The learner must complete the SCORM content before the lesson is marked as complete.\\n\"},\"background\":{\"type\":\"string\",\"default\":\"\",\"display\":\"Background Color\",\"help\":\"This color (eg. \\\"orange\\\", \\\"#f90\\\", \\\"rgb(255,160,0)\\\") will be used for the background of the entire screen in lightbox mode.\\n\"},\"button\":{\"text\":{\"type\":\"text\",\"default\":\"Continue\",\"display\":\"Done text\"},\"position\":{\"type\":\"select\",\"enum\":[\"Below\",\"Overlay Bottom\",\"Overlay Top\",\"None\"],\"default\":\"Below\",\"help\":\"Choose the best position based on your content. If you choose not to display the button, your SCORM content must allow the learner to exit, or they will not be able to continue.\\n\"}}}}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (allowedSandboxedFeatures, button, i18n) {\nbuf.push(\"<div class=\\\"full-screen content-fill hide-overflow\\\"><iframe type=\\\"text/html\\\" frameborder=\\\"0\\\"\" + (jade.attr(\"sandbox\", allowedSandboxedFeatures, true, false)) + \" class=\\\"scorm-object\\\"></iframe><div class=\\\"exit-btn btn\\\">\" + (jade.escape(null == (jade_interp = (button && button.text) || i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");}.call(this,\"allowedSandboxedFeatures\" in locals_for_with?locals_for_with.allowedSandboxedFeatures:typeof allowedSandboxedFeatures!==\"undefined\"?allowedSandboxedFeatures:undefined,\"button\" in locals_for_with?locals_for_with.button:typeof button!==\"undefined\"?button:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView           = require(\"views/slide\")\nScormAttempt        = require \"models/scormAttempt\"\nDevice              = require \"lib/device\"\n{ Session, Lesson } = Application.actions()\n\nclass SCORMView extends SlideView\n  template: require(\"./template\")\n  events: ->\n    \"iostap .exit-btn\": \"stopSCORM\"\n\n  initialize: ->\n    super\n\n    Session.get (err, { firstName, lastName, email, name, id }) =>\n      studentName = ((firstName || '') + ' ' + (lastName || '')).trim() || name || email || ''\n      @scormAttempt = new ScormAttempt(\"lessonId\", false, studentName, id, @options.previousAttempt)\n      \n    @isLastSlide  = @options.isLastSlide\n\n  processIframeMessage: (event) ->\n    if event?.data?.match?(\"window.SCORMED\")\n      eval(event.data)\n\n  beforeShow: ->\n    position = @options.data.button?.position?.toLowerCase() or \"none\"\n    @setState written.hyphenCase(position), \"exit-btn\"\n\n    @trigger \"ui\", { lightbox: @options.data.background or true, fullscreen: true }\n\n    @onResize()\n\n  beforeHide: ->\n    @trigger \"ui\", { lightbox: false, fullscreen: false }\n\n  show: ->\n    @stopped = false\n    position = @options.data.button?.position?.toLowerCase() or \"none\"\n    @setState written.hyphenCase(position), \"exit-btn\"\n\n    @listenTo this, \"resize\", @onResize\n\n    if !@options.notInteractable\n      @initSCORM()\n      \n    window.addEventListener(\"message\", @processIframeMessage , false)\n\n  onRefresh: ->\n    @beforeShow()\n    super\n\n  onResize: ->\n    if @currentState[\"exit-btn\"] is \"below\"\n      button = @findOne(\".exit-btn\")\n      iframe = @findOne(\".scorm-object\")\n\n      iframe.style.bottom = \"#{button.offsetHeight}px\"\n      iframe.style.height =\n        \"#{iframe.parentNode.offsetHeight - button.offsetHeight}px\"\n\n  stopSCORM: ->\n    return if @stopped\n    @stopped = true\n    window.API?.LMSFinish()\n    window.removeEventListener(\"message\", @processIframeMessage , false)\n    attemptData = @scormAttempt.attemptData()\n    raw = attemptData?[\"cmi.core.score.raw\"]?.value\n    tot = attemptData?[\"cmi.core.score.max\"]?.value\n\n    score = if raw and tot\n      # use package score\n      parseInt(raw) * 1.0 / parseInt(tot)\n    else\n      # use 100 for success and 0 for not success\n      if attemptData?.success then 1 else 0\n\n    Session.get (err, { attempt }) =>\n      interaction =\n        id:              @options.id\n        name:            @options.name\n        type:            @options.type\n        slideData:       @options.data\n        scormData:       attemptData\n        attempt:         attempt\n        correct:         attemptData?.success\n        answerDetails:   []\n        metadata:        @options.metadata\n        isScormAttempt:  true\n        score:           score\n        isCompleted:     attemptData?.success\n        isRequiredForLessonCompletion: @options.data.isRequiredForLessonCompletion\n        configuration:   @options.data?.challenge_configuration\n\n      @lesson.processInteraction(interaction)\n\n      if window.ED_LMS_PREVIEW or window.ED_PUBLIC_PREVIEW\n        return\n      else if @isLastSlide\n        Lesson.complete()\n        @exit()\n      else\n        @next()\n\n  serialize: ->\n    data = super\n    sandboxedFeatures = [ \"allow-scripts\", \"allow-same-origin\", \"allow-modals\", \"allow-popups\", \"allow-popups-to-escape-sandbox\", \"allow-forms\", \"allow-downloads\" ]\n\n    data.allowedSandboxedFeatures = sandboxedFeatures.join(\" \")\n    data\n\n  initSCORMResource: ->\n    data     = @serialize()\n    resource = data.package\n    if !resource or resource is \"scorm/scorm.zip\"\n      return\n\n    @findOne(\".scorm-object\").src = resource\n\n    window.SCORMED = LMSFinish: (data) =>\n      @scormAttempt.processScormPlayerData(data)\n      @stopSCORM()\n\n  initSCORM: ->\n    scormData  = @scormAttempt.initialData()\n    callbacks  = success: (success) => @initSCORMResource() if success\n    # Required to conform to the SCORM protocol.\n    # It is the way the SCORM package on the iframe will actually find\n    # a SCORM API to communicate with\n    scormAPI = new ScormAPI(\"lesson\", \"LID\", scormData, callbacks)\n    window.API = scormAPI\n    window.API_1484_11 = scormAPI\n\nmodule.exports = SCORMView\n","module.exports = {\"title\":\"scratch-to-reveal\",\"display\":\"Scratch to Reveal\",\"category\":\"Content\",\"features\":{\"narration\":true,\"social\":true},\"model\":{\"title\":{\"type\":\"html\"},\"before\":{\"content\":{\"type\":\"image\"},\"label\":{\"type\":\"text\"}},\"after\":{\"content\":{\"types\":[\"text\",\"image\"]},\"label\":{\"type\":\"text\"}},\"canvasBackground\":{\"display\":\"Background Color\",\"type\":\"string\",\"help\":\"This color (eg. \\\"orange\\\", \\\"#f90\\\", \\\"rgb(255,160,0)\\\") will be used to fill in the transparent area of the front image\\n\"},\"prompt\":{\"type\":\"html\",\"default\":\"Scratch to reveal the content\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"scratch-to-reveal\",\"title\":\"Product X vs. Product Y\",\"before\":{\"content\":\"img/examples/product-phone.png\",\"contentType\":\"image\",\"label\":\"**Product X**\\n\\nBrilliant. In every way.\\n\"},\"after\":{\"content\":\"img/examples/product-laptop.png\",\"contentType\":\"image\",\"label\":\"**Product Y**\\n\\nMore power. More performance.\\n\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (after, before, config, continueBtnText, doneText, hasNarration, hasPrompt, i18n, playinline, prompt, submitUp, title) {\njade_mixins[\"video-stream\"] = jade_interp = function(videoUrl, playsinline, controls, klass, poster){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nplayinline = playinline || true\ncontrols = controls || true\nklass = klass || 'video vjs-fluid'\nvar cloudinaryVideoFolderUrl = config.CLOUDINARY_CDN_URL+config.CLOUDINARY_VIDEO_FOLDER\nvar streamUrl = ''\nif ( videoUrl && videoUrl.indexOf(cloudinaryVideoFolderUrl) > -1)\n{\nstreamUrl = videoUrl.replace(cloudinaryVideoFolderUrl, cloudinaryVideoFolderUrl+'sp_full_hd/')\nstreamUrl = streamUrl.replace('.mp4', '.m3u8')\n}\nbuf.push(\"<video\" + (jade.attr(\"webkit-playsinline\", playsinline, true, false)) + (jade.attr(\"controls\", controls, true, false)) + \" preload=\\\"auto\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + (jade.attr(\"poster\", poster, true, false)) + (jade.cls(['video-js',klass], [null,true])) + \"><source\" + (jade.attr(\"src\", videoUrl, true, false)) + \"/>\");\nif ( streamUrl)\n{\nbuf.push(\"<source\" + (jade.attr(\"src\", streamUrl, true, false)) + \"/>\");\n}\nbuf.push(\"</video>\");\n};\njade_mixins[\"image\"] = jade_interp = function(imageUrl, klass){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nbuf.push(\"<img\" + (jade.attr(\"src\", imageUrl, true, false)) + (jade.cls([klass], [true])) + \"/>\");\n};\njade_mixins[\"multi-content\"] = jade_interp = function(prop, obj){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nobj = obj || locals;\nswitch (obj[prop + \"Type\"]){\ncase \"image\":\nbuf.push(\"<div\" + (jade.attr(\"data-content\", obj.image, true, false)) + \" class=\\\"multi-content-wrapper multi-content-wrapper-image block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\">\");\njade_mixins[\"image\"](obj[prop], 'multi-content multi-content-image');\nbuf.push(\"</div></div>\");\n  break;\ncase \"video\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-video block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\">\");\njade_mixins[\"video-stream\"](obj[prop], true, true,\"multi-content multi-content-video block-dk\");\nbuf.push(\"</div></div>\");\n  break;\ncase \"audio\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-audio block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><audio\" + (jade.attr(\"src\", obj[prop], true, false)) + \" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"multi-content multi-content-audio block-dk\\\"></audio></div></div>\");\n  break;\ncase \"iframe\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-iframe block-md block-lt\\\"><div class=\\\"block-sm multi-content-iframe\\\">\");\nvar iframe = obj[prop].match(/<iframe[^<]*<\\/iframe>/)\nif ( iframe)\n{\nbuf.push(null == (jade_interp = iframe[0].replace(/ (width|height)=[\"'\\d\\w]+/g, \"\")) ? \"\" : jade_interp);\n}\nbuf.push(\"</div></div>\");\n  break;\ndefault:\nbuf.push(\"<span class=\\\"multi-content multi-content-text\\\">\" + (null == (jade_interp = obj[prop]) ? \"\" : jade_interp) + \"</span>\");\n  break;\n}\n};\nbuf.push(\"<div class=\\\"content-fill\\\"><div class=\\\"content-ver text-center block-v-lg\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><div class=\\\"block-v-md slide-title\\\"><h1 class=\\\"slide-down\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1></div><div class=\\\"block-v-lg fade-in delay-3\\\"><div class=\\\"slider\\\"><div class=\\\"slider-items\\\"><div class=\\\"slider-item content-fill slider-item-0\\\"><div class=\\\"slider-content content-fill\\\">\");\njade_mixins[\"multi-content\"](\"content\", before);\nbuf.push(\"</div></div><div class=\\\"slider-item content-fill slider-item-1\\\"><div\" + (jade.cls(['slider-content','content-fill',(after.contentType === \"text\" ? \n                    \"multi-content-wrapper block-lt\" : \"\"\n                  )], [null,null,true])) + \">\");\njade_mixins[\"multi-content\"](\"content\", after);\nbuf.push(\"</div></div></div><div class=\\\"btn-replay btn btn-muted\\\"><span class=\\\"icon icon-replay\\\"></span></div></div></div><div class=\\\"slider-labels text-md slide-up\\\"><div class=\\\"slider-label slider-label-before\\\">\" + (null == (jade_interp = before.label) ? \"\" : jade_interp) + \"</div><div class=\\\"slider-label slider-label-after\\\">\" + (null == (jade_interp = after.label) ? \"\" : jade_interp) + \"</div></div></div></div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"after\" in locals_for_with?locals_for_with.after:typeof after!==\"undefined\"?after:undefined,\"before\" in locals_for_with?locals_for_with.before:typeof before!==\"undefined\"?before:undefined,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"playinline\" in locals_for_with?locals_for_with.playinline:typeof playinline!==\"undefined\"?playinline:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView  = require \"views/slide\"\n{ DraggyView } = require(\"views/components/draggy\")\nSmoothLine = require(\"lib/draw/smooth-line\")\nPreloader = require \"lib/preload\"\n{ dpi }    = require(\"lib/device\")\n\nclass ScratchToRevealView extends SlideView\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap .btn-done\": \"submit\"\n    \"iostap .btn-replay\": \"restart\"\n\n  serialize: ->\n    data = super\n    data.before.contentType = \"image\"\n    data\n\n  beforeShow: ->\n    images = @findAll(\"img\")\n    @setEl @findOne(\".slider\"), \"slider\"\n    @setEl @findOne(\".slider-knob\"), \"knob\"\n    @setEl @findAll(\".slider-item\"), \"items\"\n\n    @draggy = null\n    delete @draggy\n\n    if images.length > 0\n      Preloader.load _.pluck(images, \"src\"), => @sizeContent()\n    else\n      @sizeContent()\n\n  restart: ->\n    @points = []\n    @setState(\"prompt\")\n    @sizeContent()\n\n  show: ->\n    @createDraggy()\n    @points = []\n\n  createDraggy: ->\n    width = @getEl(\"slider\").offsetWidth\n\n    @draggy = new DraggyView\n      el: @findOne(\".slider-item-0 .multi-content-media\")\n      minX: 0\n      maxX: width\n      isParent: true\n\n    @listenTo this, \"resize\", @onResize\n    @listenTo @draggy, \"drag\", @onDrag\n    @listenTo @draggy, \"drop\", @onDrop\n\n  onResize: ->\n    @sizeContent()\n    for set in @points\n      for point, i in set\n        @draw(set.slice(i, i + 2))\n\n  onDrag: (draggy, isInitial) ->\n    @points.push [] if isInitial\n    _.last(@points).push x: draggy.x * dpi, y: draggy.y * dpi\n    @draw(_.last(@points).slice(-2))\n\n  onDrop: ->\n    { data } = @context.getImageData(\n      0, 0\n      @context.canvas.width, @context.canvas.height\n    )\n\n    alphaPixels = _.filter(data, (e, i) -> i % 4 is 3)\n    @setState(\"touched\") if _.average(alphaPixels) / 255 < 0.2\n\n  draw: ([p1, p2]) ->\n    radius = 30 * dpi\n\n    p2   ?= p1\n    diffX = p2.x - p1.x\n    diffY = p2.y - p1.y\n    diffM = Math.max(Math.abs(diffX), Math.abs(diffY), 1)\n    @context.fillStyle = \"#000\"\n\n    @context.beginPath()\n\n    for i in [0..diffM]\n      d = i / diffM\n      x = p1.x + diffX * d\n      y = p1.y + diffY * d\n      @context.arc(x, y, radius, 0, Math.PI * 2)\n\n    @context.fill()\n\n    if _.chain(@points).pluck(\"length\").sum().value() > 120\n      @setState(\"touched\")\n\n  sizeContent: ->\n    @setState false, \"sized\"\n\n    els        = @findAll(\".multi-content-wrapper\")\n    labels     = @findOne(\".slider-labels\")\n    img        = @findOne(\".slider-item-0 img\")\n    canvas     = @findOne(\"canvas\")\n    slideTitle = @findOne(\".slide-title\")\n    \n    sliderParent = @getEl(\"slider\").parentNode\n    containerHeight = @el.offsetHeight\n\n    size = _.reduce els, (m, el) ->\n      h: Math.max(m.h, el.offsetHeight)\n      w: Math.max(m.w, el.offsetWidth)\n    , { h: 80, w: 0}\n\n    unless canvas\n      canvas = document.createElement(\"canvas\")\n      canvas.style.position = \"absolute\"\n      canvas.style.top    = \"0\"\n      canvas.style.left   = \"0\"\n      img.insertAdjacentElement(\"afterEnd\", canvas)\n\n    padding = parseFloat(window.getComputedStyle(img.parentNode).paddingLeft)\n    cWidth  = img.parentNode.offsetWidth\n    cHeight = Math.max(img.parentNode.offsetHeight, size.h - padding * 2)\n    iWidth  = img.offsetWidth\n    iHeight = img.offsetHeight\n\n    canvas.style.width  = \"#{cWidth}px\"\n    canvas.style.height = \"#{cHeight}px\"\n    canvas.width  = cWidth * dpi\n    canvas.height = cHeight * dpi\n\n    @context = canvas.getContext(\"2d\")\n    @context.fillStyle = @options.data.canvasBackground or \"white\"\n    @context.rect(0, 0, canvas.width, canvas.height)\n    @context.fill()\n    @context.drawImage(\n      img,\n      (cWidth  - iWidth)  / 2 * dpi\n      (cHeight - iHeight) / 2 * dpi\n      iWidth * dpi\n      iHeight * dpi\n    )\n\n    @context.globalCompositeOperation = \"destination-out\"\n\n    @getEl(\"slider\").style.height = \"\"\n    @getEl(\"slider\").style.width  = \"\"\n\n    @getEl(\"slider\").style.height = \"#{size.h}px\"\n    @getEl(\"slider\").style.width  = \"#{size.w}px\"\n\n    # Available space for labels after image and title are set\n    availableSpace = containerHeight - sliderParent.offsetHeight - slideTitle.offsetHeight - 8 #8px for bottom padding\n\n    height = _.reduce labels.children, (m, el) ->\n      Math.min(Math.max(m, el.offsetHeight), availableSpace)\n    , 0\n\n    labels.style.height = \"#{height}px\"\n\n    @setState true, \"sized\"\n\n    if @draggy?\n      @draggy.options.maxX = size.w\n      @draggy.getOffset()\n\n  onRefresh: ->\n    @beforeShow()\n    super\n\n  refresh: (params) ->\n    isAfter = not _.isEqual(params.data.after, @options.data.after)\n\n    super\n\n    if isAfter\n      @setState(\"touched\")\n\nmodule.exports = ScratchToRevealView\n","module.exports = {\"title\":\"scrollable\",\"display\":\"Scrollable\",\"category\":\"Content\",\"features\":{\"narration\":true,\"social\":true},\"description\":\"Display a long amount of content\",\"model\":{\"title\":{\"type\":\"html\",\"default\":\"\"},\"content\":{\"type\":\"html\",\"default\":\"\"},\"prompt\":{\"type\":\"html\",\"default\":\"Scroll to see more\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"scrolling-content\",\"title\":\"Scrolling Content\",\"content\":\"\\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus\\nquis lectus metus, at posuere neque. Sed pharetra nibh eget orci\\nconvallis at posuere leo convallis. Sed blandit augue vitae augue\\nscelerisque bibendum. Vivamus sit amet libero turpis, non venenatis\\nurna. In blandit, odio convallis suscipit venenatis, ante ipsum cursus\\naugue.\\n\\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus\\nquis lectus metus, at posuere neque. Sed pharetra nibh eget orci\\nconvallis at posuere leo convallis. Sed blandit augue vitae augue\\nscelerisque bibendum. Vivamus sit amet libero turpis, non venenatis\\nurna. In blandit, odio convallis suscipit venenatis, ante ipsum cursus\\naugue.\\n\\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus\\nquis lectus metus, at posuere neque. Sed pharetra nibh eget orci\\nconvallis at posuere leo convallis. Sed blandit augue vitae augue\\nscelerisque bibendum. Vivamus sit amet libero turpis, non venenatis\\nurna. In blandit, odio convallis suscipit venenatis, ante ipsum cursus\\naugue.\\n\"}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (content, continueBtnText, doneText, hasNarration, hasPrompt, i18n, prompt, submitUp, title) {\nbuf.push(\"<div class=\\\"content-md content-fill\\\"><div class=\\\"content-scroll content-sm-scroll content-md-scroll block-v-lg fade-in\\\"><div class=\\\"content-scroll-inner hide-overflow\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-lg-10 col-lg-offset-1\\\"><h1 class=\\\"text-center slide-down\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"text-md\\\">\" + (null == (jade_interp = content) ? \"\" : jade_interp) + \"</div></div></div></div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"content\" in locals_for_with?locals_for_with.content:typeof content!==\"undefined\"?content:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView = require(\"views/slide\")\ndevice    = require(\"lib/device\")\n\nclass ScrollableView extends SlideView\n  template: require(\"./template\")\n  ignoreStateOnRefresh: true\n\n  buffer: 40\n\n  events: ->\n    \"iostap .btn-done\": \"submit\"\n\n  serialize: ->\n    data = super\n    data.hasPrompt = true\n    data\n\n  beforeShow: ->\n    @trigger(\"ui\", flexibleHeight: true)\n\n  beforeHide: ->\n    @trigger(\"ui\", flexibleHeight: false)\n\n  show: ->\n    @setHeight()\n    @listenTo this, \"resize\", @onResize\n\n  onScroll: (e) ->\n    super\n\n    if e.currentTarget.scrollTop >= @scrollLimit\n      @setState(\"touched\")\n\n  onResize: ->\n    @setHeight()\n\n  setHeight: (narrationIsComplete, y) ->\n    el = @findOne(\".content-scroll\")\n\n    el.scrollTop = y if y?\n\n    outerHeight  = @el.offsetHeight\n    innerHeight  = el.firstChild.offsetHeight\n    @scrollLimit = innerHeight - outerHeight - @buffer\n\n    hasNarration =\n      not narrationIsComplete and\n      @options.data.narration?.audio_file and\n      @options.data.narration?.can_not_be_skipped\n\n    if innerHeight - @buffer <= outerHeight\n      @setState(\"touched\") unless hasNarration\n      @transform el.firstChild, y: (outerHeight - (innerHeight - @buffer)) / 2\n\n    else\n      @transform el.firstChild,\n        y: 0, transition: \"all 300ms\"\n\n      @setState(\"prompt\") unless hasNarration\n\n    if el.scrollTop >= @scrollLimit\n      @setState(\"prompt\") unless hasNarration\n      @setState(\"touched\") unless hasNarration\n\n    if el.offsetHeight < el.scrollHeight and device.platform is \"iOS\"\n      # This fix is for older iPads, which fail to calculate\n      # the scrollable area of the content correctly. See #652.\n      el.style.paddingBottom = \"2px\"\n      el.scrollTop = 1\n      window.setTimeout ->\n        el.offsetTop\n        el.scrollTop = 0\n        el.style.paddingBottom = \"\"\n      , 10\n\n\n  refresh: ->\n    scroller  = @findOne(\".content-scroll\")\n    scrollTop = scroller.scrollTop\n\n    super\n\n    @setHeight(false, scrollTop)\n\n  onNarrationPause: ->\n    @setHeight()\n\n  onNarrationComplete: ->\n    @setHeight(true)\n\nmodule.exports = ScrollableView\n","module.exports = {\"title\":\"scrolling-media\",\"display\":\"Scrolling Media\",\"category\":\"Content\",\"description\":\"Display long form content of any type\",\"features\":{\"narration\":true,\"social\":true},\"model\":{\"title\":{\"type\":\"html\"},\"content\":{\"min\":1,\"max\":10,\"type\":[{\"content\":{\"types\":[\"text\",\"image\",\"video\",\"audio\"]}}]},\"preventFocus\":{\"type\":\"boolean\",\"default\":false,\"display\":\"Prevent Image Zoom\",\"help\":\"Disable the ability to explore images by tapping on them to view the image in more detail.\\n\"},\"prompt\":{\"type\":\"html\",\"default\":\"Scroll to see more\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"scrolling-media\",\"title\":\"About Product Z\",\"content\":[{\"contentType\":\"text\",\"content\":\"Product Z is our third product in the Product line. Write, draw, sign or sketch whenever inspiration strikes. It's small in size but big on capability. Don't believe us? See below:\\n\"},{\"contentType\":\"image\",\"content\":\"img/examples/product-tablet.png\"},{\"contentType\":\"text\",\"content\":\"Review the following interactive slides to learn more about Product Z.\\n\"}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (config, content, continueBtnText, doneText, hasNarration, hasPrompt, i18n, playinline, prompt, submitUp, title, undefined) {\njade_mixins[\"video-stream\"] = jade_interp = function(videoUrl, playsinline, controls, klass, poster){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nplayinline = playinline || true\ncontrols = controls || true\nklass = klass || 'video vjs-fluid'\nvar cloudinaryVideoFolderUrl = config.CLOUDINARY_CDN_URL+config.CLOUDINARY_VIDEO_FOLDER\nvar streamUrl = ''\nif ( videoUrl && videoUrl.indexOf(cloudinaryVideoFolderUrl) > -1)\n{\nstreamUrl = videoUrl.replace(cloudinaryVideoFolderUrl, cloudinaryVideoFolderUrl+'sp_full_hd/')\nstreamUrl = streamUrl.replace('.mp4', '.m3u8')\n}\nbuf.push(\"<video\" + (jade.attr(\"webkit-playsinline\", playsinline, true, false)) + (jade.attr(\"controls\", controls, true, false)) + \" preload=\\\"auto\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + (jade.attr(\"poster\", poster, true, false)) + (jade.cls(['video-js',klass], [null,true])) + \"><source\" + (jade.attr(\"src\", videoUrl, true, false)) + \"/>\");\nif ( streamUrl)\n{\nbuf.push(\"<source\" + (jade.attr(\"src\", streamUrl, true, false)) + \"/>\");\n}\nbuf.push(\"</video>\");\n};\njade_mixins[\"image\"] = jade_interp = function(imageUrl, klass){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nbuf.push(\"<img\" + (jade.attr(\"src\", imageUrl, true, false)) + (jade.cls([klass], [true])) + \"/>\");\n};\njade_mixins[\"multi-content\"] = jade_interp = function(prop, obj){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nobj = obj || locals;\nswitch (obj[prop + \"Type\"]){\ncase \"image\":\nbuf.push(\"<div\" + (jade.attr(\"data-content\", obj.image, true, false)) + \" class=\\\"multi-content-wrapper multi-content-wrapper-image block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\">\");\njade_mixins[\"image\"](obj[prop], 'multi-content multi-content-image');\nbuf.push(\"</div></div>\");\n  break;\ncase \"video\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-video block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\">\");\njade_mixins[\"video-stream\"](obj[prop], true, true,\"multi-content multi-content-video block-dk\");\nbuf.push(\"</div></div>\");\n  break;\ncase \"audio\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-audio block-md block-lt\\\"><div class=\\\"block-sm multi-content-media\\\"><audio\" + (jade.attr(\"src\", obj[prop], true, false)) + \" playsinline=\\\"playsinline\\\" preload=\\\"auto\\\" controls=\\\"controls\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + \" class=\\\"multi-content multi-content-audio block-dk\\\"></audio></div></div>\");\n  break;\ncase \"iframe\":\nbuf.push(\"<div class=\\\"multi-content-wrapper multi-content-wrapper-iframe block-md block-lt\\\"><div class=\\\"block-sm multi-content-iframe\\\">\");\nvar iframe = obj[prop].match(/<iframe[^<]*<\\/iframe>/)\nif ( iframe)\n{\nbuf.push(null == (jade_interp = iframe[0].replace(/ (width|height)=[\"'\\d\\w]+/g, \"\")) ? \"\" : jade_interp);\n}\nbuf.push(\"</div></div>\");\n  break;\ndefault:\nbuf.push(\"<span class=\\\"multi-content multi-content-text\\\">\" + (null == (jade_interp = obj[prop]) ? \"\" : jade_interp) + \"</span>\");\n  break;\n}\n};\nbuf.push(\"<div class=\\\"content-scroll fade-in\\\"><div class=\\\"content-scroll-inner hide-overflow block-v-lg block-box-sizing\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-lg-8 col-lg-offset-2\\\"><h1 class=\\\"text-center slide-down\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"slide-content\\\">\");\n// iterate content\n;(function(){\n  var $$obj = content;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var item = $$obj[i];\n\nbuf.push(\"<div\" + (jade.cls(['block-v-md','fade-in',\"delay-\" + (i + 1) + \"\"], [null,null,true])) + \">\");\njade_mixins[\"multi-content\"](\"content\", item);\nbuf.push(\"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var item = $$obj[i];\n\nbuf.push(\"<div\" + (jade.cls(['block-v-md','fade-in',\"delay-\" + (i + 1) + \"\"], [null,null,true])) + \">\");\njade_mixins[\"multi-content\"](\"content\", item);\nbuf.push(\"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"content\" in locals_for_with?locals_for_with.content:typeof content!==\"undefined\"?content:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"playinline\" in locals_for_with?locals_for_with.playinline:typeof playinline!==\"undefined\"?playinline:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","ScrollableView = require(\"../scrollable/view\")\nPreloader      = require(\"lib/preload\")\n{ dpi }        = require(\"lib/device\")\n\nclass ScrollingMediaView extends ScrollableView\n  template: require(\"./template\")\n  ignoreStateOnRefresh: true\n\n  events: ->\n    _.extend super,\n      \"iostap .multi-content-wrapper-image\": \"showZoom\"\n\n  setHeight: (narrationIsComplete, y) ->\n    scroller = @findOne(\".content-scroll\")\n\n    images = _.pluck @findAll(\"img\"), \"src\"\n\n    Preloader.load images, (e) =>\n      super narrationIsComplete, y\n\n  show: ->\n    super\n    @setState not @options.data.preventFocus, \"image-focus\"\n\n  onRefresh: ->\n    @photoswipe?.close()\n    @show()\n\n  hide: ->\n    super\n    @photoswipe?.close()\n\n  showZoom: (e, showAnimationDuration = 300) ->\n    return if @options.data.preventFocus\n\n    @setState(\"touched\")\n    @setState(true, \"focus\")\n\n    targetImage = e.currentTarget.querySelector(\"img\")\n\n    pad = if @options.data.compose then 12 else 0\n    { top, left, width } = targetImage.getBoundingClientRect()\n    thumbBounds = { x: left + pad, y: top + pad, w: width - pad * 2 }\n\n    images =\n      for img, i in @findAll(\".multi-content-image\")\n        index = i if img is targetImage\n        img: img\n        msrc: img.src\n        src:  img.src\n        w: (img.naturalWidth  or img.width)  / Math.min(dpi, 1.66)\n        h: (img.naturalHeight or img.height) / Math.min(dpi, 1.66)\n\n    @photoswipe = new PhotoSwipe(\n      document.querySelector(\"#photoswipe\")\n      PhotoSwipeUI_Default\n      images\n      {\n        index\n        showAnimationDuration\n        focus: false\n        history: false\n        barsSize: { top: 0, bottom: 0 }\n        indexIndicatorSep: \" of \"\n        getThumbBoundsFn: -> thumbBounds\n      }\n    )\n    @photoswipe.listen(\"close\", => @setState(false, \"focus\"))\n    @photoswipe.init()\n\nmodule.exports = ScrollingMediaView\n","module.exports = {\"title\":\"slider-survey\",\"display\":\"Slider\",\"category\":\"Survey\",\"description\":\"Gather numerical feedback\",\"model\":{\"question\":{\"id\":{\"type\":\"uuid\",\"hidden\":true},\"content\":{\"type\":\"html\",\"default\":\"Ask a question\"}},\"slider\":{\"min\":{\"type\":\"number\",\"default\":0,\"display\":\"Min. Value\"},\"max\":{\"type\":\"number\",\"default\":10,\"display\":\"Max. Value\"},\"prefix\":{\"type\":\"html\",\"default\":\"\"},\"suffix\":{\"type\":\"html\",\"default\":\"\"},\"increment\":{\"type\":\"number\",\"default\":1,\"min\":0},\"labels\":{\"type\":\"int\",\"min\":2,\"max\":10,\"default\":3},\"minLabel\":{\"type\":\"text\",\"default\":\"\",\"display\":\"Minimum Label\"},\"maxLabel\":{\"type\":\"text\",\"default\":\"\",\"display\":\"Maximum Label\"},\"decimals\":{\"type\":\"int\",\"min\":0,\"max\":8,\"default\":0}},\"prompt\":{\"type\":\"html\",\"default\":\"Drag to select a response\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"slider\",\"question\":{\"content\":\"I feel more confident in my understanding of _______ after completing this lesson.\",\"id\":\"#GENUUID#\"},\"slider\":{\"min\":0,\"max\":5,\"suffix\":\"\",\"labels\":5,\"minLabel\":\"Strongly Disagree\",\"maxLabel\":\"Strongly Agree\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (Array, config, continueBtnText, doneText, hasNarration, hasPrompt, i18n, labelValues, labels, notches, prompt, question, slider, submitUp, undefined) {\nbuf.push(\"<div class=\\\"content-fill\\\"><div class=\\\"content-fit content-md-fill content-sm-ver\\\"><div class=\\\"content-md-ver text-center block-v-lg\\\"><h1>\" + (null == (jade_interp = question.content) ? \"\" : jade_interp) + \"</h1><div class=\\\"slider scale-up\\\"><div class=\\\"slider-bar\\\"></div><div class=\\\"slider-knob slider-knob-input\\\"><div class=\\\"slider-knob-value text-md text-nowrap\\\">\" + (jade.escape((jade_interp = i18n(\"slider.touch-to-slide\")) == null ? '' : jade_interp)) + \"</div></div><div class=\\\"slider-knob slider-knob-answer\\\"><div class=\\\"slider-knob-value text-md text-nowrap\\\">\" + (null == (jade_interp = slider.prefix) ? \"\" : jade_interp) + (null == (jade_interp = \"\") ? \"\" : jade_interp) + (null == (jade_interp = slider.suffix) ? \"\" : jade_interp) + \"</div></div><div class=\\\"slider-notches\\\">\");\n// iterate (new Array(notches + 1))\n;(function(){\n  var $$obj = (new Array(notches + 1));\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var notch = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"left: \" + (i / notches * 100) + \"%;\", true, false)) + \" class=\\\"slider-notch\\\"></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var notch = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"left: \" + (i / notches * 100) + \"%;\", true, false)) + \" class=\\\"slider-notch\\\"></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\nif ( slider.labels)\n{\nbuf.push(\"<div class=\\\"slider-labels\\\">\");\nvar attr = config.direction === \"rtl\" ? \"right\" : \"left\";\n// iterate labelValues\n;(function(){\n  var $$obj = labelValues;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var label = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"\" + (attr) + \": \" + (i / (labels - 1) * 100) + \"%;\", true, false)) + \" class=\\\"slider-label\\\">\" + (null == (jade_interp = slider.prefix) ? \"\" : jade_interp) + (null == (jade_interp = slider.decimals ? label.toFixed(slider.decimals) : label) ? \"\" : jade_interp) + (null == (jade_interp = slider.suffix) ? \"\" : jade_interp) + \"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var label = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"\" + (attr) + \": \" + (i / (labels - 1) * 100) + \"%;\", true, false)) + \" class=\\\"slider-label\\\">\" + (null == (jade_interp = slider.prefix) ? \"\" : jade_interp) + (null == (jade_interp = slider.decimals ? label.toFixed(slider.decimals) : label) ? \"\" : jade_interp) + (null == (jade_interp = slider.suffix) ? \"\" : jade_interp) + \"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\n}\nbuf.push(\"<div class=\\\"slider-label-text\\\">\");\nif ( slider.minLabel)\n{\nbuf.push(\"<div class=\\\"slider-label-min pull-left\\\">\" + (null == (jade_interp = slider.minLabel) ? \"\" : jade_interp) + \"</div>\");\n}\nif ( slider.maxLabel)\n{\nbuf.push(\"<div class=\\\"slider-label-max pull-right\\\">\" + (null == (jade_interp = slider.maxLabel) ? \"\" : jade_interp) + \"</div>\");\n}\nbuf.push(\"</div></div></div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"Array\" in locals_for_with?locals_for_with.Array:typeof Array!==\"undefined\"?Array:undefined,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"labelValues\" in locals_for_with?locals_for_with.labelValues:typeof labelValues!==\"undefined\"?labelValues:undefined,\"labels\" in locals_for_with?locals_for_with.labels:typeof labels!==\"undefined\"?labels:undefined,\"notches\" in locals_for_with?locals_for_with.notches:typeof notches!==\"undefined\"?notches:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"question\" in locals_for_with?locals_for_with.question:typeof question!==\"undefined\"?question:undefined,\"slider\" in locals_for_with?locals_for_with.slider:typeof slider!==\"undefined\"?slider:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","InputView  = require \"views/input\"\nSliderView = require \"engine/slider/view\"\n\nclass SliderSurveyView extends SliderView\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap .btn-done\": \"nextSlide\"\n\n  show: ->\n    @setEl @findOne(\".slider-label-min\"), \"min-label\"\n    @setEl @findOne(\".slider-label-max\"), \"max-label\"\n\n    super\n\n  userInput: ->\n    question:\n      id: @options.data.question.id\n      content: @options.data.question.content\n    answer:\n      value: parseFloat(@currentValue)\n\n  nextSlide: ->\n    InputView::nextSlide.call this\n\n  onDrag: (draggy) ->\n    super\n    @styleLabels(draggy)\n\n  onDrop: (draggy) ->\n    super\n    @styleLabels(draggy)\n\n  styleLabels: (draggy) ->\n    opacity = draggy.x / draggy.offset.width\n    min     = 0.1\n    opacity = (opacity * (1 - min)) + min\n    if @options.config().direction is \"rtl\"\n      opacity = 1 - opacity\n    @getEl(\"min-label\")?.style.opacity = (1 + min) - opacity\n    @getEl(\"max-label\")?.style.opacity = opacity\n\nmodule.exports = SliderSurveyView\n","module.exports = {\"title\":\"slider\",\"display\":\"Slider\",\"category\":\"Numbers\",\"features\":{\"stars\":true,\"social\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"Ask a question\"},\"slider\":{\"min\":{\"type\":\"number\",\"default\":0,\"display\":\"Min. Value\"},\"max\":{\"type\":\"number\",\"default\":10,\"display\":\"Max. Value\"},\"prefix\":{\"type\":\"html\",\"default\":\"\"},\"suffix\":{\"type\":\"html\",\"default\":\"\"},\"increment\":{\"type\":\"number\",\"default\":1},\"labels\":{\"type\":\"int\",\"min\":2,\"max\":10,\"default\":3},\"decimals\":{\"type\":\"int\",\"min\":0,\"max\":8,\"default\":0}},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"value\":{\"type\":\"number\",\"display\":\"Correct Value\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (seconds)\"},\"out-of-time-prompt\":{\"type\":\"html\",\"display\":\"Out of time prompt\"}}},\"prompt\":{\"type\":\"html\",\"default\":\"Slide to the correct value\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"percent\",\"title\":\"What percent of customers responded in the survey?\",\"slider\":{\"min\":85,\"max\":100,\"suffix\":\"%\",\"labels\":4},\"answer\":{\"text\":\"A huge amount of responses were contributed to the survey.\",\"value\":98}},{\"subtype\":\"money\",\"title\":\"What is the new price of the product?\",\"slider\":{\"min\":6.5,\"increment\":0.25,\"max\":11.5,\"prefix\":\"$\",\"labels\":8,\"decimals\":2},\"answer\":{\"value\":7.75,\"text\":\"At $7.75, the product is now a lot cheaper!\\n\"}},{\"subtype\":\"year\",\"title\":\"In which year was the product introduced?\",\"slider\":{\"min\":1984,\"max\":1990,\"prefix\":\"\",\"labels\":3},\"answer\":{\"text\":\"The product is a true original from 1984!\",\"value\":1984}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (Array, answer, config, continueBtnText, doneText, game, hasNarration, hasPrompt, i18n, labelValues, labels, notches, prompt, slider, submitUp, title, undefined) {\nif ( game && game.timer && game.timer.limit > 0 && !game.timer.isDisabled)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"content-fill\\\"><div class=\\\"content-fit content-md-fill content-sm-ver\\\"><div class=\\\"content-md-ver text-center block-v-lg\\\"><h1>\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"slider scale-up\\\"><div class=\\\"slider-bar\\\"></div><div class=\\\"slider-knob slider-knob-input\\\"><div class=\\\"slider-knob-value text-md text-nowrap\\\">\" + (jade.escape((jade_interp = i18n(\"slider.touch-to-slide\")) == null ? '' : jade_interp)) + \"</div></div><div class=\\\"slider-knob slider-knob-answer\\\"><div class=\\\"slider-knob-value text-md text-nowrap\\\">\" + (null == (jade_interp = slider.prefix) ? \"\" : jade_interp) + (null == (jade_interp = answer.value) ? \"\" : jade_interp) + (null == (jade_interp = slider.suffix) ? \"\" : jade_interp) + \"</div></div><div class=\\\"slider-notches\\\">\");\n// iterate (new Array(notches + 1))\n;(function(){\n  var $$obj = (new Array(notches + 1));\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var notch = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"left: \" + (i / notches * 100) + \"%;\", true, false)) + \" class=\\\"slider-notch\\\"></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var notch = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"left: \" + (i / notches * 100) + \"%;\", true, false)) + \" class=\\\"slider-notch\\\"></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\nif ( slider.labels)\n{\nbuf.push(\"<div class=\\\"slider-labels\\\">\");\nvar attr = config.direction === \"rtl\" ? \"right\" : \"left\";\n// iterate labelValues\n;(function(){\n  var $$obj = labelValues;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var label = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"\" + (attr) + \": \" + (i / (labels - 1) * 100) + \"%;\", true, false)) + \" class=\\\"slider-label\\\">\" + (null == (jade_interp = slider.prefix) ? \"\" : jade_interp) + (null == (jade_interp = slider.decimals ? label.toFixed(slider.decimals) : label) ? \"\" : jade_interp) + (null == (jade_interp = slider.suffix) ? \"\" : jade_interp) + \"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var label = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"style\", \"\" + (attr) + \": \" + (i / (labels - 1) * 100) + \"%;\", true, false)) + \" class=\\\"slider-label\\\">\" + (null == (jade_interp = slider.prefix) ? \"\" : jade_interp) + (null == (jade_interp = slider.decimals ? label.toFixed(slider.decimals) : label) ? \"\" : jade_interp) + (null == (jade_interp = slider.suffix) ? \"\" : jade_interp) + \"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\n}\nbuf.push(\"</div></div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"Array\" in locals_for_with?locals_for_with.Array:typeof Array!==\"undefined\"?Array:undefined,\"answer\" in locals_for_with?locals_for_with.answer:typeof answer!==\"undefined\"?answer:undefined,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"labelValues\" in locals_for_with?locals_for_with.labelValues:typeof labelValues!==\"undefined\"?labelValues:undefined,\"labels\" in locals_for_with?locals_for_with.labels:typeof labels!==\"undefined\"?labels:undefined,\"notches\" in locals_for_with?locals_for_with.notches:typeof notches!==\"undefined\"?notches:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"slider\" in locals_for_with?locals_for_with.slider:typeof slider!==\"undefined\"?slider:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView    = require \"views/base/game\"\n{ DraggyView }  = require(\"views/components/draggy\")\n\nclass SliderView extends GameView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-done\": \"endGame\"\n\n  serialize: ->\n    d = super\n\n    d.slider.increment = parseFloat(d.slider.increment, 10) or 1\n    d.slider.min = parseFloat(d.slider.min)\n    d.slider.max = parseFloat(d.slider.max)\n    d.slider.min = 0 if _.isNaN(d.slider.min)\n    d.slider.max = 10 if _.isNaN(d.slider.max)\n\n    if d.slider.min > d.slider.max\n      min = d.slider.min\n      d.slider.min = d.slider.max\n      d.slider.max = min\n\n    d.range = d.slider.max - d.slider.min\n    d.notches = Math.round(d.range / d.slider.increment)\n\n    d.labels =\n      _.nearest(_.factors(d.notches).map((m) -> m + 1), d.slider.labels)\n\n    d.labelValues = [0...d.labels].map (i) ->\n      value = new Big(Math.round(i * d.notches / (d.labels - 1)))\n      value = value.mul(d.slider.increment).add(d.slider.min)\n      value\n    d\n\n  beforeShow: ->\n    @trigger(\"ui\", flexibleHeight: true)\n\n  beforeHide: ->\n    @trigger(\"ui\", flexibleHeight: false)\n\n  show: ->\n    super\n\n    delete @currentValue\n\n    @setEl @findOne(\".slider\"), \"slider\"\n    @setEl @findOne(\".slider-knob-input\"), \"knob-input\"\n    @setEl @findOne(\".slider-knob-value\"), \"knob-value\"\n    @setEl @findOne(\".slider-knob-answer\"), \"knob-answer\"\n\n    @createDraggy()\n    @draggy.reset(x: @draggy.offset.width / 2)\n\n    @enterGame()\n\n  createDraggy: ->\n    width = @getEl(\"slider\").offsetWidth\n\n    @draggy = new DraggyView\n      el: @getEl(\"slider\")\n      minX: 0\n      maxX: width\n      lock: \"y\"\n      isParent: true\n\n    if @options.config().direction is \"rtl\"\n      @draggy.reset x: width\n      @transform @getEl(\"knob-input\"), x: width\n      @getEl(\"knob-input\").offsetWidth\n\n    @listenTo @draggy, \"drag\", @onDrag\n    @listenTo @draggy, \"drop\", @onDrop\n    @listenTo this, \"resize\", @onResize\n\n  onDrag: (draggy, isInitialDrag) ->\n    @currentValue = @roundValue(draggy)\n\n    @labelEl @getEl(\"knob-value\"), @currentValue\n    @transform @getEl(\"knob-input\"),\n      x: draggy.x\n      scale: 1.25\n      transition: if isInitialDrag then \"all 300ms\" else \"none\"\n\n  onDrop: (draggy, isReset) ->\n    x = @roundPos(draggy)\n\n    if draggy.x isnt x and not isReset\n      draggy.reset({x})\n    else\n      @transform @getEl(\"knob-input\"),\n        x: draggy.x\n        transition: \"all 300ms\"\n\n      if @currentValue?\n        @labelEl @getEl(\"knob-value\"), @currentValue\n        @setState(\"touched\")\n\n  roundValue: (draggy) ->\n    {increment, min, max} = @options.data.slider\n\n    Big(max - min)\n      .mul(@roundPercent(draggy))\n      .div(increment)\n      .round()\n      .mul(increment)\n      .plus(min)\n\n  roundPos: (draggy) ->\n    percent = @roundPercent(draggy)\n    percent = 1 - percent if @options.config().direction is \"rtl\"\n    percent * draggy.offset.width\n\n  roundPercent: (draggy) ->\n    {increment, min, max} = @options.data.slider\n\n    max     = Big(max).sub(min).div(increment).round().mul(increment).plus(min)\n    percent = _.limit(draggy.x / draggy.offset.width, 0, 1) or 0\n    steps   = Big(max).sub(min).div(increment).valueOf()\n    percent = if steps > 0 then Big(steps).mul(percent).round().div(steps) else 0\n    percent = 1 - percent if @options.config().direction is \"rtl\"\n    percent\n\n  onResize: (e, data) ->\n    {min, max} = @options.data.slider\n    percent = (@currentValue - min) / (max - min) or 0.5\n    @draggy.options.maxX = @draggy.el.offsetWidth\n    @draggy.reset(x: percent * @draggy.el.offsetWidth)\n    @animateAnswerKnob(@getEl(\"knob-answer\"))\n\n  labelEl: (el, value) ->\n    {prefix, suffix, decimals} = @options.data.slider\n\n    decimals = parseFloat(decimals, 10) or 0\n    value = parseFloat(value, 10).toFixed(decimals) if decimals > 0\n    el.innerHTML = \"#{prefix}#{value}#{suffix}\"\n\n  isCorrect: ->\n    @options.data?.answer?.value? and\n    @currentValue? and\n    @currentValue.eq @options.data.answer.value\n\n  showAnswer: ->\n    @transform @getEl(\"knob-answer\"), x: @draggy.x\n    @animateAnswerKnob(@getEl(\"knob-answer\"))\n\n    @draggy.lock()\n\n  animateAnswerKnob: (el) ->\n    {answer, slider} = @options.data\n    return unless answer\n\n    {increment, min, max} = slider\n    max     = Big(max).sub(min).div(increment).round().mul(increment).plus(min)\n    percent = (answer.value - min) / (max - min)\n    percent = 1 - percent if @options.config().direction is \"rtl\"\n\n    el.offsetLeft\n\n    @transform el,\n      x: percent * @draggy.offset.width\n      transition: if @draggy.locked then \"none\" else \"all 600ms\"\n\n  answerDetails: ->\n    questions    = @options.metadata?.questions or []\n    return [] unless questions.length > 0\n\n    question         = questions[0]\n    correct          = @isCorrect()\n    value            = Number(@currentValue)\n\n    answer           = _.find question.answers, (a) -> a.correct is correct\n    answer.content   = value\n    details          = question: question.question, answer: answer\n\n    [ details ]\n\n  endGame: ->\n    super\n\n    @submit()\n\nmodule.exports = SliderView\n","module.exports = {\"title\":\"speech-bubble\",\"display\":\"Speech Bubble\",\"category\":\"Content\",\"description\":\"Display a quote\",\"features\":{\"social\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"# Product X has defied my expectations.\"},\"author\":{\"type\":\"html\",\"default\":\"## Satisfied customer\"},\"avatar\":{\"type\":\"image\",\"default\":\"\"},\"direction\":{\"type\":\"select\",\"enum\":[\"Left\",\"Right\"],\"default\":\"Left\"},\"bubbleStyle\":{\"display\":\"Bubble Style\",\"type\":\"select\",\"enum\":[\"Dark\",\"Light\"],\"default\":\"Dark\"},\"avatarStyle\":{\"display\":\"Avatar Style\",\"type\":\"select\",\"enum\":[\"Circle\",\"Rounded\",\"Square\"],\"default\":\"Circle\"}}}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (author, avatar, avatarStyle, bubbleStyle, continueBtnText, direction, doneText, hasNarration, hasPrompt, i18n, prompt, submitUp, title) {\njade_mixins[\"image\"] = jade_interp = function(imageUrl, klass){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nbuf.push(\"<img\" + (jade.attr(\"src\", imageUrl, true, false)) + (jade.cls([klass], [true])) + \"/>\");\n};\njade_mixins[\"image\"] = jade_interp = function(imageUrl, klass){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nbuf.push(\"<img\" + (jade.attr(\"src\", imageUrl, true, false)) + (jade.cls([klass], [true])) + \"/>\");\n};\nbuf.push(\"<div class=\\\"content-scroll content-fill block-v-lg\\\"><div\" + (jade.cls(['content-scroll-inner','txt-center','block-frame','block-flex-center',[\n        (direction == \"Right\" ? \"text-right\" : \"text-left\"),\n        (direction == \"Right\" ? \"speech-right\" : \"speech-left\"),\n        bubbleStyle === \"Dark\" ? \"speech-dk\" : \"speech-lt\",\n        \"speech-style-\" + (avatarStyle || \"circle\").toLowerCase(),\n        avatar ? \"has-avatar\" : \"\"\n      ].join(\" \")], [null,null,null,null,true])) + \"><div class=\\\"display-flex direction-column quote-container\\\"><div\" + (jade.cls(['quote',[\n            direction == \"Right\" ? \"pull-right\" : \"pull-left\",\n            bubbleStyle === \"Dark\" ? \"quote-dk\" : \"quote-lt\"\n          ].join(\" \")], [null,true])) + \"><div class=\\\"quote-bg\\\"></div><div class=\\\"quote-content fade-in delay-1\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</div></div><div\" + (jade.cls(['author','block-frame','display-flex','direction-row',[\n            direction == \"Right\" ? \"author-right\" : \"author-left\"\n          ]], [null,null,null,null,true])) + \">\");\nif ( avatar)\n{\njade_mixins[\"image\"](avatar, 'author-avatar slide-up delay-2');\n}\nif ( author )\n{\nbuf.push(\"<div class=\\\"author-content slide-up delay-3\\\">\" + (null == (jade_interp = author) ? \"\" : jade_interp) + \"</div>\");\n}\nbuf.push(\"</div></div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"author\" in locals_for_with?locals_for_with.author:typeof author!==\"undefined\"?author:undefined,\"avatar\" in locals_for_with?locals_for_with.avatar:typeof avatar!==\"undefined\"?avatar:undefined,\"avatarStyle\" in locals_for_with?locals_for_with.avatarStyle:typeof avatarStyle!==\"undefined\"?avatarStyle:undefined,\"bubbleStyle\" in locals_for_with?locals_for_with.bubbleStyle:typeof bubbleStyle!==\"undefined\"?bubbleStyle:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"direction\" in locals_for_with?locals_for_with.direction:typeof direction!==\"undefined\"?direction:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView = require(\"views/slide\")\n\nclass SpeechBubbleView extends SlideView\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap .btn-done\": \"next\"\n\n  beforeShow: ->\n    @trigger(\"ui\", flexibleHeight: true)\n\n  beforeHide: ->\n    @trigger(\"ui\", flexibleHeight: false)\n\nmodule.exports = SpeechBubbleView\n","module.exports = {\"title\":\"strikeout\",\"display\":\"Strike-out\",\"category\":\"Concepts\",\"features\":{\"stars\":true,\"social\":true},\"model\":{\"title\":{\"type\":\"html\"},\"subtitle\":{\"type\":\"html\"},\"words\":{\"min\":1,\"max\":8,\"type\":[{\"incorrect\":{\"type\":\"html\",\"display\":\"Word(s) to be stricken out\"},\"replaces\":{\"type\":\"html\",\"display\":\"Word(s) from sentence\"}}]},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (seconds)\"},\"out-of-time-prompt\":{\"type\":\"html\",\"display\":\"Out of time prompt\"}}},\"prompt\":{\"type\":\"html\",\"default\":\"Cross out the incorrect words\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"strikeout\",\"title\":\"This sentence about Product X is correct\",\"prompt\":\"Cross out the incorrect words\",\"words\":[{\"incorrect\":\"incorrect\",\"replaces\":\"correct\"},{\"incorrect\":\"Product Y\",\"replaces\":\"Product X\"}],\"answer\":{\"text\":\"You can use strike-out to get people thinking about your message.\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (components, continueBtnText, doneText, game, hasNarration, hasPrompt, i18n, prompt, submitUp, subtitle, undefined) {\nif ( game && game.timer && game.timer.limit > 0 && !game.timer.isDisabled)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"full-screen strikeout-canvas-container\\\"><canvas class=\\\"strikeout-canvas\\\"></canvas></div><div class=\\\"content-fill text-center\\\"><div class=\\\"content-fit block-v-lg content-md-fill content-sm-ver strikeout-words\\\"><div class=\\\"content-md-ver col-md-10 col-md-offset-1\\\"><h1 class=\\\"fade-in\\\">\");\n// iterate components\n;(function(){\n  var $$obj = components;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var word = $$obj[i];\n\nif ( word.space)\n{\nbuf.push(null == (jade_interp = \"&nbsp;\") ? \"\" : jade_interp);\n}\nelse\n{\nbuf.push(\"<div\" + (jade.attr(\"data-replaces\", word.incorrect && word.replaces, true, false)) + (jade.cls(['word',word.incorrect && \"word-incorrect\"], [null,true])) + \"><div\" + (jade.cls([word.klass], [true])) + \">\" + (null == (jade_interp = word.incorrect || word.replaces) ? \"\" : jade_interp) + \"</div></div>\");\n}\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var word = $$obj[i];\n\nif ( word.space)\n{\nbuf.push(null == (jade_interp = \"&nbsp;\") ? \"\" : jade_interp);\n}\nelse\n{\nbuf.push(\"<div\" + (jade.attr(\"data-replaces\", word.incorrect && word.replaces, true, false)) + (jade.cls(['word',word.incorrect && \"word-incorrect\"], [null,true])) + \"><div\" + (jade.cls([word.klass], [true])) + \">\" + (null == (jade_interp = word.incorrect || word.replaces) ? \"\" : jade_interp) + \"</div></div>\");\n}\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</h1><h3>\" + (null == (jade_interp = subtitle) ? \"\" : jade_interp) + \"</h3></div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"components\" in locals_for_with?locals_for_with.components:typeof components!==\"undefined\"?components:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"subtitle\" in locals_for_with?locals_for_with.subtitle:typeof subtitle!==\"undefined\"?subtitle:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView   = require \"views/base/game\"\n{ DraggyView } = require(\"views/components/draggy\")\nSmoothLine = require(\"lib/draw/smooth-line\")\nconvert    = require(\"lib/convert\")\n{ dpi }    = require(\"lib/device\")\n\nclass StrikeoutView extends GameView\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap .btn-done\": \"endGame\"\n\n  serialize: ->\n    data = super\n\n    { title, words } = data\n    title = \"\" if not title?\n    title = convert.toText(title)\n\n    words =\n      for { replaces, incorrect } in words when replaces and incorrect\n        replaces: convert.toText replaces\n        incorrect: convert.toText incorrect\n\n    # replace matching words with placeholders\n    # \"hello my name\" -> \"hello my {{1}}\"\n    for { replaces }, i in words\n      title = title.replace replaces, \"{{#{i}}}\"\n\n    # Because we are splitting white-space, we need to make sure any part of\n    # the title that's not part of a supplied word, but is part of a substring\n    # is replaced back into the content.\n    # eg. \"68\" in \"68%\" will make sure the percentage still renders\n\n    # Split title into words: \"hello my name\" -> [\"hello\", \"my\", \"name\"]\n    # for some languages like Chinese, split it per character not per word since it doesn't use spaces.\n    data.components =\n      for component in title.split(/(\\{\\{\\d+\\}\\}|[^A-Z])/i) # split (inclusive) by placeholder {{ i }} or non-word characters (whitespace/Chinese)\n        if component == ' '\n          space: true # will render a space\n        else\n          index = +component.match(/\\{\\{(\\d+)\\}\\}/)?[1]\n          replaces  =\n            if words[index]?.replaces\n              component.replace(/\\{\\{\\d+\\}\\}/, words[index]?.replaces)\n            else\n              component\n          incorrect =\n            if words[index]?.incorrect\n              component.replace(/\\{\\{\\d+\\}\\}/, words[index]?.incorrect)\n            else\n              null\n          klass: \"delay-#{_.random(3)} scale-#{_.sample([\"down\", \"up\"])}\"\n          incorrect: incorrect\n          replaces: replaces\n    data\n\n  beforeShow: ->\n    @trigger(\"ui\", flexibleHeight: true)\n\n  beforeHide: ->\n    @trigger(\"ui\", flexibleHeight: false)\n\n  show: ->\n    super\n    canvas = @findOne(\"canvas\")\n\n    @draggy = new DraggyView\n      el: canvas\n      isParent: true\n\n    @onResize()\n\n    @context = @draggy.el.getContext?(\"2d\") or {}\n\n    @setEl @findAll(\".word\"), \"words\"\n\n    @listenTo @draggy, \"drag\", @onDrag\n    @listenTo @draggy, \"drop\", @onDrop\n    @listenTo this, \"resize\", @onResize\n\n    @context.clearRect?(0, 0, @draggy.el.width, @draggy.el.height)\n    el.classList.remove(\"active\", \"complete\") for el in @getEl(\"words\")\n\n    @enterGame()\n\n    @guesses = []\n\n\n  onResize: ->\n    @draggy.el.width = @el.firstChild.offsetWidth * dpi\n    @draggy.el.height = @el.firstChild.offsetHeight * dpi\n\n  onDrag: (draggy, isInitial) ->\n    if isInitial\n      @line?.animation?.cancel()\n      @context.lineCap = \"round\"\n      @context.globalAlpha = 1\n      @line = new SmoothLine([], window.getComputedStyle(@el).color, 4 * dpi)\n\n    @addPoint(draggy)\n\n  onDrop: (draggy, isReset) ->\n    pts = @line.getPoints()\n    selectedWords = []\n    { left, top } = @el.firstChild.getBoundingClientRect()\n\n    avgX = pts.reduce(((m, n) -> m + n.x), 0) / pts.length / dpi\n    avgY = pts.reduce(((m, n) -> m + n.y), 0) / pts.length / dpi\n    minX = pts.reduce(((m, n) -> if m > n.x then n.x else m), Infinity) / dpi\n    maxX = pts.reduce(((m, n) -> if m < n.x then n.x else m), 0) / dpi\n\n    for el in @getEl(\"words\") when not el.classList.contains(\"active\")\n      bounds = @getBounds el, { x: -left, y: -top }\n      buffer = 20\n\n      isWithin =\n        ((minX - buffer < bounds.left and maxX + buffer > bounds.right) or\n        (avgX > bounds.left and avgX < bounds.right)) and\n         avgY > bounds.top  and avgY < bounds.bottom\n\n      el.classList.toggle(\"active\", isWithin)\n      selectedWords.push(el) if isWithin\n\n      if isWithin and el.dataset.replaces\n        @transform el,\n          opacity: 0\n          scale: 0.8\n\n    @line.erase @context, =>\n      @context.clearRect(0, 0, @draggy.el.width, @draggy.el.height)\n\n    for el in selectedWords\n      @guesses.push $(el).text()\n      replaces = el.dataset.replaces\n      delete el.dataset.replaces\n      do (el, replaces) =>\n        window.setTimeout (=>\n          el.classList.remove(\"active\", \"word-incorrect\")\n\n          if replaces?\n            el.innerHTML = replaces\n            @transform el,\n              y: 0\n              opacity: 1\n\n        ), 600\n\n    @setState(\"touched\")\n\n  addPoint: ({x, y}) ->\n    @line.add x: x * dpi, y: y * dpi\n    @context.clearRect(0, 0, @draggy.el.width, @draggy.el.height)\n    @line.draw(@context)\n\n  isCorrect: ->\n    (el for el in @getEl(\"words\") when el.dataset.replaces).length is 0\n\n  answerDetails: ->\n    questions    = @options.metadata?.questions or []\n    return [] unless questions.length > 0\n    details = []\n\n    for q in questions\n      correctAnswer = _.find q.answers, (a) -> a.correct == true\n      isCorrect = @guesses.includes(q.question.content)\n      questionDetails = {\n        question: q.question,\n        answer: _.find q.answers, (a) -> a.correct == isCorrect\n      }\n      details.push questionDetails\n\n    details\n\n  endGame: ->\n    super\n\n    for el in @getEl(\"words\") when el.dataset.replaces\n      el.classList.add \"active\"\n      @transform el, { scale: 0.8, opacity: 0 }\n\n      do (el) =>\n        window.setTimeout =>\n          replaces = el.dataset.replaces\n          delete el.dataset.replaces\n          el.innerHTML = replaces\n          el.classList.remove(\"active\", \"word-incorrect\")\n          @transform el, { scale: 1, opacity: 1 }\n        , 600\n\n    @submit()\n\n\n\nmodule.exports = StrikeoutView\n","module.exports = {\"title\":\"table\",\"display\":\"Table\",\"category\":\"Content\",\"description\":\"Display tabular information\",\"features\":{\"narration\":true,\"social\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"\"},\"caption\":{\"type\":\"html\"},\"rows\":{\"min\":1,\"max\":50,\"type\":[{\"help\":\"To include an empty cell in any row, insert a space (\\\" \\\") in that position.\\n\",\"cells\":{\"min\":1,\"max\":5,\"type\":[{\"type\":\"html\"}]}}]},\"style\":{\"header\":{\"display\":\"Header Row\",\"type\":\"boolean\",\"default\":true,\"help\":\"Make the first row in the table a header.\"},\"condensed\":{\"type\":\"boolean\",\"default\":false,\"help\":\"Present more information by condensing the content.\"},\"full-width\":{\"type\":\"boolean\",\"default\":true,\"help\":\"Stretch the table to the width of the device.\"}}},\"examples\":[{\"subtype\":\"table\",\"title\":\"Product Information\",\"style\":{\"header\":true,\"condensed\":false,\"full-width\":true},\"rows\":[{\"cells\":[\"Name\",\"Format\",\"Price\"]},{\"cells\":[\"Product X\",\"Phone\",\"$1,199\"]},{\"cells\":[\"Product Y\",\"Laptop\",\"$3,499\"]},{\"cells\":[\"Product Z\",\"Tablet\",\"$779\"]}],\"caption\":\"All information is up to date as of July 2019.\"}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (caption, classes, continueBtnText, doneText, hasNarration, hasPrompt, i18n, isNumber, longestRow, prompt, rows, style, submitUp, title, undefined) {\nbuf.push(\"<div class=\\\"content-fit content-scroll content-ver text-center block-v-md\\\"><div class=\\\"content-scroll-inner block-v-md\\\"><h1 class=\\\"text-center fade-in\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"table-container\\\"><div class=\\\"table-wrapper\\\"><table\" + (jade.cls(['table','slide-up',classes], [null,null,true])) + \"><tbody>\");\n// iterate rows\n;(function(){\n  var $$obj = rows;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var row = $$obj[i];\n\nbuf.push(\"<tr class=\\\"table-row\\\">\");\n// iterate longestRow.cells\n;(function(){\n  var $$obj = longestRow.cells;\n  if ('number' == typeof $$obj.length) {\n\n    for (var col = 0, $$l = $$obj.length; col < $$l; col++) {\n      var n = $$obj[col];\n\nvar el = row.cells[col] || \"\"\nif ( style.header && i === 0)\n{\nbuf.push(\"<th class=\\\"table-cell\\\">\" + (null == (jade_interp = el) ? \"\" : jade_interp) + \"</th>\");\n}\nelse\n{\nbuf.push(\"<td\" + (jade.attr(\"align\", isNumber(el) && \"right\", true, false)) + \" class=\\\"table-cell\\\"><div\" + (jade.cls(['slide-up',\"delay-\" + (i) + \"\"], [null,true])) + \">\" + (null == (jade_interp = el) ? \"\" : jade_interp) + \"</div></td>\");\n}\n    }\n\n  } else {\n    var $$l = 0;\n    for (var col in $$obj) {\n      $$l++;      var n = $$obj[col];\n\nvar el = row.cells[col] || \"\"\nif ( style.header && i === 0)\n{\nbuf.push(\"<th class=\\\"table-cell\\\">\" + (null == (jade_interp = el) ? \"\" : jade_interp) + \"</th>\");\n}\nelse\n{\nbuf.push(\"<td\" + (jade.attr(\"align\", isNumber(el) && \"right\", true, false)) + \" class=\\\"table-cell\\\"><div\" + (jade.cls(['slide-up',\"delay-\" + (i) + \"\"], [null,true])) + \">\" + (null == (jade_interp = el) ? \"\" : jade_interp) + \"</div></td>\");\n}\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</tr>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var row = $$obj[i];\n\nbuf.push(\"<tr class=\\\"table-row\\\">\");\n// iterate longestRow.cells\n;(function(){\n  var $$obj = longestRow.cells;\n  if ('number' == typeof $$obj.length) {\n\n    for (var col = 0, $$l = $$obj.length; col < $$l; col++) {\n      var n = $$obj[col];\n\nvar el = row.cells[col] || \"\"\nif ( style.header && i === 0)\n{\nbuf.push(\"<th class=\\\"table-cell\\\">\" + (null == (jade_interp = el) ? \"\" : jade_interp) + \"</th>\");\n}\nelse\n{\nbuf.push(\"<td\" + (jade.attr(\"align\", isNumber(el) && \"right\", true, false)) + \" class=\\\"table-cell\\\"><div\" + (jade.cls(['slide-up',\"delay-\" + (i) + \"\"], [null,true])) + \">\" + (null == (jade_interp = el) ? \"\" : jade_interp) + \"</div></td>\");\n}\n    }\n\n  } else {\n    var $$l = 0;\n    for (var col in $$obj) {\n      $$l++;      var n = $$obj[col];\n\nvar el = row.cells[col] || \"\"\nif ( style.header && i === 0)\n{\nbuf.push(\"<th class=\\\"table-cell\\\">\" + (null == (jade_interp = el) ? \"\" : jade_interp) + \"</th>\");\n}\nelse\n{\nbuf.push(\"<td\" + (jade.attr(\"align\", isNumber(el) && \"right\", true, false)) + \" class=\\\"table-cell\\\"><div\" + (jade.cls(['slide-up',\"delay-\" + (i) + \"\"], [null,true])) + \">\" + (null == (jade_interp = el) ? \"\" : jade_interp) + \"</div></td>\");\n}\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</tr>\");\n    }\n\n  }\n}).call(this);\n\nif ( caption)\n{\nbuf.push(\"<tr class=\\\"table-row\\\"><td\" + (jade.attr(\"colspan\", longestRow.cells.length, true, false)) + \" align=\\\"center\\\" class=\\\"table-cell\\\"><small>\" + (null == (jade_interp = caption) ? \"\" : jade_interp) + \"</small></td></tr>\");\n}\nbuf.push(\"</tbody></table></div></div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"caption\" in locals_for_with?locals_for_with.caption:typeof caption!==\"undefined\"?caption:undefined,\"classes\" in locals_for_with?locals_for_with.classes:typeof classes!==\"undefined\"?classes:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"isNumber\" in locals_for_with?locals_for_with.isNumber:typeof isNumber!==\"undefined\"?isNumber:undefined,\"longestRow\" in locals_for_with?locals_for_with.longestRow:typeof longestRow!==\"undefined\"?longestRow:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"rows\" in locals_for_with?locals_for_with.rows:typeof rows!==\"undefined\"?rows:undefined,\"style\" in locals_for_with?locals_for_with.style:typeof style!==\"undefined\"?style:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView = require(\"views/slide\")\n\nclass TableView extends SlideView\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap .btn-done\": \"submit\"\n\n  serialize: ->\n    data = super\n\n    data.isNumber   = (el) -> /^[\\.\\,\\d\\$\\%\\-\\s]+$/.test(el)\n    data.longestRow = _.max data.rows, (r) -> r.cells?.length || 0\n    data.classes    = _.chain(data.style)\n      .omit(\"scrollable\", \"header\")\n      .reduce(((str, v, k) -> if v then str + \" table-#{k}\" else str), \"\")\n      .value()\n\n    data\n\n  beforeShow: ->\n    @trigger(\"ui\", flexibleHeight: true)\n    table  = @findOne(\".table\")\n    parent = table.parentNode\n\n    if table.offsetWidth > parent.offsetWidth\n      @setState(true, \"scroll\")\n      parent.addEventListener \"scroll\", _.bind(@onScroll, this)\n      @onScroll(target: parent)\n    else\n      @setState(false, \"scroll\")\n\n  beforeHide: ->\n    @trigger(\"ui\", flexibleHeight: false)\n\n  onRefresh: ->\n    @beforeShow()\n\n  onScroll: (e) ->\n    el = e.target\n\n    if el.scrollLeft <= 0\n      @setState \"left\", \"scroll-pos\"\n    else if el.scrollLeft >= el.scrollWidth - el.offsetWidth\n      @setState \"right\", \"scroll-pos\"\n    else\n      @setState \"between\", \"scroll-pos\"\n\nmodule.exports = TableView\n","module.exports = {\"title\":\"tap-in-order\",\"display\":\"Select in Order\",\"category\":\"Relationships\",\"features\":{\"stars\":true,\"social\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"\"},\"list\":{\"display\":\"List items\",\"type\":[{\"type\":\"image\"}],\"min\":2,\"max\":6},\"reject\":{\"type\":\"boolean\",\"default\":false,\"display\":\"Reject Answers\",\"help\":\"Rejects answers tapped out of order.\\n\"},\"answer\":{\"text\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Answer Text\"},\"correct\":{\"type\":\"html\",\"default\":\"That's correct!\",\"display\":\"Correct Reinforcement\"},\"incorrect\":{\"type\":\"html\",\"default\":\"Not quite...\",\"display\":\"Incorrect Reinforcement\"},\"takeaway\":{\"type\":\"html\",\"default\":\"\",\"display\":\"Core Message\"}},\"game\":{\"timer\":{\"limit\":{\"type\":\"number\",\"default\":-1,\"display\":\"Time Limit (seconds)\"},\"out-of-time-prompt\":{\"type\":\"html\",\"display\":\"Out of time prompt\"}}},\"prompt\":{\"type\":\"html\",\"default\":\"Select each item in order\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"tap-in-order\",\"title\":\"Select in order\",\"reject\":false,\"list\":[\"img/examples/product-phone.png\",\"img/examples/product-laptop.png\",\"img/examples/product-tablet.png\"],\"answer\":{\"incorrect\":\"Not quite...\",\"correct\":\"That's correct!\",\"text\":\"X, Y, then Z is the correct order.\\n\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, dimensions, doneText, game, hasNarration, hasPrompt, i18n, prompt, submitUp, tappies, title, undefined) {\nif ( game && game.timer && game.timer.limit > 0 && !game.timer.isDisabled)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}\njade_mixins[\"image\"] = jade_interp = function(imageUrl, klass){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nbuf.push(\"<img\" + (jade.attr(\"src\", imageUrl, true, false)) + (jade.cls([klass], [true])) + \"/>\");\n};\nbuf.push(\"<div class=\\\"slide-parent content-fill text-center block-v-md\\\"><div class=\\\"tappies-parent content-fill\\\"><div class=\\\"content-sm-ver content-md-ver content-lg-fill row\\\"><div class=\\\"title col-sm-12 col-lg-5 content-lg-ver block-v-md\\\"><h1 class=\\\"fade-in delay-3\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1></div><div class=\\\"col-sm-12 col-lg-7 content-lg-ver tappies\\\"><div class=\\\"row content-fill\\\">\");\n// iterate tappies\n;(function(){\n  var $$obj = tappies;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var tappy = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-true-index\", tappy.trueIndex, true, false)) + (jade.attr(\"data-original-index\", i, true, false)) + (jade.attr(\"data-content\", tappy.image, true, false)) + (jade.attr(\"style\", \"height: \" + (dimensions.height) + \"; width: \" + (dimensions.width) + \"\", true, false)) + (jade.cls(['tappy','block-md','delay-4','col-lg-12','col-sm-12','block-box-sizing',(i % 2 === 0 ? \"slide-right\" : \"slide-left\")], [null,null,null,null,null,null,true])) + \"><div class=\\\"block-dk tappy-child content-fill\\\"><div class=\\\"content-fill block-v-md\\\">\");\nif ( tappy.image)\n{\njade_mixins[\"image\"](tappy.image, 'img content-ver');\n}\nbuf.push(\"</div><div class=\\\"number-container text-lg\\\"><div\" + (jade.attr(\"data-true-index\", tappy.trueIndex, true, false)) + (jade.attr(\"data-original-index\", i, true, false)) + \" class=\\\"number block-dk text-bold\\\"></div></div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var tappy = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-true-index\", tappy.trueIndex, true, false)) + (jade.attr(\"data-original-index\", i, true, false)) + (jade.attr(\"data-content\", tappy.image, true, false)) + (jade.attr(\"style\", \"height: \" + (dimensions.height) + \"; width: \" + (dimensions.width) + \"\", true, false)) + (jade.cls(['tappy','block-md','delay-4','col-lg-12','col-sm-12','block-box-sizing',(i % 2 === 0 ? \"slide-right\" : \"slide-left\")], [null,null,null,null,null,null,true])) + \"><div class=\\\"block-dk tappy-child content-fill\\\"><div class=\\\"content-fill block-v-md\\\">\");\nif ( tappy.image)\n{\njade_mixins[\"image\"](tappy.image, 'img content-ver');\n}\nbuf.push(\"</div><div class=\\\"number-container text-lg\\\"><div\" + (jade.attr(\"data-true-index\", tappy.trueIndex, true, false)) + (jade.attr(\"data-original-index\", i, true, false)) + \" class=\\\"number block-dk text-bold\\\"></div></div></div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"dimensions\" in locals_for_with?locals_for_with.dimensions:typeof dimensions!==\"undefined\"?dimensions:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"tappies\" in locals_for_with?locals_for_with.tappies:typeof tappies!==\"undefined\"?tappies:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","GameView = require \"views/base/game\"\nDevice   = require(\"lib/device\")\n\nclass TapInOrderView extends GameView\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap .tappy\":    \"tappyTouch\"\n    \"iostap .btn-done\": \"endGame\"\n\n  serialize: ->\n    data = super\n    data.tappies = _.chain(data.list)\n      .filter((el) -> el)\n      .map (el, i) ->\n        image: el\n        trueIndex: i\n      .shuffle().value()\n\n    length  = data.tappies.length\n    useGrid = length >= 4\n\n    data.dimensions =\n      width:\n        \"#{if useGrid then 50 else 100}%\"\n      height:\n        \"#{100 / (if useGrid then (length + length % 2) / 2 else length)}%\"\n\n\n    return data\n\n  show: ->\n    super\n    @rejectIncorrectAnswer()\n    @initTapState()\n\n    @setEl @findOne(\".tappies-parent\"), \"tappiesParent\"\n    @setEl @findAll(\".tappy\"), \"tappies\"\n    @setEl @findOne(\".title\"), \"title\"\n    @setEl @findAll(\".number\"), \"numbers\"\n    @refreshTappy()\n\n    @enterGame()\n\n  onResize: ->\n    @setTappyHeight()\n\n  refreshTappy: ->\n    for el, i in @getEl \"tappies\"\n      el.classList.add(\"no-delay\")\n    @listenTo this, \"resize\", @onResize\n    @setTappyHeight()\n\n  onRefresh: ->\n    super\n    @fillTaps()\n\n  rejectIncorrectAnswer: ->\n    @reject = @options.data.reject\n\n  setTappyHeight: ->\n    parent = @getEl(\"tappiesParent\")\n    height = parent.offsetHeight\n\n    if Device.breakpoint([\"xs\", \"sm\"])\n      height -= @getEl(\"title\").offsetHeight\n\n    if @getEl(\"tappies\").item(0)?\n      @getEl(\"tappies\").item(0).parentNode.style.height = \"#{height}px\"\n    else\n      return\n\n  initTapState: ->\n    @tapsSoFar = []\n\n  isCorrectSoFar: ->\n    orderReducer = (order, tap, i) -> order and tap is i.toString()\n    return @tapsSoFar.reduce orderReducer, true\n\n  isCorrect: ->\n    @initTapState() if not @tapsSoFar?\n    return @isCorrectSoFar() and @tapsSoFar.length is @options.data.list.length\n\n  fillTap: (num) ->\n    parent   = num.parentNode.parentNode.parentNode\n    arrayPos = @tapsSoFar.indexOf num.dataset.trueIndex\n\n    if arrayPos > -1\n      num.innerHTML = arrayPos + 1\n      parent.classList.add \"active\"\n      parent.dataset.filledIndex = arrayPos\n    else\n      num.innerHTML = \"\"\n      parent.classList.remove \"active\"\n      parent.dataset.filledIndex = \"\"\n\n  fillTaps: ->\n    @fillTap num for num, i in @getEl(\"numbers\")\n\n  showAnswer: ->\n    if @isCorrect()\n      @el.classList.add \"correct-#{@isCorrect()}\"\n      @el.classList.remove \"correct-#{not @isCorrect()}\"\n    else\n      for el, i in @getEl \"tappies\"\n        if el.dataset.filledIndex isnt el.dataset.trueIndex\n          el.classList.add \"incorrect\"\n        else\n          el.classList.remove \"incorrect\"\n\n  keepTapsBefore: (index) ->\n    indexOfTap = @tapsSoFar.indexOf(index)\n    if indexOfTap > 0\n      @tapsSoFar = @tapsSoFar.slice(0, indexOfTap) if indexOfTap > -1\n    else if indexOfTap is 0\n      @tapsSoFar = []\n\n  onRejected: (e) ->\n    @currentTappy.classList.add \"incorrect\"\n    window.setTimeout ( =>\n      @currentTappy.classList.remove \"incorrect\"\n    ), 400\n\n  tappyTouch: (e) ->\n    @currentTappy = e.currentTarget\n    touchedIndex = e.currentTarget.dataset.trueIndex\n    touchedOrigIndex = e.currentTarget.dataset.originalIndex\n    alreadyTapped = @tapsSoFar.indexOf(touchedIndex) isnt -1\n    if alreadyTapped\n      @keepTapsBefore touchedIndex\n    else\n      @tapsSoFar.push touchedIndex\n\n    if @isCorrectSoFar() or not @reject\n      @fillTaps @getEl(\"numbers\")[e.currentTarget.dataset.originalIndex]\n    else\n      @keepTapsBefore touchedIndex\n      @onRejected() if @reject\n\n    @setState(\"touched\")\n\n  answerDetails: ->\n    questions    = @options.metadata?.questions or []\n    return [] unless questions.length > 0\n    question = questions[0]\n\n    isCorrect = @isCorrect()\n    answer = _.find question.answers, (a) -> a.correct is isCorrect\n    answerElements = _.map @tapsSoFar, (idx) =>\n      _.find @getEl(\"tappies\"), (tappy) ->\n        @$(tappy).data(\"true-index\") is Number(idx)\n    answerContent = _.map answerElements, (el) -> @$(el).data(\"content\")\n    answer.content = answerContent.join(\", \")\n\n    details = question: questions[0].question, answer: answer\n\n    [ details ]\n\n  endGame: ->\n    super\n\n    @submit()\n\nmodule.exports = TapInOrderView\n","module.exports = {\"title\":\"text-and-images\",\"display\":\"Text And Images\",\"category\":\"Content\",\"description\":\"Display rich content and images.\",\"visible\":false,\"features\":{\"narration\":true,\"social\":true},\"model\":{\"title\":{\"type\":\"html\"},\"content\":{\"min\":1,\"max\":10,\"type\":[{\"text\":{\"type\":\"html\"},\"image\":{\"type\":\"image\",\"display\":\"Image\"}}]},\"prompt\":{\"type\":\"html\",\"default\":\"Scroll to see more\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"text-and-images\",\"title\":\"About Product Z\",\"content\":[{\"text\":\"Product Z is our third product in the Product line. It is three times as good as product X, but only takes up one third of the space. Don't believe us? See below:\\n\",\"image\":\"img/examples/product-tablet.png\"},{\"text\":\"Review the following interactive slides to learn more about Product Z.\\n\"}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (content, continueBtnText, doneText, hasNarration, hasPrompt, i18n, prompt, submitUp, title, undefined) {\njade_mixins[\"image\"] = jade_interp = function(imageUrl, klass){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nbuf.push(\"<img\" + (jade.attr(\"src\", imageUrl, true, false)) + (jade.cls([klass], [true])) + \"/>\");\n};\nbuf.push(\"<div class=\\\"content-md content-fill\\\"><div class=\\\"content-scroll content-sm-scroll content-md-scroll block-v-lg fade-in\\\"><div class=\\\"content-scroll-inner hide-overflow block-h-xl\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-lg-10 col-lg-offset-1\\\"><h1 class=\\\"text-center slide-down\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1>\");\n// iterate content\n;(function(){\n  var $$obj = content;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var item = $$obj[i];\n\nbuf.push(\"<div\" + (jade.cls(['fade-in',\"delay-\" + (i + 1) + \"\"], [null,true])) + \">\");\nif ( item.text)\n{\nbuf.push(\"<div class=\\\"text-md\\\">\" + (null == (jade_interp = item.text) ? \"\" : jade_interp) + \"</div>\");\n}\nif ( item.image)\n{\nbuf.push(\"<p class=\\\"text-center block-v-md\\\">\");\njade_mixins[\"image\"](item.image, 'scrollable-image');\nbuf.push(\"</p>\");\n}\nbuf.push(\"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var item = $$obj[i];\n\nbuf.push(\"<div\" + (jade.cls(['fade-in',\"delay-\" + (i + 1) + \"\"], [null,true])) + \">\");\nif ( item.text)\n{\nbuf.push(\"<div class=\\\"text-md\\\">\" + (null == (jade_interp = item.text) ? \"\" : jade_interp) + \"</div>\");\n}\nif ( item.image)\n{\nbuf.push(\"<p class=\\\"text-center block-v-md\\\">\");\njade_mixins[\"image\"](item.image, 'scrollable-image');\nbuf.push(\"</p>\");\n}\nbuf.push(\"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"content\" in locals_for_with?locals_for_with.content:typeof content!==\"undefined\"?content:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","ScrollingMediaView = require(\"../scrolling-media/view\")\n\nclass TextAndImagesView extends ScrollingMediaView\n  serialize: ->\n    data = super\n    content = []\n\n    for { text, image } in data.content\n      if text\n        text = written.wrapInTag(text, \"p\") unless /^<p>/.test(text)\n        content.push { content: text, contentType: \"text\" }\n      if image\n        content.push { content: image, contentType: \"image\" }\n\n    data.content = content\n\n    data\n\nmodule.exports = TextAndImagesView\n","module.exports = {\"title\":\"text-sequence\",\"display\":\"Text Sequence\",\"category\":\"Content\",\"links\":{\"academy\":\"https://academy.edapp.com/how-to-text-sequence-template/\"},\"features\":{\"narration\":true,\"social\":true},\"description\":\"Display a sequence of text\",\"model\":{\"title\":{\"type\":\"html\",\"default\":\"\"},\"content\":{\"min\":1,\"max\":32,\"type\":[{\"type\":\"html\",\"default\":\"\"}]},\"label\":{\"type\":\"html\",\"default\":\"Step\",\"help\":\"The label of each step in the sequence. eg. Step 1 of 4\"},\"canGoBack\":{\"type\":\"boolean\",\"default\":false,\"display\":\"Allow Free Navigation\",\"help\":\"Let users return to previous steps by tapping or clicking on them.\\n\"},\"prompt\":{\"type\":\"html\",\"default\":\"Read more\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"text-sequence\",\"title\":\"About Product Y\",\"stepTitle\":\"Step\",\"canGoBack\":true,\"content\":[\"Product Y builds on everything our customers loved about ProductX\",\"It is the focus of the upcoming sales cycle\",\"You should mention Product Y to existing customers who enjoy Product X\",\"Product Y will have a discounted price at launch\"]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (canGoBack, content, continueBtnText, doneText, hasNarration, hasPrompt, i18n, prompt, submitUp, title, undefined) {\nbuf.push(\"<div class=\\\"steps-container content-fill\\\"><div class=\\\"steps text-center\\\">\");\nif ( title)\n{\nbuf.push(\"<div data-step='0' class=\\\"title tight block-v-md fade-in delay-3\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</div>\");\n}\n// iterate content\n;(function(){\n  var $$obj = content;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var item = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-step\", i + 1, true, false)) + \" class=\\\"step fade-in tight block-v-md\\\">\" + (null == (jade_interp = item) ? \"\" : jade_interp) + \"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var item = $$obj[i];\n\nbuf.push(\"<div\" + (jade.attr(\"data-step\", i + 1, true, false)) + \" class=\\\"step fade-in tight block-v-md\\\">\" + (null == (jade_interp = item) ? \"\" : jade_interp) + \"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\nif ( content.length > 0)\n{\nif ( canGoBack)\n{\nbuf.push(\"<div class=\\\"btn btn-muted btn-circular btn-up\\\"><span class=\\\"icon icon-chevron-up text-lg\\\"></span></div>\");\n}\nbuf.push(\"<div class=\\\"btn btn-muted btn-circular btn-down\\\"><span class=\\\"icon icon-chevron-down text-lg\\\"></span></div>\");\n}\nbuf.push(\"</div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"canGoBack\" in locals_for_with?locals_for_with.canGoBack:typeof canGoBack!==\"undefined\"?canGoBack:undefined,\"content\" in locals_for_with?locals_for_with.content:typeof content!==\"undefined\"?content:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView = require(\"views/slide\")\n\nclass TextSequenceView extends SlideView\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap\": \"onTap\"\n    \"iostap .btn-done\": \"submit\"\n\n  serialize: ->\n    data = super\n    data.content = _.compact data.content\n    data.hasPrompt = true\n    data\n\n  beforeHide: ->\n    @trigger(\"ui\", flexibleHeight: false)\n\n  beforeShow: (preventTransition) ->\n    @trigger(\"ui\", flexibleHeight: true)\n\n    @setEl @findOne(\".steps\"), \"steps\"\n    @setEl @findOne(\".slide-footer-prompt\"), \"prompt\"\n    @setEl @findOne(\".btn-up\"), \"btn-up\"\n    @setEl @findOne(\".btn-down\"), \"btn-down\"\n\n    for child, i in @getEl(\"steps\").children\n      child.classList.remove \"active\"\n      @transform child, { opacity: \"\", transition: \"\" }\n\n    return unless @getEl(\"steps\")\n\n    @transition @getEl(\"steps\"),\n      if preventTransition then \"none\" else \"all 300ms\"\n\n    @currentIndex = 0\n    @totalLength  = @getEl(\"steps\").children.length\n    @showNextStep(true)\n\n  onTap: (e) ->\n    if (e?.detail?.clientY) < @el.offsetHeight / 2 and\n       @currentIndex > 0 and\n       @options.data.canGoBack\n      @currentIndex--\n      @showNextStep()\n    else if @currentIndex < @totalLength - 1\n      @currentIndex++\n      @showNextStep()\n\n      if @currentIndex is @totalLength - 1\n        @setState(\"touched\")\n\n  showNextStep: (withoutPrompt) ->\n    @transformSteps()\n    @setPrompt() unless withoutPrompt\n\n  transformSteps: ->\n    steps = @getEl(\"steps\").children\n    step  = steps[@currentIndex]\n    step.classList.add(\"active\")\n\n    y = @el.offsetHeight / 2 - (step.offsetTop + step.offsetHeight / 2)\n\n    @getEl(\"btn-up\").style.opacity = @currentIndex / (@totalLength - 1)\n    @getEl(\"btn-down\").style.opacity = 1 - @currentIndex / (@totalLength - 1)\n\n    if y < -@getEl(\"steps\").firstChild.offsetHeight / 2\n      @trigger \"scroll\", null, \"middle\"\n    else\n      @trigger \"scroll\", null, \"top\"\n\n    for child, i in steps\n      @transform child,\n        transition: \"all 900ms\"\n        opacity:\n          if i <= @currentIndex then 1 - (@currentIndex - i) / @totalLength\n          else 0\n\n    @transform @getEl(\"steps\"), { y }\n\n  setPrompt: ->\n    index = @currentIndex\n    index += 1 unless @options.data.title\n    preposition = i18n('text-sequence.of') || 'of'\n    @getEl(\"prompt\").innerHTML =\n      if index > 0 or not @options.data.title\n        \"\"\"\n          #{@options.data.label} #{index} #{preposition} #{@options.data.content.length}\n        \"\"\"\n      else\n        @options.data.prompt\n\n  refresh: (params) ->\n    for item, i in _.compact params.data.content\n      changed = i if content and @options.data.content[i] isnt item\n\n    if params.data.title isnt @options.data.title\n      changed = -1\n\n    super\n\n    if changed?\n      @beforeShow(true)\n      @el.classList.add(\"no-transition\")\n      @onTap() while @currentIndex < changed\n      window.setTimeout (=>\n        @transition @getEl(\"steps\"), \"all 300ms\"\n        @el.classList.remove(\"no-transition\")\n      ), 1\n    else\n      @beforeShow()\n\n  screenshot: ->\n    @currentIndex = -1\n\n    new Promise (resolve, reject) =>\n      getPages = (images = []) =>\n        if @currentIndex < @totalLength - 1\n          @currentIndex++\n          @showNextStep()\n          @collateScreenshots(images)\n            .then(getPages)\n            .catch(reject)\n        else\n          resolve(images)\n\n      getPages()\n\nmodule.exports = TextSequenceView\n","module.exports = {\"title\":\"title\",\"display\":\"Title Slide\",\"category\":\"Content\",\"features\":{\"narration\":true},\"description\":\"Introduce your lesson\",\"model\":{\"title\":{\"type\":\"html\",\"default\":\"A title slide\"},\"subtitle\":{\"type\":\"html\",\"default\":\"An optional subtitle\",\"required\":false},\"buttonText\":{\"type\":\"html\",\"display\":\"Button text\",\"default\":\"OK, let's go!\"},\"exitButton\":{\"type\":\"boolean\",\"default\":true,\"display\":\"Exit Button\",\"help\":\"Give users the option to leave the lesson from this slide.\"}}}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (buttonText, config, continueBtnText, doneText, hasNarration, hasPrompt, i18n, prompt, submitUp, subtitle, title) {\nbuf.push(\"<div class=\\\"content-scroll content-fit content-ver text-center block-v-md\\\"><div class=\\\"content-scroll-inner\\\"><div class=\\\"block-v-md\\\"><h1 class=\\\"slide-up\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1>\");\nif ( subtitle)\n{\nbuf.push(\"<div class=\\\"slide-up delay-1 text-md\\\">\" + (null == (jade_interp = subtitle) ? \"\" : jade_interp) + \"</div>\");\n}\nbuf.push(\"</div><div class=\\\"block-v-md\\\"><div class=\\\"btn btn-solid btn-next slide-up delay-2\\\">\" + (null == (jade_interp = buttonText) ? \"\" : jade_interp) + \"</div></div></div></div>\");\nif ( config.contextRequiresExitButton)\n{\nbuf.push(\"<div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");\n}}.call(this,\"buttonText\" in locals_for_with?locals_for_with.buttonText:typeof buttonText!==\"undefined\"?buttonText:undefined,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"subtitle\" in locals_for_with?locals_for_with.subtitle:typeof subtitle!==\"undefined\"?subtitle:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView = require(\"views/slide\")\n\nclass TitleView extends SlideView\n  template: require(\"./template\")\n\n  serialize: ->\n    data = super\n    data.continueBtnText = i18n(\"buttons.close-lesson\")\n    data.hasPrompt = @options.scorm or not data.exitButton\n    data\n\n  events: ->\n    \"iostap .btn-next\": \"next\"\n    \"iostap .btn-done\": \"exit\"\n\n  beforeShow: ->\n    @trigger(\"ui\", flexibleHeight: true)\n\n  beforeHide: ->\n    @trigger(\"ui\", flexibleHeight: false)\n\nmodule.exports = TitleView\n","module.exports = {\"title\":\"url\",\"display\":\"External URL\",\"category\":\"Advanced\",\"description\":\"Display a webpage within your lesson\",\"model\":{\"url\":{\"type\":\"string\",\"display\":\"URL\",\"default\":\"https://edapp.com\",\"transform\":false,\"help\":\"Include the full URL that points to your content. eg. https://edapp.com/ </br> Some URLs can't be displayed. For more information, click <a href=\\\"https://www.edapp.com/blog/custom-url-template/\\\" target=\\\"_blank\\\">here</a>.\\n\"},\"background\":{\"type\":\"string\",\"default\":\"\",\"display\":\"Background Color\",\"help\":\"This color (eg. \\\"orange\\\", \\\"#f90\\\", \\\"rgb(255,160,0)\\\") will be used for the background of the entire screen in lightbox mode.\\n\"},\"button\":{\"text\":{\"type\":\"text\",\"default\":\"Continue\",\"display\":\"Done text\"},\"position\":{\"type\":\"select\",\"enum\":[\"Below\",\"Overlay Bottom\",\"Overlay Top\"],\"default\":\"Below\",\"help\":\"Choose the best position based on your content.\\n\"}}}}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (Date, button, i18n, url) {\nbuf.push(\"<div class=\\\"full-screen content-fill hide-overflow\\\"><iframe\" + (jade.attr(\"src\", url ? (url + (url.includes(\"?\") ? \"&\" : \"?\") + \"timestamp=\" + Date.now()) : '', true, false)) + \" type=\\\"text/html\\\" frameborder=\\\"0\\\" sandbox=\\\"allow-scripts allow-same-origin allow-forms\\\" class=\\\"url-object\\\"></iframe><div class=\\\"exit-btn btn\\\">\" + (jade.escape(null == (jade_interp = (button && button.text) || i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div>\");}.call(this,\"Date\" in locals_for_with?locals_for_with.Date:typeof Date!==\"undefined\"?Date:undefined,\"button\" in locals_for_with?locals_for_with.button:typeof button!==\"undefined\"?button:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"url\" in locals_for_with?locals_for_with.url:typeof url!==\"undefined\"?url:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView           = require(\"views/slide\")\nScormAttempt        = require \"models/scormAttempt\"\n{ Session, Lesson } = Application.actions()\n\nclass URLView extends SlideView\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap .exit-btn\": \"submit\"\n\n  beforeShow: ->\n    position = @options.data.button?.position?.toLowerCase() or \"below\"\n    @setState written.hyphenCase(position), \"exit-btn\"\n\n    @trigger \"ui\",\n      lightbox: @options.data.background or true\n      flexible: true\n      fullscreen: true\n\n    @onResize()\n\n  beforeHide: ->\n    @trigger \"ui\", { lightbox: false, flexible: false, fullscreen: false }\n\n  show: ->\n    @listenTo this, \"resize\", @onResize\n\n  onRefresh: ->\n    @beforeShow()\n    super\n\n  onResize: ->\n    if @currentState[\"exit-btn\"] is \"below\"\n      button = @findOne(\".exit-btn\")\n      iframe = @findOne(\".url-object\")\n\n      iframe.style.bottom = \"#{button.offsetHeight}px\"\n      iframe.style.height =\n        \"#{iframe.parentNode.offsetHeight - button.offsetHeight}px\"\n\nmodule.exports = URLView\n","module.exports = {\"title\":\"video-collection\",\"display\":\"Video Collection\",\"category\":\"Content\",\"description\":\"Tap to view video\",\"features\":{\"social\":true},\"model\":{\"title\":{\"type\":\"html\"},\"videos\":{\"type\":[{\"url\":{\"type\":\"video\",\"display\":\"Video\"},\"thumbnail\":{\"type\":\"image\",\"help\":\"Recommended size  600  200px\"},\"title\":{\"type\":\"html\"},\"duration\":{\"type\":\"number\",\"hidden\":true,\"default\":0}}],\"min\":2,\"max\":6},\"duration\":{\"type\":\"number\",\"hidden\":true,\"default\":0},\"stream\":{\"type\":\"boolean\",\"default\":true,\"display\":\"Play on Demand\",\"help\":\"Play this video on demand instead of downloading all at once. This is recommended for longer videos. This option requires the learner to have an active internet connection and does not work in offline mode.\\n\"},\"prompt\":{\"type\":\"text\",\"default\":\"Tap to view each video\"},\"doneText\":{\"type\":\"html\",\"default\":\"Continue\",\"display\":\"Done text\"}},\"examples\":[{\"subtype\":\"video-collection\",\"title\":\"Video Collection\",\"videos\":[{\"url\":\"video/example.mp4\",\"thumbnail\":\"img/examples/product-phone.png\",\"title\":\"Product X\"},{\"url\":\"video/example.mp4\",\"thumbnail\":\"img/examples/product-laptop.png\",\"title\":\"Product Y\"}]}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (config, continueBtnText, doneText, hasNarration, hasPrompt, i18n, playinline, prompt, submitUp, title, undefined, videos) {\njade_mixins[\"video-stream\"] = jade_interp = function(videoUrl, playsinline, controls, klass, poster){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nplayinline = playinline || true\ncontrols = controls || true\nklass = klass || 'video vjs-fluid'\nvar cloudinaryVideoFolderUrl = config.CLOUDINARY_CDN_URL+config.CLOUDINARY_VIDEO_FOLDER\nvar streamUrl = ''\nif ( videoUrl && videoUrl.indexOf(cloudinaryVideoFolderUrl) > -1)\n{\nstreamUrl = videoUrl.replace(cloudinaryVideoFolderUrl, cloudinaryVideoFolderUrl+'sp_full_hd/')\nstreamUrl = streamUrl.replace('.mp4', '.m3u8')\n}\nbuf.push(\"<video\" + (jade.attr(\"webkit-playsinline\", playsinline, true, false)) + (jade.attr(\"controls\", controls, true, false)) + \" preload=\\\"auto\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + (jade.attr(\"poster\", poster, true, false)) + (jade.cls(['video-js',klass], [null,true])) + \"><source\" + (jade.attr(\"src\", videoUrl, true, false)) + \"/>\");\nif ( streamUrl)\n{\nbuf.push(\"<source\" + (jade.attr(\"src\", streamUrl, true, false)) + \"/>\");\n}\nbuf.push(\"</video>\");\n};\nbuf.push(\"<div class=\\\"tappies-parent block-v-lg content-fill text-center\\\"><div class=\\\"thumbnail-collection content-fill clearfix\\\"><div class=\\\"content\\\"><h1 class=\\\"title slide-down delay-3 tight block-v-md\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"tappies row\\\">\");\n// iterate videos\n;(function(){\n  var $$obj = videos;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var video = $$obj[i];\n\nvar double = \"col-sm-6\";\nvar single = \"col-md-8 col-md-offset-2 col-sm-12\";\nbuf.push(\"<div\" + (jade.attr(\"data-index\", i, true, false)) + (jade.cls(['tappy','slide-up','block-v-sm','block-box-sizing',\"delay-\" + (i + 1) + \" \" + (videos.length >= 4 ? double : single) + \"\"], [null,null,null,null,true])) + \"><div\" + (jade.attr(\"style\", (\n                video.thumbnail && \"background-image:url(\" + (video.thumbnail) + \")\"\n              ), true, false)) + (jade.cls(['tappy-child','block-dk',(video.thumbnail && video.title) ? \"dark\" : \"\"], [null,null,true])) + \">\");\nif ( video.title)\n{\nbuf.push(\"<div class=\\\"thumb-content text-lg text-bold block-md block-box-sizing\\\">\" + (null == (jade_interp = video.title) ? \"\" : jade_interp) + \"</div>\");\n}\nbuf.push(\"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var video = $$obj[i];\n\nvar double = \"col-sm-6\";\nvar single = \"col-md-8 col-md-offset-2 col-sm-12\";\nbuf.push(\"<div\" + (jade.attr(\"data-index\", i, true, false)) + (jade.cls(['tappy','slide-up','block-v-sm','block-box-sizing',\"delay-\" + (i + 1) + \" \" + (videos.length >= 4 ? double : single) + \"\"], [null,null,null,null,true])) + \"><div\" + (jade.attr(\"style\", (\n                video.thumbnail && \"background-image:url(\" + (video.thumbnail) + \")\"\n              ), true, false)) + (jade.cls(['tappy-child','block-dk',(video.thumbnail && video.title) ? \"dark\" : \"\"], [null,null,true])) + \">\");\nif ( video.title)\n{\nbuf.push(\"<div class=\\\"thumb-content text-lg text-bold block-md block-box-sizing\\\">\" + (null == (jade_interp = video.title) ? \"\" : jade_interp) + \"</div>\");\n}\nbuf.push(\"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div></div>\");\n// iterate videos\n;(function(){\n  var $$obj = videos;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var video = $$obj[i];\n\nbuf.push(\"<div class=\\\"video-details content-fill\\\"><div class=\\\"full-screen\\\"><span class=\\\"exit-video block-md icon icon-close text-xl\\\"></span></div><div class=\\\"full-screen video-container\\\">\");\njade_mixins[\"video-stream\"](video.url, true, true, \"video vjs-fluid multi-content\");\nbuf.push(\"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var video = $$obj[i];\n\nbuf.push(\"<div class=\\\"video-details content-fill\\\"><div class=\\\"full-screen\\\"><span class=\\\"exit-video block-md icon icon-close text-xl\\\"></span></div><div class=\\\"full-screen video-container\\\">\");\njade_mixins[\"video-stream\"](video.url, true, true, \"video vjs-fluid multi-content\");\nbuf.push(\"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"<div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"playinline\" in locals_for_with?locals_for_with.playinline:typeof playinline!==\"undefined\"?playinline:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined,\"videos\" in locals_for_with?locals_for_with.videos:typeof videos!==\"undefined\"?videos:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","Preloader = require \"lib/preload\"\nSlideView = require(\"views/slide\")\ndevice     = require(\"lib/device\")\n\nclass VideoCollectionView extends SlideView\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap .btn-done\":   \"submit\"\n    \"iostap .exit-video\": \"exitVideo\"\n    \"iostap .tappy\":      \"onTapThumbnail\"\n\n  serialize: ->\n    data = super\n\n    data.isShort = _.chain(data.videos)\n      .pluck(\"title\")\n      .sortBy(\"length\")\n      .last()\n      .value()\n      .length < 20\n\n    data.videos = _.filter(data.videos or [], (d) -> d.url)\n    data.hasPrompt = true\n    data\n\n  onResize: ->\n    length = @getEl(\"tappies\").children.length\n    height = @getEl(\"parent\").firstChild.offsetHeight - @getEl(\"title\").offsetHeight\n\n    if length >= 4\n      tappyHeight = (height * (1 + length / 10)) / length\n    else\n      tappyHeight = height / length\n\n    for el, i in @getEl(\"tappies\").children\n      el.style.height = \"#{tappyHeight}px\"\n\n  onRefresh: ->\n    @beforeShow()\n    @show()\n\n  beforeShow: ->\n    @setEl @findOne(\".tappies-parent\"), \"parent\"\n    @setEl @findOne(\".tappies\"), \"tappies\"\n    @setEl @findOne(\".title\"), \"title\"\n    @setEl @findAll(\".video-details\"), \"videoDetails\"\n\n    @videos =\n      for video in @findAll(\"video\")\n        player = window.videojs video, fluid: true\n        onExit = => window.setTimeout (=> @exitVideo()), 300\n        do (player) =>\n          player.on \"fullscreenchange\", =>\n            onExit() unless player.isFullscreen()\n    \n    if device.platform != \"browser\"\n      Application.publish(\"event:rotation-unlock\") {}\n    \n    @onResize()\n\n  show: ->\n    @listenTo this, \"resize\", @onResize\n    @toVisit = [0...@serialize().videos.length]\n\n  onTapThumbnail: (e) ->\n    @openVideo e.currentTarget, true\n\n  openVideo: (el, animate) ->\n    @currentIndex = parseInt(el.dataset.index, 10)\n    vidDetails    = @getEl(\"videoDetails\").item(@currentIndex)\n    @toVisit      = _.without @toVisit, @currentIndex\n\n    @setState(\"touched\") if _.isEmpty(@toVisit)\n    @setState(true, \"video\")\n\n    @trigger(\"ui\", lightbox: true)\n\n    player = @videos[@currentIndex]\n\n    player.ready =>\n      player.currentTime 0\n      player.play()\n\n    el.classList.add(\"visited\")\n    vidDetails.classList.toggle(\"no-transition\", not animate)\n    vidDetails.classList.add(\"active\")\n  \n  beforeHide: ->\n    if device.platform != \"browser\"\n      Application.publish(\"event:rotation-lock\") {}\n  \n  hide: ->\n    @exitVideo()\n    super(arguments...)\n\n  exitVideo: ->\n    vidDetails = @getEl(\"videoDetails\").item(@currentIndex)\n    vidDetails.classList.remove(\"no-transition\")\n    vidDetails.classList.remove(\"active\")\n    @trigger(\"ui\", lightbox: false)\n    @setState(false, \"video\")\n    @videos[@currentIndex]?.pause()\n\n  refresh: (params) ->\n    if @currentIndex?\n      @exitVideo()\n\n    super\n\nmodule.exports = VideoCollectionView\n","module.exports = {\"title\":\"video-contribution\",\"display\":\"Video\",\"category\":\"Peer Learning\",\"description\":\"Video Upload\",\"features\":{\"social\":true},\"model\":{\"question\":{\"id\":{\"type\":\"uuid\",\"hidden\":true},\"content\":{\"type\":\"html\"}},\"prompt\":{\"type\":\"html\",\"default\":\"Choose a video to upload\"}},\"examples\":[{\"subtype\":\"video-contribution\",\"question\":{\"id\":\"#GENUUID#\",\"content\":\"Contribute to peer learning by uploading a video\"}}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, doneText, hasNarration, hasPrompt, i18n, prompt, submitUp, title) {\nbuf.push(\"<div class=\\\"block-v-xl content-fill\\\"><div class=\\\"content text-center\\\"><h1 class=\\\"fade-in\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"block-frame block-v-md slide-up delay-1\\\"><div class=\\\"upload-video btn btn-solid\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div><div class=\\\"upload-progress block-dk\\\"><div class=\\\"upload-progress-bar\\\"></div></div><div class=\\\"upload-success text-md block-v-md\\\">Your upload is complete.</div><div class=\\\"upload-error text-md block-v-md\\\">There was an error uploading your video.\\nPlease ensure your video is the correct format and try again.</div></div></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","InputView = require(\"views/input\")\n\nclass VideoContributionView extends InputView\n  template: require(\"./template\")\n\n  generateUUID: ->\n    'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace /[xy]/g, (c) ->\n      r = Math.random() * 16 | 0\n      v = if c is 'x' then r else (r & 0x3 | 0x8)\n      v.toString(16)\n\n  initialize: (options) ->\n    @uploadConfiguration = options.lessonConfiguration.upload\n    @uploadUUID = @generateUUID()\n    super\n\n  events: ->\n    \"iostap .btn-done\": \"nextSlide\"\n\n  serialize: ->\n    data = super\n    data.title = @options.data.question.content\n    data\n\n  show: ->\n    @setEl @findOne(\".upload-video\"), \"button\"\n    @setEl @findOne(\".upload-progress-bar\"), \"progress-bar\"\n    @createUploader()\n\n  createUploader: ->\n    configuration = window.__?.uploadConfiguration or @uploadConfiguration\n\n    @setState \"prompt\", \"upload\"\n\n    uploader = new qq.s3.FineUploaderBasic _.extend\n      debug: true\n      chunking:\n        enabled: true\n        concurrent: enabled: true\n      resume:\n        enabled: true\n      retry:\n        enableAuto: true\n      camera:\n        ios: true\n      validation:\n        acceptFiles: \"video/*\"\n      button: @getEl(\"button\")\n      objectProperties:\n        key: (id) =>\n          name      = uploader.getName(id)\n          extension = if ext = name.match(/[^\\.]+$/) then ext[0] else \"mp4\"\n          \"contributions/#{@uploadUUID}.#{extension}\"\n      callbacks:\n        onUpload: _.bind(@onUpload, this)\n        onStatusChange: _.bind(@onStatusChange, this)\n        onError: _.bind(@onError, this)\n        onComplete: _.bind(@onComplete, this)\n        onProgress: _.bind(@onProgress, this)\n\n    , configuration\n\n  onUpload: ->\n    @setState(\"in-progress\", \"upload\")\n    @transform @getEl(\"progress-bar\"),\n      scale: \"0, 1\",\n      transition: \"none\"\n\n  onStatusChange: console.log\n\n  onError: (id, name, reason) ->\n    @setState(\"prompt\")\n    @setState(\"error\", \"upload\")\n\n  onComplete: (id, name, response) ->\n    @uploadedFileKey = response.uploadKey\n    @setState(\"touched\")\n    @setState(\"complete\", \"upload\")\n    @transform @getEl(\"progress-bar\"), scale: \"1, 1\"\n\n  onProgress: (id, name, uploadedBytes, totalBytes) ->\n    @transform @getEl(\"progress-bar\"),\n      scale: \"#{uploadedBytes / totalBytes * 0.7}, 1\",\n      transition: \"all 300ms\"\n\n  userInput: ->\n    contribution:\n      video: @uploadedFileKey\n      question:\n        content: @options.data.question.content\n        id: @options.data.question.id\n\n\nmodule.exports = VideoContributionView\n","module.exports = {\"title\":\"video\",\"display\":\"Video Slide\",\"category\":\"Content\",\"description\":\"Play a video\",\"links\":{\"academy\":\"https://academy.edapp.com/how-to-video/\"},\"features\":{\"social\":true},\"model\":{\"title\":{\"type\":\"html\",\"default\":\"Video\"},\"url\":{\"type\":\"video\",\"default\":\"video/example.mp4\",\"display\":\"Video\"},\"duration\":{\"type\":\"number\",\"default\":0,\"hidden\":true},\"streamUrl\":{\"type\":\"string\",\"hidden\":true},\"stream\":{\"type\":\"boolean\",\"default\":true,\"display\":\"Play on Demand\",\"help\":\"Play this video on demand instead of downloading all at once. This is recommended for longer videos. This option requires the learner to have an active internet connection and does not work in offline mode.\\n\"},\"autoplay\":{\"type\":\"boolean\",\"display\":\"Auto Play\",\"default\":false,\"help\":\"Start playing the video automatically when the learner views this slide.\\n\"},\"autoprogress\":{\"type\":\"boolean\",\"display\":\"Auto Progress\",\"default\":false,\"help\":\"Continue to the next slide once this video is over.\\n\"},\"prompt\":{\"default\":\"Watch the video to continue\",\"type\":\"text\"},\"showSkipButton\":{\"type\":\"boolean\",\"default\":true,\"display\":\"Always Show Skip Button\",\"help\":\"Allow the learner to progress without watching the entire video. Learners can always skip the video after watching it once.\\n\"}}}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (config, continueBtnText, doneText, fullscreen, hasNarration, hasPrompt, i18n, playinline, prompt, submitUp, url) {\njade_mixins[\"video-stream\"] = jade_interp = function(videoUrl, playsinline, controls, klass, poster){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nplayinline = playinline || true\ncontrols = controls || true\nklass = klass || 'video vjs-fluid'\nvar cloudinaryVideoFolderUrl = config.CLOUDINARY_CDN_URL+config.CLOUDINARY_VIDEO_FOLDER\nvar streamUrl = ''\nif ( videoUrl && videoUrl.indexOf(cloudinaryVideoFolderUrl) > -1)\n{\nstreamUrl = videoUrl.replace(cloudinaryVideoFolderUrl, cloudinaryVideoFolderUrl+'sp_full_hd/')\nstreamUrl = streamUrl.replace('.mp4', '.m3u8')\n}\nbuf.push(\"<video\" + (jade.attr(\"webkit-playsinline\", playsinline, true, false)) + (jade.attr(\"controls\", controls, true, false)) + \" preload=\\\"auto\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + (jade.attr(\"poster\", poster, true, false)) + (jade.cls(['video-js',klass], [null,true])) + \"><source\" + (jade.attr(\"src\", videoUrl, true, false)) + \"/>\");\nif ( streamUrl)\n{\nbuf.push(\"<source\" + (jade.attr(\"src\", streamUrl, true, false)) + \"/>\");\n}\nbuf.push(\"</video>\");\n};\nbuf.push(\"<div class=\\\"slide-loader content\\\"></div><div class=\\\"content-fill full-screen\\\">\");\njade_mixins[\"video-stream\"](url, !fullscreen, true, \"video vjs-fluid multi-content\");\nbuf.push(\"</div><div class=\\\"content-fill\\\"><h2 class=\\\"video-error-msg content\\\">\" + (null == (jade_interp = i18n(\"video.not-available\")) ? \"\" : jade_interp) + \"</h2><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div></div>\");}.call(this,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"fullscreen\" in locals_for_with?locals_for_with.fullscreen:typeof fullscreen!==\"undefined\"?fullscreen:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"playinline\" in locals_for_with?locals_for_with.playinline:typeof playinline!==\"undefined\"?playinline:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"url\" in locals_for_with?locals_for_with.url:typeof url!==\"undefined\"?url:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView = require(\"views/slide\")\ndevice     = require(\"lib/device\")\n\n# This video JS is not loaded by slide.coffee to be able to control \nclass VideoView extends SlideView\n  template: require(\"./template\")\n\n  events: ->\n    \"iostap .btn-done\": \"next\"\n\n  initialize: ->\n    super\n\n    @options.data.showSkipButton ?= true\n\n    if @options.data.prompt is \"\"\n      @options.data.prompt = require(\"./model\").model.prompt.default\n\n  serialize: ->\n    data = super\n\n    data.continueBtnText = i18n(\"video.skip-video\")\n    data.hasPrompt = not data.showSkipButton\n\n    data\n\n  show: ->\n    return if not @options.data.url\n\n    videoJsPlayer = @el.querySelector(\".video-js\")\n    if videoJsPlayer\n      id = videoJsPlayer.getAttribute(\"id\")\n      @player = _.findWhere(@players, { id_: id })\n      if @player\n        @player.ready =>\n          @setState(\"success\", \"video\")\n          if @options.data.autoplay and window.location.href.split(\"thumbnail=true\").length isnt 2\n            @player.play()\n          if not @options.data.showSkipButton\n            @player.on \"timeupdate\", _.bind(@onTimeUpdate, this)\n            @player.on \"seeking\", _.bind(@onSeeking, this)\n\n        @player.on \"ended\", _.bind(@onVideoEnd, this)\n\n  beforeShow: (lmsMode) ->\n    if lmsMode\n      @options.data.autoplay = !lmsMode\n\n    @trigger(\"ui\", lightbox: true, flexibleHeight: true)\n\n    if device.platform != \"browser\"\n      Application.publish(\"event:rotation-unlock\") {}\n\n  beforeHide: ->\n    @trigger(\"ui\", lightbox: false, flexibleHeight: false)\n    if device.platform != \"browser\"\n      Application.publish(\"event:rotation-lock\") {}\n\n  onRefresh: ->\n    @beforeShow(true)\n    super\n\n  onVideoEnd: ->\n    @findOne(\".btn-done\").innerHTML = i18n(\"buttons.continue\")\n    @setState(\"touched\") unless @options.data.showSkipButton\n\n    @lesson.processInteraction\n      type: \"video\"\n      event: name: \"video-watched\"\n      metadata: @options.metadata\n    if @options.data.autoprogress\n      @submit()\n\n  onTimeUpdate: ->\n    unless @player.scrubbing() or @player.seeking()\n      @timeBeforeChange = @player.currentTime()\n\n  onSeeking: ->\n    if @currentState.state isnt \"touched\" and @player.currentTime() > @timeBeforeChange\n      @player.currentTime(@timeBeforeChange)\n\nmodule.exports = VideoView","module.exports = {\"title\":\"vimeo-video-embed\",\"display\":\"Vimeo Video\",\"category\":\"Content\",\"description\":\"Display a video hosted on Vimeo\",\"features\":{\"social\":true},\"model\":{\"title\":{\"type\":\"html\"},\"videoId\":{\"type\":\"html\",\"display\":\"Video ID\",\"help\":\"The ID of your video can be found by selecting the \\\"share\\\" option on Vimeo. eg.https://vimeo.com/87701971 is \\\"87701971\\\"\\n\"},\"autoplay\":{\"type\":\"boolean\",\"display\":\"Auto Play\",\"default\":false,\"help\":\"Start playing the video automatically when the user views this slide.\\n\"},\"autoProgress\":{\"type\":\"boolean\",\"display\":\"Auto Progress\",\"default\":true,\"help\":\"Continue to the next slide once this video is over.\\n\"},\"showSkipButton\":{\"type\":\"boolean\",\"default\":true,\"display\":\"Always Show Skip Button\",\"help\":\"Allow the learner to progress without watching the entire video. Learners can always skip the video after watching it once.\\n\"}},\"examples\":[{\"subtype\":\"vimeo\",\"videoId\":\"87701971\",\"showSkipButton\":true}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, doneText, hasNarration, i18n, skipButton, submitUp) {\nbuf.push(\"<div class=\\\"vimeo-content content-fill\\\"><div class=\\\"slide-loader content\\\"></div><div class=\\\"vimeo-player text-center content-fill\\\"></div><img class=\\\"vimeo-thumb content-ver block\\\"/><div class=\\\"video-controls content\\\"><div class=\\\"video-play\\\"></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \"><div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( skipButton)\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div></div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"skipButton\" in locals_for_with?locals_for_with.skipButton:typeof skipButton!==\"undefined\"?skipButton:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView = require(\"views/slide\")\nVimeoAPI  = require(\"lib/vimeo-api\")\n\nclass VimeoVideoEmbedView extends SlideView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-done\": \"submit\"\n    \"iostap\": \"playVideo\"\n\n  serialize: ->\n    data = super()\n\n    data.continueBtnText = i18n(\"video.skip-video\")\n    data.videoId   = data?.videoId.toString().match(/\\d+$/)?[0]\n    data.thumbnail = @videoData?.thumbnail_large\n    data.skipButton = if data?.showSkipButton? then data.showSkipButton else true\n\n    data\n\n  render: ->\n    super()\n    @createPlayer()\n\n    onLoad = (e) =>\n      @getEl(\"vimeo-thumb\").removeEventListener \"load\", onLoad\n      @getEl(\"vimeo-thumb\").removeEventListener \"error\", onLoad\n      @getEl(\"vimeo-thumb\").classList.add(\"show\")\n      @setState(\"paused\", \"video\")\n\n    @setEl @findOne(\".vimeo-thumb\"), \"vimeo-thumb\"\n    @getEl(\"vimeo-thumb\").addEventListener \"load\", onLoad\n    @getEl(\"vimeo-thumb\").addEventListener \"error\", onLoad\n\n  beforeShow: (lmsMode) ->\n    @trigger(\"ui\", lightbox: true, flexibleHeight: true)\n\n    if lmsMode\n      @options.data.autoplay = !lmsMode\n\n  beforeHide: ->\n    window.clearTimeout @ensureTimeout\n    window.clearTimeout @autoplayTimeout\n\n    @player?.pause?()\n    @trigger(\"ui\", lightbox: false, flexibleHeight: false)\n\n  playVideo: ->\n    if @player?\n      @player.play()\n    else\n      @ensure (=> @player?.element?.contentWindow), => @playVideo()\n\n  createPlayer: ->\n    @ensure (-> window.Vimeo?.Player?), =>\n      el = @findOne(\".vimeo-player\")\n\n      return unless el\n\n      @player = new Vimeo.Player el,\n        id: @serialize().videoId\n        width: el.offsetWidth\n        height: el.offsetHeight\n        title: false\n        portrait: false\n        byline: false\n        color: \"ffffff\"\n        autoplay: @options.data.autoplay\n        playsinline: false\n        allowfullscreen: true\n\n      @player.on \"ended\",  => @onVideoEnded()\n      @player.on \"play\",   => @setState(\"playing\", \"video\")\n      @player.on \"pause\",  => @setState(\"paused\", \"video\")\n      @player.on \"loaded\", => @setState(\"paused\", \"video\")\n\n      @loadThumbnail =>\n        if @options.data.autoplay and window.location.href.split(\"thumbnail=true\").length isnt 2\n          @autoplayTimeout = window.setTimeout (=> @playVideo()), 400\n\n  onRefresh: ->\n    window.clearTimeout @autoplayTimeout\n    window.clearTimeout @ensureTimeout\n\n    if @player?\n      @player.loadVideo @serialize().videoId\n    else\n      @createPlayer()\n\n    @setState(\"loading\", \"video\")\n    @getEl(\"vimeo-thumb\").classList.remove(\"show\")\n    @beforeShow(true)\n\n  submit: (e) ->\n    @player.off(\"play ended pause loaded\")\n    @$(@player.element).remove()\n    e?.stopImmediatePropagation()\n    super()\n\n  onVideoEnded: () ->\n    autoProgress = if @options.data?.autoProgress? then @options.data.autoProgress else true\n\n    if autoProgress\n      @submit()\n    else\n      @setState(\"touched\")\n      @findOne(\".btn-done\").innerHTML = i18n(\"buttons.continue\")\n\n\n  ensure: (cond, done) ->\n    do repeat = =>\n      if cond()\n        done()\n      else\n        @ensureTimeout = window.setTimeout(repeat, 100)\n\n  loadThumbnail: (done) ->\n    onError = =>\n      @getEl(\"vimeo-thumb\")?.src = \"img/video/empty.png\"\n      @setState(\"false\", \"thumb\")\n      done()\n\n    @request?.abort()\n    @request = $.ajax\n      type: \"GET\"\n      url: \"https://vimeo.com/api/v2/video/#{@serialize().videoId}.json\"\n      dataType: \"json\"\n      error: onError\n      success: ([ resp ] = []) =>\n        if resp\n          @videoData = resp\n          @getEl(\"vimeo-thumb\")?.src = resp.thumbnail_large\n          done()\n        else\n          onError()\n\nmodule.exports = VimeoVideoEmbedView\n","module.exports = {\"title\":\"youtube-video-embed\",\"display\":\"YouTube Video\",\"category\":\"Content\",\"description\":\"Display a video hosted on YouTube\",\"features\":{\"social\":true},\"model\":{\"title\":{\"type\":\"html\"},\"videoId\":{\"type\":\"string\",\"display\":\"YouTube Video ID\",\"help\":\"The ID of your video can be found in the video's URL after the equals sign. eg.The ID for https://www.youtube.com/watch?v=ZczmRIzr8r4 is ZczmRIzr8r4\\n\"},\"autoplay\":{\"type\":\"boolean\",\"display\":\"Auto Play\",\"default\":false,\"help\":\"Start playing the video automatically when the user views this slide.\\n\"},\"startTime\":{\"type\":\"int\",\"display\":\"Start Time\",\"default\":0,\"help\":\"When playing the video, jump ahead to the time specified (in seconds).\\n\"},\"endTime\":{\"type\":\"int\",\"display\":\"End Time\",\"help\":\"When playing the video, finish at the time specified (in seconds).\\n\"},\"autoProgress\":{\"type\":\"boolean\",\"display\":\"Auto Progress\",\"default\":true,\"help\":\"Continue to the next slide once this video is over.\\n\"},\"showSkipButton\":{\"type\":\"boolean\",\"default\":true,\"display\":\"Always Show Skip Button\",\"help\":\"Allow the learner to progress without watching the entire video. Learners can always skip the video after watching it once.\\n\"}},\"examples\":[{\"subtype\":\"youtube-video-embed\",\"videoId\":\"ZczmRIzr8r4\",\"showSkipButton\":true}]}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, doneText, hasNarration, i18n, skipButton, submitUp, videoId) {\nbuf.push(\"<div class=\\\"yt-content content-fill\\\"><div class=\\\"slide-loader content\\\"></div><div class=\\\"yt-player text-center content-fill\\\"></div><img\" + (jade.attr(\"src\", \"https://img.youtube.com/vi/\" + (videoId) + \"/maxresdefault.jpg\", true, false)) + \" class=\\\"yt-thumb content-ver block\\\"/><div class=\\\"video-controls content\\\"><div class=\\\"video-play\\\"></div></div><div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \"><div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( skipButton)\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div></div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"skipButton\" in locals_for_with?locals_for_with.skipButton:typeof skipButton!==\"undefined\"?skipButton:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined,\"videoId\" in locals_for_with?locals_for_with.videoId:typeof videoId!==\"undefined\"?videoId:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","SlideView  = require(\"views/slide\")\nYouTubeAPI = require(\"lib/youtube-api\")\ndevice     = require(\"lib/device\")\n\nclass YoutubeVideoEmbedView extends SlideView\n  template: require(\"./template\")\n\n  events:\n    \"iostap .btn-done\": \"submit\"\n    \"iostap\": \"playVideo\"\n    \n  needCaptions: ->\n    @options.data.videoId.indexOf('cc_load_policy') > -1\n\n  serialize: ->\n    data = super\n    data.submitUp = @needCaptions()\n    data.continueBtnText = i18n(\"video.skip-video\")\n    data.skipButton = if data?.showSkipButton? then data.showSkipButton else true\n\n\n    data\n\n  render: ->\n    super\n\n    @player = null\n    @waitForAPI()\n\n  beforeShow: (lmsMode) ->\n    @trigger(\"ui\", lightbox: true, flexibleHeight: true)\n    @setState(\"loading\", \"video\")\n    \n    if device.platform != \"browser\"\n      Application.publish(\"event:rotation-unlock\") {}\n    \n    if lmsMode\n      @options.data.autoplay = !lmsMode;\n\n    if @options.data.autoplay and window.location.href.split(\"thumbnail=true\").length isnt 2\n      @playVideo()\n\n  beforeHide: ->\n    window.clearTimeout @waitForAPITimeout\n    window.clearTimeout @checkForPlayerTimeout\n\n    @player?.stopVideo?()\n\n    if device.platform != \"browser\"\n      Application.publish(\"event:rotation-lock\") {}\n\n    @trigger(\"ui\", lightbox: false, flexibleHeight: false)\n\n  waitForAPI: ->\n    window.clearTimeout @waitForAPITimeout\n    do repeat = =>\n      if window.YT?.Player?\n        @createPlayer()\n      else\n        @waitForAPITimeout = window.setTimeout(repeat, 100)\n\n  playVideo: ->\n    window.clearTimeout @checkForPlayerTimeout\n    do repeat = =>\n      if @player?.playVideo?\n        @player?.playVideo?()\n      else\n        @checkForPlayerTimeout = window.setTimeout(repeat, 100)\n\n  createPlayer: ->\n    el = @findOne(\".yt-player\")\n\n    @player = new YT.Player el,\n      videoId: @options.data.videoId\n      playerVars:\n        autoplay: 0\n        controls: device.platform == 'Android'\n        modestbranding: 0\n        showinfo: 0\n        rel: 0\n        start: parseInt(@options.data.startTime, 10) or 0\n        end: parseInt(@options.data.endTime, 10) or undefined\n      events:\n        onReady: =>\n          @setState(\"paused\", \"video\")\n        onStateChange: (e) =>\n          switch e.data\n            when YT.PlayerState.PLAYING then @setState(\"playing\", \"video\")\n            when YT.PlayerState.PAUSED  then @setState(\"paused\", \"video\")\n            when YT.PlayerState.ENDED   then @onVideoEnded()\n\n  onRefresh: ->\n    @beforeShow(true)\n\n  onVideoEnded: () ->\n    autoProgress = if @options.data?.autoProgress? then @options.data.autoProgress else true\n\n    if autoProgress\n      @submit()\n    else\n      @setState(\"touched\")\n      @findOne(\".btn-done\").innerHTML = i18n(\"buttons.continue\")\n\n  submit: (e) ->\n    e?.stopImmediatePropagation()\n    super\n\nmodule.exports = YoutubeVideoEmbedView\n","rAF = window.requestAnimationFrame or\n      window.webkitRequestAnimationFrame or\n      window.mozRequestAnimationFrame or\n      window.oRequestAnimationFrame or\n      window.msRequestAnimationFrame or\n      (callback) -> window.setTimeout(callback, 1000 / 60)\n\nmodule.exports =\n  (func, duration = 300) ->\n    timestamp = Date.now()\n    isActive  = true\n\n    do repeat = ->\n      return unless isActive\n      diff = Math.min(Date.now() - timestamp, duration)\n      if diff < duration\n        func diff / duration\n        rAF(repeat)\n      else\n        func 1, true\n\n    cancel: -> isActive = false\n","# \ndiv = document.createElement(\"div\")\n\nmodule.exports =\n  toText: (content) ->\n    div.innerHTML = content\n    # only replace white space, not including &nbsp; it is used by our clients to keep non-breaking sentences\n    div.textContent.replace new RegExp(' +', 'g'), \" \"\n\n  toHTML: (content) ->\n    div.textContent = content\n    div.innerHTML\n","# Read the cookies and returns a dictionary object\nread = ->\n  cookie_details = document.cookie.split(';').map (c) ->\n    c       = c.trim()\n    details = c.split /\\=/\n    name: details[0], value: decodeURIComponent(details[1])\n  \n  cookies = {}\n  for { name, value } in cookie_details when name.match /^webed/\n    cookies[name.replace(\"webed_\", \"\")] = value\n  cookies\n\nmodule.exports = {\n  read\n}\n","options =\n  renderer: new window.marked.Renderer()\n  gfm: true\n  tables: true\n  breaks: false\n  pedantic: false\n  sanitize: false\n  smartLists: true\n  smartypants: true\n  headerPrefix: 'ed_'     # Prevent CSS overrides using 'id' for certain words, eg: 'content'\n\n# This method recurs through the slide data, matching each property against\n# the original model definition so that it can be processed according to\n# it's specified type. It handles multi-content properties by setting the\n# type using the \"keyType\" syntax. For example, the `title` on multiple choice\n# may have a `titleType` of \"image\", \"text\", etc.\nrecur = (obj, def, method, config = {}) ->\n  if not(obj?) or not(def?) or typeof obj isnt \"object\"\n    method(obj, def, config)\n  else if (Array.isArray or _.isArray) obj\n    obj.map (t, i) -> recur(t, def.type[0], method, config)\n  else\n    result = {}\n    for key, val of obj\n      t = obj[\"#{key}Type\"]\n      m = def[key]\n      if m?\n        m.type = t if t\n        m.type = m.types[0] if t is \"\" and m.types?\n      result[key] = recur(val, m, method, config)\n\n    result\n\n# Trim whitespace from the result, and ditch the paragraph if it's a one-liner.\n# Lists get a \"md-list\" class so we can apply some specific typographic styles.\nmarkdown = (content, config = {}) ->\n  try\n    nbLines = content.split?(/\\n|\\<p[^\\>]*\\>/).length\n    result  = window.marked content.toString(), options\n    if config.direction == 'rtl'\n      # swap opening/closing single quotes\n      result  = result.replace(/[\\u2018\\u2019]/g, ($1) => if ($1 == '\\u2018') then '\\u2019' else '\\u2018')\n      # swap opening/closing double quotes\n      result  = result.replace(/[\\u201c\\u201d]/g, ($1) => if ($1 == '\\u201c') then '\\u201d' else '\\u201c')\n    result  = result.replace(/(^\\s+|\\s+$)/g, \"\")\n    result  = result.replace(/\\<\\/?p[^\\>]*\\>/g, \"\") if nbLines <= 1\n    result  = result.replace(/\\<(ul|ol)\\>/g, \"<$1 class='md-list'>\")\n    result\n  catch err\n    content\n\nhasHtmlTags = (content) -> /<\\/?[a-z][\\s\\S]*>/i.test content\n\nhtml = (content) ->\n  if hasHtmlTags content\n    try\n      new DOMParser().parseFromString(content, 'text/html').body.innerHTML\n    catch err\n      content\n  else\n    content\n\ntransformTypes = [\"text\", \"html\"]\n\nshouldTransform = (def) ->\n  if def?.type or def?.types\n    _.includes(transformTypes, def.type or def.types[0])\n  else\n    false\n\n# For each value of type \"text\" or \"html\", process as markdown.\ntransform = (value, def, config = {}) ->\n  if shouldTransform(def) and not(def.transform is false)\n    transformed = markdown(value, config)\n    html transformed\n  else\n    value\n\n_processedSlides = {}\nprocessSlide = (data, type,  config = {}) ->\n  key   = sha1(JSON.stringify({ data, type }))\n  return _processedSlides[key] if _processedSlides[key]?\n\n  model  = require(\"engine/#{type}/model\")?.model\n  result = _.extend data, recur(data, model, transform, config)\n  _processedSlides[key] = result\n  return result\n\nprocessSlides = (data) ->\n  slide.data = processSlide(slide.data, slide.type, data.config) for slide in data.slides\n  data\n\nisURL = (c) ->\n  c?.indexOf('http') is 0 or c?.indexOf(\"fit_content_assets\") isnt -1\n\nformatContent = (f) -> (c) ->\n  if not isNaN(c)\n    if c.split('.').length > 1\n      parseFloat(c).toFixed(c.split('.')[1].length) #conserve trailing zeros\n    else \n      parseFloat(c)\n  else if isURL(c)\n    c\n  else\n    f(c)\n\nprocessMetadata = (func) -> (metadata) ->\n  for q, i in (metadata.questions or []) when q?.question?\n    metaDataPath = metadata.questions[i]\n    if q?.question?.content\n      metaDataPath.question.content =\n        formatContent(func)(q.question.content.toString())\n    if q?.question?.category\n      metaDataPath.question.category =\n        formatContent(func)(q.question.category.toString())\n\n    for answer, j in q.answers when answer?.content?\n      metaDataPath.answers[j].content =\n        formatContent(func)(answer.content.toString())\n  metadata\n\ndeepClone = _.compose JSON.parse, JSON.stringify\n\n# Metadata is a unified format for question/answers for each template.\n# We process it here so all templates receive the same markdown processing\n# Please use this data to render slides so data is displayed consistently\nprocessSlidesMetadata = (data) ->\n  for slide in data.slides when slide?.metadata?\n    slide.metadata =\n      processMetadata(markdown)(deepClone(slide.metadata))\n    slide.strippedMetadata =\n      processMetadata(removeMarkdown)(deepClone(slide.metadata))\n  data\n\nmodule.exports =\n  one: processSlide\n  oneMD: processMetadata(markdown)\n  oneSMD: processMetadata(removeMarkdown)\n  all: processSlides\n  allMD: processSlidesMetadata","pointerEventConf =\n  pointer:\n    isTouch: false\n    start: \"pointerdown\"\n    move: \"pointermove\"\n    end: \"pointerup\"\n  touch:\n    isTouch: true\n    start: \"touchstart\"\n    move: \"touchmove\"\n    end: \"touchend\"\n  mouse:\n    isTouch: false\n    start: \"mousedown\"\n    move: \"mousemove\"\n    end: \"mouseup\"\n\ndeviceType = if \"onpointerdown\" of window\n  \"pointer\"\nelse if \"ontouchstart\" of window\n  \"touch\"\nelse\n  \"mouse\"\n\n# check if platform is ios based on userAgent \nios = /iPad|iPhone|iPod/.test(navigator.userAgent) and not window.MSStream\nandroid = /android/i.test(navigator?.userAgent)\n# platform will be null when the document into which it's embedded has a different origin.\nplatform = window.frameElement?.dataset?.platform\n\nmodule.exports =\n  dpi: window.devicePixelRatio or 1\n  isIE: ->\n    document.documentMode or /Edge/.test(navigator?.userAgent or \"\")\n  # device.coffee will get called early in the stage before the global script from thomas script is injected\n  # which causing window.__?.slidedeck to always be undefined at this stage\n  platform:\n    window.__?.slidedeck?.platform or\n    platform or\n    (ios and \"iOS\") or\n    (android and \"Android\") or\n    \"browser\"\n\n  events:\n    pointer: pointerEventConf[deviceType]\n\n    resize: \"resize\"\n\n  breakpoint: (sizes) ->\n    sizes = [sizes] if typeof sizes is \"string\"\n    point =\n      if      window.innerWidth <= 600   then \"xs\"\n      else if window.innerWidth <= 768   then \"sm\"\n      else if window.innerWidth <= 1024  then \"md\"\n      else \"lg\"\n\n    if sizes then _.include(sizes, point) else point\n","###\n  lektiondestages.blogspot.se/2013/01/calculate-catmull-rom-splines-using.html\n###\n\nmodule.exports = (points, divisions = 32) ->\n  points = [].concat(points)\n  spline = points.slice 0, 1\n\n  while points.length > 3\n    p1x = 1 * points[3].x - 3 * points[2].x + 3 * points[1].x - points[0].x\n    p1y = 1 * points[3].y - 3 * points[2].y + 3 * points[1].y - points[0].y\n    p2x = 2 * points[0].x - 5 * points[1].x + 4 * points[2].x - points[3].x\n    p2y = 2 * points[0].y - 5 * points[1].y + 4 * points[2].y - points[3].y\n\n    st1 = 1.0 / divisions\n    st2 = st1 * st1\n    st3 = st1 * st2\n\n    d1x = 0.5 * (st3 * p1x + st2 * p2x + st1 * (points[2].x - points[0].x))\n    d1y = 0.5 * (st3 * p1y + st2 * p2y + st1 * (points[2].y - points[0].y))\n    d2x = 3.0 * st3 * p1x + st2 * p2x\n    d2y = 3.0 * st3 * p1y + st2 * p2y\n    d3x = 3.0 * st3 * p1x\n    d3y = 3.0 * st3 * p1y\n\n    px = points[1].x\n    py = points[1].y\n\n    for j in [0...divisions]\n      px  += d1x\n      py  += d1y\n      d1x += d2x\n      d1y += d2y\n      d2x += d3x\n      d2y += d3y\n\n      spline.push x: px, y: py\n\n    points.shift()\n\n  return spline\n","###\n (c) 2013, Vladimir Agafonkin\n Simplify.js, a high-performance JS polyline simplification library\n mourner.github.io/simplify-js/\n###\n\ngetSqDist = (p1, p2) ->\n  dx = p1.x - (p2.x)\n  dy = p1.y - (p2.y)\n  dx * dx + dy * dy\n\ngetSqSegDist = (p, p1, p2) ->\n  x = p1.x\n  y = p1.y\n  dx = p2.x - x\n  dy = p2.y - y\n\n  if dx isnt 0 or dy isnt 0\n    t = ((p.x - x) * dx + (p.y - y) * dy) / (dx * dx + dy * dy)\n    if t > 1\n      x = p2.x\n      y = p2.y\n    else if t > 0\n      x += dx * t\n      y += dy * t\n\n  dx = p.x - x\n  dy = p.y - y\n  dx * dx + dy * dy\n\nsimplifyRadialDist = (points, sqTolerance) ->\n  prevPoint = points[0]\n  newPoints = [prevPoint]\n\n  for point in points.slice(1)\n    if getSqDist(point, prevPoint) > sqTolerance\n      newPoints.push point\n      prevPoint = point\n\n  newPoints.push point if prevPoint isnt point\n\n  newPoints\n\nsimplifyDPStep = (points, first, last, sqTolerance, simplified) ->\n  maxSqDist = sqTolerance\n\n  for i in [first + 1...last]\n    sqDist = getSqSegDist(points[i], points[first], points[last])\n    if sqDist > maxSqDist\n      index = i\n      maxSqDist = sqDist\n\n  if maxSqDist > sqTolerance\n    if index - first > 1\n      simplifyDPStep points, first, index, sqTolerance, simplified\n\n    simplified.push points[index]\n\n    if last - index > 1\n      simplifyDPStep points, index, last, sqTolerance, simplified\n\nsimplifyDouglasPeucker = (points, sqTolerance) ->\n  last = points.length - 1\n  simp = points.slice(0, 1)\n  simplifyDPStep points, 0, last, sqTolerance, simp\n  simp.push points[last]\n  simp\n\nsimplify = (points, tolerance = 1, highQuality) ->\n  if points.length <= 2\n    return points\n  else\n    sqTol  = Math.pow(tolerance, 2)\n    points = if highQuality then points else simplifyRadialDist(points, sqTol)\n    return simplifyDouglasPeucker(points, sqTol)\n\n\nmodule.exports = simplify\n","Spline     = require(\"lib/draw/catmull-rom-spline\")\nSimplify   = require(\"lib/draw/simplify\")\nanimate    = require(\"lib/animate\")\n\nclass SmoothLine\n  constructor: (@points = [], @__color, @__width) ->\n    @timestamp = Date.now()\n\n  add: (p) ->\n    @points.push p\n\n    recent  = @points.slice(-50, -1)\n    rest    = @points.slice(1, -recent.length - 1)\n    first   = @points.slice(0, 1)\n    last    = @points.slice(-1)\n    simple  = Simplify(recent, Math.pow(recent.length, 0.3), true)\n    @points = first.concat(rest, simple, last)\n\n    return this\n\n  remove: (fromStart) ->\n    if fromStart then @points.shift() else @points.pop()\n\n  length: ->\n    @points.length\n\n  getSpline: ->\n    Spline @points\n\n  getPoints: ->\n    [].concat(@points)\n\n  erase: (context, frame) ->\n    spline = _.clone(@getSpline()).reverse()\n    length = spline.length - 1\n    width  = @__width\n\n    draw = (dist) =>\n      frame?(dist)\n\n      context.globalAlpha = 1 - dist\n\n      return unless spline.length > 1\n\n      index    = Math.ceil dist * length\n      points   = spline.slice(0, Math.max(length - index + 1, 2))\n      [p1, p2] = points.slice(-2)\n      diff     = (index / length - dist) * length\n      diffX    = diff * (p1.x - p2.x)\n      diffY    = diff * (p1.y - p2.y)\n\n      points[points.length - 1] = x: p1.x - diffX, y: p1.y - diffY\n\n      @__width = width + Math.sin(dist * Math.PI) * width * 1.2\n\n      @points = points\n      @draw(context, false)\n\n      # Reset\n      @__width = width if dist is 1\n\n    duration = Math.max Math.min(Date.now() - @timestamp, 3000), 600\n    @animation = animate(draw, duration)\n\n  draw: (ctx, smooth = true) ->\n    line = if smooth then @getSpline() else @points\n\n    ctx.strokeStyle = @__color if @__color\n    ctx.lineWidth   = @__width if @__width\n\n    if line.length > 1\n      ctx.beginPath()\n      ctx[if i is 0 then \"moveTo\" else \"lineTo\"](x, y) for {x, y}, i in line\n      ctx.stroke()\n\nmodule.exports = SmoothLine\n","###\n  Easie.coffee (https://github.com/jimjeffers/Easie)\n  Project created by J. Jeffers\n\n  Robert Penner's Easing Equations in CoffeeScript\n  http://robertpenner.com/easing/\n###\n\nEasie =\n  # coffeelint: disable=max_line_length\n\n  backIn: (time, begin, change, duration, overshoot = 1.70158) ->\n    change * (time /= duration) * time * ((overshoot + 1) * time - overshoot) + begin\n\n  backOut: (time, begin, change, duration, overshoot = 1.70158) ->\n    change * ((time = time / duration - 1) * time * ((overshoot + 1) * time + overshoot) + 1) + begin\n\n  backInOut: (time, begin, change, duration, overshoot = 1.70158) ->\n    if ((time = time / (duration / 2)) < 1)\n      return change / 2 * (time * time * (((overshoot *= (1.525)) + 1) * time - overshoot)) + begin\n    else\n      return change / 2 * ((time -= 2) * time * (((overshoot *= (1.525)) + 1) * time + overshoot) + 2) + begin\n\n  bounceOut: (time, begin, change, duration) ->\n    if (time /= duration) < 1 / 2.75\n      return change * (7.5625 * time * time) + begin\n    else if time < 2 / 2.75\n      return change * (7.5625 * (time -= (1.5 / 2.75)) * time + 0.75) + begin\n    else if time < 2.5 / 2.75\n      return change * (7.5625 * (time -= (2.25 / 2.75)) * time + 0.9375) + begin\n    else\n      return change * (7.5625 * (time -= (2.625 / 2.75)) * time + 0.984375) + begin\n\n  bounceIn: (time, begin, change, duration) ->\n    return change - Easie.bounceOut(duration - time, 0, change, duration) + begin\n\n  bounceInOut: (time, begin, change, duration) ->\n    if time < duration / 2\n      return Easie.bounceIn(time * 2, 0, change, duration) * 0.5 + begin\n    else\n      return Easie.bounceOut(time * 2 - duration, 0, change, duration) * 0.5 + change * 0.5 + begin\n\n  circIn: (time, begin, change, duration) ->\n    -change * (Math.sqrt(1 - (time = time / duration) * time) - 1) + begin\n\n  circOut: (time, begin, change, duration) ->\n    change * Math.sqrt(1 - (time = time / duration - 1) * time) + begin\n\n  circInOut: (time, begin, change, duration) ->\n    if (time = time / (duration / 2)) < 1\n      return -change / 2 * (Math.sqrt(1 - time * time) - 1) + begin\n    else\n      return change / 2 * (Math.sqrt(1 - (time -= 2) * time) + 1) + begin\n\n  cubicIn: (time, begin, change, duration) ->\n    change * (time /= duration) * time * time + begin\n\n  cubicOut: (time, begin, change, duration) ->\n    change * ((time = time / duration - 1) * time * time + 1) + begin\n\n  cubicInOut: (time, begin, change, duration) ->\n    if (time = time / (duration / 2)) < 1\n      return change / 2 * time * time * time + begin\n    else\n      return change / 2 * ((time -= 2) * time * time + 2) + begin\n\n  elasticOut: (time, begin, change, duration, amplitude = null, period = null) ->\n    if time is 0\n      return begin\n    else if (time = time / duration) is 1\n      return begin + change\n    else\n      if not period?\n        period = duration * 0.3\n      if not amplitude? or amplitude < Math.abs(change)\n        amplitude = change\n        overshoot = period / 4\n      else\n        overshoot = period / (2 * Math.PI) * Math.asin(change / amplitude)\n      (amplitude * Math.pow(2, -10 * time)) * Math.sin((time * duration - overshoot) * (2 * Math.PI) / period) + change + begin\n\n  elasticIn: (time, begin, change, duration, amplitude = null, period = null) ->\n    if time is 0\n      return begin\n    else if (time = time / duration) is 1\n      return begin + change\n    else\n      if not period?\n        period = duration * 0.3\n      if not amplitude? or amplitude < Math.abs(change)\n        amplitude = change\n        overshoot = period / 4\n      else\n        overshoot = period / (2 * Math.PI) * Math.asin(change / amplitude)\n      time -= 1\n      -(amplitude * Math.pow(2, 10 * time)) * Math.sin((time * duration - overshoot) * (2 * Math.PI) / period) + begin\n\n  elasticInOut: (time, begin, change, duration, amplitude = null, period = null) ->\n    if time is 0\n      return begin\n    else if (time = time / (duration / 2)) is 2\n      return begin + change\n    else\n      if not period?\n        period = duration * (0.3 * 1.5)\n      if not amplitude? or amplitude < Math.abs(change)\n        amplitude = change\n        overshoot = period / 4\n      else\n        overshoot = period / (2 * Math.PI) * Math.asin(change / amplitude)\n      if time < 1\n        return -0.5 * (amplitude * Math.pow(2, 10 * (time -= 1))) * Math.sin((time * duration - overshoot) * ((2 * Math.PI) / period)) + begin\n      else\n        return amplitude * Math.pow(2, -10 * (time -= 1)) * Math.sin((time * duration - overshoot) * (2 * Math.PI) / period) + change + begin\n\n  expoIn: (time, begin, change, duration) ->\n    return begin if time is 0\n    change * Math.pow(2, 10 * (time / duration - 1)) + begin\n\n  expoOut: (time, begin, change, duration) ->\n    return begin + change if time is duration\n    change * ( -Math.pow(2, -10 * time / duration) + 1) + begin\n\n  expoInOut: (time, begin, change, duration) ->\n    if time is 0\n      return begin\n    else if time is duration\n      return begin + change\n    else if (time = time / (duration / 2)) < 1\n      return change / 2 * Math.pow(2, 10 * (time - 1)) + begin\n    else\n      change / 2 * ( -Math.pow(2, -10 * (time - 1)) + 2) + begin\n\n  linearNone: (time, begin, change, duration) ->\n    change * time / duration + begin\n\n  linearIn: (time, begin, change, duration) ->\n    Easie.linearNone(time, begin, change, duration)\n\n  linearOut: (time, begin, change, duration) ->\n    Easie.linearNone(time, begin, change, duration)\n\n  linearInOut: (time, begin, change, duration) ->\n    Easie.linearNone(time, begin, change, duration)\n\n  quadIn: (time, begin, change, duration) ->\n    change * (time = time / duration) * time + begin\n\n  quadOut: (time, begin, change, duration) ->\n    -change * (time = time / duration) * (time - 2) + begin\n\n  quadInOut: (time, begin, change, duration) ->\n    if (time = time / (duration / 2)) < 1\n      return change / 2 * time * time + begin\n    else\n      return -change / 2 * ((time -= 1) * (time - 2) - 1) + begin\n\n  quartIn: (time, begin, change, duration) ->\n    change * (time = time / duration) * time * time * time + begin\n\n  quartOut: (time, begin, change, duration) ->\n    -change * ((time = time / duration - 1) * time * time * time - 1) + begin\n\n  quartInOut: (time, begin, change, duration) ->\n    if (time = time / (duration / 2)) < 1\n      return change / 2 * time * time * time * time + begin\n    else\n      return -change / 2 * ((time -= 2) * time * time * time - 2) + begin\n\n  quintIn: (time, begin, change, duration) ->\n    change * (time = time / duration) * time * time * time * time + begin\n\n  quintOut: (time, begin, change, duration) ->\n    change * ((time = time / duration - 1) * time * time * time * time + 1) + begin\n\n  quintInOut: (time, begin, change, duration) ->\n    if (time = time / (duration / 2)) < 1\n      return change / 2 * time * time * time * time * time + begin\n    else\n      return change / 2 * ((time -= 2) * time * time * time * time + 2) + begin\n\n  sineIn: (time, begin, change, duration) ->\n    -change * Math.cos(time / duration * (Math.PI / 2)) + change + begin\n\n  sineOut: (time, begin, change, duration) ->\n    change * Math.sin(time / duration * (Math.PI / 2)) + begin\n\n  sineInOut: (time, begin, change, duration) ->\n    -change / 2 * (Math.cos(Math.PI * time / duration) - 1) + begin\n\n  # coffeelint: enable=max_line_length\n\nmodule.exports = Easie\n","Prefix = require(\"lib/prefix\")\n\n# Because the ClientRect is immutable, provide an interface to return a\n# mutable copy with an optional { x, y } offset.\ngetBounds = (el, offset = { x: 0, y: 0 }) ->\n  {top, left, right, bottom, width, height} = el.getBoundingClientRect()\n\n  top: top + offset.y\n  left: left + offset.x\n  right: right + offset.x\n  bottom: bottom + offset.y\n  width: width\n  height: height\n\n# Set transforms and an optional transition on an element. If x, y or rotate\n# values are numbers, append default units. Otherwise allow for passing\n# strings with different x, y values or units. Alternatively, pass a string\n# transform for a specific order of properties.\ntransform = (el, transform) ->\n  if not el?\n    return console.error \"No element to style\"\n\n  if _.isObject(transform)\n    { x, y, z, scale, skew, rotate, opacity } = transform\n\n    x ?= 0\n    y ?= 0\n    z ?= 0\n    skew ?= 0\n    scale ?= 1\n    rotate ?= 0\n\n    x += \"px\" if typeof x is \"number\"\n    y += \"px\" if typeof y is \"number\"\n    skew += \"deg\" if typeof skew is \"number\"\n    rotate += \"deg\" if typeof rotate is \"number\"\n\n    # translate3d might not work well in safari, avoid it if you only use translate2d\n    el.style[Prefix \"transform\"] = \"\"\"\n      translate3d(#{x}, #{y}, 0)\n      skew(#{skew})\n      scale(#{scale})\n      rotate(#{rotate})\n    \"\"\"\n\n    el.style.opacity = opacity if opacity?\n    transition(el, transform.transition) if transform.transition?\n\n  else if _.isString(transform)\n    el.style[Prefix \"transform\"] = transform\n\n# Just set a transition on an element. Query the elements `offsetLeft` if\n# a DOM refresh is required to trigger subsequent animations.\ntransition = (el, transition, triggerRefresh) ->\n  if not el?\n    return console.error \"No element to style\"\n\n  el.style[Prefix \"transition\"] = transition\n  el.offsetLeft if triggerRefresh\n\nmodule.exports = {\n  getBounds\n  transform\n  transition\n}\n","MINIMUM_FONT_SIZE_STATIC = 8\nMINIMUM_FONT_SIZE_SCROLL = 12\nFONT_SIZE_DECREMENT = 0.5\nDEFAULT_CLONE_STYLE =\n  position: \"absolute\"\n  top: \"-100%\"\n  left: \"-100%\"\n  visibility: \"hidden\"\n  fontSize: \"\"\n\nmakeClone = (el) ->\n  style = window.getComputedStyle(el)\n  clone = el.cloneNode()\n  clone.innerHTML = el.innerHTML\n\n  for key, val of DEFAULT_CLONE_STYLE\n    clone.style[key] = val\n\n  for attr in [\"width\", \"height\", \"padding\", \"border\"]\n    clone.style[attr] = style[attr]\n\n  clone.classList.add(\"content-fit-clone\")\n\n  clone\n\nmakeSpacer = ->\n  spacer = document.createElement(\"div\")\n  spacer.id = \"content-spacer\"\n  spacer\n\nmodule.exports = (el, done) ->\n  return done?() unless el\n\n  minFontSize =\n    if window.getComputedStyle(el).overflow is \"auto\"\n      MINIMUM_FONT_SIZE_SCROLL\n    else\n      MINIMUM_FONT_SIZE_STATIC\n\n  el.classList.add(\"fitting\")\n  el.classList.remove(\"fitted\")\n\n  parent = el.parentNode\n  clone  = makeClone(el)\n  spacer = makeSpacer()\n  active = true\n\n  parent.appendChild(clone)\n  clone.appendChild(spacer)\n\n  fontSize  = parseFloat(window.getComputedStyle(parent).fontSize)\n  fitHeight = parent.offsetHeight\n\n  do repeat = (top) ->\n    return unless active\n\n    if top isnt spacer.offsetTop\n      window.setTimeout (-> repeat(spacer.offsetTop)), 0\n    else if spacer.offsetTop > fitHeight and fontSize > minFontSize\n      fontSize -= FONT_SIZE_DECREMENT\n      clone.style.fontSize = \"#{fontSize}px\"\n      repeat(top)\n    else\n      el.style.fontSize = clone.style.fontSize\n      el.offsetHeight\n      el.classList.remove(\"fitting\")\n      el.classList.add(\"fitted\")\n      done?()\n      clone.parentNode?.removeChild(clone)\n\n  return { cancel: -> active = false }\n","attemptLoadResources = (localeName) ->\n  localeName = localeName.toLowerCase()\n  try\n    locale = require(\"../data/locales/#{localeName}.yaml\")\n  catch\n  finally\n    locale\n\ngetResources = (localeName = \"en\") ->\n  while localeName isnt ''\n    resource = attemptLoadResources(localeName)\n    return resource if resource\n    localeArr = localeName.split('-')\n    localeArr.pop()\n    localeName = localeArr.join('-')\n  attemptLoadResources(localeName)\n\ninitialize = (locale = navigator?.language or \"en\") ->\n  polyglot    = new Polyglot({ locale })\n  resources   = getResources(locale)\n  enResources = getResources(\"en\")\n\n  polyglot.extend(enResources)\n  polyglot.extend(resources)\n\n  moment?.locale(locale)\n  window.i18n = (args...) -> polyglot.t(args...)\n\nmodule.exports = { initialize }\n","class Logger\n  constructor: (debug = false, prefix = \"\", color = \"#333\", args...) ->\n    return debug and console?.log?.bind?(console,\n      \"%c %c#{prefix}%c \"\n\n      \"background: #{color};\n       border-radius: 10px;\n       padding-left: 5px;\n       font-size: xx-small;\n       margin-right: 5px;\"\n\n      \"color: #333;\n       font-weight: bold;\"\n\n      \"\"\n\n      args...\n    ) or ->\n\nmodule.exports = Logger\n","process = (remainingMiddlewares) ->\n  (action) ->\n    return if remainingMiddlewares.length is 0\n    middleware      = remainingMiddlewares[0]\n    nextMiddlewares = remainingMiddlewares.slice(1, remainingMiddlewares.length)\n    next            = process(nextMiddlewares)\n\n    mProcess =\n      middleware.process or process_type(middleware.type, middleware.commands)\n\n    mProcess(action, next) if action?\n\n\nprocess_type = (only_type, commands) ->\n  ({ type, command, params }, next) ->\n    if type is only_type\n      new_command = commands(next)[command]\n      if new_command?\n        next new_command(params...)\n      else\n        next { type, command, params }\n    else\n      next { type, command, params }\n\nrun = (command, method, id_generator) ->\n  iframe = document.createElement(\"IFRAME\")\n  code   = method command, id_generator\n  url    = \"gap-code://#{escape(unescape(encodeURIComponent(code)))}\"\n  iframe.setAttribute(\"src\", url)\n  document.documentElement.appendChild(iframe)\n  iframe.parentNode.removeChild(iframe)\n  iframe = null\n\n\nregisteredMiddlewares = []\nregisterMiddlewares = (middlewareList) ->\n  loaded = []\n  for middlewareToLoad in middlewareList\n    try\n      loadedMiddleware = require(middlewareToLoad)\n      loaded.push loadedMiddleware\n    catch err\n      console.error \"Error while requiring #{middlewareToLoad}\", err\n\n  registeredMiddlewares = loaded\n  Backbone.Events.on \"publish\", process(registeredMiddlewares)\n\n_action = (type, command, direction = \"publish\") ->\n  (params...) ->\n    event = direction\n    event += \":#{type}:#{command}\" if direction is \"subscribe\"\n    Backbone.Events.trigger event, {\n      type\n      command\n      params\n    }\n\npossibleActions = {}\nfillPossibleActions = (middlewares, active) ->\n  possibleActions = {}\n  for m in middlewares\n    if m.type?\n      name = m.type[0].toUpperCase() + m.type[1..]\n      possibleActions[name] = {}\n      if m.commands?\n        for command, val of m.commands()\n          possibleActions[name][command] = _action(m.type, command)\n\nregisterPlatformMiddlewares = (platforms, my_platform) ->\n  allMiddlewares = []\n  for platform, middlewares of platforms when platform isnt my_platform\n    allMiddlewares = allMiddlewares.concat(middlewares)\n  allMiddlewares = allMiddlewares.concat(platforms[my_platform])\n\n  fillPossibleActions(allMiddlewares.map(require))\n\n  # Predefined platform with a list of middlewares\n  if _.isString(my_platform)\n    registerMiddlewares(platforms[my_platform])\n\n  # Custom list of middlewares\n  else if _.isArray(my_platform)\n    registerMiddlewares(my_platform)\n\n\nactions = (type) ->\n  if type?\n    possibleActions?[type]\n  else\n    possibleActions\n\naction  = (direction = \"publish\") ->\n  (namespace) ->\n    [ type, command ] = namespace.split /\\:/\n    _action(type, command, direction)\n\n\nplatforms =\n  browser: [\n    \"lib/middleware/session\"\n    \"lib/middleware/backbone_event\"\n    \"lib/middleware/webview\"\n    \"lib/middleware/browser/analytics\"\n    \"lib/middleware/browser/app_lesson\"\n    \"lib/middleware/browser/sound\"\n  ]\n  scorm: [\n    \"lib/middleware/session\"\n    \"lib/middleware/backbone_event\"\n    \"lib/middleware/webview\"\n    \"lib/middleware/scorm/scorm_analytics\"\n    \"lib/middleware/scorm/scorm_lesson\"\n    \"lib/middleware/browser/sound\"\n  ]\n\n\ninitialize = (platform) ->\n  platform ?= window.__?.platform or \"browser\"\n\n  registerPlatformMiddlewares platforms, platform\n\n\nmodule.exports = {\n  process\n  run\n  initialize\n  actions\n  action: action()\n  publish: action(\"publish\")\n  subscribe: action(\"subscribe\")\n}\n","DEBUG = false\n\neventToCode = ({ command, type, params }) ->\n  command_str = \"Backbone.Events.trigger(\"\n\n  if window.__?.slidedeck?.id?\n    command_str += \"'slidedeck:\" + window.__.slidedeck.id + \":#{command}'\"\n  else if window.__?.challenge?\n    command_str += \"'challenge:#{command}'\"\n  else\n    command_str += \"'#{command}'\"\n\n  if _.isArray(params) and params.length > 0\n    command_str += \", #{JSON.stringify(params[0])}\"\n\n  command_str += \");\"\n  console.log(\"BACKBONE\", command_str) if DEBUG\n\n  command_str\n\nrunCommand = (params) ->\n  if window.parent?.postMessage\n    message = eventToCode(params)\n    window.parent.postMessage(message, \"*\")\n\nprocess = (command, next) ->\n  if command?.type is \"event\"\n    runCommand(command, null)\n  else\n    next command\n\nmodule.exports = { process, type: \"backbone_event\" }\n","trackView = (data, done) ->\n  Application.publish(\"event:view\") data\n\ntrackInteraction = (data) ->\n  Application.publish(\"event:interaction\") data\n\ntrackEvent = ->\nstartTracking = ->\nstopTracking = ->\n\ncommands = (next) ->\n  { trackInteraction, trackView, startTracking, stopTracking, trackEvent }\n\nmodule.exports = { type: \"analytics\", commands }\n\n","complete = (data, done) ->\n  Application.publish(\"event:completed\") {}\n\nopen = ->\n\nexit = ->\n\ncommands = (next) -> { complete, open, exit }\n\nreceiveMessage = (event) ->\n  origin = event.origin or event.originalEvent.origin\n  commands = event.data\n  try\n    eval commands\n  catch err\n    # console.error \"Could not execute command\", commands, err\n\nwindow.addEventListener(\"message\", receiveMessage, false)\nopener = window.opener or window.parent\nopener?.postMessage \"Backbone.Events.trigger('lesson-ready');\", '*'\n\nmodule.exports = { type: \"lesson\", commands }\n\n","# sound middleware that uses newer web audio api\nsounds  = {}\ntimers  = {}\nenabled = true\n_AudioContext = window.AudioContext or window.webkitAudioContext\n_firstSoundPlayed = false\nonPlayEmpty = []\n# keep a list of all buffersources created so we can stop them at any time\nsources = {}\n# Flag for recreating the audio context after a video is played, fixes ED-6076 Audio distorion\n_shouldCreateNewAudioContext = false\n_sharedContext = null\n\nuserInteractionEvents = [\"click\", \"touchend\", \"touchstart\"]\n\n# Subscribe to when a video is played\nBackbone.Events.on \"publish\", (event) ->\n  if event.command is \"video-play\" and not _sharedContext?\n    _shouldCreateNewAudioContext = true\n\n###*\n * Returns a shared instance of the Audio Context.\n * This needs to be wrapped to fix an iOS webkit issue where video playback\n * corrupts the audio context resulting in distorted audio. Fixes ED-6076.\n * @see {@link https://bugs.webkit.org/show_bug.cgi?id=168165}\n * @see {@link https://bugs.webkit.org/show_bug.cgi?id=154538}\n * @returns {Promise} Promise object with the shared audio context\n###\ngetSharedAudioContext = -> new Promise (resolve, reject) ->\n  if not _sharedContext?\n    _sharedContext = new _AudioContext\n\n  if _shouldCreateNewAudioContext\n    _shouldCreateNewAudioContext = false\n    _sharedContext.close().then -> resolve _sharedContext = new _AudioContext\n  else\n    resolve _sharedContext\n\ngetPath = (name) ->\n  name = name.replace(\"system:\", \"audio/\")\n  if name.match /\\.[^\\.]+$/ then name else \"#{name}.mp3\"\n\nloadAudio = (path) ->\n  cancelled = false\n  cancel = -> cancelled = true\n  isCancelled = -> cancelled\n  promise = new Promise (resolve, reject) ->\n    req = new XMLHttpRequest()\n    req.open 'GET', path, true\n    req.responseType = 'arraybuffer'\n    req.onload  = ->\n      if cancelled\n        reject(\"sound cancelled\")\n      else\n        getSharedAudioContext().then (context) ->\n          context.decodeAudioData req.response, resolve, reject\n    req.onerror = -> reject(\"load error\")\n    req.send()\n  return { promise, cancel, isCancelled }\n\ngetLastAudio = (name) ->\n  new Promise (resolve, reject) ->\n    if sources[name]? and sources[name].length > 0\n      resolve(sources[name][sources[name].length - 1])\n    else\n      reject(\"no audio playing\")\n\ngetAudio = (name, from = sounds) ->\n  if name.match(\"system:\")\n    from[name] = loadAudio(getPath(name)) if enabled\n  else\n    from[name] = loadAudio(getPath(name))\n\n  # return empty result if nothing is ready\n  if !from[name]?\n    return null\n\n  return from[name].promise.then (buf) ->\n    if from[name].isCancelled()\n      throw new Error \"sound cancelled\"\n    return getSharedAudioContext().then (context) ->\n      bufferSource        = context.createBufferSource()\n      gain                = context.createGain()\n      bufferSource.buffer = buf\n      bufferSource.connect(gain)\n      gain.connect(context.destination)\n      sources[name] ?= []\n      sources[name].push({ bufferSource, gain })\n      return { bufferSource, gain }\n\npreload = (path, id, cb = ->) ->\n  if _firstSoundPlayed\n    getAudio(path)\n    cb()\n  else\n    onPlayEmpty.push { path, id, cb }\n\nplayEmpty = (cb = ->) ->\n  getSharedAudioContext().then (context) ->\n    if context.state is not 'suspended' and _firstSoundPlayed is true\n      return cb()\n    else\n      # prevent audio from playing that was loaded\n      # before any user gesture occurred\n      stopAll()\n\n      _firstSoundPlayed = true\n\n      buf       = context.createBuffer(2, 22050, 44100)\n      bs        = context.createBufferSource()\n      bs.buffer = buf\n      bs.connect(context.destination)\n      bs.start()\n      preload(path, id, cb) for { path, id, cb } in onPlayEmpty\n      cb()\n  .catch (err) ->\n    console.warn('sound error', err)\n\n# Get permission to play sounds on first tap for iOS & Android\ngetPermission = ({ type }) ->\n  for ev in userInteractionEvents\n    window.removeEventListener ev, getPermission, true\n    \n  playEmpty()\n\nfor ev in userInteractionEvents\n  window.addEventListener ev, getPermission, true\n\nprogressInterval = null\nplayOpts = ({ clearTimer, source }) -> (name, cb = ->) ->\n  sourceP = if source?\n    new Promise (resolve, reject) -> resolve(source)\n  else\n    getAudio(name)\n\n  # do nothing if we can't find source\n  if !sourceP?\n    cb { name }\n    return\n\n  _firstSoundPlayed = true\n  ended = false\n  sourceP.then ({ bufferSource }) ->\n    window.clearTimeout timers[name] if clearTimer\n\n    if not _.isFunction(cb)\n      { onProgress, onComplete, cb } = cb\n      startTime = Date.now()\n      duration = bufferSource.buffer.duration * 1000\n      onTimeUpdate = ->\n        if ended\n          window.clearInterval(progressInterval)\n        else\n          progress = (Date.now() - startTime) / duration\n          progress = Math.min(progress, 1.0)\n          onProgress(progress)\n      bufferSource.onended = ->\n        ended = true\n        onProgress(1)\n        onComplete()\n\n      window.clearInterval(progressInterval) if progressInterval?\n      window.setInterval onTimeUpdate, 20\n\n    bufferSource.start(0)\n\n    cb { name }\n\nplay = playOpts clearTimer: true\n\nloup = (name, cb = ->) ->\n  source = getAudio(name)\n  if !source?\n    cb()\n    return\n\n  source.then ({ bufferSource, gain }) ->\n    duration = bufferSource.buffer.duration * 1000\n\n    return unless duration > 0\n\n    window.clearTimeout timers[name]\n\n    firstTime = true\n    do repeat = ->\n      # only re-use the bufferSource the first loup\n      if firstTime\n        playOpts(clearTimer: false, source: { bufferSource, gain })(name)\n        firstTime = false\n      else\n        playOpts(clearTimer: false)(name)\n      timers[name] = window.setTimeout(repeat, duration)\n\n    cb()\n\n\nfadeIn = (name, ms = 2000, increment = 0.05) ->\n  loup name, ->\n    getLastAudio(name).then ({ bufferSource, gain }) ->\n      gain.gain.value = 0\n      do repeat = ->\n        gain.gain.value = Math.max((gain.gain.value or 0.0) + increment, 0)\n        if gain.gain.value < 1\n          window.setTimeout(repeat, ms * increment)\n\n\nfadeOut = (name, ms = 2000, increment = 0.05) ->\n  getLastAudio(name).then ({ bufferSource, gain }) ->\n    msElapsed = 0\n\n    do repeat = ->\n      msElapsed += increment * ms\n      gain.gain.value = Math.max((gain.gain.value or 1.0) - increment, 0)\n\n      if msElapsed < ms\n        window.setTimeout(repeat, ms * increment)\n      else\n        window.clearTimeout timers[name]\n        try\n          bufferSource.stop()\n\nstopAll = ->\n  for name, sourceList of sources\n    sounds[name]?.cancel?()\n    for { bufferSource, gain } in sourceList\n      try\n        bufferSource.stop()\n    sources[name] = []\n    window.clearTimeout timers[name]\n\nstop = (name, cb = ->) ->\n  window.clearTimeout timers[name]\n  sounds[name]?.cancel?()\n  for { bufferSource, gain } in (sources[name] or [])\n    try\n      bufferSource.stop()\n  sources[name] = []\n  cb()\n\ndisableSystemSounds = ->\n  enabled = false\n\nfirstSoundPlayed = (cb) ->\n  getSharedAudioContext().then (context) ->\n    if context.state is 'suspended'\n      cb(null, false)\n    else\n      cb(null, _firstSoundPlayed)\n\ncommands = (next) ->\n  {\n    preload\n    stop\n    play\n    stopAll\n    fadeIn\n    fadeOut\n    disableSystemSounds\n    loop:   loup\n    stopId: stop\n    playId: play\n    loopId: loup\n    playEmpty\n    firstSoundPlayed\n  }\n\nmodule.exports = {\n  type: \"sound\"\n  commands\n}\n","# sound middleware for traditional HTML Audio element\nsounds  = {}\nclones  = {}\ntimers  = {}\nenabled = true\n\ngetPath = (name) ->\n  name = name.replace(\"system:\", \"audio/\")\n  if name.match /\\.[^\\.]+$/ then name else \"#{name}.mp3\"\n\ngetAudio = (name, from = sounds) ->\n  return null unless name?\n  if from[name]\n    from[name]\n  else if name.match(\"system:\")\n    from[name] = new Audio(getPath(name)) if enabled\n  else\n    from[name] = new Audio(getPath(name))\n\npreload = (path, id, cb = ->) ->\n  getAudio(path)\n  cb()\n\nplay = (name, cb = ->) ->\n  sound  = getAudio(name)\n  window.clearTimeout timers[name]\n\n  if sound?\n    $sound = $(sound).off()\n\n    if not _.isFunction(cb)\n      { onProgress, onComplete, cb } = cb\n      onTimeUpdate = -> onProgress sound.currentTime / sound.duration\n      $sound.on \"ended\", onComplete\n      $sound.on \"timeupdate\", onTimeUpdate\n\n    sound.currentTime = 0 if sound.currentTime > 0\n    sound.play()\n\n  cb { name }\n\nloup = (name, cb = ->) ->\n  getClone(name)\n\n  original = getAudio(name)\n\n  if original?\n    clone    = getClone(name)\n    current  = original\n    duration = current.duration * 1000\n\n    return unless duration > 0\n\n    window.clearTimeout timers[name]\n\n    do repeat = ->\n      current.currentTime = 0\n      current.play()\n      current = if current is original then clone else original\n      timers[name] = window.setTimeout(repeat, duration)\n\n  cb()\n\nstop = (name, cb = ->) ->\n  window.clearTimeout timers[name]\n  getAudio(name)?.pause()\n  getAudio(name, clones)?.pause()\n  cb()\n\ngetClone = (name) -> \n  clones[name] ?= new Audio(getPath(name))\n  return clones[name]\n\nfadeIn = (name, ms = 2000, increment = 0.05) ->  \n  sound   = getAudio(name)\n  clone   = getClone(name)\n  elapsed = 0\n\n  if sound?\n    loup(name)\n    clone.volume = sound.volume = 0\n\n    do repeat = ->\n      clone.volume = sound.volume = Math.min(sound.volume + increment, 1)\n\n      if sound.volume < 1 and elapsed < ms\n        elapsed += ms * increment\n        window.setTimeout repeat, ms * increment\n\nfadeOut = (name, ms = 2000, increment = 0.05) ->\n  sound   = getAudio(name)\n  clone   = getAudio(name, clones)\n  elapsed = 0\n\n  if sound?\n    do repeat = ->\n      clone.volume = sound.volume = Math.max(sound.volume - increment, 0)\n\n      # Safari iOS does not allow you to change the volume of an audio element\n      if sound.volume > 0 and elapsed < ms\n        elapsed += ms * increment\n        window.setTimeout repeat, ms * increment\n      else\n        stop(name)\n        clone.volume = sound.volume = 1\n\nstopAll = ->\n  for name, sound of sounds\n    sound.pause()\n\ndisableSystemSounds = ->\n  enabled = false\n\nfirstSoundPlayed = (cb) -> cb(null, true)\n\ncommands = (next) ->\n  {\n    preload\n    stop\n    play\n    stopAll\n    fadeIn\n    fadeOut\n    disableSystemSounds\n    loop:   loup\n    stopId: stop\n    playId: play\n    loopId: loup\n    firstSoundPlayed\n  }\n\nmodule.exports = {\n  type: \"sound\"\n  commands\n}\n","audioContext = window.AudioContext or window.webkitAudioContext\n\nmodule.exports = if audioContext? and Promise?\n  require './sound-audio-api'\nelse\n  require './sound-html'\n\n","interactions = []\nscores       = {}\n\ntrack = (event, done = ->) ->\n\ntrackView = (data, done = ->) ->\n\ntrackInteraction = (data, done = ->) ->\n  interactions.push(data)\n  if data?.configuration?.nb_stars? or data?.configuration?.weighting?\n    name   = data.name\n    total  =\n      if data.configuration.weighting?\n        data.configuration.weighting\n      else\n        data.configuration.nb_stars\n    earned =\n      if data.game\n        { max, min } = data.slideData.game.stars\n\n        if data.configuration.weighting?\n          # Calculate the scaled weighting based on score\n          if data.score.total < min\n            0\n          else if data.score.total > max\n            total\n          else\n            Math.floor((data.score.total - min) / ((max - min) / total))\n\n        else\n          data.nb_stars_earned\n      else\n        if data.correct then total else 0\n    scores[name] = { earned, total }\n\ntrackScoreAndCompletion = (minScaledScore = 0, incompleteOnFail = false) ->\n  _scores = (v for k, v of scores) or []\n  _earned = _scores.reduce ((result, s) -> result + s.earned), 0\n  _total  = _scores.reduce ((result, s) -> result + s.total), 0\n  _scaled = _earned * 100.0 / _total\n\n  pipwerks.SCORM.set(\"cmi.core.score.raw\", _earned)\n  pipwerks.SCORM.set(\"cmi.core.score.min\", 0)\n  pipwerks.SCORM.set(\"cmi.core.score.max\", _total)\n\n  # Scorm 1.4 standards specificly for SABA\n  pipwerks.SCORM.set(\"cmi.score.raw\", _earned)\n  pipwerks.SCORM.set(\"cmi.score.min\", 0)\n  pipwerks.SCORM.set(\"cmi.score.max\", _total)\n\n  if _total is 0 or _scores.length is 0 or _scaled >= minScaledScore\n    # Scorm 1.4 standards specificly for SABA\n    pipwerks.SCORM.set(\"cmi.completion_status\", \"completed\")\n    console.log(\"SCORM lesson completed\")\n    pipwerks.SCORM.set(\"cmi.core.lesson_status\", \"passed\")\n  else\n    failStatus = if incompleteOnFail then \"incomplete\" else \"failed\"\n    # Scorm 1.4 standards specificly for SABA\n    pipwerks.SCORM.set(\"cmi.completion_status\", \"incomplete\")\n    \n    pipwerks.SCORM.set(\"cmi.core.lesson_status\", failStatus)\n    \n\n\ntrackEvent = ->\nstartTracking = ->\nstopTracking = ->\n\ncommands = (next) ->\n  { trackInteraction,\n    trackView,\n    startTracking,\n    stopTracking,\n    trackEvent,\n    trackScoreAndCompletion }\n\nmodule.exports = { type: \"analytics\", commands }\n","Lesson     = require '../../../models/lesson'\n\nstart_time = null\n\nopen    = ->\n  start_time = Date.now()\n\n  lesson = new Lesson()\n  lesson.load (err, lessonData) ->\n    initOptions = {\n      preventLogoutOnExit: !!lessonData?.config?.preventLogoutOnExit\n    }\n\n    pipwerks.SCORM.init(initOptions)\n\npadLeft = (val = \"\", length) ->\n  str = \"\"\n  vl  = val.toString().length\n  if (vl >= length)\n    val\n  else\n    l = length - vl + 1\n    (new Array(l).join(\"0\")).substr(0, (length - vl)) + val\n\nsetSessionTime = ->\n  end_time     = Date.now()\n  session_time = Math.floor((end_time - start_time) / 1000)\n  hours        = Math.floor(session_time / 3600)\n  minutes      = Math.floor((session_time - hours * 3600) / 60)\n  seconds      = session_time - hours * 3600 + minutes * 60\n  session_time = [ padLeft(hours, 4),\n                   padLeft(minutes, 2),\n                   padLeft(seconds, 2) ].join(\":\")\n\n  pipwerks.SCORM.set(\"cmi.core.session_time\", session_time)\n\ncomplete = ->\n  setSessionTime()\n  lesson = new Lesson()\n  lesson.load (err, lessonData) ->\n    if lessonData\n      { minimumScore, incompleteOnFail } = lessonData.config or {}\n      Application.actions(\"Analytics\")\n        .trackScoreAndCompletion(minimumScore, incompleteOnFail)\n    else\n      console.error \"Error loading lesson data\", err\n    \n    # If SCORM.quit() is called, the lesson exits even when the exit Button is enabled\n    if lessonData.config.hasScormExitButton\n      pipwerks.SCORM.save()\n    else\n      pipwerks.SCORM.quit()\n\nexit = ->\n  setSessionTime()\n  pipwerks.SCORM.quit()\n\ncommands  = (next) -> { complete, open, exit }\n\nmodule.exports = { type: \"lesson\", commands }\n","\nwaitAndGet = (n) ->\n  startToWait        = Date.now()\n  maxWaitingInterval = 5000\n  pollingInterval    = 50\n  _waitAndGet        = (n) ->\n    if __?.slidedeck?\n      n(null, __.slidedeck)\n    else if Date.now() - startToWait > maxWaitingInterval\n      n(new Error(\"timeout\"))\n    else\n      setTimeout((-> _waitAndGet(n)), pollingInterval)\n  _waitAndGet(n)\n\nget = (n) ->\n  n null, if __?.slidedeck? then __.slidedeck else {}\n\ncommands = (next) ->\n  get: get\n  waitAndGet: waitAndGet\n\nmodule.exports = { type: \"session\", commands }\n\n","process = (command, next) ->\n  if command?.type is \"url\"\n    { params: [{ target, url  }] } = command\n    unless url.indexOf('http') is 0 or url.indexOf('#') is 0\n      url = \"http://#{url}\"\n    window.open(url, target)\n  else\n    next command\n\nmodule.exports = { process, type: \"url\" }\n","# Empty style in which we can check for the existence of CSS property support.\nemptyStyle = document.createElement(\"div\").style\n\nclass Prefixer\n  vendorPrefixes: {}\n\n  _getVendorPrefixFor: (style) ->\n    s = style.substr(0, 1)\n    S = s.toUpperCase()\n\n    for vendor in [s, \"webkit#{S}\", \"Moz#{S}\", \"ms#{S}\", \"O#{S}\"]\n      prefixed = vendor + style.substr(1)\n      return vendor.substr(0, vendor.length - 1) if prefixed of emptyStyle\n\n    false\n\n  _camelCase: (style) ->\n    style.replace /\\-(\\w)/gi, (str, w) -> w.toUpperCase()\n\n  prefix: (style) ->\n    style = @_camelCase style\n    vendorPrefix = @_getVendorPrefixFor style\n\n    # This property requires no prefix\n    if vendorPrefix is \"\"\n      style\n\n    # Return the stored value or add it to the map if calculating for the\n    # first time.\n    else if vendorPrefix\n      @vendorPrefixes[style] ?= vendorPrefix +\n                                style.charAt(0).toUpperCase() +\n                                style.substr(1)\n\n    # This property is not supported at all\n    else\n      false\n\n# Use a singleton\nmyPrefixer = new Prefixer()\n\n# Wrap the prefix function to provide quick access to the good stuff.\nmodule.exports = (style) -> myPrefixer.prefix style\n","#Logger = new (require \"lib/logger\")(true, \"PRELOADER\", \"#2FA8E3\")\nLogger = (args...) -> console.log args...\n\n\n\n\ntypes =\n  image: [ \"png\", \"jpg\", \"jpeg\", \"gif\", \"svg\" ]\n  video: [ \"mp4\", \"mpeg\", \"m4v\" ]\n  audio: [ \"wav\", \"mp3\" ]\n\nregexs = []\nfor type, extensions of types\n  regexs[type] = new RegExp(\".(#{extensions.join('|')})$\", 'i')\n\nisAsset = (asset, type) -> asset?.match?(regexs[type])\n\nclass MediaElement\n  constructor: ->\n    @image = new Image()\n    @audio = new Audio()\n    @src   = null\n    @type  = null\n\n  onload: ->\n  onerror: ->\n  remove: ->\n\n  setSrc: (url) ->\n    @src = url\n    if url.match(regexs.image)\n      @type = \"image\"\n      @image.src = url\n      @image.onload =  => @onload()\n      @image.onerror = => @onerror()\n    else if url.match(regexs.audio)\n      @type = \"audio\"\n      $.ajax\n        url: url\n        type: \"GET\"\n        success: => @onload()\n        error: => @onerror()\n\n    else\n      console.error(\"Unrecognized type\")\n\n  getSrc:  -> @src\n  getType: -> @type\n  getContent: -> @image or @audio\n\n\nload = (all = [], callback, conc = 4, maxTime = 3000) ->\n  return callback?() if all.length is 0\n  all = _.compact(all)\n  return callback?() if all.length is 0\n\n  count   = 0\n  errors  = []\n  cancel  = false\n  start   = Date.now()\n  total   = all.length\n\n\n\n  mediaEls  = (new MediaElement() for i in [0...conc])\n  grouped = _.groupBy all, (e, i, arr) -> Math.floor(i / arr.length * conc)\n\n  Logger(\"loading #{all.length} media element(s)\")\n\n  onComplete = ->\n    window.clearTimeout(timeout)\n\n    cancel    = true\n    duration  = Date.now() - start\n    isSuccess = (el) -> !!el and el.getSrc() and errors.indexOf(el.getSrc()) is -1\n    images = for el in mediaEls when isSuccess(el) and el.getType() is \"image\"\n      el.getContent()\n    callback?(errors, images)\n\n    Logger \"loaded #{count}/#{total} media element(s) in #{duration}ms\"\n\n    for elt in mediaEls\n      elt.remove()\n\n    mediaEls = null\n\n  for i, elements of grouped\n    do (elements, i) ->\n      mediaEl = mediaEls[i]\n\n      onLoad = (elt, err) ->\n        count++ unless err\n\n        onComplete() if count is all.length\n        loadNext()   if elements.length > 0 and not cancel\n\n      onError = (elt) ->\n        errors.push elt.getSrc()\n        Logger \" error loading #{elt.getSrc()}\"\n        onLoad(elt, true)\n\n      loadNext = ->\n        mediaEl.setSrc(elements.shift())\n\n      mediaEl.onload =  -> onLoad(this)\n      mediaEl.onerror = -> onError(this)\n\n      loadNext()\n\n  timeout = window.setTimeout (-> onComplete()), maxTime\n\n###\n  Look through each stylesheet and collect any images that match the regEx,\n  and sends the these to the load method when ready.\n###\n\npreloadThomasAssets = ->\n  images = [\n    \"img/templates/loader-light.gif\",\n    \"img/templates/loader.gif\",\n    \"img/templates/star-default.png\",\n    \"img/templates/star-earned.png\",\n    \"img/templates/star-light.png\",\n    \"img/video/empty.png\",\n    \"img/expand-browser.png\",\n    \"img/rotate-device.png\"\n  ]\n  @load images\n\npreloadLessonAssets = (slides) ->\n  recur = (obj, method) ->\n    if obj and Array.isArray(obj)\n      return obj.map (t) -> recur(t, method)\n    else if (obj and typeof obj is \"object\")\n      result = {}\n      Object.keys(obj).forEach (k) ->\n        result[k] = recur(obj[k], method)\n      return result\n    else\n      return method(obj)\n\n  lessonAssets =  []\n  captureAssets = (s) -> recur s, (p) ->\n    lessonAssets.push(p) if isAsset(p, \"audio\") or isAsset(p, \"image\")\n\n  captureAssets(slide) for slide in slides\n\n  onLessonAssetsLoaded = ->\n  load(lessonAssets, onLessonAssetsLoaded, 4, 40000)\n\nmodule.exports = {  load, preloadThomasAssets, preloadLessonAssets }\n","MainView   = require(\"views/main\")\n\nclass AppRouter extends Backbone.Router\n\n  initialize: ->\n    @mainView = new MainView(el: \"body\")\n\n  routes:\n    \"slide(/:index)(?:query)\": \"slide\"\n    \"*default\": \"default\"\n\n  default: ->\n    @navigate \"slide/1\", true\n\n  slide: (index = 1, query = \"\") ->\n    params = {}\n\n    for param in query.split(\"&\") when param\n      [key, val] = param.split(\"=\")\n      params[key] = try JSON.parse(val) catch val\n\n    @mainView.display(\"slides\", _.extend params, { index })\n\nmodule.exports = AppRouter\n","extractKey = (data, key, def) ->\n  if data[key]? then data[key].value else def\n\nextractInt = (data, key, def) ->\n  if data[key]? then parseInt(data[key].value, 10) else def\n\nprocessScormPlayerData = (data) ->\n  score = ->\n    # Default score if no score is reported by the SCORM package\n    score    = 0\n    minScore = extractInt(data, \"cmi.core.score.min\", 0)\n    maxScore = extractInt(data, \"cmi.core.score.max\", 100)\n    score    = extractInt(data, \"cmi.core.score.raw\", null)\n    # If no score passed by the SCORM package by the lesson is considered completed\n    score    ?= 100 if success()\n    score\n\n  duration = ->\n    extractKey(data, \"cmi.core.session_time\", null)\n\n  incomplete = ->\n    data[\"cmi.core.lesson_status\"]?.value is \"incomplete\"\n\n  success = ->\n    data[\"cmi.core.lesson_status\"]?.value in [ \"passed\", \"completed\" ]\n\n  interactions = ->\n    interactions = []\n    try\n      found        = true\n      i            = 0\n      keys         = Object.keys(data)\n      key          = \"cmi.interactions.0.\"\n      object_keys  = keys.filter (k) -> k.indexOf(key) is 0\n      found        = object_keys.length > 0\n\n      if found\n        for k in object_keys\n          values = data[k].value\n          values = [ values ] unless _.isArray(values)\n          for value, i in values\n            interactions[i] ?= {}\n            interactions[i][k.replace(key, \"\")] = decodeURIComponent(value)\n    catch ex\n      console.error(\"Error while parsing SCORM interactions\", ex)\n\n    interactions\n\n  all = ->\n    _.extend data,\n      interactions: interactions()\n      score: score()\n      duration: duration()\n      success: success()\n      incomplete: incomplete()\n\n  { all, interactions, success, duration, score }\n\nmodule.exports = { processScormPlayerData }\n","tag = document.createElement(\"script\")\ntag.src = \"https://player.vimeo.com/api/player.js\"\ndocument.head.appendChild(tag, \"beforeEnd\")\n","window.onYouTubePlayerAPIReady = -> Backbone.trigger(\"youtubeplayerapiready\")\ntag      = document.createElement(\"script\")\nprotocol = window.location.protocol.replace(\"file\", \"http\")\nif __?.slidedeck?.platform is \"iOS\"\n  protocol = window.location.protocol.replace(\"ionic\", \"http\")\ntag.src  = \"#{protocol}//www.youtube.com/player_api\"\ndocument.head.appendChild(tag, \"beforeEnd\")\n","Easie = require(\"lib/easie\")\n\nclass ScoreModel extends Backbone.Model\n  defaults:\n    turns: 0\n\n  initialize: ->\n    @on \"reset\", @resetScore, this\n    @on \"tally\", @tallyScore, this\n    @on \"change\", @getTotal, this\n\n  resetScore: ->\n    window.clearTimeout @timeout\n\n    @set\n      score: 0\n      total: 0\n      correct: 0\n      incorrect: 0\n      consecutive: 0\n      lastScore: 0\n\n  # Once the game has ended, \"tally up\" the scores into the combined score.\n  tallyScore: ({callback, ms, tallyFrom}) ->\n    window.clearTimeout @timeout\n\n    { score, record, total } = @attributes\n\n    if score is total and total is record and not tallyFrom?\n      callback?()\n    else\n      start   = Date.now()\n      fps     = 1000 / 60\n      frame   = 0\n      initial = tallyFrom or 0\n      ms     ?= 3000\n      ms      = Math.min(ms, Math.abs(initial - score) or 1)\n      frames  = ms / fps\n\n      do repeat = =>\n        dist = _.limit((frame / frames) or 0, 1)\n        dist = 1 unless 0 <= dist <= 1\n\n        attrs =\n          total: Math.round(\n            Easie.quartInOut(dist, initial, (score - initial), 1)\n          )\n\n        attrs.record = Math.max(attrs.total, record or 0) unless tallyFrom?\n\n        @set attrs\n\n        if frame < frames\n          @timeout = window.setTimeout(repeat, fps)\n          frame = Math.floor((Date.now() - start) / fps)\n        else\n          callback?()\n\n  # When scores change, ensure the total still represents the score\n  getTotal: (e) ->\n    unless e.changed.total or not e.changed.score?\n      @set total: @get(\"score\")\n\n  # Similar to set, this function allows an increase/decrease to numerical\n  # attributes by an amount rather than getting and setting. Allows either\n  # (key, val) or ({key, val}) syntax.\n  setBy: (obj, amount) ->\n    if typeof obj is \"string\"\n      key = obj\n      obj = {}\n      obj[key] = amount\n    else\n      opts = amount\n\n    for key, val of obj\n      prev = @get(key)\n      @set(key, Math.max(prev + val, 0), opts)\n\n      if key is \"lastScore\"\n        console?.log?(\"`lastScore` cannot be set\")\n        return\n\n      if key is \"score\" and val > 0\n        @set({lastScore: 0}, silent: true)\n        @set(lastScore: val)\n\n  destroy: ->\n    window.clearTimeout @timeout\n    super\n\nmodule.exports = ScoreModel\n","requestAF = window.requestAnimationFrame or window.webkitRequestAnimationFrame\ncancelAF  = window.cancelAnimationFrame  or window.webkitCancelAnimationFrame\n\nclass TimerModel extends Backbone.Model\n  initialize: (@options) ->\n    # Ensure that limit is an expected number\n    @set(\"limit\", -1) unless @hasLimit()\n    @set(\"passed\", 0)\n    @set(\"isDisabled\", @options.isDisabled or !@hasLimit())\n\n    @on \"start\", @trackTimer, this\n    @on \"reset\", @resetTimer, this\n    @on \"count\", @countDown, this\n    @on \"change\", @getTotal, this\n    @on \"stop\", @endTimer, this\n\n  resetTimer: ->\n    @set\n      bonus: 0\n      total: @get(\"limit\")\n      remaining: @get(\"limit\")\n      paused: true\n\n  # Track the game's time once it has started. All attributes can freely\n  # affect the duration of the game, and pausing it will keep firing the timer\n  # until it becomes unpaused\n  trackTimer: ({callback}) ->\n    if @hasLimit()\n      @set\n        start: Date.now() - (@get(\"total\") - @get(\"remaining\"))\n        paused: false\n\n      @clearTimers()\n\n      do repeat = =>\n        now = Date.now()\n\n        {start, passed, limit, remaining, total, interval} = @attributes\n\n        if @get(\"paused\")\n          @set start: now - (limit - remaining)\n\n        else\n          @set {\n            remaining: Math.max(total - (now - start), 0),\n            passed: now - start\n          }\n\n        if @get(\"remaining\") > 0 or @get(\"isDisabled\")\n          @rafWrap = requestAF(repeat)\n\n        else\n          @timeout = window.setTimeout(callback, 300)\n\n  clearTimers: ->\n    cancelAF? @rafWrap\n    window.clearTimeout @timeout\n\n  endTimer: ->\n    @clearTimers()\n    @set paused: true\n\n  # Before the game starts, count down from 3 x 1200ms\n  countDown: ({callback, steps, ms}) ->\n    if not @hasLimit()\n      callback?()\n    else\n      @set paused: true\n      count = steps or 3\n\n      @clearTimers()\n\n      do repeat = =>\n        @set count: count\n\n        if count is 0\n          callback()\n        else\n          @timeout = window.setTimeout(repeat, ms or 1200)\n          count--\n\n  # When bonus time changes, ensure the total represents the limit + bonus\n  getTotal: (e) ->\n    unless e.changed.total\n      @set total: @get(\"limit\") + (@get(\"bonus\") or 0)\n\n  # Utility to check for a valid time limit, where the data may be undefined,\n  # NaN, -1 or some other non-numeric value.\n  hasLimit: ->\n    @get(\"limit\") > 0\n\n  # Similar to set, this function allows an increase/decrease to numerical\n  # attributes by an amount rather than getting and setting. Allows either\n  # (key, val) or ({key, val}) syntax.\n  setBy: (obj, amount) ->\n    if typeof obj is \"string\"\n      key = obj\n      obj = {}\n      obj[key] = amount\n\n    for key, val of obj\n      prev = @get(key)\n      @set(key, prev + val)\n\n      if key is \"bonus\" and val > 0\n        @set({lastBonus: 0}, silent: true)\n        @set(lastBonus: val)\n\n  destroy: ->\n    @clearTimers()\n    super\n\nmodule.exports = TimerModel\n","DP = processData  = require(\"lib/data-processer\")\ndataProcessor     = processData.all\nmetadataProcessor = processData.allMD\n\nEngines =\n  'question-pool': Friedrich.QuestionPool\n  'scorm':         Friedrich.Scorm\n  'video':         Friedrich.Video\n\nclass LessonEngine\n  constructor: (conf = {}) ->\n    @configuration = conf\n\n    @states = conf.userState or {}\n\n    @engines = @createEngines()\n    @_interactions = []\n\n  trackInteraction: (i) ->\n    Analytics = Application.actions().Analytics\n    Analytics.trackInteraction(i)\n\n  createEngines: ->\n    slides = @configuration.slides\n    slidesWithEngine = slides.filter((s) -> Engines[s.type]?)\n    _.object(slidesWithEngine.map (s) =>\n      [s.id, new Engines[s.type](s.id, s.name, s.data, @states[s.id])])\n\n\n  processSlides: (data) =>\n    data.slides = _.flatten data.slides.map (s, i) =>\n      if s.id and @engines?[s.id]?.renderSlides?\n        slides = @engines?[s.id]?.renderSlides()\n        slides = slides.map (s) ->\n          s.data = DP.one(s.data, s.type, data.config)\n          s.metadata = DP.oneMD(s.metadata)\n          s.strippedMetadata = DP.oneSMD(s.metadata)\n          s\n      else\n        s\n\n    data.slides = data.slides.map (s, i) ->\n    # if next slide is of type exit, then we will avoid showing it\n      s.isLastSlide = i is data.slides.length - 1 or (data.slides[i+1]?.type is \"exit\" and data.config.isQuiz)\n      s\n\n    data\n\n  slides: ->\n    dataPipe      = [ dataProcessor, metadataProcessor, @processSlides ]\n    processedData = _.extend({}, @configuration)\n    for fn in dataPipe\n      processedData = fn(processedData)\n    @_slides = processedData\n    return @_slides\n\n  _recordInteractions: (intes = []) ->\n    for i in intes\n      @_interactions.push(i)\n      @trackInteraction(i)\n\n  _publishState: ->\n    state = @getState()\n    @trackInteraction({ isLessonUserState: true, state: state })\n\n  getState: ->\n    _.object(\n      [slideId, engine.state] for slideId, engine of @engines when engine.state\n    )\n\n  processInteraction: (interaction) ->\n    @_recordInteractions([interaction])\n    md = interaction.metadata\n    if md? and @engines[md.friedrichId]?\n      engine = @engines[interaction.metadata.friedrichId]\n\n      if engine.processInteraction?\n        intes  = engine.processInteraction(interaction) or []\n        @_recordInteractions(intes)\n\n      if engine.reduceState?\n        engine.reduceState(interaction)\n        @_publishState()\n\n\nmodule.exports = LessonEngine\n","LessonEngine   = require(\"models/lesson-engine\")\n\nclass Lesson\n  constructor: (conf) ->\n    @loadConfiguration(conf) if conf?\n\n  loadConfiguration: (conf) ->\n    @configuration = conf\n    @engine        = new LessonEngine(@configuration)\n\n  loadFromConfigJsonFile: (done) ->\n    ajaxParams = type: \"GET\", url: \"config.json\", dataType: \"json\"\n    @request = $.ajax _.extend ajaxParams,\n      success: (data) -> done(null, data)\n      error: (err) -> done(err)\n\n  loadFromSession: (done) ->\n    { Session } = Application.actions()\n\n    Session.waitAndGet (err, data) ->\n      if err?\n        done(err)\n      else if not(data?.config)\n        done(new Error(\"No slides configuration\"))\n      else\n        window.setTimeout (-> done(null, data.config)), 100\n\n  loadData: (done) ->\n    if require('app')?.isPlayer\n      return @loadFromSession(done)\n    else\n      return @loadFromConfigJsonFile(done)\n\n  load: (done) ->\n    @loadData (err, conf) =>\n      if err?\n        return done(err) if err?\n      else\n        @loadConfiguration(conf)\n        done null, conf\n\n  getState: ->\n    @engine.getState()\n\n  processInteraction: (i) ->\n    @engine.processInteraction(i)\n\n  getSlides: ->\n    @engine.slides()\n\nmodule.exports = Lesson\n","processScormPlayerData = require(\"lib/scorm\").processScormPlayerData\nBase64 = require('js-base64').Base64;\n\nclass ScormAttempt\n  constructor: (lessonId, lessonCompleted, userName, userId, previousAttempt) ->\n    @lessonId        = lessonId\n    @lessonCompleted = lessonCompleted\n    @userName        = userName\n    @previousAttempt = previousAttempt\n    @userId          = userId\n   \n  initialData: ->\n    if @previousAttempt\n      _.extend(@previousAttempt, {\n        \"cmi.core.student_name\": {\n          value: @userName\n          status: 0\n        },\n        \"cmi.core.student_id\": {\n          value: @userId\n          status: 0\n        },\n        \"cmi.core.lesson_status\": {\n        value: if @lessonCompleted then \"completed\" else \"incomplete\"\n        status: 0\n        }\n      })\n    else\n      \"ed\":\n        \"lessonId\": @lessonId\n      \"cmi.core.lesson_status\":\n        value: if @lessonCompleted then \"completed\" else \"not attempted\"\n        status: 0\n      \"cmi.core.student_name\":\n        value: @userName\n        status: 0\n      \"cmi.core.student_id\":\n        value: @userId\n        status: 0\n\n  processScormPlayerData: (data) ->\n    parsedData = JSON.parse(Base64.decode(data))\n    @data = processScormPlayerData(parsedData).all()\n\n  attemptData: ->\n    @data\n\n\nmodule.exports = ScormAttempt\n","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (config) {\nbuf.push(\"<div id=\\\"slides-background-wrap\\\">\");\nif ( config.background)\n{\nbuf.push(\"<div id=\\\"slides-background\\\"></div>\");\n}\nbuf.push(\"<div id=\\\"slides-lightbox-bg\\\"></div></div>\");}.call(this,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (i18n) {\nbuf.push(\"<div id=\\\"disconnection-warning\\\"><div class=\\\"content-fill block-lg\\\"><div id=\\\"disconnection-msg\\\" class=\\\"content block-h-xl block-v-lg text-center\\\"><div class=\\\"block-v-md\\\"><h2>To complete this lesson, Ed needs to be running in \\nthe&nbsp;background.</h2><p class=\\\"text-md\\\">To continue, please open Ed and restart the lesson so that \\nyour progress can be tracked&nbsp;correctly.</p></div><div class=\\\"block-v-md\\\"><a id=\\\"close-window\\\" href=\\\"https://web.edapp.com\\\" target=\\\"_self\\\" class=\\\"btn btn-solid btn-block\\\">\" + (jade.escape((jade_interp = i18n(\"buttons.open-ed\")) == null ? '' : jade_interp)) + \"</a></div></div></div></div>\");}.call(this,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (config, slides, title) {\nbuf.push(\"<div id=\\\"lesson-header\\\" class=\\\"block-lg\\\"> <div id=\\\"lesson-header-nav\\\" class=\\\"text-center\\\"><div id=\\\"narration-loader\\\"></div><div id=\\\"lesson-header-nav-page-count\\\"><strong id=\\\"lesson-header-nav-page-number\\\" data-testid=\\\"lesson-header-page-num\\\">1</strong><span> / </span><!-- Since exit slide is removed, if type of last slide is exit, exclude from total slide count-->\");\nif ( slides.length>0 && slides[slides.length-1].type===\"exit\" && config.isQuiz)\n{\nbuf.push(\"<strong>\" + (jade.escape(null == (jade_interp = slides.length-1) ? \"\" : jade_interp)) + \"</strong>\");\n}\nelse\n{\nbuf.push(\"<strong>\" + (jade.escape(null == (jade_interp = slides.length) ? \"\" : jade_interp)) + \"</strong>\");\n}\nbuf.push(\"</div>\");\nif ( config.networkOnline)\n{\nbuf.push(\"<div id=\\\"lesson-header-nav-social-learning\\\" class=\\\"has-count\\\"><span class=\\\"icon icon-chat text-lg\\\"></span></div>\");\n}\nif ( !config.hideNavMenuBtn)\n{\nbuf.push(\"<div id=\\\"lesson-header-nav-menu-btn\\\"><span class=\\\"icon icon-menu text-md\\\"></span></div>\");\n}\nbuf.push(\"</div><div id=\\\"lesson-header-title\\\">\");\nif ( config.logo)\n{\nbuf.push(\"<img id=\\\"lesson-header-title-logo\\\"\" + (jade.attr(\"src\", config.logo, true, false)) + \"/>\");\n}\nbuf.push(\"<div id=\\\"lesson-header-title-content\\\" class=\\\"text-ellipsis\\\"><strong>\" + (jade.escape(null == (jade_interp = title) ? \"\" : jade_interp)) + \"</strong></div></div></div>\");}.call(this,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"slides\" in locals_for_with?locals_for_with.slides:typeof slides!==\"undefined\"?slides:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (config, i18n, slides, title) {\nbuf.push(\"<div id=\\\"lesson-menu\\\"><div id=\\\"lesson-menu-content\\\" class=\\\"content-ver block-h-xl text-center\\\"><h1 class=\\\"tight delay-1\\\">\" + (jade.escape(null == (jade_interp = title) ? \"\" : jade_interp)) + \"</h1><h3 id=\\\"lesson-menu-page-count\\\"\" + (jade.attr(\"data-total\", slides.length, true, false)) + \" class=\\\"block-v-md delay-2\\\">&nbsp;</h3><hr/><div class=\\\"block-v-lg clearfix\\\"><div id=\\\"lesson-menu-cancel\\\" class=\\\"btn btn-block btn-sm btn-primary\\\">\" + (jade.escape(null == (jade_interp = i18n(\"menu.resume\")) ? \"\" : jade_interp)) + \"</div>\");\nif ( config.contextAllowsFreeNavigation || config.contextRequiresExitButton)\n{\nif ( config.contextAllowsFreeNavigation)\n{\nbuf.push(\"<div id=\\\"lesson-menu-go-back\\\" class=\\\"btn btn-block btn-muted\\\">\" + (jade.escape(null == (jade_interp = i18n(\"menu.go-back\")) ? \"\" : jade_interp)) + \"</div><div id=\\\"lesson-menu-restart\\\" class=\\\"btn btn-block btn-muted\\\">\" + (jade.escape(null == (jade_interp = i18n(\"menu.restart\")) ? \"\" : jade_interp)) + \"</div>\");\n}\nif ( config.contextRequiresExitButton && !config.isQuiz)\n{\nbuf.push(\"<div id=\\\"lesson-menu-exit\\\" class=\\\"btn btn-block btn-muted\\\">\" + (jade.escape(null == (jade_interp = i18n(\"menu.exit\")) ? \"\" : jade_interp)) + \"</div>\");\n}\nelse if ( config.contextRequiresExitButton && config.isQuiz)\n{\nbuf.push(\"<div id=\\\"lesson-menu-exit\\\" class=\\\"btn btn-block btn-outlined\\\">\" + (jade.escape(null == (jade_interp = i18n(\"menu.exit-quiz\")) ? \"\" : jade_interp)) + \"</div>\");\n}\n}\nelse\n{\nbuf.push(\"<div id=\\\"lesson-menu-cancel\\\" class=\\\"btn btn-block btn-muted\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.continue\")) ? \"\" : jade_interp)) + \"</div>\");\n}\nbuf.push(\"</div></div></div>\");}.call(this,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"slides\" in locals_for_with?locals_for_with.slides:typeof slides!==\"undefined\"?slides:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (config, playinline) {\njade_mixins[\"video-stream\"] = jade_interp = function(videoUrl, playsinline, controls, klass, poster){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nplayinline = playinline || true\ncontrols = controls || true\nklass = klass || 'video vjs-fluid'\nvar cloudinaryVideoFolderUrl = config.CLOUDINARY_CDN_URL+config.CLOUDINARY_VIDEO_FOLDER\nvar streamUrl = ''\nif ( videoUrl && videoUrl.indexOf(cloudinaryVideoFolderUrl) > -1)\n{\nstreamUrl = videoUrl.replace(cloudinaryVideoFolderUrl, cloudinaryVideoFolderUrl+'sp_full_hd/')\nstreamUrl = streamUrl.replace('.mp4', '.m3u8')\n}\nbuf.push(\"<video\" + (jade.attr(\"webkit-playsinline\", playsinline, true, false)) + (jade.attr(\"controls\", controls, true, false)) + \" preload=\\\"auto\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + (jade.attr(\"poster\", poster, true, false)) + (jade.cls(['video-js',klass], [null,true])) + \"><source\" + (jade.attr(\"src\", videoUrl, true, false)) + \"/>\");\nif ( streamUrl)\n{\nbuf.push(\"<source\" + (jade.attr(\"src\", streamUrl, true, false)) + \"/>\");\n}\nbuf.push(\"</video>\");\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n}.call(this,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"playinline\" in locals_for_with?locals_for_with.playinline:typeof playinline!==\"undefined\"?playinline:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (config, playinline) {\njade_mixins[\"video-stream\"] = jade_interp = function(videoUrl, playsinline, controls, klass, poster){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nplayinline = playinline || true\ncontrols = controls || true\nklass = klass || 'video vjs-fluid'\nvar cloudinaryVideoFolderUrl = config.CLOUDINARY_CDN_URL+config.CLOUDINARY_VIDEO_FOLDER\nvar streamUrl = ''\nif ( videoUrl && videoUrl.indexOf(cloudinaryVideoFolderUrl) > -1)\n{\nstreamUrl = videoUrl.replace(cloudinaryVideoFolderUrl, cloudinaryVideoFolderUrl+'sp_full_hd/')\nstreamUrl = streamUrl.replace('.mp4', '.m3u8')\n}\nbuf.push(\"<video\" + (jade.attr(\"webkit-playsinline\", playsinline, true, false)) + (jade.attr(\"controls\", controls, true, false)) + \" preload=\\\"auto\\\"\" + (jade.attr(\"dir\", config.direction, true, false)) + (jade.attr(\"poster\", poster, true, false)) + (jade.cls(['video-js',klass], [null,true])) + \"><source\" + (jade.attr(\"src\", videoUrl, true, false)) + \"/>\");\nif ( streamUrl)\n{\nbuf.push(\"<source\" + (jade.attr(\"src\", streamUrl, true, false)) + \"/>\");\n}\nbuf.push(\"</video>\");\n};\njade_mixins[\"image\"] = jade_interp = function(imageUrl, klass){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nbuf.push(\"<img\" + (jade.attr(\"src\", imageUrl, true, false)) + (jade.cls([klass], [true])) + \"/>\");\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n}.call(this,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"playinline\" in locals_for_with?locals_for_with.playinline:typeof playinline!==\"undefined\"?playinline:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n\nbuf.push(\"<div id=\\\"photoswipe\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" aria-hidden=\\\"true\\\" class=\\\"pswp\\\"><div class=\\\"pswp__bg\\\"></div><div class=\\\"pswp__scroll-wrap\\\"><div class=\\\"pswp__container\\\"><div class=\\\"pswp__item\\\"></div><div class=\\\"pswp__item\\\"></div><div class=\\\"pswp__item\\\"></div></div><div class=\\\"pswp__ui pswp__ui--hidden\\\"><div class=\\\"pswp__top-bar\\\"><div class=\\\"pswp__hint\\\"></div><div class=\\\"pswp__counter\\\"></div><button title=\\\"Close (Esc)\\\" class=\\\"pswp__button pswp__button--close\\\"></button><button title=\\\"Zoom in/out\\\" class=\\\"pswp__button pswp__button--zoom\\\"></button><button title=\\\"Full Screen\\\" class=\\\"pswp__button pswp__button--fs\\\"></button><div class=\\\"pswp__preloader\\\"><div class=\\\"pswp__preloader__icn\\\"></div></div></div><button title=\\\"Previous ()\\\" class=\\\"pswp__button pswp__button--arrow--left\\\"></button><button title=\\\"Next ()\\\" class=\\\"pswp__button pswp__button--arrow--right\\\"></button><div class=\\\"pswp__caption\\\"><div class=\\\"pswp__caption__center\\\"></div></div></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (i18n) {\nbuf.push(\"<div id=\\\"play-audio-popup\\\" class=\\\"block-xl\\\"><div class=\\\"content-fill\\\"><div class=\\\"content-ver text-center\\\"><div class=\\\"block-v-xl block-h-lg\\\"><h1>\" + (jade.escape((jade_interp = i18n(\"audio-popup.title\")) == null ? '' : jade_interp)) + \"</h1><p class=\\\"text-md\\\">\" + (jade.escape((jade_interp = i18n(\"audio-popup.description\")) == null ? '' : jade_interp)) + \"</p></div><div class=\\\"btn btn-solid btn-block btn-yes text-xl\\\">\" + (jade.escape((jade_interp = i18n(\"audio-popup.allow\")) == null ? '' : jade_interp)) + \"</div></div><div class=\\\"btn btn-block btn-no btn-sm\\\">\" + (jade.escape((jade_interp = i18n(\"audio-popup.cancel\")) == null ? '' : jade_interp)) + \"</div></div></div>\");}.call(this,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n\nbuf.push(\"<svg version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" x=\\\"0\\\" y=\\\"0\\\" viewbox=\\\"0 0 40 20\\\" xml:space=\\\"preserve\\\" class=\\\"quote-angle\\\"><path d=\\\"M0,-1V0c6.6,0,11.1,6.2,9.9,13.6c-0.2,1.6,0.8,2.4,1.6,2.4c1,0,1.6-0.6,2.3-1.6C19.9,5.2,30,0,40,0V-1H0z\\\" class=\\\"quote-angle-side quote-angle-below-left\\\"></path><path d=\\\"M40,-1V0c-6.6,0-11.1,6.2-9.9,13.6c0.2,1.6-0.8,2.4-1.6,2.4c-1,0-1.6-0.6-2.3-1.6C20.1,5.2,10,0,0,0V-1L40,-1z\\\" class=\\\"quote-angle-side quote-angle-below-right\\\"></path></svg>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (answer, i18n, isCorrect, isTooSlow, showLeftCol, timerPrompt) {\nshowLeftCol = answer.takeaway && ((isCorrect && answer.correct) || (!isCorrect && answer.incorrect) || answer.text)\nbuf.push(\"<div id=\\\"block-container\\\" class=\\\"block-h-md\\\"><div id=\\\"slide-answer-container\\\"\" + (jade.cls(['row',showLeftCol ? \"\" : \"split-column\"], [null,true])) + \"><div id=\\\"slide-answer-details\\\"\" + (jade.cls(['col-sm-12','block-v-sm',showLeftCol ? \"col-md-6\" : \"text-center\"], [null,null,true])) + \"><div class=\\\"content-scroll block-v-lg\\\"><p class=\\\"text-md\\\"><strong id=\\\"slide-answer-details-response\\\">\");\nif ( isTooSlow)\n{\nbuf.push(null == (jade_interp = timerPrompt) ? \"\" : jade_interp);\n}\nelse\n{\nbuf.push(null == (jade_interp = isCorrect ? answer.correct : answer.incorrect) ? \"\" : jade_interp);\n}\nbuf.push(\"</strong></p>\");\nif ( answer.text)\n{\nbuf.push(\"<div id=\\\"slide-answer-details-text\\\" class=\\\"text-break text-md\\\">\" + (null == (jade_interp = answer.text) ? \"\" : jade_interp) + \"</div>\");\n}\nbuf.push(\"</div></div><div\" + (jade.cls(['col-sm-12','block-v-lg',showLeftCol ? \"col-md-6\" : \"text-center\"], [null,null,true])) + \">\");\nif ( answer.takeaway)\n{\nbuf.push(\"<div id=\\\"slide-answer-takeaway\\\"><h2 class=\\\"text-center text-break\\\">\" + (null == (jade_interp = answer.takeaway) ? \"\" : jade_interp) + \"</h2></div>\");\n}\nbuf.push(\"<div id=\\\"slide-answer-continue-container\\\"><div id=\\\"slide-answer-continue\\\" class=\\\"btn btn-block btn-solid\\\"> \\n\" + (jade.escape((jade_interp = i18n(\"buttons.continue\")) == null ? '' : jade_interp)) + \"</div></div></div></div></div>\");}.call(this,\"answer\" in locals_for_with?locals_for_with.answer:typeof answer!==\"undefined\"?answer:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"isCorrect\" in locals_for_with?locals_for_with.isCorrect:typeof isCorrect!==\"undefined\"?isCorrect:undefined,\"isTooSlow\" in locals_for_with?locals_for_with.isTooSlow:typeof isTooSlow!==\"undefined\"?isTooSlow:undefined,\"showLeftCol\" in locals_for_with?locals_for_with.showLeftCol:typeof showLeftCol!==\"undefined\"?showLeftCol:undefined,\"timerPrompt\" in locals_for_with?locals_for_with.timerPrompt:typeof timerPrompt!==\"undefined\"?timerPrompt:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, doneText, hasNarration, hasPrompt, i18n, prompt, submitUp) {\nbuf.push(\"<div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \">\");\nif ( hasPrompt)\n{\nbuf.push(\"<div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( typeof prompt === \"string\")\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt text-uppercase text-bold\\\"><div class=\\\"slide-footer-prompt-content content-ver\\\">\" + (null == (jade_interp = prompt) ? \"\" : jade_interp) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"hasPrompt\" in locals_for_with?locals_for_with.hasPrompt:typeof hasPrompt!==\"undefined\"?hasPrompt:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"prompt\" in locals_for_with?locals_for_with.prompt:typeof prompt!==\"undefined\"?prompt:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (game) {\nif ( game && game.timer && game.timer.limit > 0 && !game.timer.isDisabled)\n{\nbuf.push(\"<div class=\\\"full-screen\\\"><div class=\\\"game-stepper text-lg text-bold\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div></div>\");\n}}.call(this,\"game\" in locals_for_with?locals_for_with.game:typeof game!==\"undefined\"?game:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (slides, undefined) {\nbuf.push(\"<div id=\\\"lesson-slides\\\" class=\\\"block-h-lg content-fill\\\"><div id=\\\"slides\\\" class=\\\"content-fill\\\"><div id=\\\"slides-scroller\\\" class=\\\"content-fill\\\">\");\n// iterate slides\n;(function(){\n  var $$obj = slides;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var slide = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.cls(['slide','text-break',\"slide-\" + (slide.type) + \"\"], [null,null,true])) + \"></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var slide = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.cls(['slide','text-break',\"slide-\" + (slide.type) + \"\"], [null,null,true])) + \"></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div>\");}.call(this,\"slides\" in locals_for_with?locals_for_with.slides:typeof slides!==\"undefined\"?slides:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (Date, comments, i18n, isEmoji, isNoMoreComments, moment, peerAuthoring, undefined) {\nif ( comments.length === 0)\n{\nbuf.push(\"<p id=\\\"social-view-no-comments\\\" class=\\\"block-h-lg text-lg text-center\\\">\" + (jade.escape(null == (jade_interp = i18n(\"social.be-first\")) ? \"\" : jade_interp)) + \"</p>\");\n}\nelse\n{\nvar d1, d2, distance = 1000 * 60 * 5;\nbuf.push(\"<ul class=\\\"clearfix\\\">\");\n// iterate comments \n;(function(){\n  var $$obj = comments ;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var comment = $$obj[i];\n\nd2 = new Date(comment.timestamp)\nif ( !d1 || moment(d1).diff(d2) > distance)\n{\nd1 = d2;\nbuf.push(\"<li class=\\\"time text-center text-sm\\\"><strong>\" + (jade.escape(null == (jade_interp = moment(comment.timestamp).format(\"ddd, DD MMM\")) ? \"\" : jade_interp)) + \"</strong>\" + (jade.escape(null == (jade_interp = moment(comment.timestamp).format(\" h:mm\")) ? \"\" : jade_interp)) + \"</li>\");\n}\nbuf.push(\"<li\" + (jade.attr(\"style\", i < 5 ? \"transition-delay: \" + ((i + 1) * 100) + \"ms\" : \"\", true, false)) + (jade.cls(['comment',[\n          comment.isFromCurrentLearner ? \"pull-right is-learner\" : \"pull-left\",\n          comment.likes > 0 ? \"has-likes\" : \"no-likes\",\n          comment.isLikedByLearner ? \"is-learner-liked\" : \"\",\n          comment.isFlaggedByLearner ? \"is-learner-flagged\" : \"\"\n        ]], [null,true])) + \"><div class=\\\"comment-label clearfix\\\">\");\nif ( !comment.isFromCurrentLearner)\n{\nbuf.push(\"<span class=\\\"comment-author\\\">\" + (jade.escape(null == (jade_interp = comment.author) ? \"\" : jade_interp)) + \"</span>&ensp;\");\n}\nif ( !peerAuthoring)\n{\nbuf.push(\"<span\" + (jade.attr(\"data-id\", comment.id, true, false)) + \" class=\\\"comment-action comment-like\\\"><span class=\\\"icon icon-heart\\\"></span>&nbsp;\" + (jade.escape((jade_interp = comment.likes || 0) == null ? '' : jade_interp)) + \"</span>\");\n}\nbuf.push(\"</div>\");\nif ( !peerAuthoring)\n{\nbuf.push(\"<div class=\\\"comment-toggle-action clearfix\\\">\");\nif ( comment.isFromCurrentLearner)\n{\nbuf.push(\"<span\" + (jade.attr(\"data-id\", comment.id, true, false)) + \" class=\\\"comment-action comment-delete\\\">\" + (jade.escape(null == (jade_interp = i18n(\"social.delete\")) ? \"\" : jade_interp)) + \"</span><span class=\\\"comment-action comment-cancel icon icon-close\\\"></span>\");\n}\nelse\n{\nbuf.push(\"<span\" + (jade.attr(\"data-id\", comment.id, true, false)) + \" class=\\\"comment-action comment-flag\\\"><span class=\\\"icon icon-flag\\\"></span>&nbsp;\");\nif ( comment.isFlaggedByLearner)\n{\nbuf.push(jade.escape(null == (jade_interp = i18n(\"social.reported\")) ? \"\" : jade_interp));\n}\nelse\n{\nbuf.push(jade.escape(null == (jade_interp = i18n(\"social.report\")) ? \"\" : jade_interp));\n}\nbuf.push(\"</span><span class=\\\"comment-action comment-cancel icon icon-close\\\"></span>\");\n}\nbuf.push(\"</div>\");\n}\nbuf.push(\"<p class=\\\"block-md comment-message text-md\\\">\");\nif ( isEmoji(comment.message))\n{\nbuf.push(\"<span class=\\\"emoji\\\">\" + (jade.escape(null == (jade_interp = comment.message) ? \"\" : jade_interp)) + \"</span>\");\n}\nelse\n{\nbuf.push(jade.escape(null == (jade_interp = comment.message) ? \"\" : jade_interp));\n}\nbuf.push(\"</p></li>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var comment = $$obj[i];\n\nd2 = new Date(comment.timestamp)\nif ( !d1 || moment(d1).diff(d2) > distance)\n{\nd1 = d2;\nbuf.push(\"<li class=\\\"time text-center text-sm\\\"><strong>\" + (jade.escape(null == (jade_interp = moment(comment.timestamp).format(\"ddd, DD MMM\")) ? \"\" : jade_interp)) + \"</strong>\" + (jade.escape(null == (jade_interp = moment(comment.timestamp).format(\" h:mm\")) ? \"\" : jade_interp)) + \"</li>\");\n}\nbuf.push(\"<li\" + (jade.attr(\"style\", i < 5 ? \"transition-delay: \" + ((i + 1) * 100) + \"ms\" : \"\", true, false)) + (jade.cls(['comment',[\n          comment.isFromCurrentLearner ? \"pull-right is-learner\" : \"pull-left\",\n          comment.likes > 0 ? \"has-likes\" : \"no-likes\",\n          comment.isLikedByLearner ? \"is-learner-liked\" : \"\",\n          comment.isFlaggedByLearner ? \"is-learner-flagged\" : \"\"\n        ]], [null,true])) + \"><div class=\\\"comment-label clearfix\\\">\");\nif ( !comment.isFromCurrentLearner)\n{\nbuf.push(\"<span class=\\\"comment-author\\\">\" + (jade.escape(null == (jade_interp = comment.author) ? \"\" : jade_interp)) + \"</span>&ensp;\");\n}\nif ( !peerAuthoring)\n{\nbuf.push(\"<span\" + (jade.attr(\"data-id\", comment.id, true, false)) + \" class=\\\"comment-action comment-like\\\"><span class=\\\"icon icon-heart\\\"></span>&nbsp;\" + (jade.escape((jade_interp = comment.likes || 0) == null ? '' : jade_interp)) + \"</span>\");\n}\nbuf.push(\"</div>\");\nif ( !peerAuthoring)\n{\nbuf.push(\"<div class=\\\"comment-toggle-action clearfix\\\">\");\nif ( comment.isFromCurrentLearner)\n{\nbuf.push(\"<span\" + (jade.attr(\"data-id\", comment.id, true, false)) + \" class=\\\"comment-action comment-delete\\\">\" + (jade.escape(null == (jade_interp = i18n(\"social.delete\")) ? \"\" : jade_interp)) + \"</span><span class=\\\"comment-action comment-cancel icon icon-close\\\"></span>\");\n}\nelse\n{\nbuf.push(\"<span\" + (jade.attr(\"data-id\", comment.id, true, false)) + \" class=\\\"comment-action comment-flag\\\"><span class=\\\"icon icon-flag\\\"></span>&nbsp;\");\nif ( comment.isFlaggedByLearner)\n{\nbuf.push(jade.escape(null == (jade_interp = i18n(\"social.reported\")) ? \"\" : jade_interp));\n}\nelse\n{\nbuf.push(jade.escape(null == (jade_interp = i18n(\"social.report\")) ? \"\" : jade_interp));\n}\nbuf.push(\"</span><span class=\\\"comment-action comment-cancel icon icon-close\\\"></span>\");\n}\nbuf.push(\"</div>\");\n}\nbuf.push(\"<p class=\\\"block-md comment-message text-md\\\">\");\nif ( isEmoji(comment.message))\n{\nbuf.push(\"<span class=\\\"emoji\\\">\" + (jade.escape(null == (jade_interp = comment.message) ? \"\" : jade_interp)) + \"</span>\");\n}\nelse\n{\nbuf.push(jade.escape(null == (jade_interp = comment.message) ? \"\" : jade_interp));\n}\nbuf.push(\"</p></li>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</ul>\");\nif ( !peerAuthoring)\n{\nif ( isNoMoreComments)\n{\nbuf.push(\"<p class=\\\"text-muted text-center block-v-md\\\">\" + (jade.escape(null == (jade_interp = i18n(\"social.thats-all\")) ? \"\" : jade_interp)) + \"</p>\");\n}\nelse\n{\nbuf.push(\"<img src=\\\"img/templates/loader-light.gif\\\" width=\\\"32\\\" class=\\\"loader\\\"/>\");\n}\n}\n}}.call(this,\"Date\" in locals_for_with?locals_for_with.Date:typeof Date!==\"undefined\"?Date:undefined,\"comments\" in locals_for_with?locals_for_with.comments:typeof comments!==\"undefined\"?comments:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"isEmoji\" in locals_for_with?locals_for_with.isEmoji:typeof isEmoji!==\"undefined\"?isEmoji:undefined,\"isNoMoreComments\" in locals_for_with?locals_for_with.isNoMoreComments:typeof isNoMoreComments!==\"undefined\"?isNoMoreComments:undefined,\"moment\" in locals_for_with?locals_for_with.moment:typeof moment!==\"undefined\"?moment:undefined,\"peerAuthoring\" in locals_for_with?locals_for_with.peerAuthoring:typeof peerAuthoring!==\"undefined\"?peerAuthoring:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (i18n) {\nbuf.push(\"<div id=\\\"social-view\\\"><div id=\\\"social-view-input-cancel\\\" class=\\\"icon icon-close\\\"></div><div id=\\\"social-view-input\\\"><div class=\\\"content-fill\\\"><textarea id=\\\"social-view-input-text\\\" class=\\\"text-md block-lg\\\"></textarea></div><div id=\\\"social-view-input-toolbar\\\" class=\\\"block-v-md block-h-lg\\\"><div id=\\\"social-view-input-status\\\" class=\\\"pull-right\\\"><strong id=\\\"social-view-input-slide-count\\\"></strong><strong id=\\\"social-view-input-limit\\\"></strong><button id=\\\"social-view-input-confirm\\\" class=\\\"btn btn-solid btn-sm pull-right\\\">\" + (null == (jade_interp = i18n(\"buttons.send\")) ? \"\" : jade_interp) + \"</button></div><label class=\\\"text-bold\\\"><div id=\\\"social-view-input-title\\\" class=\\\"text-ellipsis\\\"></div></label></div></div><div id=\\\"social-view-messages\\\"><div id=\\\"social-view-messages-list\\\" class=\\\"block-lg\\\"></div><div id=\\\"social-view-input-start\\\" class=\\\"block-lg\\\"><div id=\\\"social-view-start\\\" class=\\\"btn btn-solid btn-block\\\">\" + (null == (jade_interp = i18n(\"social.have-your-say\")) ? \"\" : jade_interp) + \"</div></div></div></div>\");}.call(this,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (Array, Math, available, i18n, undefined) {\nvar displayTotal = Math.min(available, 9);\n// iterate new Array(displayTotal)\n;(function(){\n  var $$obj = new Array(displayTotal);\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var star = $$obj[i];\n\nvar dist  = Math.abs(Math.floor(displayTotal / 2) - i)\nvar klass = \"star-delay-\" + dist;\nif (i < available) klass += \" active\";\nif (available > 4) klass += \" bunched\";\nbuf.push(\"<div\" + (jade.cls(['star',klass], [null,true])) + \"></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var star = $$obj[i];\n\nvar dist  = Math.abs(Math.floor(displayTotal / 2) - i)\nvar klass = \"star-delay-\" + dist;\nif (i < available) klass += \" active\";\nif (available > 4) klass += \" bunched\";\nbuf.push(\"<div\" + (jade.cls(['star',klass], [null,true])) + \"></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"<h4 class=\\\"text-bold text-pre\\\">\" + (jade.escape((jade_interp = i18n(\"stars.available\", { smart_count: available })) == null ? '' : jade_interp)) + \"</h4>\");}.call(this,\"Array\" in locals_for_with?locals_for_with.Array:typeof Array!==\"undefined\"?Array:undefined,\"Math\" in locals_for_with?locals_for_with.Math:typeof Math!==\"undefined\"?Math:undefined,\"available\" in locals_for_with?locals_for_with.available:typeof available!==\"undefined\"?available:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (Math, i18n, stars, undefined) {\nvar parentKlass, max = 9;\nif (stars.length < 2)      parentKlass = \"text-xl\";\nelse if (stars.length < 6) parentKlass = \"text-lg\";\nelse if (stars.length < 8) parentKlass = \"text-md\";\nelse { parentKlass = \"text-sm\"; };\nbuf.push(\"<div\" + (jade.cls(['text-nowrap',parentKlass], [null,true])) + \">\");\n// iterate stars.slice(0, max)\n;(function(){\n  var $$obj = stars.slice(0, max);\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var star = $$obj[i];\n\nif (!star) star = {};\nvar klass = \"delay-\" + Math.min(i, 10);\nif (star.complete) klass += \" active\";\nif (stars.length > 6) klass += \" bunched\";\nbuf.push(\"<div\" + (jade.cls(['star',klass], [null,true])) + \"></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var star = $$obj[i];\n\nif (!star) star = {};\nvar klass = \"delay-\" + Math.min(i, 10);\nif (star.complete) klass += \" active\";\nif (stars.length > 6) klass += \" bunched\";\nbuf.push(\"<div\" + (jade.cls(['star',klass], [null,true])) + \"></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div><h4 class=\\\"text-bold text-nowrap\\\"> \");\nvar earned = _.where(stars, { complete: true }).length\nbuf.push(\"\" + (jade.escape((jade_interp = i18n(\"stars.earned\", { earned: earned, smart_count: stars.length })) == null ? '' : jade_interp)) + \"</h4>\");}.call(this,\"Math\" in locals_for_with?locals_for_with.Math:typeof Math!==\"undefined\"?Math:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"stars\" in locals_for_with?locals_for_with.stars:typeof stars!==\"undefined\"?stars:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (i18n) {\nbuf.push(\"<div id=\\\"text-input-view\\\"><div id=\\\"text-input-container\\\"><div id=\\\"text-input-container-top\\\" class=\\\"text-input-container block-lg\\\"><label id=\\\"text-input-prompt\\\"></label><label id=\\\"text-input-count\\\"><span id=\\\"text-input-count-current\\\"></span>&nbsp;/&nbsp;<span id=\\\"text-input-count-total\\\"></span></label><div id=\\\"text-input-dismiss-btn\\\" class=\\\"btn btn-solid\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div><div id=\\\"text-input-scroll\\\"><textarea id=\\\"text-input-area\\\" class=\\\"block-lg\\\"></textarea></div></div></div>\");}.call(this,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (continueBtnText, doneText, hasNarration, i18n, skipButton, submitUp) {\nbuf.push(\"<div\" + (jade.cls(['slide-footer','block-v-lg',submitUp ? \"slide-footer--up slide-down\" : \"slide-up\"], [null,null,true])) + \"><div class=\\\"slide-footer-touched\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div>\");\nif ( skipButton)\n{\nbuf.push(\"<div class=\\\"slide-footer-prompt\\\"><div class=\\\"btn btn-muted btn-done text-ellipsis content-ver\\\">\" + (null == (jade_interp = continueBtnText || i18n(\"buttons.continue\")) ? \"\" : jade_interp) + \"</div></div>\");\n}\nif ( hasNarration)\n{\nbuf.push(\"<div class=\\\"slide-footer-narration\\\"><div class=\\\"narration-progress btn btn-muted\\\"><div class=\\\"narration-progress-bar\\\"></div><div class=\\\"wave-ellipse\\\"><span class=\\\"bullet delay-1 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-2 block-inline\\\">&bullet;</span><span class=\\\"bullet delay-3 block-inline\\\">&bullet;</span></div></div></div>\");\n}\nbuf.push(\"</div>\");}.call(this,\"continueBtnText\" in locals_for_with?locals_for_with.continueBtnText:typeof continueBtnText!==\"undefined\"?continueBtnText:undefined,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasNarration\" in locals_for_with?locals_for_with.hasNarration:typeof hasNarration!==\"undefined\"?hasNarration:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"skipButton\" in locals_for_with?locals_for_with.skipButton:typeof skipButton!==\"undefined\"?skipButton:undefined,\"submitUp\" in locals_for_with?locals_for_with.submitUp:typeof submitUp!==\"undefined\"?submitUp:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (description, i18n, title) {\nbuf.push(\"<div class=\\\"content-intro content-fill content-fit\\\"><div class=\\\"block-v-lg text-center content\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><h1 class=\\\"tight\\\">\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"text-lg block-v-lg\\\">\" + (null == (jade_interp = description) ? \"\" : jade_interp) + \"</div><div class=\\\"btn btn-solid play-game\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.play-game\")) ? \"\" : jade_interp)) + \"</div></div></div></div></div>\");}.call(this,\"description\" in locals_for_with?locals_for_with.description:typeof description!==\"undefined\"?description:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (doneText, hasStars, i18n, title) {\nbuf.push(\"<div class=\\\"content-outro\\\"><div class=\\\"content-fill\\\"><div class=\\\"block-v-lg text-center content\\\"><h1>\" + (null == (jade_interp = title) ? \"\" : jade_interp) + \"</h1><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2\\\"><div class=\\\"row\\\"><div\" + (jade.cls(['col-sm-6','col-md-4','block-v-md',hasStars ? \"\" : \"col-md-offset-2\"], [null,null,null,true])) + \"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"white-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-score\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-total tight\\\">?</h1></div></div><div class=\\\"col-sm-6 col-md-4 block-v-md\\\"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"grey-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-best\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-record tight\\\">?</h1></div></div>\");\nif ( hasStars)\n{\nbuf.push(\"<div class=\\\"col-sm-12 col-md-4 block-v-md\\\"><div class=\\\"block-md block-dk\\\"><h4 class=\\\"grey-dot-text bold-italic\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.your-stars\")) ? \"\" : jade_interp)) + \"</h4><h1 class=\\\"game-stars tight\\\">?<sup class=\\\"stars-total\\\"></sup></h1></div></div>\");\n}\nbuf.push(\"</div><div class=\\\"row block-v-md\\\"><div class=\\\"col-sm-12 col-md-8 col-md-offset-2 block-md\\\"><div class=\\\"btn btn-solid btn-block play-game\\\">\" + (jade.escape(null == (jade_interp = i18n(\"game.play-again\")) ? \"\" : jade_interp)) + \"</div></div></div></div></div></div></div><div class=\\\"slide-footer block-v-lg\\\"><div class=\\\"btn btn-muted goto-next fade-in\\\">\" + (null == (jade_interp = doneText) ? \"\" : jade_interp) + \"</div></div></div>\");}.call(this,\"doneText\" in locals_for_with?locals_for_with.doneText:typeof doneText!==\"undefined\"?doneText:undefined,\"hasStars\" in locals_for_with?locals_for_with.hasStars:typeof hasStars!==\"undefined\"?hasStars:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (hasTimeLimit, i18n) {\nbuf.push(\"<div class=\\\"game-state block-h-lg\\\"><div class=\\\"game-state-inner row block-v-lg\\\"><div class=\\\"game-state-text col-md-6 col-sm-6\\\">\");\nif ( hasTimeLimit)\n{\nbuf.push(\"\" + (jade.escape((jade_interp = i18n(\"game.labels.timer\")) == null ? '' : jade_interp)) + \"\\n&ensp;<strong class=\\\"game-timer text-lg text-bold\\\"></strong>\");\n}\nbuf.push(\"</div><div class=\\\"game-state-text col-md-6 col-sm-6 text-right\\\">\" + (jade.escape((jade_interp = i18n(\"game.labels.score\")) == null ? '' : jade_interp)) + \"\\n&ensp;<strong class=\\\"game-score text-lg text-bold\\\"></strong><strong class=\\\"game-tally\\\"></strong></div></div></div>\");\nif ( hasTimeLimit)\n{\nbuf.push(\"<div class=\\\"game-stepper\\\"></div><div class=\\\"game-progress\\\"><div class=\\\"game-progress-bar\\\"></div></div>\");\n}\nif ( hasTimeLimit)\n{\nbuf.push(\"<div class=\\\"game-bonus-time\\\"></div>\");\n}}.call(this,\"hasTimeLimit\" in locals_for_with?locals_for_with.hasTimeLimit:typeof hasTimeLimit!==\"undefined\"?hasTimeLimit:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (config, slides) {\nbuf.push(\"<div id=\\\"indicator\\\"><div id=\\\"inner\\\"\" + (jade.attr(\"style\", (\n    \"left: \" + (100 / slides.length) + \"%;\" +\n    (config.direction == \"rtl\" ? \"margin-left: -\" + (100 / slides.length) + \"%;\" : \"\")\n  ), true, false)) + \"></div></div>\");}.call(this,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"slides\" in locals_for_with?locals_for_with.slides:typeof slides!==\"undefined\"?slides:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n\nbuf.push(\"<div id=\\\"menu-view\\\"></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (slides, undefined) {\nbuf.push(\"<div id=\\\"pagination\\\">\");\n// iterate slides\n;(function(){\n  var $$obj = slides;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var slide = $$obj[i];\n\nbuf.push(\"<a\" + (jade.attr(\"href\", \"#slide/\" + (i+1) + \"\", true, false)) + \" class=\\\"page\\\"></a>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var slide = $$obj[i];\n\nbuf.push(\"<a\" + (jade.attr(\"href\", \"#slide/\" + (i+1) + \"\", true, false)) + \" class=\\\"page\\\"></a>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");}.call(this,\"slides\" in locals_for_with?locals_for_with.slides:typeof slides!==\"undefined\"?slides:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n\nbuf.push(\"<div id=\\\"content\\\"><div id=\\\"inbound\\\"></div><div id=\\\"outbound\\\"></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n\n\n\n\n;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (config, i18n, slides, title, undefined) {\nbuf.push(\"<div id=\\\"slides-view-inner\\\" class=\\\"content-fill\\\">\");\nif ( config.enableCustomCSS)\n{\nbuf.push(\"<style id=\\\"custom-css\\\">\" + (jade.escape(null == (jade_interp = config.customCSS) ? \"\" : jade_interp)) + \"</style>\");\n}\nbuf.push(\"<div id=\\\"indicator\\\"><div id=\\\"inner\\\"\" + (jade.attr(\"style\", (\n    \"left: \" + (100 / slides.length) + \"%;\" +\n    (config.direction == \"rtl\" ? \"margin-left: -\" + (100 / slides.length) + \"%;\" : \"\")\n  ), true, false)) + \"></div></div><div id=\\\"slides-background-wrap\\\">\");\nif ( config.background)\n{\nbuf.push(\"<div id=\\\"slides-background\\\"></div>\");\n}\nbuf.push(\"<div id=\\\"slides-lightbox-bg\\\"></div></div><div id=\\\"lesson-header\\\" class=\\\"block-lg\\\"> <div id=\\\"lesson-header-nav\\\" class=\\\"text-center\\\"><div id=\\\"narration-loader\\\"></div><div id=\\\"lesson-header-nav-page-count\\\"><strong id=\\\"lesson-header-nav-page-number\\\" data-testid=\\\"lesson-header-page-num\\\">1</strong><span> / </span><!-- Since exit slide is removed, if type of last slide is exit, exclude from total slide count-->\");\nif ( slides.length>0 && slides[slides.length-1].type===\"exit\" && config.isQuiz)\n{\nbuf.push(\"<strong>\" + (jade.escape(null == (jade_interp = slides.length-1) ? \"\" : jade_interp)) + \"</strong>\");\n}\nelse\n{\nbuf.push(\"<strong>\" + (jade.escape(null == (jade_interp = slides.length) ? \"\" : jade_interp)) + \"</strong>\");\n}\nbuf.push(\"</div>\");\nif ( config.networkOnline)\n{\nbuf.push(\"<div id=\\\"lesson-header-nav-social-learning\\\" class=\\\"has-count\\\"><span class=\\\"icon icon-chat text-lg\\\"></span></div>\");\n}\nif ( !config.hideNavMenuBtn)\n{\nbuf.push(\"<div id=\\\"lesson-header-nav-menu-btn\\\"><span class=\\\"icon icon-menu text-md\\\"></span></div>\");\n}\nbuf.push(\"</div><div id=\\\"lesson-header-title\\\">\");\nif ( config.logo)\n{\nbuf.push(\"<img id=\\\"lesson-header-title-logo\\\"\" + (jade.attr(\"src\", config.logo, true, false)) + \"/>\");\n}\nbuf.push(\"<div id=\\\"lesson-header-title-content\\\" class=\\\"text-ellipsis\\\"><strong>\" + (jade.escape(null == (jade_interp = title) ? \"\" : jade_interp)) + \"</strong></div></div></div><div id=\\\"lesson-slides\\\" class=\\\"block-h-lg content-fill\\\"><div id=\\\"slides\\\" class=\\\"content-fill\\\"><div id=\\\"slides-scroller\\\" class=\\\"content-fill\\\">\");\n// iterate slides\n;(function(){\n  var $$obj = slides;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var slide = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.cls(['slide','text-break',\"slide-\" + (slide.type) + \"\"], [null,null,true])) + \"></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var slide = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.cls(['slide','text-break',\"slide-\" + (slide.type) + \"\"], [null,null,true])) + \"></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div><div id=\\\"slide-answer\\\"></div><div id=\\\"stars-available\\\"></div><div id=\\\"stars-earned\\\" class=\\\"content text-center\\\"></div><div id=\\\"lesson-menu\\\"><div id=\\\"lesson-menu-content\\\" class=\\\"content-ver block-h-xl text-center\\\"><h1 class=\\\"tight delay-1\\\">\" + (jade.escape(null == (jade_interp = title) ? \"\" : jade_interp)) + \"</h1><h3 id=\\\"lesson-menu-page-count\\\"\" + (jade.attr(\"data-total\", slides.length, true, false)) + \" class=\\\"block-v-md delay-2\\\">&nbsp;</h3><hr/><div class=\\\"block-v-lg clearfix\\\"><div id=\\\"lesson-menu-cancel\\\" class=\\\"btn btn-block btn-sm btn-primary\\\">\" + (jade.escape(null == (jade_interp = i18n(\"menu.resume\")) ? \"\" : jade_interp)) + \"</div>\");\nif ( config.contextAllowsFreeNavigation || config.contextRequiresExitButton)\n{\nif ( config.contextAllowsFreeNavigation)\n{\nbuf.push(\"<div id=\\\"lesson-menu-go-back\\\" class=\\\"btn btn-block btn-muted\\\">\" + (jade.escape(null == (jade_interp = i18n(\"menu.go-back\")) ? \"\" : jade_interp)) + \"</div><div id=\\\"lesson-menu-restart\\\" class=\\\"btn btn-block btn-muted\\\">\" + (jade.escape(null == (jade_interp = i18n(\"menu.restart\")) ? \"\" : jade_interp)) + \"</div>\");\n}\nif ( config.contextRequiresExitButton && !config.isQuiz)\n{\nbuf.push(\"<div id=\\\"lesson-menu-exit\\\" class=\\\"btn btn-block btn-muted\\\">\" + (jade.escape(null == (jade_interp = i18n(\"menu.exit\")) ? \"\" : jade_interp)) + \"</div>\");\n}\nelse if ( config.contextRequiresExitButton && config.isQuiz)\n{\nbuf.push(\"<div id=\\\"lesson-menu-exit\\\" class=\\\"btn btn-block btn-outlined\\\">\" + (jade.escape(null == (jade_interp = i18n(\"menu.exit-quiz\")) ? \"\" : jade_interp)) + \"</div>\");\n}\n}\nelse\n{\nbuf.push(\"<div id=\\\"lesson-menu-cancel\\\" class=\\\"btn btn-block btn-muted\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.continue\")) ? \"\" : jade_interp)) + \"</div>\");\n}\nbuf.push(\"</div></div></div><div id=\\\"text-input-view\\\"><div id=\\\"text-input-container\\\"><div id=\\\"text-input-container-top\\\" class=\\\"text-input-container block-lg\\\"><label id=\\\"text-input-prompt\\\"></label><label id=\\\"text-input-count\\\"><span id=\\\"text-input-count-current\\\"></span>&nbsp;/&nbsp;<span id=\\\"text-input-count-total\\\"></span></label><div id=\\\"text-input-dismiss-btn\\\" class=\\\"btn btn-solid\\\">\" + (jade.escape(null == (jade_interp = i18n(\"buttons.done\")) ? \"\" : jade_interp)) + \"</div></div><div id=\\\"text-input-scroll\\\"><textarea id=\\\"text-input-area\\\" class=\\\"block-lg\\\"></textarea></div></div></div><div id=\\\"social-view\\\"><div id=\\\"social-view-input-cancel\\\" class=\\\"icon icon-close\\\"></div><div id=\\\"social-view-input\\\"><div class=\\\"content-fill\\\"><textarea id=\\\"social-view-input-text\\\" class=\\\"text-md block-lg\\\"></textarea></div><div id=\\\"social-view-input-toolbar\\\" class=\\\"block-v-md block-h-lg\\\"><div id=\\\"social-view-input-status\\\" class=\\\"pull-right\\\"><strong id=\\\"social-view-input-slide-count\\\"></strong><strong id=\\\"social-view-input-limit\\\"></strong><button id=\\\"social-view-input-confirm\\\" class=\\\"btn btn-solid btn-sm pull-right\\\">\" + (null == (jade_interp = i18n(\"buttons.send\")) ? \"\" : jade_interp) + \"</button></div><label class=\\\"text-bold\\\"><div id=\\\"social-view-input-title\\\" class=\\\"text-ellipsis\\\"></div></label></div></div><div id=\\\"social-view-messages\\\"><div id=\\\"social-view-messages-list\\\" class=\\\"block-lg\\\"></div><div id=\\\"social-view-input-start\\\" class=\\\"block-lg\\\"><div id=\\\"social-view-start\\\" class=\\\"btn btn-solid btn-block\\\">\" + (null == (jade_interp = i18n(\"social.have-your-say\")) ? \"\" : jade_interp) + \"</div></div></div></div><div id=\\\"photoswipe\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" aria-hidden=\\\"true\\\" class=\\\"pswp\\\"><div class=\\\"pswp__bg\\\"></div><div class=\\\"pswp__scroll-wrap\\\"><div class=\\\"pswp__container\\\"><div class=\\\"pswp__item\\\"></div><div class=\\\"pswp__item\\\"></div><div class=\\\"pswp__item\\\"></div></div><div class=\\\"pswp__ui pswp__ui--hidden\\\"><div class=\\\"pswp__top-bar\\\"><div class=\\\"pswp__hint\\\"></div><div class=\\\"pswp__counter\\\"></div><button title=\\\"Close (Esc)\\\" class=\\\"pswp__button pswp__button--close\\\"></button><button title=\\\"Zoom in/out\\\" class=\\\"pswp__button pswp__button--zoom\\\"></button><button title=\\\"Full Screen\\\" class=\\\"pswp__button pswp__button--fs\\\"></button><div class=\\\"pswp__preloader\\\"><div class=\\\"pswp__preloader__icn\\\"></div></div></div><button title=\\\"Previous ()\\\" class=\\\"pswp__button pswp__button--arrow--left\\\"></button><button title=\\\"Next ()\\\" class=\\\"pswp__button pswp__button--arrow--right\\\"></button><div class=\\\"pswp__caption\\\"><div class=\\\"pswp__caption__center\\\"></div></div></div></div></div><div id=\\\"disconnection-warning\\\"><div class=\\\"content-fill block-lg\\\"><div id=\\\"disconnection-msg\\\" class=\\\"content block-h-xl block-v-lg text-center\\\"><div class=\\\"block-v-md\\\"><h2>To complete this lesson, Ed needs to be running in \\nthe&nbsp;background.</h2><p class=\\\"text-md\\\">To continue, please open Ed and restart the lesson so that \\nyour progress can be tracked&nbsp;correctly.</p></div><div class=\\\"block-v-md\\\"><a id=\\\"close-window\\\" href=\\\"https://web.edapp.com\\\" target=\\\"_self\\\" class=\\\"btn btn-solid btn-block\\\">\" + (jade.escape((jade_interp = i18n(\"buttons.open-ed\")) == null ? '' : jade_interp)) + \"</a></div></div></div></div><div id=\\\"play-audio-popup\\\" class=\\\"block-xl\\\"><div class=\\\"content-fill\\\"><div class=\\\"content-ver text-center\\\"><div class=\\\"block-v-xl block-h-lg\\\"><h1>\" + (jade.escape((jade_interp = i18n(\"audio-popup.title\")) == null ? '' : jade_interp)) + \"</h1><p class=\\\"text-md\\\">\" + (jade.escape((jade_interp = i18n(\"audio-popup.description\")) == null ? '' : jade_interp)) + \"</p></div><div class=\\\"btn btn-solid btn-block btn-yes text-xl\\\">\" + (jade.escape((jade_interp = i18n(\"audio-popup.allow\")) == null ? '' : jade_interp)) + \"</div></div><div class=\\\"btn btn-block btn-no btn-sm\\\">\" + (jade.escape((jade_interp = i18n(\"audio-popup.cancel\")) == null ? '' : jade_interp)) + \"</div></div></div></div>\");}.call(this,\"config\" in locals_for_with?locals_for_with.config:typeof config!==\"undefined\"?config:undefined,\"i18n\" in locals_for_with?locals_for_with.i18n:typeof i18n!==\"undefined\"?i18n:undefined,\"slides\" in locals_for_with?locals_for_with.slides:typeof slides!==\"undefined\"?slides:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","checkOnline = ->\n  return navigator.onLine unless navigator.connection? and window.Connection?\n\n  currentNetworkState = navigator.connection.type\n\n  states = {}\n  states[Connection.UNKNOWN]  = false\n  states[Connection.NONE]     = false\n  states[Connection.ETHERNET] = true\n  states[Connection.WIFI]     = true\n  # In iOS, all cellular connection defaults to Connection.CELL\n  states[Connection.CELL]     = true\n  states[Connection.CELL_2G]  = true\n  states[Connection.CELL_3G]  = true\n  states[Connection.CELL_4G]  = true\n\n  !! states[currentNetworkState]\n\nmodule.exports = {\n  checkOnline\n}","###\n  For the content engine, games should attempt to follow a consistent pattern\n  to reduce user (and developer) strain. Score and timer changes, for example,\n  are handled in a consistent interface, and games should follow the pattern:\n\n  - initializeData()\n  - initializeElements()\n  - enterGame()\n  - showNext(isFirstRun = true)\n  - startGame()\n    - checkAnswer()\n      if isCorrect\n        - endGame()\n      else\n        - showNext(isFirstRun = false)\n\n  - endGame()\n  - afterAnimateScores()\n\n  Games are displayed in \"lightbox\" mode while the game is in progress.\n###\n\nGameView                      = require(\"views/game\")\n{ Sound, Session, Analytics } = Application.actions()\n\nsystem = [\n  \"system:achievement\"\n  \"system:new-star\"\n  \"system:spin-win\"\n  \"system:correct\"\n  \"system:ready\"\n  \"system:spinning\"\n  \"system:game-music-slow\"\n  \"system:spin-fail\"\n  \"system:tally-score\"\n  \"system:go\"\n  \"system:spin-stop\"\n  \"system:welcome\"\n  \"system:incorrect\"\n  \"system:spin-success\"\n]\n\nfor sound in system\n  Sound.preload sound, sound\n\nclass EngineGameView extends GameView\n  show: ->\n    super\n\n    @initializeData()\n    @initializeElements()\n\n    Session.get (err, session) =>\n      if session.scores?\n        scores = session.scores\n        name   = @options.name\n        record = if scores?[name]? then parseInt(scores[name], 10) else null\n        @game.score.set(\"record\", record) if record?\n\n  hide: ->\n    super\n\n    Sound.stopAll()\n\n  onRefresh: ->\n    super\n\n    Sound.stopAll()\n\n    @trigger(\"ui\", minimal: false) if @game.extra.get(\"fullscreen\")\n\n  initializeData: ->\n\n  initializeElements: ->\n    elements = [\"timer\", \"progress-bar\", \"stepper\", \"score\", \"tally\", \"stars\"\n                \"total\", \"record\", \"bonus-time\"]\n\n    for key in elements\n      selector = \".game-#{key}\"\n      @setEl @el.querySelector(selector), key\n\n  onTimerChange: (m) ->\n    {remaining, count, lastBonus, paused} = m.changed\n\n    if remaining? and @getEl(\"timer\")?\n      limit = m.get(\"limit\")\n      asSec = (remaining / 1000)\n      asSec = (if asSec < 10 then \"0\" else \"\") + asSec.toFixed(2) + \"s\"\n\n      @getEl(\"timer\").innerHTML =\n        asSec.replace /^[0s\\.]+/, (w) ->\n          _.wrapInTag(w, \"em\", class: \"game-timer-muted\")\n\n    if remaining? and @getEl(\"progress-bar\")?\n      d = @game.timer.get(\"interval\")\n      @transform @getEl(\"progress-bar\"),\n        x: \"#{-remaining / limit * 100}%\"\n\n    if count? and @getEl(\"stepper\")?\n      @transition @getEl(\"stepper\"), \"all 100ms\"\n      @getEl(\"stepper\").offsetLeft\n      @transform @getEl(\"stepper\"), x: \"-50%\", scale: 0.75\n\n      @el.classList.toggle(\"game-count-down\", count > 0)\n\n      window.setTimeout (=>\n        @transition @getEl(\"stepper\"), \"\"\n        @transform @getEl(\"stepper\"), x: \"-50%\", scale: 1.25\n\n        if count > 0\n          @getEl(\"stepper\").style.opacity = 1\n          @getEl(\"stepper\").innerHTML = count\n          Sound.play \"system:ready\"\n        else\n          @getEl(\"stepper\").style.opacity = 0\n          @getEl(\"stepper\").innerHTML = i18n(\"game.go\")\n      ), 120\n\n    if lastBonus > 0 and @getEl(\"bonus-time\")?\n      bonusTime = (lastBonus / 1000).toFixed(2)\n      @showBonus\n        el: @getEl(\"bonus-time\")\n        x: \"-2em\"\n        html: i18n(\"game.bonus-time\", { bonus_time : bonusTime }) or \"+#{bonusTime} seconds\"\n        delay: 400\n\n    if paused? and m.hasLimit()\n      @el.classList.toggle(\"game-paused\", paused)\n\n  onScoreChange: (m) ->\n    {correct, total, record} = m.changed\n\n    if record? and @getEl(\"record\")?\n      @getEl(\"record\").innerHTML = _.prettyNumber(record)\n      @getEl(\"record\").offsetLeft\n\n    if total? and @getEl(\"total\")?\n      @getEl(\"total\").innerHTML =\n      @getEl(\"score\").innerHTML =\n        _.prettyNumber(total)\n\n  showBonus: ({el, x, html, delay}) ->\n    el.innerHTML = html\n    @transform el, {x, transition: \"none\", opacity: 0}\n    el.offsetLeft\n\n    @transition el, \"\", true\n\n    window.setTimeout (=>\n      @transform el, {x: 0, opacity: 1}\n    ), 1 + (delay or 0)\n\n    window.setTimeout (=>\n      @transform el, {opacity: 0}\n    ), 1000 + (delay or 0)\n\n  enterGame: ->\n    super\n\n    Sound.stop \"system:tally-score\"\n\n    @el.classList.add(\"disable-goto-next\")\n\n    @trigger(\"ui\", minimal: true) if @game.extra.get(\"fullscreen\")\n    @showNext(true)\n\n  startGame: ->\n    Sound.fadeIn \"system:game-music-slow\" if @game.extra.get(\"sounds\")\n    super\n\n  endGame: ->\n    try\n      answerDetails = @answerDetails?()\n    catch err\n      console.error \"Error on end game\", err\n      answerDetails = []\n\n    if @game.extra.get(\"sounds\")\n      Sound.fadeOut \"system:game-music-slow\"\n      Sound.loop \"system:tally-score\"\n\n    super\n\n    @trigger(\"ui\", minimal: false) if @game.extra.get(\"fullscreen\")\n\n  afterAnimateScores: ->\n    if @game.extra.get(\"sounds\")\n      Sound.stop \"system:tally-score\"\n      Sound.play \"system:spin-win\"\n\n    @el.classList.remove(\"disable-goto-next\")\n\n    if @options.data\n      { game, challenge_configuration } = @options.data\n\n    nbStars =\n      if challenge_configuration?.nb_stars is 0 \n        0\n      else\n        challenge_configuration?.nb_stars ?\n        challenge_configuration?.weighting\n\n    earned = 0\n    if !!@game.timer.get(\"isDisabled\") and @game.score.get(\"incorrect\") == 0\n      earned = nbStars\n    else if game?.stars and nbStars\n      {earned} = @calculateStarsEarned\n        score: @game.score.get(\"record\")\n        stars: nbStars\n        range: @options.data.game.stars\n\n    # Process game interaction only if the scores are to be calculated\n    if game?.stars\n      Session.get (err, { attempt }) =>\n        @lesson.processInteraction\n          score:           _.clone(@game.score.attributes)\n          time:            _.clone(@game.timer.attributes)\n          id:              @options.id\n          name:            @options.name\n          type:            @options.type\n          nb_stars_earned: earned\n          configuration:   @options.data.challenge_configuration\n          game:            true\n          slideData:       @options.data\n          attempt:         attempt\n          answerDetails:   @answerDetails?() or []\n          metadata:        @options.metadata\n\n    preposition = i18n('game.of') or 'of'\n    @getEl(\"stars\").innerHTML =\n      earned + _.wrapInTag(\" #{preposition} #{nbStars}\", \"sup\", {class: \"stars-total\"})\n\n    super\n\n  calculateStarsEarned: ({score, stars, range}) ->\n    {min, max} = range\n\n    numLevels = if stars > 1 then stars - 1 else 1\n    levels = [0...stars].map (i) -> (max - min) / numLevels * i + min\n    level  = _.chain(levels).filter((n) -> score >= n).last().value()\n    earned = levels.indexOf(level) + 1\n\n    { earned }\n\n  onCorrectAnswer: ->\n    Sound.play \"system:correct\" if @game.extra.get(\"sounds\")\n    super\n\n  onIncorrectAnswer: ->\n    Sound.play \"system:incorrect\" if @game.extra.get(\"sounds\")\n    super\n\n  showNext: (isFirstRun) ->\n\n  checkAnswer: ->\n\n  screenshot: ->\n    @stopListening()\n    @el.classList.remove(\"game-count-down\", \"game-paused\")\n    @setState(\"playing\", \"game\")\n    super arguments...\n\nmodule.exports = EngineGameView\n","{ Session }  = Application.actions()\n\nclass BaseSlideView extends Backbone.View\n  # Called by the CMS when previewing the engine configuration. Reset\n  # the state to \"prompt\" unless the answer is the only changed property.\n  refresh: (params, config) ->\n    @setState true, \"refresh\"\n\n    answerChangeOnly = _.isEqual(\n      _.omit(params.data, \"answer\")\n      _.omit(@options.data, \"answer\")\n    )\n\n    if answerChangeOnly\n      isCorrect =\n        @options.data.answer?.incorrect is params.data.answer?.incorrect\n\n    @options.data = params.data\n    @options.metadata = params.metadata\n\n    if answerChangeOnly and params.data.answer\n      @trigger(\"complete\", this, { isCorrect })\n    else\n      @undelegateEvents()\n      @render(params, config)\n      @delegateEvents()\n      @trigger(\"refresh\", this)\n      @trigger(\"resize\", this)\n\n    window.setTimeout (=> @setState false, \"refresh\"), 0\n\n  # Reset returns the slide to it's initial state so that the\n  # template can be interacted again from scratch.\n  reset: ->\n    @undelegateEvents()\n    @render()\n    @delegateEvents()\n\n  # Call `submit` once the template is considered complete. Don't show any\n  # feedback if there is none to show, or feedback is deliberately disabled.\n  submit: ->\n    try\n      answerDetails = @answerDetails?()\n    catch err\n      console.error \"Error on answer details\", err\n      answerDetails = []\n\n    isCorrect     = @isCorrect()\n    prevState = @currentState.state\n\n    isTooSlow     = prevState is \"prompt\" and\n                    @options.data.game?.timer?.limit > 0\n\n    @trigger \"complete\", this, { isCorrect, isTooSlow, answerDetails }\n\n    return @next() if not @options.data.answer\n\n    @setState(\"complete\")\n    if @options.lessonConfiguration?.hasAnswerFeedback\n      @showAnswer()\n    else\n      @next()\n\n  # Additional event to be fired alongside slide interaction\n  # this happens when user has completed the slide\n  slideCompleted: (isCorrect = @isCorrect(), answerDetails = @answerDetails?()) ->\n    isInteractive = (answerDetails?.length || 0) > 0\n    Application.publish(\"event:slide-completed\") { isCorrect, isInteractive }\n\n  # Additional event to notify that current slide is moving to the next one\n  slideNext: () ->\n    slideIndex = @options.slideIndex\n    Application.publish(\"event:next-slide\") { slideIndex }\n\n  # Additional details about the interaction tracked in analytics.\n  # Is an array containing all the question/answer pairs generated on the slide\n  answerDetails: -> []\n\n  # Override with the template's own logic determining whether\n  # the user has successfully completed the slide.\n  isCorrect: -> true\n\n  # Add template logic to visually display the answer of the template.\n  showAnswer: ->\n\n  exit: ->\n    Backbone.Events.trigger \"application-exit\"\n\n  delegateEvents: ->\n    super()\n    @toggleNonBubblingEvents(\"add\")\n    @listenTo this, \"refresh\", @onRefresh\n    @listenTo this, \"narration-loaded\",   @onNarrationLoaded\n    @listenTo this, \"narration-progress\", @onNarrationProgress\n    @listenTo this, \"narration-pause\",    @onNarrationComplete\n    @listenTo this, \"narration-complete\", @onNarrationComplete\n\n  # Undelegate events for all subviews, like draggies and number pickers.\n  undelegateEvents: ->\n    @stopListening()\n    @toggleNonBubblingEvents(\"remove\")\n\n    for key, arr of this\n      arr = [arr] unless _.isArray(arr)\n      obj.undelegateEvents?() for obj in _.compact(arr)\n\n    super()\n\n  # Provide a generic interface for events which do not bubble, like scrolling\n  # and loading, which are attached/detached through Backbone.View delegation\n  toggleNonBubblingEvents: (dir) ->\n    events =\n      scroll: [\n        \".content-scroll\"\n        \".content-sm-scroll\"\n        \".content-md-scroll\"\n        \".content-lg-scroll\"\n      ]\n\n    for evt, selector of events\n      for el in @el.querySelectorAll(selector.join(\", \"))\n        el[\"#{dir}EventListener\"](evt, this, false)\n\n  handleEvent: (e) ->\n    switch e.type\n      when \"scroll\" then @onScroll(e)\n\n  onScroll: (e) ->\n    @trigger(\"scroll\", e)\n\nmodule.exports = BaseSlideView\n","###\n  For the content engine, slides are configured by first loading the\n  config.json file and post-rendering slides. The corresponding views are\n  created from templates rather than slide specific views.\n###\nCommentCollection = require(\"collections/comments\")\n\n{ Sound, Analytics, Session } = Application.actions()\n\nLessonMenuView  = require(\"views/components/lesson-menu\")\nSlideAnswerView = require(\"views/components/slide-answer\")\nTextInputView   = require(\"views/components/text-input\")\nSocialView      = require(\"views/components/social-learning\")\nPreloader       = require(\"lib/preload\")\nLesson          = require(\"models/lesson\")\nLessonEngine    = require(\"models/lesson-engine\")\nprocessData     = require(\"lib/data-processer\")\nI18N            = require(\"lib/i18n\")\ndevice          = require(\"lib/device\")\nnetwork_utils   = require(\"utils/network_utils\")\n\nclass BaseSlidesView extends Backbone.View\n  templates:\n    starsAvailable:  require(\"templates/components/engine/stars-available\")\n    starsEarned:     require(\"templates/components/engine/stars-earned\")\n    slideAnswer:     require(\"templates/components/engine/slide-answer\")\n\n  events:\n    \"iostap #slide-answer-continue\": \"onContinue\"\n    \"iostap #lesson-header-nav-menu-btn\": \"openMenu\"\n    \"iostap #lesson-header-nav-social-learning\": \"openSocialLearning\"\n    \"iostap #play-audio-popup .btn-yes\": \"onNarrationAccept\"\n    \"iostap #play-audio-popup .btn-no\": \"onNarrationReject\"\n\n  initialize: (params, callback) ->\n    callback()\n    @slideSocialComments = []\n    @listenTo this, \"goToPage\", @onGoToPage\n    @listenTo this, \"showView\", @onShowView\n    @listenTo Backbone.Events, \"subscribe:event:comment-loaded\", @onCommentLoad\n    @listenTo Backbone.Events, \"subscribe:event:goToPage\", @goToPage\n    @listenTo Backbone.Events, \"subscribe:event:toggle-page-count\", @toggleHeaderPageCount\n    @listenTo Backbone.Events, \"subscribe:event:toggle-title\", @toggleHeaderTitle\n    @listenTo Backbone.Events, \"subscribe:event:toggle-nav-btn\", @toggleNavBtn\n    @listenTo Backbone.Events, \"subscribe:event:toggle-open-menu-externally\", @toggleOpenMenuExternally\n    @listenTo Backbone.Events, \"subscribe:event:resume-tracking\", @resumeTracking\n    @listenTo Backbone.Events, \"subscribe:event:pause-tracking\", @pauseTracking\n    @listenTo Backbone.Events, \"application-exit\", @onExit\n    @listenTo Backbone.Events, \"ed-closed\", @onDisconnection\n    @listenTo Backbone.Events, \"load-narration\", @onLoadNarration\n    @listenTo Backbone.Events, \"subscribe:event:new-star\", @onNewStar\n    @listenTo Backbone.Events, \"event:survey-complete\", @surveyCompleted\n\n    $(window).bind \"unload pagehide\", =>\n      # closed is Deprecated\n      Application.publish(\"event:lesson-closed\") {}\n      Application.publish(\"event:lesson-unload\") {}\n      @onExit()\n      return\n\n    isFullScreen = false\n\n    $(document).on [\n      \"webkitfullscreenchange\"\n      \"mozfullscreenchange\"\n      \"fullscreenchange\"\n      \"MSFullscreenChange\"\n    ].join(\" \"), =>\n      isFullScreen =\n        document.fullScreen or\n        document.mozFullScreen or\n        document.webkitIsFullScreen or\n        not isFullScreen\n\n      @toggleUI fullscreen: isFullScreen\n\n    if params.cms\n      window.ED_LMS_PREVIEW = true\n    \n    if params.public\n      window.ED_PUBLIC_PREVIEW = true\n\n    if params.engine_preview\n      window.ENGINE_PREVIEW = true\n\n    if params.cms or params.public\n      window.addEventListener \"message\", (event) =>\n        # TODO: check origin for security\n        switch event.data.type\n          when \"go-to-page\" then @goToPageFromPreview(event.data.value, event.data.options)\n          when \"set-current-state\" then @setCurrentState(event.data.value)\n          when \"refresh\" then @refresh(event.data.value, event.data.options)\n          when \"refresh-current-view\" then @refreshCurrentView(\n            event.data.value,\n            event.data.config,\n            event.data.slideIndex\n          )\n    else\n      @lesson = new Lesson()\n      @lesson.load (err) =>\n        if err?\n          console.error(\"Error while loading the lesson data\", err)\n        else\n          renderData = _.extend({}, params, @lesson.getSlides())\n          I18N.initialize(renderData.config?.language or \"en\")\n          @initRenderWith(renderData)\n\n  initRenderWith: (data) ->\n    @render(data)\n    @setElements()\n    Preloader.preloadLessonAssets(data.slides)\n    Preloader.preloadThomasAssets()\n\n  # on lesson exit.\n  # (not to be confused with slide exit/transition @onContinue)\n  onExit: ->\n    @stopCurrentNarration()\n    @stopTracking()\n    Application.publish(\"event:exit\") {}\n    Application.publish(\"lesson:exit\") {}\n    if @options? and @options.scorm and @options.config.hasScormExitButton\n      try\n        window.top.close()\n      catch e\n        console.error(\"error when closing window:\", e)\n\n  onDisconnection: ->\n    @el.querySelector(\"#disconnection-warning\").classList.add(\"active\")\n\n  refresh: (data, params) ->\n    @request?.abort()\n\n    window.clearTimeout @timeout\n    delete @currentIndex\n\n    view.undelegateEvents().remove() for view in (@slideViews or [])\n\n    cmsOpts =\n      withoutNarration: true\n      forceResize: true\n      isRefresh: true\n\n    Sound.disableSystemSounds?()\n    @lesson = new Lesson(data)\n    renderedData = @lesson.getSlides()\n    options = _.extend(cmsOpts, renderedData, params)\n\n    I18N.initialize(data?.config?.language or \"en\")\n    @render options\n    @setElements()\n\n  setCurrentState: (state) ->\n    @getCurrentSlide().setState state\n\n    if state is \"complete\" and @getCurrentSlide().options.data?.answer?\n      @onComplete(@getCurrentSlide(), isCorrect: true)\n    else\n      @slideAnswerView.toggle(false)\n\n  refreshCurrentView: (options, config, slideIndex) ->\n    return if @currentIndex isnt slideIndex\n    if @currentIndex?\n      view = @getCurrentSlide()\n      options.data     = processData.one(options.data, view.options.type, config)\n      options.metadata = processData.oneMD(options.metadata)\n      if view? and not _.isEqual(options.data, view.options.data)\n        @toggleViewInDOM(view, true)\n        view.withoutNarration = true\n        view.refresh(options, config)\n\n  createSlideViews: (config, params) ->\n    (view.off().undelegateEvents() for view in @slideViews) if @slideViews\n\n    @setElements()\n    @setGlobalStyles(@options)\n\n    @slideViews =\n      for el, i in @el.querySelectorAll(\".slide\")\n        view = @createViewFor(el, @options.slides[i], config, params, i)\n        view.on \"ui\", @toggleUI, this\n        view.on \"complete\", @onComplete, this\n        view.on \"refresh\",  @onRefresh, this\n        view.on \"scroll\",  @onScroll, this\n        view.on \"video-play\", @onVideoPlay, this\n        view.on \"video-pause\", @onVideoPause, this\n        view\n\n    @logMenu() if @options.debug\n\n  logMenu: ->\n    Logger = new (require \"lib/logger\")(not window.cordova, \"MENU\", \"#2DB906\")\n\n    for el, i in @slideViews\n      name = el.options.name\n      name += \" \" while name.length < 22\n      Logger \"#{name} #{window.location.origin}/#slide/#{i + 1}\"\n\n  createViewFor: (el, data, config, params, slideIndex) ->\n    View = require(\"engine/#{data.type}/view\")\n    v    = new View @optionsForView(el, data, config, params, slideIndex)\n    v.lesson = @lesson\n    return v\n\n  getExtraConfig: (params) ->\n    defaultConfig =\n      locked: true\n      contextRequiresExitButton: not window.ED_PUBLIC_PREVIEW and\n        not params.hideExitButton and\n        (not params.scorm or params.config.hasScormExitButton)\n      contextAllowsFreeNavigation: not(params.scorm or window.__?.slidedeck?.isScored)\n      networkOnline: network_utils.checkOnline()\n\n    config = window.__?.downloadConfiguration\n\n\n    params.config = _.extend {}, defaultConfig, params.config, config\n\n    params\n\n  # States are UI classes on the view, and can be activated to switch\n  # between lesson-wide display modes for stylistic control of all elements,\n  # eg. minimal, fullscreen, video-active, flexible-height, text-input.\n  toggleUI: (state) ->\n    if state.lightbox?\n      state.minimal ?= state.lightbox\n\n      @lightboxBgEl.style.backgroundColor =\n        if typeof state.lightbox is \"string\"\n          state.lightbox\n        else if state.lightbox\n          \"#111\"\n        else\n          \"\"\n\n    for key, val of state\n      if val?\n        @el.classList.toggle(\"ui-#{written.hyphenCase(key)}\", val)\n\n  onVideoPlay: ->\n    @toggleUI videoActive: true\n    Application.publish(\"event:video-play\") {}\n\n  onVideoPause: ->\n    @toggleUI videoActive: false\n\n  toggleStars: (index) ->\n    return if not @slideViews[index]? or @options.scorm\n\n    Session.get (err, { stars, alreadyCompleted, enableStars }) =>\n      { data, id } = @slideViews[index].options\n\n      # this is to detect whether star progress has been passed in the old\n      # emily-sync way (by slide index), or the newer superior hippo-sync way\n      # (by slide ID)\n      starsKey = if stars and _.find( Object.keys(stars) , ((k) => k.length > 1))\n        id\n      else\n        index\n\n      isQuestionPoolSlide = @slideViews[index].options.metadata.friedrichType is \"QuestionPool\"\n\n      starOrWeightValue =\n        if data?.challenge_configuration?.nb_stars is 0\n          0\n        else\n          data?.challenge_configuration?.nb_stars or\n          data?.challenge_configuration?.weighting or\n          0\n\n      # enableStars comes from lesson configuration.\n      # @options.enableStars comes from Ringo in LMS authoring tool.\n      # Depending on where Thomas is being run, one of them is undefined.\n      available =\n        if not isQuestionPoolSlide and (enableStars or @options.enableStars)\n          stars?[starsKey]?.available ? starOrWeightValue\n        else\n          0\n      \n      earned = stars?[starsKey]?.earned or 0\n      total  = available + earned\n      isGame = data?.game?.stars?.min?\n\n      window.clearTimeout @starsTimeout\n\n      if available > 0\n        @starsTimeout = window.setTimeout (=>\n          @slideStarsEl.innerHTML =\n            @templates.starsAvailable { available }\n\n          @slideStarsEl.offsetLeft\n          @el.classList.add(\"display-stars-avail\")\n\n          @starsTimeout = window.setTimeout (=>\n            @el.classList.remove(\"display-stars-avail\")\n          ), 2100\n        ), 600\n\n      else\n        @el.classList.remove(\"display-stars-avail\")\n\n  calculateDuration: (id) => \n    if @durations?[id]?\n      duration = 0\n      for details in @durations[id]\n        duration += (details.end ? Date.now()) - details.start\n      return duration\n    else\n      return -1\n\n  surveyCompleted: (event) =>\n    { slide_id, user_input, attempt } = event\n    duration = @calculateDuration(slide_id)\n    @lesson.processInteraction\n      survey: true\n      slide_id:   slide_id\n      user_input: user_input\n      attempt:    attempt\n      duration:   duration\n\n  onComplete: (view, { isCorrect, isTooSlow, answerDetails }) =>\n    { name, type, data, id, lessonConfiguration, lessonId, courseId } = view.options\n\n    # calculate total duration\n    totalDuration = @calculateDuration(view.id)\n\n    Session.get (err, { attempt }) =>\n      @lesson.processInteraction\n        lesson_id:     lessonId\n        course_id:     courseId\n        id:            id\n        name:          name\n        type:          type\n        slideData:     data\n        correct:       isCorrect\n        tooSlow:       isTooSlow\n        answerDetails: answerDetails\n        configuration: data.challenge_configuration\n        playedSound:   true\n        attempt:       attempt\n        metadata:      view.options.metadata\n        duration:      totalDuration  \n\n      if isCorrect? and lessonConfiguration?.hasAnswerFeedback and data.answer?\n        id = if isCorrect then \"system:correct\" else \"system:incorrect\"\n        Sound.play id\n\n        timerPrompt = data.game?.timer[\"out-of-time-prompt\"]\n        if (not timerPrompt) or timerPrompt.trim() is \"\"\n          timerPrompt = i18n(\"slide-answer.times-up\")\n        @slideAnswerView.render { isCorrect, isTooSlow, timerPrompt, answer: data.answer }\n        @slideAnswerView.toggle(true)\n\n  onRefresh: ->\n    @setElements()\n    @toggleStars(@scroller.currentPage.pageX)\n    @slideAnswerView.toggle(false)\n\n  onContinue: ->\n    @slideAnswerView.toggle(false)\n    @getCurrentSlide().next()\n\n  openMenu: ->\n    if @shouldOpenMenuExternally is true\n      Application.publish(\"event:open-menu\") {slideId: @getCurrentSlide().id}\n    else\n      @lessonMenuView.open()\n\n  openSocialLearning: ->\n    Application.publish(\"event:social-view-clicked\") {slideId: @getCurrentSlide().id}\n    @socialLearningView.open(@getCurrentSlide(), @slideSocialComments)\n\n  toggleHeaderPageCount: (show) ->\n    pageCount = @el.querySelector(\"#lesson-header-nav-page-count\")\n    if show is true\n      pageCount.style.display = 'inline-block'\n    else\n      pageCount.style.display = 'none'\n\n  toggleHeaderTitle: (show) ->\n    titleContent = @el.querySelector(\"#lesson-header-title-content\")\n    if show is true\n      titleContent.style.display = 'block'\n    else\n      titleContent.style.display = 'none'\n\n  toggleNavBtn: (show) ->\n    navBtn = @el.querySelector(\"#lesson-header-nav-menu-btn\")\n    if show is true\n      navBtn.style.display = 'inline-block'\n    else\n      navBtn.style.display = 'none'\n\n  toggleOpenMenuExternally: (shouldOpen) ->\n    @shouldOpenMenuExternally = shouldOpen\n\n  onGoToPage: (index, ms, options = {}) ->\n    @slideSocialComments = []\n    @setElements() unless @slideStarsEl and @starsAlertEl and @slideAnswerView\n    @toggleStars(index)\n    @toggleUI(lightbox: false)\n    @slideAnswerView.toggle(false)\n    @lessonMenuView.setPage(index)\n    @socialLearningView.exit()\n\n  onShowView: (slideView) ->\n    @socialIconEl?.classList.remove(\"has-count\")\n    @startTracking(slideView)\n    @playNarration(slideView) if window.location.href.split(\"thumbnail=true\").length isnt 2\n    @el.classList.remove(\"scroll-top\", \"scroll-bottom\", \"scroll-middle\")\n\n  onScroll: (e, key) ->\n    el  = e?.currentTarget\n    key ?=\n      switch el.scrollTop\n        when 0 then \"top\"\n        when el.scrollHeight - el.offsetHeight then \"bottom\"\n        else \"middle\"\n\n    @el.classList.toggle(\"scroll-top\", key is \"top\")\n    @el.classList.toggle(\"scroll-bottom\", key is \"bottom\")\n    @el.classList.toggle(\"scroll-middle\", key is \"middle\")\n\n  goToPageFromPreview: (index, options) ->\n    @slideViews[index]?.reset()\n    @slideViews[index]?.withoutNarration = true\n\n    @goToPage(index, options.ms, { fromPreview: true })\n\n    window.clearTimeout @gotoTimeout\n    \n    @gotoTimeout = window.setTimeout (=>\n      @slideViews[index]?.trigger(\"resize\")\n    ), 600\n\n  ## comments: array of comments\n  ## total: total number of comments for each slide\n  onCommentLoad: ({ comments, total, hasMore }) ->\n    @slideSocialComments = comments if comments\n    @socialIconEl?.classList.toggle(\"has-count\", total > 0)\n    @socialLearningView.updateComments(@slideSocialComments, hasMore) if comments\n\n  onNewStar: ({ earned, total, score }) ->\n    window.clearTimeout @starAlertTimeout\n\n    if earned > 0 and score > 0\n      @starsAlertEl.classList.add(\"before-display\")\n      @starAlertTimeout = window.setTimeout (=>\n        @starsAlertEl.innerHTML = @templates.starsEarned\n          stars: [0...total].map (el, i) ->\n            complete: i < score\n\n        @starsAlertEl.offsetLeft\n        @starsAlertEl.classList.add(\"display\")\n\n        @starAlertTimeout = window.setTimeout (=>\n          @starsAlertEl.classList.remove(\"display\", \"before-display\")\n        ), 2100\n\n        # optimistically update earned stars so repeating the slide\n        # shows an updated available stars message\n        Session.get (err, { stars }) =>\n          # for backwards compatibility with old learner's app,\n          # which sent stars as an array in order of slide index\n          if Array.isArray(stars)\n            starsForSlide = stars[@currentIndex]\n          else\n            slideId = @slideViews[@currentIndex]?.id\n            starsForSlide = stars[slideId]\n\n          if starsForSlide?\n            remainingStars = starsForSlide.available\n            starsForSlide.earned = Math.min(starsForSlide.earned + earned, starsForSlide.available)\n            starsForSlide.available = Math.max(0, starsForSlide.available - earned)\n      ), 300\n\n  onLoadNarration: (isLoading) ->\n    @el.classList.toggle \"is-loading-narration\", isLoading\n\n  setElements: ->\n    @slideStarsEl  = @el.querySelector(\"#stars-available\")\n    @starsAlertEl  = @el.querySelector(\"#stars-earned\")\n    @audioPopupEl  = @el.querySelector(\"#play-audio-popup\")\n    @lightboxBgEl  = @el.querySelector(\"#slides-lightbox-bg\")\n    @socialIconEl  = @el.querySelector(\"#lesson-header-nav-social-learning\")\n\n    @textInputView?.undelegateEvents()\n    @textInputView = new TextInputView(el: \"#text-input-view\")\n    @textInputView.on \"open\", => @toggleUI textInput: true\n    @textInputView.on \"exit\", => @toggleUI textInput: false\n\n    @socialLearningView?.undelegateEvents()\n    @socialLearningView = new SocialView(el: \"#social-view\")\n    @socialLearningView.on \"open\", =>\n      @toggleUI socialLearning: true\n      @socialLearningOpen = true\n    @socialLearningView.on \"exit\", =>\n      @toggleUI socialLearning: false\n      @socialLearningOpen = false\n\n    if device.platform is \"iOS\"\n      # TODO: Better solution that's not as leaky.\n      document.addEventListener 'touchmove', (e) =>\n        if @socialLearningOpen\n          if not $(e.target).parents(\"#social-view-messages\").length\n            # user tapped outside the social-learning box. dont scroll.\n            e.preventDefault()\n          else\n            socialMessagesList = document.getElementById(\"social-view-messages-list\")\n            if not socialMessagesList or socialMessagesList.scrollHeight <= socialMessagesList.clientHeight\n              # social no scrollbar. block scroll\n              e.preventDefault()\n            # else - social has scrollbar. allow scrolling\n      , { passive: false }\n\n    goToPage = (index) =>\n      @toggleViewInDOM(@slideViews[index], true)\n      @slideViews[index].el.offsetWidth\n      @goToPage(index)\n\n    @lessonMenuView?.undelegateEvents()\n    @lessonMenuView = new LessonMenuView\n      el: @el.querySelector(\"#lesson-menu\")\n      back: =>\n        goToPage(@currentIndex - 1)\n        @trigger('thomas-menu:back')\n      restart: =>\n        goToPage(0)\n        @trigger('thomas-menu:restart')\n      exit: =>\n        @trigger('thomas-menu:exit')\n      scorm: @options.scorm\n      isQuiz: @options.config.isQuiz\n\n    @socialLearningView.getCurrentPage = => @currentIndex\n\n    @slideAnswerView?.undelegateEvents()\n    @slideAnswerView = new SlideAnswerView\n      el: @el.querySelector(\"#slide-answer\")\n\n  setGlobalStyles: (params) ->\n    _.extend @options, params\n\n    @setColors()\n    @setCustomCSS()\n    @setBackgroundImage()\n    @initializeHtmlLang()\n    @lessonMenuView.updateStyle(@options.config)\n\n  setColors: () ->\n    if @options.config?.colors?\n      { text, background } = @options.config.colors\n\n      @el.className = @el.className.replace(/theme-[\\w-]+/, \"\")\n\n      if @options.config.colors.theme\n        @el.classList.add(\"theme-#{@options.config.colors.theme.replace(/\\s/g,'')}\")\n\n      @el.style.color = text\n      @el.style.backgroundColor = background\n      document.body.style.backgroundColor = background\n\n      isDark = (window.getComputedStyle(@el).color\n        .split(/\\D+/)\n        .filter((e) -> e)\n        .slice(0, 3)\n        .map(parseFloat)\n        .reduce(((m, e) -> m + e / 255), 0)\n        ) / 3 < 0.3\n\n      @el.classList.toggle(\"text-dark\", isDark)\n\n  setCustomCSS: ->\n    if @options.config?.enableCustomCSS\n      css = @options.config?.customCSS\n      @el.querySelector(\"#custom-css\")?.innerHTML = css\n\n  setBackgroundImage: () ->\n    backgroundEl    = @el.querySelector(\"#slides-background\")\n    backgroundImage =\n      if @options.config?.background?\n        \"url(#{@options.config.background})\"\n      else\n        \"\"\n\n    backgroundEl?.style.backgroundImage = backgroundImage\n    document.body.style.backgroundImage = backgroundImage\n\n  initializeHtmlLang: () ->\n    # HTML lang attributes let css calculation like `hyphen: auto;` decide the\n    # best way to hyphenate based on the language\n    document.documentElement.lang = @options.config?.language\n\n  startTracking: (slideView) ->\n    # @durations is a dictionary of slides and their timestamps\n    # { [slideId: string]: Array<{start: number; end: number; name?: string;}> };\n    @durations ?= {}\n\n    @stopTracking()\n    Application.publish(\"event:slide-start\") {slideId: slideView.id}\n    id = slideView.options?.id\n    name =\n      slideView.getTrackingTitle() or\n      slideView.options?.name\n\n    @durations[id] = [{ start: Date.now(), end: null, name: name }]\n\n  # sets end date to the last timestamp of @durations\n  pauseTracking: () -> \n    slideView = @getCurrentSlide()\n    timestamps = @durations[slideView.id]\n    if timestamps\n      timestamps[timestamps.length - 1].end = Date.now()\n\n  # addes a new timestamp to @durations\n  resumeTracking: () -> \n    slideView = @getCurrentSlide()\n    timestamps = @durations[slideView.id]\n    if timestamps\n      timestamps.push({ start: Date.now(), end: null, name: name })\n\n  stopTracking: ->\n    for id of @durations\n      slideName = @durations[id]?[0]?.name\n      totalDuration = @calculateDuration(id)\n      delete @durations[id]\n      Session.get (err, { sessionId }) ->\n        Analytics.trackView {\n          name: slideName, id: id, duration: totalDuration, session: sessionId\n        }\n\n  getCurrentSlide: ->\n    @slideViews[@currentIndex]\n\n  stopCurrentNarration: ->\n    Sound.stop(@narration) if @narration?\n\n  onNarrationReject: ->\n    slideView = @getCurrentSlide()\n    @audioPopupEl.classList.remove(\"active\")\n    slideView.trigger \"narration-complete\"\n    slideView.setState \"prompt\"\n\n  onNarrationAccept: ->\n    @audioPopupEl.classList.remove(\"active\")\n    @playNarration(@getCurrentSlide())\n\n  playNarration: (slideView) ->\n    @stopCurrentNarration()\n    window.clearTimeout @narrationTimeout\n\n    return if slideView.withoutNarration or @options.withoutNarration\n\n    data = slideView?.serialize()\n    wait = 100\n    loaded = false\n\n    @narration = data.narration?.audio_file\n    if @narration\n      Application.publish(\"event:narration-started\")  { \n        can_not_be_skipped: data.narration.can_not_be_skipped \n      }\n      if data.narration.can_not_be_skipped\n        slideView.setState(\"narration\")\n        slideView.trigger(\"narration-progress\", 0)\n\n      @narrationTimeout = window.setTimeout =>\n        checkIfSoundHasPlayed = Sound.firstSoundPlayed or (n) -> n(null, true)\n        checkIfSoundHasPlayed (err, hasFirstSoundPlayed) =>\n          if not hasFirstSoundPlayed\n            @audioPopupEl.classList.add(\"active\")\n          else\n            Sound.play @narration,\n              cb: ->\n              onProgress: (e) ->\n                unless loaded\n                  slideView.trigger(\"narration-loaded\", e)\n                  loaded = true\n                slideView.trigger(\"narration-progress\", e)\n              onComplete: ((startingSlide) => (e) =>\n                Application.publish(\"event:narration-completed\") { \n                  can_not_be_skipped: data.narration.can_not_be_skipped \n                }\n                # only auto-advance on slide narration commenced at.\n                if data.narration.progress_on_completion and\n                    @getCurrentSlide()?.id is startingSlide?.id\n                  slideView.next()\n                else\n                  slideView.trigger(\"narration-complete\")\n                )(@getCurrentSlide())\n      , wait\n\nmodule.exports = BaseSlidesView\n","###\n  DraggyView abstracts dragging functionality across all Thomas's\n  templates. It can be bound to a rectangle, locked on an axis or constrained\n  to a cicle. It's important to note that DraggyView doesn't actually\n  transform the element, it merely provides evented feedback of it's\n  interaction. Listen to it's drag and drop events and manipulate the view as\n  necessary, whether it be transforming a child, the view itself or adding\n  dropping logic rules.\n\n  Properties:\n    draggy.x: Current x position\n    draggy.y: Current y position\n    draggy.t: Current rotation (theta) adjusted to the *top of the circle*\n\n    These attributes are also available as data attributes on draggy.el.\n\n    draggy.velocity:\n      x: horizontal pixel movement per ms\n      y: vertical pixel movement per ms\n      t: angle of movement\n      dir: \"up\", \"right\", \"down\", \"left\" or \"none\"\n\n    Velocity is a measurement of movement occuring in the last 300ms.\n    Use getVelocity(ms) to include movement over a different duration.\n\n  Public methods:\n    draggy.lock()\n    draggy.unlock()\n    draggy.isWithin(bounds[, buffer])\n    draggy.isOver(bounds[, buffer])\n    draggy.closest([bounds...])\n    draggy.distanceTo(x, y[, opts])\n    draggy.reset({x, y, t})\n    draggy.getVelocity([ms])\n    draggy.resetPosition()\n\n  Events:\n    drag: (draggy, isFirstDrag)\n    drop: (draggy)\n\n  Options:\n    minX: Minimum x position\n    maxX: Maximum x position\n    minY: Minimum y position\n    maxY: Maximum y position\n    lock: \"x\" or \"y\"\n    radius: Radius of circular bounds\n    isParent: False if the element transforms, true if a child will instead\n    allowPropagation: Stop immediate event propagation on touch start\n###\n\nEasie                   = require(\"lib/easie\")\nPrefix                  = require(\"lib/prefix\")\n{ getBounds }           = require(\"lib/element\")\n{ events: { pointer } } = require(\"lib/device\")\n\n\nQUARTER_TURN = Math.PI / 2\nFULL_TURN = Math.PI * 2\n\nclass DraggyView extends Backbone.View\n\n  initialize: (@options) ->\n    @options.minX ?= -Infinity\n    @options.minY ?= -Infinity\n    @options.maxX ?=  Infinity\n    @options.maxY ?=  Infinity\n\n    @x = @el.dataset?.x = 0\n    @y = @el.dataset?.y = 0\n\n    @velocity = {}\n\n    @getOffset()\n\n  events: ->\n    events =\n      \"dragstart\": \"preventDefault\"\n\n    events[pointer.start] = \"onStart\"\n    return events\n\n  bindExtra: ->\n    document.addEventListener(pointer.move, this, false)\n    document.addEventListener(pointer.end, this, false)\n\n  unbindExtra: ->\n    document.removeEventListener(pointer.move, this, false)\n    document.removeEventListener(pointer.end, this, false)\n\n  handleEvent: (e) ->\n    switch e.type\n      when pointer.move\n        e.preventDefault()\n        @onMove(e)\n        break\n      when pointer.end\n        @onEnd(e)\n        break\n\n  undelegateEvents: ->\n    @unbindExtra()\n    super\n\n  onStart: (e) ->\n    return if @locked\n\n    e.stopImmediatePropagation() unless @options.allowPropagation\n\n    @el.classList.add(\"active\")\n    @el.style.zIndex = 99\n    @el.style[Prefix \"touchAction\"] = \"none\"\n\n    @history = []\n\n    @getOffset()\n    @getStart(e)\n    @onMove(e)\n    @bindExtra()\n\n  onMove: (e) ->\n    e.preventDefault()\n    _e = if pointer.isTouch then e.touches[0] else e\n\n    {@x, @y, @t} = @constrain\n      x: _e.pageX - @start.x\n      y: _e.pageY - @start.y\n      buffer: 20\n\n    @getVelocity()\n\n    @trigger(\"drag\", this, e.type is pointer.start)\n\n    @disableUserSelect()\n\n  disableUserSelect: ->\n    document.body.classList.add(\"disable-select\")\n\n  onEnd: (e) ->\n    @unbindExtra()\n\n    {@x, @y, @t} = @constrain({@x, @y, @t, buffer: 0})\n\n    @el.dataset.x = @x\n    @el.dataset.y = @y\n    @el.dataset.t = @t\n\n    @el.classList.remove(\"active\")\n    @el.style.zIndex = \"\"\n    @el.style[Prefix \"touchAction\"] = \"\"\n\n    @trigger(\"drop\", this)\n    document.body.classList.remove(\"disable-select\")\n\n  # `getBoundingClientRect` returns an immutable object, so it's necessary to\n  # get and set attributes. We'll also subtract the current position if the\n  # draggy isn't a parent (and has transforms directly applied)\n  getOffset: ->\n    {top, left, right, bottom, width, height} = @el.getBoundingClientRect()\n\n    @offset = getBounds @el,\n      x: (if @options.isParent then 0 else -@x)\n      y: (if @options.isParent then 0 else -@y)\n\n  getStart: (e) ->\n    _e = if pointer.isTouch then e.touches[0] else e\n\n    @start =\n      x: _e.pageX - @x\n      y: _e.pageY - @y\n\n    if @options.isParent\n      @start.x += @x + @offset.left - _e.pageX\n      @start.y += @y + @offset.top  - _e.pageY\n\n    if @options.radius\n      @start.x += @options.radius\n      @start.y += @options.radius\n\n  getVelocity: (ms = 300) ->\n    now = Date.now()\n\n    @history.push { @x, @y, timestamp: now }\n\n    history = @history.filter (p) -> now - p.timestamp < ms\n\n    [x, y] =\n      for dimension in [\"x\", \"y\"]\n        velocity = history.reduce ((m, p1, i, a) ->\n          p2 = a[i - 1] or p1\n          m + (p2[dimension] - p1[dimension])\n        ), 0\n\n        velocity / (now - history[0].timestamp)\n\n    t   = -Math.atan2(x, y)\n\n    dir =\n      switch Math.round(t / QUARTER_TURN)\n        when     0 then \"up\"\n        when     1 then \"right\"\n        when 2, -2 then \"down\"\n        when    -1 then \"left\"\n        else \"none\"\n\n    @velocity = { x, y, t, dir }\n\n  constrain: ({x, y, buffer}) ->\n    {minX, minY, maxX, maxY, lock, radius} = @options\n\n    if radius\n      t = @toAngle(x, y)\n      { x, y } = @toPosition(t)\n\n    else\n      x = if lock is \"x\" then 0 else @limit(x, minX, maxX, buffer)\n      y = if lock is \"y\" then 0 else @limit(y, minY, maxY, buffer)\n\n    return {x, y, t}\n\n  limit: (value, min, max, buffer) ->\n    if value < min\n      min - Easie.expoOut(min - value, 0, buffer, max - min)\n    else if value > max\n      max + Easie.expoOut(value - max, 0, buffer, max - min)\n    else\n      value\n\n  setPosition: ({x, y, t} = {}) ->\n    if x? or y? or not t?\n      x ?= 0\n      y ?= 0\n      t = @toAngle(x, y)\n      t += FULL_TURN if t < 0\n    else if t?\n      { x, y } = @toPosition(t)\n\n    @el.dataset.t = @t = t\n    @el.dataset.x = @x = x\n    @el.dataset.y = @y = y \n    \n  reset: ({x, y, t} = {}) ->\n    @setPosition({x, y, t})\n    @trigger(\"drop\", this, true)\n\n  resetPosition: ->\n    @el.dataset.t = @t = 0\n    @el.dataset.x = @x = 0\n    @el.dataset.y = @y = 0\n\n  toAngle: (x, y) ->\n    -Math.atan2(x, y) + Math.PI\n\n  toPosition: (t) ->\n    x: Math.cos(t - QUARTER_TURN) * @options.radius\n    y: Math.sin(t - QUARTER_TURN) * @options.radius\n\n  lock: ->\n    @locked = true\n    @el.classList.add(\"locked\")\n\n  unlock: ->\n    @locked = false\n    @el.classList.remove(\"locked\")\n\n  isWithin: (bounds, buffer = 0) ->\n    if @options.isParent\n      left = top = right = bottom = 0\n    else\n      { left, top, right, bottom } = @offset\n\n    left   + @x > bounds.left   - buffer and\n    right  + @x < bounds.right  + buffer and\n    top    + @y > bounds.top    - buffer and\n    bottom + @y < bounds.bottom + buffer\n\n  isOver: (bounds, buffer) ->\n    { left, top, right, bottom } = bounds\n    { width, height } = @offset\n\n    left   -= width\n    right  += width\n    top    -= height\n    bottom += height\n\n    @isWithin { left, top, right, bottom }, buffer\n\n  closest: (areas) ->\n    a =\n      xmin: @offset.left + @x\n      xmax: @offset.left + @x + @offset.width\n      ymin: @offset.top + @y\n      ymax: @offset.top + @y + @offset.height\n\n    _.chain(areas)\n      .map (bounds) ->\n        xmin: bounds.left\n        xmax: bounds.left + bounds.width\n        ymin: bounds.top\n        ymax: bounds.top + bounds.height\n\n      .map (b, index) ->\n        dx = Math.min(a.xmax, b.xmax) - Math.max(a.xmin, b.xmin)\n        dy = Math.min(a.ymax, b.ymax) - Math.max(a.ymin, b.ymin)\n        if dx >= 0 and dy >= 0\n          area = dx * dy\n\n        { area, index }\n\n      .filter(\"area\")\n      .sortBy(\"area\")\n      .last()\n      .value()\n      ?.index\n\n  distanceTo: (x1, y1, {fromCenter, offsetX, offsetY} = {}) ->\n    {left, top, width, height} = @offset\n\n    offsetX ?= if fromCenter then left + width / 2 else 0\n    offsetY ?= if fromCenter then top + height / 2 else 0\n\n    x = x1 - (@x + offsetX)\n    y = y1 - (@y + offsetY)\n\n    Math.sqrt(x * x + y * y)\n\n  preventDefault: ->\n    false\n\n# This draggy class is for templates who need to deal with the cursor sticky problem\nclass AutoCursorRemoveDraggy extends DraggyView \n  bindExtra: ->\n    super\n    document.addEventListener('mouseout', this, false)\n\n  unbindExtra: ->\n    super\n    document.removeEventListener('mouseout', this, false)\n\n  handleEvent: (e) ->\n    super\n    if e.type is 'mouseout'\n      @onEnd(e)\n\nmodule.exports = { DraggyView, AutoCursorRemoveDraggy }\n","class LessonMenuView extends Backbone.View\n  events:\n    \"iostap #lesson-menu-exit\": \"exit\"\n    \"iostap #lesson-menu-go-back\": \"back\"\n    \"iostap #lesson-menu-restart\": \"restart\"\n    \"iostap #lesson-menu-cancel\": \"close\"\n\n  initialize: (@options) ->\n    @pageNumber = @el.querySelector(\"#lesson-menu-page-count\")\n\n  open: ->\n    @el.classList.add(\"active\")\n\n  close: ->\n    @el.classList.remove(\"active\")\n\n  exit: ->\n    @options.exit()\n    Backbone.Events.trigger \"application-exit\"\n    Application.publish(\"event:menu-exit\") {}\n\n  back: ->\n    @options.back()\n    @close()\n\n  restart: ->\n    @options.restart()\n    @close()\n\n  updateStyle: ({ colors, background } = {}) ->\n    image = if background? then \"url(#{background})\" else \"\"\n    { text, background } = colors or {}\n\n    @el.style.backgroundImage = image\n    @el.style.backgroundColor = background\n    @el.style.color = text\n\n  setPage: (index) ->\n    total = @pageNumber.dataset.total\n    if @options.isQuiz\n      @pageNumber.innerHTML = window.marked(\n        i18n(\"menu.brainboost-page-count\", { index: index + 1, total })\n      )\n    else \n      @pageNumber.innerHTML = window.marked(\n        i18n(\"menu.page-count\", { index: index + 1, total })\n      )\n\n    $(@el).removeClass (index, classes) ->\n      return (classes.match(/page-\\d+/g) || []).join(\" \")\n    @el.classList.add(\"page-#{@currentIndex = index}\")\n\nmodule.exports = LessonMenuView\n","class MenuView extends Backbone.View\n  events: ->\n\n  show: ->\n    @el.classList.add(\"show\")\n\n  hide: ->\n    @el.classList.remove(\"show\")\n\nmodule.exports = MenuView\n","###\n  PickerView stores the value of a picker element, handles interaction and\n  a scrolling element. While it doesn't apply transforms to the scroller, it\n  provides feedback via a \"change\" event allowing manipulation by it's parent.\n\n  Properties:\n    picker.value: Current value of the picker\n\n    This attribute is also available as a data attribute on picker.el.\n\n  Public methods:\n    picker.toggleUp(boolean)\n    picker.toggleDown(boolean)\n    picker.setBy(diff)\n\n  Events:\n    change: (picker, isIncreasing)\n\n  Options:\n    value: Initial value of the picker\n###\n\nclass PickerView extends Backbone.View\n\n  initialize: (@options) ->\n    @value = @el.dataset.value = @options.value\n    @scroller = @el.querySelector(\".number-picker-nums-scroller\")\n    @getOffset()\n\n  events: ->\n    \"iostap .number-picker-arr-up\": \"onTapUp\"\n    \"iostap .number-picker-arr-down\": \"onTapDown\"\n\n  setBy: (diff) ->\n    value = @value + diff\n    value = 0 if value > 9\n    value = 9 if value < 0\n\n    @value = @el.dataset.value = value\n\n    @trigger(\"change\", this, diff)\n\n  onTapUp: ->\n    @setBy(1, true)\n\n  onTapDown: ->\n    @setBy(-1, false)\n\n  toggleUp: (enabled) ->\n    @el.classList.toggle(\"disabled-up\", enabled)\n\n  toggleDown: (enabled) ->\n    @el.classList.toggle(\"disabled-down\", enabled)\n\n  getOffset: ->\n    el = @el.querySelector(\".number-picker-nums\")\n    @offset =\n      width: el.offsetWidth\n      height: el.offsetHeight\n\nmodule.exports = PickerView\n","{ DraggyView }          = require(\"views/components/draggy\")\n{ transform, transition } = require(\"lib/element\")\n\nclass SlideAnswerView extends Backbone.View\n  template: require(\"templates/components/engine/slide-answer\")\n\n  events: ->\n    \"touchstart #slide-answer-details .content-scroll\": \"toggleDraggy\"\n    \"touchmove  #slide-answer-details .content-scroll\": \"toggleDraggy\"\n    \"touchend   #slide-answer-details .content-scroll\": \"toggleDraggy\"\n\n  initialize: ->\n    @draggy = new DraggyView\n      el: @el\n      lock: \"x\"\n      minY: 0\n      maxY: @el.offsetHeight\n      isParent: false\n      allowPropagation: true\n\n    @toggle(false)\n\n    @listenTo @draggy, \"drag\", @onDrag\n    @listenTo @draggy, \"drop\", @onDrop\n\n  render: (data = {}) ->\n    data = _.extend {}, typogr, data\n\n    @el.classList.toggle \"has-takeaway\", data.answer.takeaway\n    @el.innerHTML = @template(data)\n\n    @draggy.getOffset()\n    @draggy.options.maxY = @el.offsetHeight\n\n  onDrag: (draggy, isInitial) ->\n    transform draggy.el,\n      y: draggy.y\n      opacity: 1 - (draggy.y / draggy.options.maxY) / 6\n      transition: if isInitial then \"all 300ms\" else \"none\"\n\n  onDrop: (draggy, isReset) ->\n    if not isReset\n      draggy.reset()\n    else\n      transform draggy.el,\n        y: draggy.y\n        opacity: 1\n        transition: \"all 300ms\"\n\n  toggle: (enabled) ->\n    if enabled\n      @draggy.unlock()\n    else\n      @draggy.lock()\n\n    transition @el, \"all 300ms #{if enabled then 600 else 0}ms\", true\n\n    transform @el,\n      y: if enabled then 0 else \"100%\"\n\n  destroy: ->\n    @draggy.undelegateEvents()\n    @draggy = null\n    @undelegateEvents()\n\n  toggleDraggy: (e) ->\n    if e.currentTarget.scrollHeight > e.currentTarget.offsetHeight\n      e.stopImmediatePropagation()\n    return true\n\n\nmodule.exports = SlideAnswerView\n","CommentCollection = require(\"collections/comments\")\nPAGE_SIZE = 10\nDEFAULT_COMMENT_LENGTH = 140\nclass SocialLearningView extends Backbone.View\n  templates:\n    list: require(\"templates/components/engine/social-learning-comments\")\n\n  events:\n    \"open\": \"open\"\n    \"exit\": \"exit\"\n    \"iostap\": \"exit\"\n\n    # Comment actions\n    \"iostap .comment-like\": \"likeComment\"\n    \"iostap .comment-flag\": \"flagComment\"\n    \"iostap .comment-delete\": \"deleteComment\"\n    \"iostap .comment\": \"toggleComment\"\n\n    # Input actions\n    \"focus #social-view-input-text\": \"onFocus\"\n    \"iostap #social-view-start\": \"openInput\"\n    \"iostap #social-view-input-confirm\": \"addComment\"\n    \"iostap #social-view-input-cancel\": \"closeInput\"\n    \"input #social-view-input-text\": \"onChangeText\"\n\n  initialize: ->\n    @eventSuffix = \"\"\n\n    # TODO: Fix social-learning rendering incorrect comments from previous peer-authoring slide on refresh\n    # @listenTo Backbone.Events, \"subscribe:event:comment-loaded\", =>\n      # @renderComments()\n\n    @listenTo Backbone.Events, \"open-social-learning\", ({ slide, peerAuthoring, contentId }) =>\n      @open(slide, undefined, peerAuthoring, contentId)\n\n    return unless @el\n    if window.navigator.userAgent.match(/iP(ad|hone|od)/)\n      @el.classList.add(\"is-ios\")\n\n    @elements =\n      list: @el.querySelector(\"#social-view-messages-list\")\n      input: @el.querySelector(\"#social-view-input-text\")\n      title: @el.querySelector(\"#social-view-input-title\")\n      limit: @el.querySelector(\"#social-view-input-limit\")\n      count: @el.querySelector(\"#social-view-input-slide-count\")\n\n  open: (@slide, comments, @peerAuthoring, @contentId) ->\n    # Use social learning for peer authoring\n    if @peerAuthoring\n      @eventSuffix = \"-pa\"\n    else\n      @eventSuffix = \"\"\n\n    # Peer authoring sends undefined\n    if not @peerAuthoring and comments.length < PAGE_SIZE\n      @isNoMoreComments = true\n    else\n      @isNoMoreComments = false\n\n    @id = @slide.id\n    @comments = new CommentCollection()\n    @comments.add(comments) if comments\n    @listenTo @comments, \"change add remove\", @renderComments\n    @renderComments()\n    @renderSlideData()\n\n    # If we are using this view for peer authoring then use get comments\n    if @peerAuthoring\n      @getMoreComments()\n\n    @el.classList.add(\"visible\")\n\n    @trigger(\"open\")\n\n    @elements.list.addEventListener(\"scroll\", this)\n\n    @showtimeout = window.setTimeout (=>\n      @active = true\n      @el.classList.add(\"active\")\n    ), 300\n\n  # update comments\n  updateComments: (comments, hasMore) ->\n    if hasMore\n      @isNoMoreComments = false\n    if @comments\n      @comments.set(comments)\n\n  renderComments: ->\n    unless @comments\n      return\n    comments = @comments.toJSON()\n    rx = /^(\\uD83C\\uDFF4\\uDB40\\uDC67\\uDB40\\uDC62(?:\\uDB40\\uDC65\\uDB40\\uDC6E\\uDB40\\uDC67|\\uDB40\\uDC77\\uDB40\\uDC6C\\uDB40\\uDC73|\\uDB40\\uDC73\\uDB40\\uDC63\\uDB40\\uDC74)\\uDB40\\uDC7F|\\uD83D\\uDC69\\u200D\\uD83D\\uDC69\\u200D(?:\\uD83D\\uDC66\\u200D\\uD83D\\uDC66|\\uD83D\\uDC67\\u200D(?:\\uD83D[\\uDC66\\uDC67]))|\\uD83D\\uDC68(?:\\u200D(?:\\u2764\\uFE0F\\u200D(?:\\uD83D\\uDC8B\\u200D)?\\uD83D\\uDC68|(?:\\uD83D[\\uDC68\\uDC69])\\u200D(?:\\uD83D\\uDC66\\u200D\\uD83D\\uDC66|\\uD83D\\uDC67\\u200D(?:\\uD83D[\\uDC66\\uDC67]))|\\uD83D\\uDC66\\u200D\\uD83D\\uDC66|\\uD83D\\uDC67\\u200D(?:\\uD83D[\\uDC66\\uDC67])|[\\u2695\\u2696\\u2708]\\uFE0F|\\uD83C[\\uDF3E\\uDF73\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92])|(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D[\\u2695\\u2696\\u2708]\\uFE0F|(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D(?:\\uD83C[\\uDF3E\\uDF73\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]))|\\uD83D\\uDC69\\u200D(?:\\u2764\\uFE0F\\u200D(?:\\uD83D\\uDC8B\\u200D(?:\\uD83D[\\uDC68\\uDC69])|\\uD83D[\\uDC68\\uDC69])|\\uD83C[\\uDF3E\\uDF73\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92])|\\uD83D\\uDC69\\u200D\\uD83D\\uDC66\\u200D\\uD83D\\uDC66|(?:\\uD83D\\uDC41\\uFE0F\\u200D\\uD83D\\uDDE8|\\uD83D\\uDC69(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D[\\u2695\\u2696\\u2708]|(?:(?:\\u26F9|\\uD83C[\\uDFCB\\uDFCC]|\\uD83D\\uDD75)\\uFE0F|\\uD83D\\uDC6F|\\uD83E[\\uDD3C\\uDDDE\\uDDDF])\\u200D[\\u2640\\u2642]|(?:\\u26F9|\\uD83C[\\uDFCB\\uDFCC]|\\uD83D\\uDD75)(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D[\\u2640\\u2642]|(?:\\uD83C[\\uDFC3\\uDFC4\\uDFCA]|\\uD83D[\\uDC6E\\uDC71\\uDC73\\uDC77\\uDC81\\uDC82\\uDC86\\uDC87\\uDE45-\\uDE47\\uDE4B\\uDE4D\\uDE4E\\uDEA3\\uDEB4-\\uDEB6]|\\uD83E[\\uDD26\\uDD37-\\uDD39\\uDD3D\\uDD3E\\uDDD6-\\uDDDD])(?:(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D[\\u2640\\u2642]|\\u200D[\\u2640\\u2642])|\\uD83D\\uDC69\\u200D[\\u2695\\u2696\\u2708])\\uFE0F|\\uD83D\\uDC69\\u200D\\uD83D\\uDC67\\u200D(?:\\uD83D[\\uDC66\\uDC67])|\\uD83D\\uDC69\\u200D\\uD83D\\uDC69\\u200D(?:\\uD83D[\\uDC66\\uDC67])|\\uD83D\\uDC68(?:\\u200D(?:(?:\\uD83D[\\uDC68\\uDC69])\\u200D(?:\\uD83D[\\uDC66\\uDC67])|\\uD83D[\\uDC66\\uDC67])|\\uD83C[\\uDFFB-\\uDFFF])|\\uD83C\\uDFF3\\uFE0F\\u200D\\uD83C\\uDF08|\\uD83D\\uDC69\\u200D\\uD83D\\uDC67|\\uD83D\\uDC69(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D(?:\\uD83C[\\uDF3E\\uDF73\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92])|\\uD83D\\uDC69\\u200D\\uD83D\\uDC66|\\uD83C\\uDDF4\\uD83C\\uDDF2|\\uD83C\\uDDFD\\uD83C\\uDDF0|\\uD83C\\uDDF6\\uD83C\\uDDE6|\\uD83D\\uDC69(?:\\uD83C[\\uDFFB-\\uDFFF])|\\uD83C\\uDDFC(?:\\uD83C[\\uDDEB\\uDDF8])|\\uD83C\\uDDEB(?:\\uD83C[\\uDDEE-\\uDDF0\\uDDF2\\uDDF4\\uDDF7])|\\uD83C\\uDDE9(?:\\uD83C[\\uDDEA\\uDDEC\\uDDEF\\uDDF0\\uDDF2\\uDDF4\\uDDFF])|\\uD83C\\uDDE7(?:\\uD83C[\\uDDE6\\uDDE7\\uDDE9-\\uDDEF\\uDDF1-\\uDDF4\\uDDF6-\\uDDF9\\uDDFB\\uDDFC\\uDDFE\\uDDFF])|\\uD83C\\uDDF1(?:\\uD83C[\\uDDE6-\\uDDE8\\uDDEE\\uDDF0\\uDDF7-\\uDDFB\\uDDFE])|\\uD83C\\uDDFE(?:\\uD83C[\\uDDEA\\uDDF9])|\\uD83C\\uDDF9(?:\\uD83C[\\uDDE6\\uDDE8\\uDDE9\\uDDEB-\\uDDED\\uDDEF-\\uDDF4\\uDDF7\\uDDF9\\uDDFB\\uDDFC\\uDDFF])|\\uD83C\\uDDF5(?:\\uD83C[\\uDDE6\\uDDEA-\\uDDED\\uDDF0-\\uDDF3\\uDDF7-\\uDDF9\\uDDFC\\uDDFE])|\\uD83C\\uDDEF(?:\\uD83C[\\uDDEA\\uDDF2\\uDDF4\\uDDF5])|\\uD83C\\uDDED(?:\\uD83C[\\uDDF0\\uDDF2\\uDDF3\\uDDF7\\uDDF9\\uDDFA])|\\uD83C\\uDDEE(?:\\uD83C[\\uDDE8-\\uDDEA\\uDDF1-\\uDDF4\\uDDF6-\\uDDF9])|\\uD83C\\uDDFB(?:\\uD83C[\\uDDE6\\uDDE8\\uDDEA\\uDDEC\\uDDEE\\uDDF3\\uDDFA])|\\uD83C\\uDDEC(?:\\uD83C[\\uDDE6\\uDDE7\\uDDE9-\\uDDEE\\uDDF1-\\uDDF3\\uDDF5-\\uDDFA\\uDDFC\\uDDFE])|\\uD83C\\uDDF7(?:\\uD83C[\\uDDEA\\uDDF4\\uDDF8\\uDDFA\\uDDFC])|\\uD83C\\uDDEA(?:\\uD83C[\\uDDE6\\uDDE8\\uDDEA\\uDDEC\\uDDED\\uDDF7-\\uDDFA])|\\uD83C\\uDDFA(?:\\uD83C[\\uDDE6\\uDDEC\\uDDF2\\uDDF3\\uDDF8\\uDDFE\\uDDFF])|\\uD83C\\uDDE8(?:\\uD83C[\\uDDE6\\uDDE8\\uDDE9\\uDDEB-\\uDDEE\\uDDF0-\\uDDF5\\uDDF7\\uDDFA-\\uDDFF])|\\uD83C\\uDDE6(?:\\uD83C[\\uDDE8-\\uDDEC\\uDDEE\\uDDF1\\uDDF2\\uDDF4\\uDDF6-\\uDDFA\\uDDFC\\uDDFD\\uDDFF])|[#\\*0-9]\\uFE0F\\u20E3|\\uD83C\\uDDF8(?:\\uD83C[\\uDDE6-\\uDDEA\\uDDEC-\\uDDF4\\uDDF7-\\uDDF9\\uDDFB\\uDDFD-\\uDDFF])|\\uD83C\\uDDFF(?:\\uD83C[\\uDDE6\\uDDF2\\uDDFC])|\\uD83C\\uDDF0(?:\\uD83C[\\uDDEA\\uDDEC-\\uDDEE\\uDDF2\\uDDF3\\uDDF5\\uDDF7\\uDDFC\\uDDFE\\uDDFF])|\\uD83C\\uDDF3(?:\\uD83C[\\uDDE6\\uDDE8\\uDDEA-\\uDDEC\\uDDEE\\uDDF1\\uDDF4\\uDDF5\\uDDF7\\uDDFA\\uDDFF])|\\uD83C\\uDDF2(?:\\uD83C[\\uDDE6\\uDDE8-\\uDDED\\uDDF0-\\uDDFF])|(?:\\uD83C[\\uDFC3\\uDFC4\\uDFCA]|\\uD83D[\\uDC6E\\uDC71\\uDC73\\uDC77\\uDC81\\uDC82\\uDC86\\uDC87\\uDE45-\\uDE47\\uDE4B\\uDE4D\\uDE4E\\uDEA3\\uDEB4-\\uDEB6]|\\uD83E[\\uDD26\\uDD37-\\uDD39\\uDD3D\\uDD3E\\uDDD6-\\uDDDD])(?:\\uD83C[\\uDFFB-\\uDFFF])|(?:\\u26F9|\\uD83C[\\uDFCB\\uDFCC]|\\uD83D\\uDD75)(?:\\uD83C[\\uDFFB-\\uDFFF])|(?:[\\u261D\\u270A-\\u270D]|\\uD83C[\\uDF85\\uDFC2\\uDFC7]|\\uD83D[\\uDC42\\uDC43\\uDC46-\\uDC50\\uDC66\\uDC67\\uDC70\\uDC72\\uDC74-\\uDC76\\uDC78\\uDC7C\\uDC83\\uDC85\\uDCAA\\uDD74\\uDD7A\\uDD90\\uDD95\\uDD96\\uDE4C\\uDE4F\\uDEC0\\uDECC]|\\uD83E[\\uDD18-\\uDD1C\\uDD1E\\uDD1F\\uDD30-\\uDD36\\uDDD1-\\uDDD5])(?:\\uD83C[\\uDFFB-\\uDFFF])|(?:[\\u261D\\u26F9\\u270A-\\u270D]|\\uD83C[\\uDF85\\uDFC2-\\uDFC4\\uDFC7\\uDFCA-\\uDFCC]|\\uD83D[\\uDC42\\uDC43\\uDC46-\\uDC50\\uDC66-\\uDC69\\uDC6E\\uDC70-\\uDC78\\uDC7C\\uDC81-\\uDC83\\uDC85-\\uDC87\\uDCAA\\uDD74\\uDD75\\uDD7A\\uDD90\\uDD95\\uDD96\\uDE45-\\uDE47\\uDE4B-\\uDE4F\\uDEA3\\uDEB4-\\uDEB6\\uDEC0\\uDECC]|\\uD83E[\\uDD18-\\uDD1C\\uDD1E\\uDD1F\\uDD26\\uDD30-\\uDD39\\uDD3D\\uDD3E\\uDDD1-\\uDDDD])(?:\\uD83C[\\uDFFB-\\uDFFF])?|(?:[\\u231A\\u231B\\u23E9-\\u23EC\\u23F0\\u23F3\\u25FD\\u25FE\\u2614\\u2615\\u2648-\\u2653\\u267F\\u2693\\u26A1\\u26AA\\u26AB\\u26BD\\u26BE\\u26C4\\u26C5\\u26CE\\u26D4\\u26EA\\u26F2\\u26F3\\u26F5\\u26FA\\u26FD\\u2705\\u270A\\u270B\\u2728\\u274C\\u274E\\u2753-\\u2755\\u2757\\u2795-\\u2797\\u27B0\\u27BF\\u2B1B\\u2B1C\\u2B50\\u2B55]|\\uD83C[\\uDC04\\uDCCF\\uDD8E\\uDD91-\\uDD9A\\uDDE6-\\uDDFF\\uDE01\\uDE1A\\uDE2F\\uDE32-\\uDE36\\uDE38-\\uDE3A\\uDE50\\uDE51\\uDF00-\\uDF20\\uDF2D-\\uDF35\\uDF37-\\uDF7C\\uDF7E-\\uDF93\\uDFA0-\\uDFCA\\uDFCF-\\uDFD3\\uDFE0-\\uDFF0\\uDFF4\\uDFF8-\\uDFFF]|\\uD83D[\\uDC00-\\uDC3E\\uDC40\\uDC42-\\uDCFC\\uDCFF-\\uDD3D\\uDD4B-\\uDD4E\\uDD50-\\uDD67\\uDD7A\\uDD95\\uDD96\\uDDA4\\uDDFB-\\uDE4F\\uDE80-\\uDEC5\\uDECC\\uDED0-\\uDED2\\uDEEB\\uDEEC\\uDEF4-\\uDEF8]|\\uD83E[\\uDD10-\\uDD3A\\uDD3C-\\uDD3E\\uDD40-\\uDD45\\uDD47-\\uDD4C\\uDD50-\\uDD6B\\uDD80-\\uDD97\\uDDC0\\uDDD0-\\uDDE6])|(?:[#\\*0-9\\xA9\\xAE\\u203C\\u2049\\u2122\\u2139\\u2194-\\u2199\\u21A9\\u21AA\\u231A\\u231B\\u2328\\u23CF\\u23E9-\\u23F3\\u23F8-\\u23FA\\u24C2\\u25AA\\u25AB\\u25B6\\u25C0\\u25FB-\\u25FE\\u2600-\\u2604\\u260E\\u2611\\u2614\\u2615\\u2618\\u261D\\u2620\\u2622\\u2623\\u2626\\u262A\\u262E\\u262F\\u2638-\\u263A\\u2640\\u2642\\u2648-\\u2653\\u2660\\u2663\\u2665\\u2666\\u2668\\u267B\\u267F\\u2692-\\u2697\\u2699\\u269B\\u269C\\u26A0\\u26A1\\u26AA\\u26AB\\u26B0\\u26B1\\u26BD\\u26BE\\u26C4\\u26C5\\u26C8\\u26CE\\u26CF\\u26D1\\u26D3\\u26D4\\u26E9\\u26EA\\u26F0-\\u26F5\\u26F7-\\u26FA\\u26FD\\u2702\\u2705\\u2708-\\u270D\\u270F\\u2712\\u2714\\u2716\\u271D\\u2721\\u2728\\u2733\\u2734\\u2744\\u2747\\u274C\\u274E\\u2753-\\u2755\\u2757\\u2763\\u2764\\u2795-\\u2797\\u27A1\\u27B0\\u27BF\\u2934\\u2935\\u2B05-\\u2B07\\u2B1B\\u2B1C\\u2B50\\u2B55\\u3030\\u303D\\u3297\\u3299]|\\uD83C[\\uDC04\\uDCCF\\uDD70\\uDD71\\uDD7E\\uDD7F\\uDD8E\\uDD91-\\uDD9A\\uDDE6-\\uDDFF\\uDE01\\uDE02\\uDE1A\\uDE2F\\uDE32-\\uDE3A\\uDE50\\uDE51\\uDF00-\\uDF21\\uDF24-\\uDF93\\uDF96\\uDF97\\uDF99-\\uDF9B\\uDF9E-\\uDFF0\\uDFF3-\\uDFF5\\uDFF7-\\uDFFF]|\\uD83D[\\uDC00-\\uDCFD\\uDCFF-\\uDD3D\\uDD49-\\uDD4E\\uDD50-\\uDD67\\uDD6F\\uDD70\\uDD73-\\uDD7A\\uDD87\\uDD8A-\\uDD8D\\uDD90\\uDD95\\uDD96\\uDDA4\\uDDA5\\uDDA8\\uDDB1\\uDDB2\\uDDBC\\uDDC2-\\uDDC4\\uDDD1-\\uDDD3\\uDDDC-\\uDDDE\\uDDE1\\uDDE3\\uDDE8\\uDDEF\\uDDF3\\uDDFA-\\uDE4F\\uDE80-\\uDEC5\\uDECB-\\uDED2\\uDEE0-\\uDEE5\\uDEE9\\uDEEB\\uDEEC\\uDEF0\\uDEF3-\\uDEF8]|\\uD83E[\\uDD10-\\uDD3A\\uDD3C-\\uDD3E\\uDD40-\\uDD45\\uDD47-\\uDD4C\\uDD50-\\uDD6B\\uDD80-\\uDD97\\uDDC0\\uDDD0-\\uDDE6])\\uFE0F)+$/\n    isEmoji  = (msg) -> msg.length < 16 and msg.match(rx)\n\n    @isLoading = false\n    @el.classList.remove(\"is-loading\")\n\n    commentThreadHtml = @templates.list({\n      comments, isEmoji,\n      peerAuthoring: @peerAuthoring\n      isNoMoreComments: @isNoMoreComments\n    })\n\n    $(@elements.list).html(commentThreadHtml)\n\n  renderSlideData: ->\n    if @slide.lesson?.configuration\n      $(@elements.title).html(@slide.lesson.configuration.title or \"\")\n      $(@elements.count).html([\n        @getCurrentPage() + 1\n        @slide.lesson.configuration.slides.length\n      ].join(\" / \"))\n\n      limit = @slide.options.data.socialLearning?.maxResponseLength || 140\n      $(@elements.limit).html(limit)\n      @el.classList.toggle(\"has-limit\", limit > 0)\n\n  exit: (e) ->\n    if e?.target is @el or not e?.target\n      window.clearTimeout @showtimeout\n      document.activeElement.blur() if document.activeElement\n      @active = false\n\n      @elements.input.value = \"\"\n\n      @elements.list.removeEventListener(\"scroll\", this)\n      @el.classList.remove(\"active\")\n      @el.classList.remove(\"visible\")\n      @trigger(\"exit\")\n      Backbone.Events.trigger \"social-learning:exit\"\n\n  onBlur: ->\n    return unless @active\n    @exit()\n\n  toggleComment: (e) ->\n    el = e.currentTarget\n    el.classList.toggle(\"is-selected\")\n\n    if el isnt @elements.activeComment\n      @elements.activeComment?.classList.remove(\"is-selected\")\n\n    if el.classList.contains(\"is-selected\")\n      @elements.activeComment = el\n    else\n      delete @elements.activeComment\n\n  likeComment: (e) ->\n    e.stopImmediatePropagation()\n    like = @comments.like(@id, e.currentTarget.dataset.id)\n    if like\n      Application.publish(\"event:like-comment#{@eventSuffix}\") {slideId: @id, commentId: e.currentTarget.dataset.id, @contentId}\n    else\n      Application.publish(\"event:unlike-comment#{@eventSuffix}\") {slideId: @id, commentId: e.currentTarget.dataset.id, @contentId}\n\n  flagComment: (e) ->\n    e.stopImmediatePropagation()\n    updated = @comments.flag(e.currentTarget.dataset.id)\n    if updated\n      Application.publish(\"event:flag-comment#{@eventSuffix}\") {slideId: @id, commentId: e.currentTarget.dataset.id, @contentId}\n\n  deleteComment: (e) ->\n    # TODO: show loading and disable loading when receiving a comment\n    e.stopImmediatePropagation()\n    Application.publish(\"event:delete-comment#{@eventSuffix}\") {slideId: @id, commentId: e.currentTarget.dataset.id, @contentId}\n\n  openInput: (e) ->\n    @el.classList.add(\"is-input-mode\")\n    @elements.input.focus()\n\n  onFocus: ->\n    window.setTimeout (->\n      Application.publish(\"event:scroll-to-top#{@eventSuffix}\")()\n    ), 400\n\n  handleEvent: (e) ->\n    switch e.type\n      when \"scroll\" then @onScroll(e)\n\n  onScroll: (e) ->\n    if e.target.scrollTop >= e.target.scrollHeight - e.target.offsetHeight\n      @getMoreComments()\n    else if e.target.scrollTop > 0\n      @elements.list.firstChild.style.transform = \"translate3d(0,0,0)\"\n      @elements.list.firstChild.offsetHeight\n      @elements.list.firstChild.style.transform = \"\"\n\n  closeInput: ->\n    @el.classList.remove(\"is-input-mode\")\n    @elements.input.blur()\n\n  addComment: ->\n    message = @elements.input.value\n    maxLength = @slide.options?.data?.socialLearning?.maxResponseLength or 5000\n\n    if @comment?.length >= PAGE_SIZE - 1\n      @isNoMoreComments = false\n\n    if message and message.length <= maxLength\n      @elements.input.value = \"\"\n      @updateCharacterCount()\n      @closeInput()\n      Application.publish(\"event:add-comment#{@eventSuffix}\") {message, slideId:@id, @contentId}\n    else\n      # todo: indicate comment over size in view\n      console.log \"character too many! expect #{maxLength} got: #{message.length} \"\n\n  getMoreComments: ->\n    if not @isLoading and not @isNoMoreComments\n      @isLoading = true\n      @el.classList.add(\"is-loading\")\n      Application.publish(\"event:more-comment#{@eventSuffix}\") {slideId: @id, @contentId}\n\n  onChangeText: (e) ->\n    return unless @active\n    @updateCharacterCount()\n\n  updateCharacterCount: () ->\n    value = @elements.input.value\n    limit = @slide.options.data.socialLearning?.maxResponseLength || DEFAULT_COMMENT_LENGTH\n\n    if limit > 0\n      $(@elements.limit).html(limit - value.length)\n      @el.classList.toggle(\"over-limit\", limit - value.length < 0)\n    else\n      @el.classList.remove(\"over-limit\")\n\nmodule.exports = SocialLearningView\n","class TextInputView extends Backbone.View\n  events: {\n    \"open\": \"open\"\n    \"exit\": \"exit\"\n    \"iostap #text-input-dismiss-btn\": \"onBlur\"\n    \"input #text-input-area\": \"onChange\"\n    \"touchmove\": \"lockScroll\"\n  }\n\n  initialize: ->\n    return unless @el\n    if window.navigator.userAgent.match(/iP(ad|hone|od)/)\n      @el.classList.add(\"is-ios\")\n\n    @elements = {\n      input: @el.querySelector(\"#text-input-area\")\n      title: @el.querySelector(\"#text-input-title\")\n      prompt: @el.querySelector(\"#text-input-prompt\")\n      total: @el.querySelector(\"#text-input-count-total\")\n      current: @el.querySelector(\"#text-input-count-current\")\n    }\n\n  open: (e, @options = {}) ->\n    @border = document.body.scrollTop\n    @el.classList.add(\"visible\")\n    @el.classList.toggle(\"has-min\", @options.min > 0)\n\n    @elements.input.value       = @options.value or \"\"\n    @elements.current.innerHTML = @options.value?.length or 0\n    @elements.total.innerHTML   = @options.min or 0\n    @elements.prompt.innerHTML  = @options.prompt or \"\"\n\n    @showtimeout = window.setTimeout (=>\n      @active = true\n      @onChange()\n      @elements.input.focus()\n      @lockScroll()\n      @el.classList.add(\"active\")\n      @el.style.borderTop = @el.style.borderBottom = \"#{@border}px\"\n    ), 300\n\n  exit: ->\n    window.clearTimeout @showtimeout\n    document.activeElement.blur()\n    @active = false\n\n    @el.classList.remove(\"active\")\n    @el.classList.remove(\"visible\")\n    @trigger(\"exit\")\n\n  onBlur: ->\n    return unless @active\n    @exit()\n\n  onChange: (e) ->\n    return unless @active\n    value = @elements.input.value\n\n    window.clearTimeout @changetimeout\n    @changetimeout = window.setTimeout (=> @$el.trigger(\"update\", value)), 100\n    @elements.current.innerHTML = value.length\n    @el.classList.toggle(\"is-complete\", value.length >= @options.min)\n\n  lockScroll: (e) ->\n    if @active\n      e?.preventDefault() unless e?.target is @elements.input\n      document.scrollingElement?.scrollTop = @border\n      document.body.scrollTop = @border\n\n\nmodule.exports = TextInputView\n","Element  = require(\"lib/element\")\nEasie    = require(\"lib/easie\")\n\nclass ZoomView extends Backbone.View\n\n  initialize: (@options) ->\n    @x = @y = 0\n    @getOffset()\n\n    @options.minScale      ?= 0.5\n    @options.maxScale      ?= 1.0\n    @options.buffer        ?= 0.1\n    @options.contentWidth  ?= @offset.width\n    @options.contentHeight ?= @offset.height\n\n    @velocity = {}\n    @scale = @options.minScale\n    @transform()\n\n  events: ->\n    \"touch:gesture\": \"onGesture\"\n    \"touch:drag\":    \"onDrag\"\n    \"touch:dbltap\":  \"onDoubleTap\"\n\n  transform: (isEnd) ->\n    { minScale, maxScale, buffer } = @options\n\n    cscale = Math.max(@scale, @options.minScale)\n    change = -(@options.minScale - cscale) / cscale\n\n    if isEnd\n      @scale    = Math.max Math.min(@scale, maxScale), minScale\n      @isZoomed = @scale > minScale\n\n      maxW = @options.contentWidth  / 2 * @scale\n      maxH = @options.contentHeight / 2 * @scale\n\n      @x = Math.max Math.min(@x, maxW), -maxW\n      @y = Math.max Math.min(@y, maxH), -maxH\n\n      @trigger \"zoom\", this\n\n    Element.transform @el.firstChild,\n      x: @x * change\n      y: @y * change\n      scale: @scale\n      transition: if isEnd then \"all 400ms\" else \"none\"\n\n  getOffset: ->\n    { top, left, right, bottom, width, height } = @el.getBoundingClientRect()\n    @offset = { top, left, right, bottom, width, height }\n\n  set: ({ scale, x, y, transition }) ->\n    @scale = scale if scale?\n    @x = x if x?\n    @y = y if y?\n    @transform(transition)\n\n  onDoubleTap: ({ detail }) ->\n    { minScale, maxScale, buffer } = @options\n    { x, y } = detail\n\n    if @scale is maxScale\n      @scale = minScale\n    else\n      @scale += Math.max (maxScale - minScale) / 2, 0.2\n\n    @x = x * @scale\n    @y = y * @scale\n\n    @transform(true)\n\n  onDrag: ({ detail }) ->\n    { minScale, maxScale, buffer } = @options\n    { x, y, start, state } = detail\n    didMove = x isnt start.x or y isnt start.y\n\n    if state is \"down\"\n      window.clearTimeout @momentum\n      @origin  = { x: @x - x, y: @y - y }\n      @history = []\n\n    else if didMove\n      @x = @origin.x + x\n      @y = @origin.y + y\n      @getVelocity()\n\n      if state is \"move\"\n        @transform(false)\n\n      else if state is \"up\" and (@velocity.x or @velocity.y)\n        timestamp = Date.now()\n        duration  = 400\n        distance  = 600\n        origin    = { @x, @y }\n\n        maxW  = @options.contentWidth  / 2 * @scale\n        maxH  = @options.contentHeight / 2 * @scale\n\n        destX = @x - @velocity.x * @scale * distance\n        destY = @y - @velocity.y * @scale * distance\n\n        distX = Math.max(Math.min(destX, maxW), -maxW) - origin.x\n        distY = Math.max(Math.min(destY, maxH), -maxH) - origin.y\n\n        do repeat = =>\n          diff = Math.min(Date.now() - timestamp, duration)\n\n          if diff < duration\n            @x = Easie.cubicOut(diff, origin.x, distX, duration)\n            @y = Easie.cubicOut(diff, origin.y, distY, duration)\n\n            @transform(false)\n            @momentum = window.setTimeout(repeat, 1000 / 60)\n          else\n            @transform(true)\n\n  onGesture: ({ detail }) ->\n    { minScale, maxScale, buffer } = @options\n    { x, y, scale, state } = detail\n\n    if state is \"start\"\n      window.clearTimeout @momentum\n      @origin =\n        x: @x - x\n        y: @y - y\n        scale: @scale - scale\n    else\n      @x = @origin.x + x\n      @y = @origin.y + y\n\n    min    = minScale - buffer\n    max    = maxScale + buffer\n    @scale = Math.max Math.min(@origin.scale + scale, max), min\n\n    @transform(state is \"end\")\n\n  getVelocity: (ms = 200) ->\n    now = Date.now()\n\n    @history.push { @x, @y, timestamp: now }\n\n    history = @history.filter (p) -> now - p.timestamp < ms\n\n    [x, y] =\n      for dimension in [\"x\", \"y\"]\n        velocity = history.reduce ((m, p1, i, a) ->\n          p2 = a[i - 1] or p1\n          m + (p2[dimension] - p1[dimension])\n        ), 0\n\n        velocity / (now - history[0].timestamp)\n\n    @velocity = { x, y }\n\nmodule.exports = ZoomView\n","SlideView  = require(\"views/slide\")\nTimerModel = require(\"models/game/timer\")\nScoreModel = require(\"models/game/score\")\n\nclass GameView extends SlideView\n\n  initialize: ->\n    super\n\n    @el.classList.add(\"game-slide\")\n\n    @createModels()\n\n  serialize: ->\n    data = super      \n    _.extend(data, {\n      hasTimeLimit: @hasTimeLimit()\n    })\n\n  createModels: ->\n    @game    ?= {}\n    models    = { timer: TimerModel, score: ScoreModel, extra: Backbone.Model }\n\n    for key, Model of models\n      @game[key]?.off().destroy?()\n      options = @options.data.game?[key] or {}\n      @game[key] = new Model(options)\n\n  # Set the `state-intro` class when the game slide is shown.\n  show: ->\n    @setState(\"intro\", \"game\")\n\n    @listenTo @game.timer, \"change\", @onTimerChange\n    @listenTo @game.score, \"change\", @onScoreChange\n    Application.publish(\"event:slide-rendered\") {}\n\n  # Track the highest score when we leave the slide\n  hide: ->\n    @stopListening()\n    @game.timer?.destroy()\n\n    @setState(false, \"game\")\n\n    @trackEvent\n      category: \"Game\"\n      action: \"Record\"\n      label: @game.score.get(\"record\")\n\n  onRefresh: ->\n    @game.timer?.clearTimers()\n\n    @el.classList.remove(\"game-count-down\", \"game-paused\", \"game-playing\")\n\n    @createModels()\n    @show()\n    @preloadMedia()\n\n  # Enter the game, triggering a count down and resetting both models. Used to\n  # reveal the game before the user can actually start playing. Game slides\n  # become locked when playing and are unlocked after the scores have been\n  # displayed.\n  enterGame: ->\n    @lock() unless @options.data\n    @setState(\"playing\", \"game\")\n\n    @game.score.trigger \"reset\"\n    @game.timer.trigger \"reset\"\n\n    if @hasTimeLimit()\n      @game.timer.trigger \"count\", callback: => @startGame()\n    else\n      # If there is no countdown, we need to start game in a timeout because some\n      # games rely on the countdown to have DOM elements ready\n      window.setTimeout =>\n        @startGame()\n      , 0\n\n  # The game is now playable and the timer is active...\n  startGame: ->\n    if @hasTimeLimit()\n      callback = => @endGame()\n    else\n      callback = => @game.timer.trigger \"stop\"\n\n    @game.timer?.trigger \"start\", { callback }\n\n  # The game's time limit has elapsed, so trigger a tallying up of the total score\n  endGame: ->\n    @setState(\"outro\", \"game\")\n\n    # Prevent race condition on stopping tally sound before starting to play it\n    # on slower devices when there is no score animation (zero score)\n    window.setTimeout =>\n      @game.score.trigger \"tally\", callback: => @afterAnimateScores()\n    , 0\n    @game.timer.trigger \"stop\"\n\n  # Easy access to pause/unpause methods that can be passed directly into the\n  # view's event object.\n  pauseGame: ->\n    @game.timer.set paused: true\n\n  unpauseGame: ->\n    @game.timer.set paused: false\n\n  togglePaused: ->\n    @game.timer.set paused: not @game.timer.get(\"paused\")\n\n  # The scores have now been tallied up and reflect accurate values...\n  afterAnimateScores: ->\n    @unlock() unless @options.data\n\n    @trackEvent\n      category: \"Game\"\n      action: \"Score\"\n      label: @game.score.get(\"total\")\n\n    @slideCompleted()\n\n  # Answers can play a sound, increase the score, and adjust\n  # the amount of time remaining.\n  onCorrectAnswer: ({sound, score, time, tally} = {}) ->\n    return if @hasTimeLimit() and @game.timer.get(\"paused\")\n\n    time  ?= 0\n    score ?= 0\n    total = @game.score.get(\"total\")\n\n    @game.timer.setBy bonus: time\n    @game.score.setBy\n      consecutive: 1\n      correct: 1\n\n    @game.score.setBy\n      score: score\n    , silent: tally?\n\n    if tally\n      @game.score.trigger \"tally\", {tallyFrom: total, ms: 300}\n\n  onIncorrectAnswer: ({sound, score, time, tally} = {}) ->\n    return if @hasTimeLimit() and @game.timer.get(\"paused\")\n\n    time  ?= 0\n    score ?= 0\n    total = @game.score.get(\"total\")\n\n    @game.timer.setBy bonus: -time\n    @game.score.set consecutive: 0\n\n    @game.score.setBy\n      score: -score\n      incorrect: 1\n    , silent: tally?\n\n    if tally\n      @game.score.trigger \"tally\", {tallyFrom: total, ms: 300}\n\n  # Timer and score handlers are passed their respective models. These methods\n  # will be overidden by game instances\n  onTimerChange: (timer) ->\n\n  onScoreChange: (score) ->\n\n  # Store an array for quick access to random keys via `@getRandom(key)`.\n  setArray: (array, key) ->\n    [array, key] = [key, array] if _.isString(array)\n\n    @data ?= {}\n    @data[key] =\n      current: _.shuffle(array)\n      original: _.clone(array)\n\n  getArray: (key) ->\n    @data[key].original\n\n  # Cycle through a shuffled array and replace it's contents when done,\n  # ensuring the last value won't be reselected after shuffling by placing it\n  # at the end of the array.\n  getRandom: (key) ->\n    if @data[key].current.length is 0\n      @data[key].current =\n        _\n          .chain(@data[key].original)\n          .without(@data[key].lastValue)\n          .shuffle()\n          .value()\n          .concat(@data[key].lastValue)\n\n    @data[key].lastValue = @data[key].current.shift()\n\n  getNext: (key) ->\n    if @data[key].current.length is 0\n      @data[key].current = @data[key].original\n\n    @data[key].lastValue = @data[key].current.shift()\n\n  hasTimeLimit: ->\n    not @options.data.game?.timer?.isDisabled and @options.data.game?.timer?.limit > 0\n\nmodule.exports = GameView\n","SlideView              = require(\"views/slide\")\n{ Analytics, Session } = Application.actions()\n\nclass InputView extends SlideView\n  nextSlide: ->\n    Session.get (err, { attempt }) =>\n      Backbone.Events.trigger('event:survey-complete', { slide_id: @options.id, user_input: @userInput(), attempt })\n    @submit()\n\nmodule.exports = InputView\n","# The MainView holds the wrapper template and is used to control rendering\n# between the different child views.\napp = require \"app\"\ntemplate = require \"templates/main\"\n{ platform } = require(\"lib/device\")\n\n# Cache frequently used inbound/outbound containers, which are used\n# when rendering new views\ncontent = inbound = outbound = null\n\nclass MainView extends Backbone.View\n\n  currentClass: \"none\"\n  views: {}\n\n  events: {\n    \"touchstart a[href*='//']\": \"openExternalUrl\"\n    \"click a[href*='//']\": \"openExternalUrl\"\n    \"touchstart a:not([href*='//'])\": \"openRelativeUrl\"\n    \"click a:not([href*='//'])\": \"openRelativeUrl\"\n    \"mouseleave\": \"triggerMouseUp\"\n    \"touchmove\": \"onTouchMove\"\n  }\n\n  # Add the html from the corresponding template and create the child views\n  initialize: ->\n    @el.innerHTML = template()\n\n    # View rendering elements\n    inbound = @el.querySelector(\"#inbound\")\n    outbound = @el.querySelector(\"#outbound\")\n    content = @el.querySelector(\"#content\")\n\n    @addGestures()\n\n    @classForDeviceVersion()\n    @onOrientationChange()\n\n  classForDeviceVersion: ->\n    @el.classList.add(\"device-#{platform.toLowerCase()}\")\n\n  # For external URLs, send an event for the parent application to navigate.\n  openExternalUrl: (e) ->\n    externalUrl = e.currentTarget.getAttribute(\"href\")\n\n    if window.ED_LMS_PREVIEW or window.ED_PUBLIC_PREVIEW\n      window.parent.postMessage({\n        type: \"open-external-url\",\n        value: externalUrl\n      }, \"*\")\n    \n    if window.ENGINE_PREVIEW\n      window.open(externalUrl, \"_blank\")\n      \n    Application.publish(\"event:url-open\")\n      url: externalUrl\n    return false\n\n  # If a relative link contains a hash, follow the route as normal.\n  # Ignore slide routes if the slide scroller is disabled.\n  openRelativeUrl: (e) ->\n    if e.currentTarget.hash\n      window.setTimeout( =>\n        unless e.currentTarget.hash.match(/slide/) and\n               @currentView?.scroller?.enabled is false\n          app.router.navigate(e.currentTarget.hash, true)\n      , 1)\n\n  display: (child, params) ->\n    klass = \"#{child}-active\"\n\n    if @currentClass is klass\n      @currentView.display (->), params\n    else\n      @el.classList.remove \"display\", @currentClass\n      @el.classList.add klass\n      @currentClass = klass\n\n      @transitionViews(child, params)\n\n  # Create a new view based on the child view name and params passed. Avoid\n  # this if its the same view has already been created, and enclass the main\n  # view element for styling subview content.\n  transitionViews: (child, params) ->\n    View = require \"./#{child}\"\n    done = (callback) => @afterDisplay(callback)\n\n    @undelegateEvents()\n\n    inbound.removeAttribute(\"id\")\n    outbound.removeAttribute(\"id\")\n    inbound.id = \"outbound\"\n    outbound.id = \"inbound\"\n\n    # Remove any listeners from the current view\n    if @currentView?\n      @currentView.stopListening()\n      @currentView.undelegateEvents()\n      @currentView.hide?()\n\n    if @views[child] and @views[child].cid isnt @currentView.cid\n      @currentView = @views[child]\n      @currentView.display done, params\n    else\n      @currentView = new View params, done\n      @currentView.el.classList.add(\"view\")\n      @currentView.undelegateEvents()\n      @views[child] = @currentView unless @currentView.cache is false\n\n    if params.preventScroll?\n      @preventScroll = params.preventScroll\n    if params.disableHistory?\n      @currentView.disableHistory = params.disableHistory\n\n    outbound.removeChild(outbound.lastChild) while (outbound.lastChild)\n    outbound.appendChild @currentView.el\n\n    window.addEventListener \"orientationchange\", =>\n      @onOrientationChange()\n\n  afterDisplay: (callback) ->\n    window.clearTimeout @afterTimeout\n    @afterTimeout = window.setTimeout (=>\n      @el.classList.add(\"display\")\n      callback() if callback\n      @afterTransition()\n    ), 10\n\n  # Remove oldView after transition\n  afterTransition: ->\n    window.clearTimeout @timeout\n    @timeout = window.setTimeout( =>\n      @currentView.delegateEvents()\n      @delegateEvents()\n      @swapContainers()\n    , 600)\n\n  swapContainers: ->\n    _inb = outbound\n    _otb = inbound\n    inbound = _inb\n    outbound = _otb\n    outbound.removeChild(outbound.lastChild) while (outbound.lastChild)\n\n  onOrientationChange: ->\n    isPortrait =\n      if window.orientation?\n        window.orientation % 180 is 0\n      else\n        @el.offsetHeight > @el.offsetWidth\n\n    @el.classList.toggle(\"device-landscape\", not isPortrait)\n    @el.classList.toggle(\"device-portrait\",  isPortrait)\n\n  triggerMouseUp: ->\n    @$el.trigger(\"mouseup\")\n\n  onTouchMove: (e) ->\n    scrollSelector =\n      \".content-sm-scroll, .content-md-scroll, .content-lg-scroll\"\n\n    if @preventScroll and $(e.target).parents(scrollSelector).size() is 0\n      e.preventDefault()\n\n  addGestures: ->\n    for evt in [\"swipe\", \"gesture\", \"drag\", \"tap\", \"dbltap\"]\n      window.eventjs?.add @el, evt, (e, self) =>\n        if self.gesture is \"tap\"\n          if @ignoreNextTap\n            @ignoreNextTap = false\n          else\n            @tapTimeout = window.setTimeout (=> @dispatchEvent(e, self)), 300\n        else\n          @ignoreNextTap = true if self.gesture is \"dbltap\"\n          @dispatchEvent(e, self)\n\n  dispatchEvent: (e, data) ->\n    window.clearTimeout @tapTimeout\n\n    if data.fingers > 1\n      @preventDrag = true\n    else if data.state is \"down\"\n      @preventDrag = false\n\n    if data.gesture is \"drag\" and @preventDrag\n      return\n\n    if e.target?\n      @touchTarget = e.target\n\n    evtName = \"touch:#{data.gesture or data.type}\"\n    event = document.createEvent('CustomEvent')\n    event.initCustomEvent(evtName, true, true, _.extend({}, e, data))\n\n    @touchTarget.dispatchEvent event\n\nmodule.exports = MainView\n","Element       = require(\"lib/element\")\nBaseSlide     = require(\"views/base/slide\")\ndevice        = require(\"lib/device\")\nfitText       = require(\"lib/fit-text\")\n{ Analytics } = Application.actions()\ndomtoimage    = require('dom-to-image/dist/dom-to-image.min.js')\n\nclass SlideView extends BaseSlide\n  fitTextOnResize: true\n  fitTextOnRender: true\n\n  initialize: (@options) ->\n    { @transform, @transition, @getBounds } = Element\n\n    # LMS Preview React component passes a \"interactable\" query param.\n    # This can disable autoplay for videos so that lessons with a video\n    # as its first slide don't constantly autoplay on the course page.\n    if @options.data?.autoplay and @options.notInteractable\n      @options.data.autoplay = false\n\n    @options.metadata ?= {}\n\n  lock: (direction, bounce) ->\n    @options.lock(direction, bounce)\n\n  unlock: ->\n    @options.unlock()\n\n  next: (ms) ->\n    if @options.isLastSlide\n      Application.publish(\"event:completed\") {}\n      Application.publish(\"event:exit\") {}\n      Application.publish(\"lesson:exit\") {}\n    else\n      @options.next(if _.isNumber(ms) then ms)\n      @slideNext()\n\n  prev: (ms) ->\n    @options.prev(if _.isNumber(ms) then ms)\n\n  # Shortcut method to track events. The name of the slide is appended to the\n  # category to ensure that events are nicely grouped by GA.\n  trackEvent: ({category, action, label, value}) ->\n    category += \" - #{@getTrackingTitle()}\" if @getTrackingTitle()\n    Analytics.trackEvent category, action, label, value\n\n  getTrackingTitle: ->\n    @el.dataset.title or @el.id\n\n  # View states are saved to `@currentState` and applied as a \"#{key}-#{state}\"\n  # class on the slide for convenient transitioning between screen content.\n  # eg \"&.game-outro\", \"&.paused-true\", \"&.state-touched\". False states will\n  # not be added, but will remove the previous state.\n  setState: (state, key = \"state\") ->\n    @currentState ?= {}\n\n    if state is \"touched\" and @currentState[key] is \"narration\"\n      @hasInteracted = true\n\n    else\n      @el.classList.remove \"#{key}-#{@currentState[key]}\"\n\n      if state is false\n        delete @currentState[key]\n      else\n        @el.classList.add \"#{key}-#{@currentState[key] = state}\"\n\n  # Get and set DOM/Zepto elements into the `@elements` dictionary to prevent\n  # unecessary DOM queries. Fail silently by storing an empty element.\n  setEl: (el, key) ->\n    @elements ?= {}\n    @elements[key] = el or document.createElement(\"div\")\n\n  # Try and fail silently when getting empty elements, given that a warning for\n  # these has already been posted.\n  getEl: (key) ->\n    @elements?[key]\n\n  # Render isn't called for normal slides, but may be required if we use a\n  # template as a component on the page. Try to maintain the fit text font size\n  # from the previous run-through, and debounce the new fitting if we're\n  # refreshing the slide.\n  render: ->\n    data = _.extend(@serialize())\n\n    # For BrainBoost, if there is a lessonHeaderTitle we want to change the lesson-header to display the new lesson for this slide.\n    if data.lessonHeaderTitle?\n      document.querySelector('#lesson-header-title-content strong').innerText = data.lessonHeaderTitle\n    @el.innerHTML = (@template or @templates?.default)?(data)\n\n    @setState(\"prompt\") unless @ignoreStateOnRefresh\n    @setEl(@el.querySelector(\".narration-progress-bar\"), \"narration-progress\")\n\n    if @fixTextFontSize\n      @el.querySelector(\".content-fit\")?.style.fontSize = @fixTextFontSize\n\n    if @fitTextOnRender\n      if @currentState?.refresh\n        window.clearTimeout @fitTextTimeout\n        @fitTextTimeout = window.setTimeout (=> @fitText()), 120\n      else\n        @el.classList.remove(\"active\")\n        @fitText =>\n          window.setTimeout (=> @el.classList.add(\"active\")), 300\n    \n    # Preload every media on the page\n    @preloadMedia()\n\n    if data.hasNarration and not (window.ED_LMS_PREVIEW or window.ED_PUBLIC_PREVIEW)\n      @showLoadingNarration()\n    else\n      @hideLoadingNarration()\n\n    if data.socialLearning?.enabled\n      @trigger(\"ui\", isSocial: true)\n    else\n      @trigger(\"ui\", isSocial: false)\n    Application.publish(\"event:slide-rendered\") {}\n\n  toggleLoadingNarration: (v) -> Backbone.Events.trigger(\"load-narration\", v)\n  showLoadingNarration: -> @toggleLoadingNarration(true)\n  hideLoadingNarration: -> @toggleLoadingNarration(false)\n\n  fitText: (done) ->\n    if el = @el.querySelector(\".content-fit\")\n      @_fitText?.cancel()\n      @_fitText = fitText el, =>\n        @$el.trigger(\"fittextend\")\n        @fixTextFontSize = el.style.fontSize\n        done?()\n    else\n      done?()\n\n  findOne: (selector) ->\n    el = @el.querySelector(\".content-fit\")\n    el?.querySelector(selector) or\n    @el.querySelector(selector)\n\n  findAll: (selector) ->\n    el  = @el.querySelector(\".content-fit\")\n    res = el?.querySelectorAll(selector)\n    if res?.length > 0 then res else @el.querySelectorAll(selector)\n\n  # Override Safari's annoying habit of not showing the content metadata,\n  # like a poster for video or the length details for audio\n  preloadMedia: ->\n    update = (e) ->\n      e.target.removeEventListener(\"timeupdate\", update, false)\n      e.target.pause()\n      e.target.volume = 1\n\n    for media in @el.querySelectorAll(\".multi-content\")\n      if media.getAttribute(\"webkit-playsinline\") and device.platform is \"iOS\"\n        if media.nodeName is \"AUDIO\"\n          media.volume = 0\n          media.addEventListener(\"timeupdate\", update, false)\n\n      if media.nodeName is \"VIDEO\"\n        trigger = => window.setTimeout (=> @trigger \"resize\"), 300\n        @players ?= []\n        player  = window.videojs(media, { fluid: true })\n        player.one \"error\", ->\n          # Let videoJS figure out which source to use\n          player.src(player.currentSources())\n        player.on \"loadedmetadata\", trigger\n        player.on \"play\", => @trigger \"video-play\"\n        player.on \"pause\", => @trigger \"video-pause\"\n\n        @players.push player\n\n        if device.platform is not \"browser\"\n          player.on \"fullscreenchange\", =>\n            if player.isFullscreen()\n              Application.publish(\"event:rotation-unlock\") {}\n            else\n              Application.publish(\"event:rotation-lock\") {}\n          player.ready ->\n            player.play().pause()\n            window.setTimeout (-> player.hasStarted(false)), 1\n\n    if device.ios\n      for iframe in @el.querySelectorAll(\".multi-content-iframe iframe\")\n        if iframe.src.match(/\\?/)\n          iframe.src += \"&forceReloadForAppContext=true\"\n        else\n          iframe.src += \"?forceReloadForAppContext=true\"\n\n  stopMedia: ->\n    for media in @el.querySelectorAll(\"audio, video\")\n      media.pause() unless media.paused\n\n    for iframe in @el.querySelectorAll(\"iframe\")\n      iframe.parentNode.removeChild(iframe)\n\n  # Construct the locals object which is passed to templates. Override\n  # `serialize` for custom data filtering and parsing.\n  serialize: ->\n    starsEnabled = __?.slidedeck?.enableStars or @options.enableStars\n    locals =\n      # This is for BrainBoost, to allow dynamic switching of lesson titles in the lesson-header\n      lessonHeaderTitle: @options.lessonTitle\n      width: @el.offsetWidth\n      height: @el.offsetHeight\n      config: @options.config()\n      hasPrompt: @options.data?.prompt?\n      hasNarration: @options.data?.narration?.audio_file\n      hasStars:\n        starsEnabled and @options.data?.challenge_configuration?.nb_stars > 0\n      scorm: @options.scorm\n      contextRequiresExitButton: @options.contextRequiresExitButton\n      doneText: @options.data?.doneText || window.i18n(\"buttons.done\")\n\n    _.extend({}, @options.data, locals, { metadata: @options.metadata })\n\n  # Templates should override this function to reset themselves to an\n  # initial state\n  onRefresh: ->\n    @show?()\n\n  onNarrationLoaded: -> @hideLoadingNarration()\n\n  # Show progress of audio, and try to animate it at smooth intervals\n  onNarrationProgress: (progress) ->\n    interval = if progress is 0 then 0 else (Date.now() - @narrationTimestamp)\n\n    @transform @getEl(\"narration-progress\"),\n      scale: \"#{progress}, 1\"\n      transition: \"transform #{interval}ms linear\"\n\n    @getEl(\"narration-progress\")?.offsetLeft\n\n    @narrationTimestamp = Date.now()\n\n  # When narration is finished, set the state according to the user's\n  # interaction, which can be configured for each view.\n  onNarrationComplete: ->\n    if @hasInteracted\n      delete @hasInteracted\n      @setState(\"\")\n      @setState(\"touched\")\n    else if @currentState.state is \"narration\"\n      @setState(\"prompt\")\n\n  # Teardown of elements or listeners which will not be garbage collected\n  hide: ->\n    # Dispose players to prevent funky things happening with videoJS on IE11\n    if @players?\n      for p in @players when p?.dispose?\n        p.dispose()\n      @players = []\n\n  delegateEvents: ->\n    super()\n\n    @on(\"resize\", @fitText, this) if @fitTextOnResize\n\n  screenshot: ->\n    if @options.data.answer?\n      new Promise (resolve, reject) =>\n        @collateScreenshots()\n          .then((images) =>\n            @trigger \"complete\", this, { isCorrect: true }\n            @collateScreenshots(images)\n          )\n          .then(resolve)\n          .catch(reject)\n    else\n      @collateScreenshots()\n\n  collateScreenshots: (images = []) ->\n    new Promise (resolve, reject) =>\n      window.setTimeout ->\n        domtoimage\n          .toJpeg(window.document.body, {\n            ignoreImageErrors: true\n            dpi: 200\n            quality: 0.8\n            filter: (e) ->\n              e?.tagName isnt \"IMG\" or not e?.src?.match(\"img.youtube.com/vi/\")\n          })\n          .then((src) -> resolve([images..., src]))\n          .catch((err) -> reject(err))\n      , 200\n\n\nmodule.exports = SlideView\n","app            = require(\"app\")\ndevice         = require(\"lib/device\")\nBaseSlidesView = require(\"views/base/slides\")\n{ Sound } = Application.actions()\n\nclass SlidesView extends BaseSlidesView\n\n  id: \"slides-view\"\n\n  template: require(\"templates/slides\")\n\n  initialize: ->\n    super\n\n    w = window.innerWidth\n    h = window.innerHeight\n    @_debounceResize = _.debounce (=>\n      @onResize()\n    ), 300\n\n    # orientation change for App / resize for Web\n    window.addEventListener device.events.resize, @_debounceResize\n    window.addEventListener \"keypress\", @onKeyPress\n\n  render: (params) ->\n    @hasRendered = true\n    @options = @getExtraConfig(params)\n\n    @el.innerHTML = @template(@options)\n\n    @el.classList.add(\"direction-#{@options.config.direction or \"ltr\"}\")\n\n    if @options?.styleConfiguration?.soundDisabled is true\n      Sound.disableSystemSounds?()\n\n    @createSlideViews(@options.config, params)\n\n    index = @cleanIndex(@options.index)\n    document.title = @options.title if @options.title\n\n    @sizeContent(@options.forceResize)\n    initialSlideWidth = @slideViews[index].el.offsetWidth\n\n    afterRender = =>\n      @createScroller(params)\n      @goToPage(index, 0) # no delay on the first render, adding it might cause an issue\n      Application.publish(\"event:thomas-ready\") {}\n\n      if window.ED_LMS_PREVIEW or window.ED_PUBLIC_PREVIEW\n        window.parent.postMessage \"thomas-ready\", \"*\"\n\n      # For devices with high latency/poor IO performance, trigger a resize\n      # to allow poorly rendered first slides views to recalculate as needed\n      window.setTimeout (=>\n        if @slideViews[index].el.offsetWidth isnt initialSlideWidth\n          @slideViews[index]?.trigger \"resize\"\n      ), 600\n\n    if params.isRefresh\n      afterRender()\n    else\n      window.setTimeout afterRender, 300\n\n    Backbone.trigger(\"ready\")\n\n  display: (callback, params) ->\n    index = @cleanIndex(params.index)\n\n    if @currentIndex isnt index and @options.config.contextAllowsFreeNavigation\n      @toggleViewInDOM(@slideViews[index], true)\n      @slideViews[index].el.offsetWidth\n      @goToPage(index, params.ms)\n\n    callback()\n\n  removeScroller: ->\n    @scroller.off \"scrollEnd\"\n    @scroller.destroy()\n\n  createScroller: (params) ->\n    if @options?.config?.fade\n      @scroller =\n        currentPage: pageX: 0\n        scroller: @el.querySelector(\"#slides-scroller\")\n        goToPage: (nextPage) =>\n          prevPage = @scroller.currentPage.pageX\n          @scroller.currentPage.pageX = nextPage\n          @onScrollEnd()\n\n    else\n      @removeScroller() if @scroller?\n\n      indicators = []\n\n      if @options.config.background\n        indicators.push\n          el: \"#slides-background-wrap\"\n          resize: false\n          shrink: \"clip\"\n          listenY: false\n          speedRatioX: 1 / (@slideViews.length - 1) * 0.5\n          ignoreBoundaries: true\n\n      if @options.config.indicator\n        indicators.push\n          el: \"#indicator\"\n          resize: true\n          shrink: \"clip\"\n          listenY: false\n          ignoreBoundaries: true\n\n      @scroller = new IScroll @el.querySelector(\"#slides\"),\n        scrollX: true\n        scrollY: false\n        snap: true\n        tap: \"scrolltap\"\n        snapThreshold: 0.15\n        momentum: false\n        resizePolling: 9999999\n        eventPassthrough: true\n        indicators: indicators\n        preventDefaultException:\n          tagName: /^(INPUT|TEXTAREA|BUTTON|SELECT|IFRAME)$/\n\n      if not params.cms\n        @scroller.on \"scrollEnd\", =>\n          @onScrollEnd()\n\n      if @options.config.locked\n        @toggleScroller(false)\n\n    if @options.config.pageNumbers\n      @pageNumber = @el.querySelector(\"#lesson-header-nav-page-number\")\n\n  optionsForView: (el, data = {}, config = {}, params = {}, slideIndex) ->\n    _.extend {},\n      data,\n      {\n        slideIndex: slideIndex\n        lessonConfiguration: config\n        enableStars: @options.enableStars\n        scorm: @options.scorm\n        contextRequiresExitButton: @options.contextRequiresExitButton\n      },\n      el: el\n      lock:      => @toggleScroller(false, arguments...)\n      unlock:    => @toggleScroller(true)\n      next: (ms) => @goToPage(@currentIndex + 1, ms)\n      prev: (ms) => @goToPage(@currentIndex - 1, ms)\n      config:    => @options.config\n      notInteractable: @notInteractable or params.interactable == false\n\n  goToPage: (index, ms = 600, options = {}) ->\n    if (index isnt @currentIndex or not @currentIndex?) and\n        0 <= index < @slideViews.length\n\n      prevView = @slideViews[@currentIndex]\n      nextView = @slideViews[index]\n\n      @toggleViewInDOM(nextView, true)\n\n      @trigger(\"goToPage\", arguments...)\n      \n      if window.ED_LMS_PREVIEW or window.ED_PUBLIC_PREVIEW\n        window.parent.postMessage({\n          type: \"go-to-page\",\n          value: index\n        }, \"*\")\n      else\n        Application.publish(\"event:go-to-page\") { value: index }\n\n      prevView?.beforeHide?()\n      nextView.render()\n      nextView.beforeShow?()\n\n      view.el.classList.remove(\"visible\") for view in @slideViews\n      nextView.el.classList.add(\"visible\")\n\n      if @scroller?.pages?.length and @slideViews.length > 1\n        { wrapperWidth, maxScrollX, minScrollX } = @scroller\n\n        unless @options.config.locked or\n               minScrollX > -index * wrapperWidth > maxScrollX\n          @toggleScroller(true)\n\n        @scroller.goToPage(@getIndexForDirection(index), 0, ms)\n\n        window.setTimeout (=> @onScrollEnd()), ms\n\n      else if not options.fromPreview\n        @onScrollEnd()\n\n  cleanIndex: (index) ->\n    if _.isNaN(+index)\n      (i for slide, i in @slideViews when slide.el?.id is index)[0] or 0\n    else\n      _.limit(index - 1, 0, @slideViews.length - 1)\n\n  getIndexForDirection: (index) ->\n    if @options.config.direction is \"rtl\"\n      (@slideViews.length - 1 - index)\n    else\n      index\n\n  onScrollEnd: ->\n    i = @getIndexForDirection +@scroller?.currentPage?.pageX\n    return if _.isNaN(i)\n\n    if i isnt @currentIndex\n      for slideView, j in @slideViews\n        if @options.config.fade\n          slideView.el.style.opacity = if j is i then 1 else 0\n          slideView.transition slideView.el, \"opacity 300ms\"\n          isActive = j is i or j is @currentIndex\n        else\n          isActive = j - 1 <= i <= j + 1\n\n        @toggleViewInDOM(slideView, isActive)\n\n        @pageNumber?.innerHTML = i + 1\n\n\n      @hideView(@slideViews[@currentIndex]) if @currentIndex?\n      @showView(@slideViews[i])\n\n      @currentIndex = i\n      app.router.navigate(\"slide/#{i + 1}\", true) if not @disableHistory?\n\n      currentViewElement = @slideViews[@currentIndex].el\n\n      # Fixes an issue where resizing a parent element of an audio\n      # element doesn't properly resize the audio element.\n      # This forces the audio element to be repainted at the end of a\n      # slide navigation, and only makes it visible at the end.\n      if currentViewElement and currentViewElement.replaceWith?\n        audioElements = currentViewElement.querySelectorAll(\"audio\")\n\n        for audioElement in audioElements\n            clonedNode = audioElement.cloneNode true\n            audioElement.replaceWith clonedNode\n            clonedNode.style.visibility = \"visible\"\n\n  # Listeners for \"resize\" and \"orientationchange\" are debounced.\n  # Once the method fires, it resize content with a delayed scroller refresh.\n  # Sometimes in IE, the resize event fires before rendering.\n  onResize: (e) =>\n    if @hasRendered\n      # wait class to be added on the body\n      window.clearTimeout @resizeTimeout\n      @resizeTimeout = window.setTimeout =>\n        @sizeContent(true)\n        @scroller?.refresh?()\n        window.clearTimeout @scroller?.resizeTimeout\n      , 0\n\n  toggleViewInDOM: (slideView, isActive) ->\n    return unless slideView\n    if slideView.__isActive isnt isActive\n      slideView.__isActive = isActive\n\n      if isActive and slideView.el.parentNode isnt @scroller.scroller\n        @scroller.scroller.appendChild slideView.el\n      else if not isActive and slideView.el.parentNode is @scroller.scroller\n        @scroller.scroller.removeChild slideView.el\n\n  hideView: (slideView) ->\n    slideView.el.classList.remove \"active\"\n    slideView.undelegateEvents?()\n    slideView.stopMedia()\n    slideView.hide?()\n\n  showView: (slideView) ->\n    return unless slideView?\n    slideView.el.offsetWidth\n    slideView.el.classList.add \"active\"\n    slideView.delegateEvents?()\n    slideView.show?()\n    @trigger(\"showView\", slideView)\n\n  toggleScroller: (isEnabled, direction, bounce = true) ->\n    return if @options.config.fade\n\n    { wrapperWidth, currentPage: { pageX } } = @scroller\n    index = @getIndexForDirection pageX\n\n    switch direction\n      when \"left\", \"l\"\n        @scroller.minScrollX = -wrapperWidth * index\n        @scroller.options.bounce = bounce\n      when \"right\", \"r\"\n        @scroller.maxScrollX = -wrapperWidth * index\n        @scroller.options.bounce = bounce\n      else\n        @scroller.options.bounce = bounce\n        @scroller.refresh()\n        @scroller.enabled = isEnabled\n\n  sizeContent: (forceResize = false) ->\n    if @scroller?.wrapperWidth is @el.offsetWidth and not forceResize\n      return\n\n    outerEl = $(\"#slides\")\n    innerEl = $(\"#slides-scroller\")\n\n    width = outerEl[0].offsetWidth\n\n    if @options?.config?.fade\n      for slideView, i in @slideViews\n        slideView.el.style.width = width + \"px\"\n\n    else\n      innerEl.css('width', width * @slideViews.length + \"px\")\n\n      for slideView, i in @slideViews\n        slideView.el.style.width = width + \"px\"\n        slideView.el.style.left  = width * @getIndexForDirection(i) + \"px\"\n\n    if @scroller? or @slideViews.length is 1\n      @slideViews[@currentIndex]?.trigger(\"resize\", { width })\n    \n    @scroller?.refresh?()\n\n  onKeyPress: (e) =>\n    @slideViews[@currentIndex]?.trigger(e.type, e)\n\n  stopListening: ->\n    window.removeEventListener \"resize\", @_debounceResize\n    window.removeEventListener \"orientationchange\", @_debounceResize\n    window.removeEventListener \"keypress\", @onKeyPress\n    super\n\nmodule.exports = SlidesView\n","SlideView = require(\"views/slide\")\ndevice     = require(\"lib/device\")\n\nclass VideoView extends SlideView\n\n  events: ->\n    \"iostap .video\":          \"toggleVideo\"\n    \"iostap .video-play\":     \"playVideo\"\n    \"iostap .video-replay\":   \"restartVideo\"\n    \"iostap .btn-done\":       \"next\"\n\n  render: ->\n    @unbindVideoEvents()\n\n    super\n\n    @initializeVideo()\n    @listeners = {}\n\n    @setState(\"loading\", \"video\")\n\n    for evt in [\"load\", \"timeupdate\", \"error\"]\n      @listeners[evt] = _.bind(@[\"onVideo#{_.capitalize(evt)}\"], this)\n      @getEl(\"video\").addEventListener evt, @listeners[evt]\n\n  initializeVideo: ->\n    vid = @el.querySelector(\".video\")\n    @setEl(vid, \"video\")\n\n  onVideoLoad: ->\n    @getEl(\"video\")?.pause()\n    @setState(\"paused\", \"video\")\n\n  onVideoError: ->\n    @setState(\"error\", \"video\")\n\n  onVideoTimeupdate: ->\n    if @getEl(\"video\").currentTime is @getEl(\"video\").duration and\n       @getEl(\"video\").ended\n      @onVideoEnd()\n\n  toggleVideo: ->\n    if @getEl(\"video\").paused then @playVideo() else @stopVideo()\n\n  playVideo: ->\n    return if @currentState.video is \"error\"\n\n    @setState(\"playing\", \"video\")\n\n    @getEl(\"video\").load() if @getEl(\"video\").ended\n    @getEl(\"video\").play()\n\n    @trackEvent\n      category: \"Video\"\n      action: \"Play\"\n      label: @getVideoName()\n\n  stopVideo: ->\n    return if @currentState.video is \"error\"\n\n    @getEl(\"video\")?.pause()\n\n    @trackEvent\n      category: \"Video\"\n      action: \"Pause\"\n      label: @getVideoName()\n\n    window.setTimeout =>\n      @setState(\"paused\", \"video\")\n    , 1\n\n  restartVideo: ->\n    if @getEl(\"video\").ended\n      @getEl(\"video\").load()\n    else\n      @getEl(\"video\").currentTime = 0\n\n    @playVideo()\n\n  onVideoEnd: ->\n    @setState(\"paused\", \"video\")\n\n  getVideoName: ->\n    @getEl(\"video\").src.split(\"/\").slice(-1)[0]\n\n  hide: ->\n    @getEl(\"video\")?.pause()\n    @onVideoEnd()\n    @unbindVideoEvents()\n\n  unbindVideoEvents: ->\n    for evt of @listeners\n      @getEl(\"video\")?.removeEventListener evt, @listeners[evt]\n\nmodule.exports = VideoView\n"]}